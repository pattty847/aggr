(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48f0107b"],{1506:function(t,e,s){"use strict";var i=s("9ab4"),o=s("0c01"),n=s("06c2"),a=s("be31"),r=s("bd60"),l=s("2b0e"),c=s("2fe1");let d=class extends l["default"]{get pane(){return this.$store.state.panes.panes[this.paneId]}get name(){const t=this.$store.state.panes.panes[this.paneId].name;if(!t){if(!t&&this.$store.state.panes.panes[this.paneId].markets.length){const[,t]=Object(n["m"])(this.$store.state.panes.panes[this.paneId].markets[0]);return t+" - "+this.$store.state.panes.panes[this.paneId].type}return this.paneId}return t}set name(t){this.$store.commit("panes/SET_PANE_NAME",{id:this.paneId,name:t})}async renamePane(){const t=await o["a"].prompt({action:"Rename",input:this.name});t!==this.name&&(this.name=t)}async resetPane(t){await this.close(),t||(t=JSON.parse(JSON.stringify(r["a"][this.$store.state.panes.panes[this.paneId].type].state))),await this.$store.dispatch("panes/resetPane",{id:this.paneId,data:t})}async getPreset(){return await a["a"].getState(this.paneId)}};d=Object(i["a"])([Object(c["b"])({props:{paneId:{required:!0,type:String}}})],d),e["a"]=d},"2a8c":function(t,e,s){"use strict";s("8b6c")},"34c1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"pane-dialog -medium -mobile-fs",on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"title -editable",domProps:{textContent:t._s(t.name)},on:{dblclick:t.renamePane}}),e("div",{staticClass:"column -center"})]},proxy:!0}])},[e("trades-settings",{attrs:{paneId:t.paneId}}),e("footer",[e("presets",{staticClass:"-left -top",attrs:{type:"trades",adapter:t.getPreset},on:{apply:function(e){return t.resetPane(e)}}})],1)],1)},o=[],n=s("1ea0"),a=s("1506"),r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("section",{staticClass:"section"},[t.sections.indexOf("display")>-1?e("div",[e("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{boundary:"window",placement:"left"},expression:"{ boundary: 'window', placement: 'left' }"}],staticClass:"form-group column mb8",attrs:{title:"Number of trades rendered"}},[e("label",{staticClass:"-fill -center"},[t._v(t._s(t.isLegacy?"Max trades to render":"Memory length"))]),e("input",{staticClass:"form-control",attrs:{id:"trades-limit",type:"number",min:"0",max:"1000",step:"1"},domProps:{value:t.maxRows},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_MAX_ROWS",e.target.value)}}})]),e("div",{staticClass:"form-group column mb8",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_TRADE_TYPE")}}},[e("label",{staticClass:"-fill -center"},[t._v("Filter by type")]),e("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Filter trade / liquidation"}},[e("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:"both"!==t.tradeType}}),e("div",{attrs:{on:"liquidations"===t.tradeType?"Liquidations only":"Trades only",off:"Both trades & liquidations"}})])]),t.isLegacy?e("div",{staticClass:"form-group column mb8",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_LOGOS")}}},[e("label",{staticClass:"-fill -center"},[t._v("Show exchange's logos")]),e("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Exchange's logos + style"}},[e("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showLogos}}),e("div",{attrs:{on:t.monochromeLogos?"Logo visible (B&W)":"Logo visible (Color)",off:"No logo"}})])]):t._e(),t.isLegacy?e("div",{staticClass:"form-group column mb8",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_PRICE")}}},[e("label",{staticClass:"-fill -center"},[t._v("Columns")]),e("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Show symbol's names (ex: BTC-USD)"},on:{click:function(t){t.stopPropagation()}}},[e("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showTradesPairs}}),e("div",{attrs:{on:"Symbol visible",off:"Symbol hidden"},on:{click:function(e){return t.$store.commit(t.paneId+"/TOGGLE_TRADES_PAIRS")}}})]),e("div",{staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable"},[e("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showPrice}}),e("div",{attrs:{on:"Price visible",off:"Price hidden"}})])]):t._e(),t.isLegacy?e("div",{staticClass:"form-group column",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_TIME_AGO")}}},[e("label",{staticClass:"-fill -center"},[t._v("Time format")]),e("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Time format preference"}},[e("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showTimeAgo}}),e("div",{attrs:{on:t.secondsAgoExample,off:"use HH:MM"}})])]):t._e()]):t._e(),e("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("display")}}},[t._v(" DISPLAY "),e("i",{staticClass:"icon-up-thin"})])]),e("section",{staticClass:"section"},[t.sections.indexOf("thresholds")>-1?e("div",[e("div",{staticClass:"column section__controls"},[e("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text -nowrap mr4 -cases",attrs:{type:"button",title:"Switch thresholds display"},on:{click:function(e){return t.$store.commit(t.paneId+"/TOGGLE_THRESHOLDS_TABLE",!t.showThresholdsAsTable)}}},[e("i",{staticClass:"icon-switch mr4 -lower"}),t._v(" "+t._s(t.showThresholdsAsTable?"slider view":"table view")+" ")]),e("presets",{attrs:{type:"threshold",adapter:t.getAudioPreset,label:"Presets"},on:{apply:function(e){return t.applyAudioPreset(e)}}})],1),e("div",{staticClass:"form-group mb16"},[e("div",{staticClass:"column"},[e("div",{staticClass:"text-nowrap"},[t._v("← Many")]),e("slider",{staticClass:"mt4 -fill",attrs:{min:.01,max:10,step:.01,label:"","show-completion":!1,value:t.thresholdsMultipler,log:""},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:e,market:t.markets[0]})},reset:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:1,market:t.markets[0]})}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.formatAmount(t.thresholds[0].amount))+" ➜ "+t._s(t.formatAmount(t.thresholds[1].amount))+" ("+t._s(+(100*t.thresholdsMultipler).toFixed(2))+"%) ")]},proxy:!0}],null,!1,2205895483)}),e("div",{staticClass:"text-right text-nowrap mlauto"},[t._v("Few →")])],1)]),"liquidations"!==t.tradeType?e("div",{key:"liquidations",staticClass:"form-group"},[e("thresholds",{attrs:{paneId:t.paneId,thresholds:t.thresholds,label:"Trades"}}),e("div",{staticClass:"text-right mt8 mb8"},[e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml4 -nowrap -text",attrs:{href:"javascript:void(0);",title:"Add a threshold"},on:{click:function(e){return t.$store.commit(t.paneId+"/ADD_THRESHOLD","thresholds")}}},[t._v(" Add "),e("i",{staticClass:"icon-plus ml4 text-bottom"})])])],1):t._e(),"trades"!==t.tradeType?e("div",{key:"trades",staticClass:"form-group mt16"},[e("thresholds",{attrs:{paneId:t.paneId,thresholds:t.liquidations,label:"Liquidations"}}),e("div",{staticClass:"text-right mt8 mb8"},[e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml4 -nowrap -text",attrs:{href:"javascript:void(0);",title:"Add a threshold"},on:{click:function(e){return t.$store.commit(t.paneId+"/ADD_THRESHOLD","liquidations")}}},[t._v(" Add "),e("i",{staticClass:"icon-plus ml4 text-bottom"})])])],1):t._e(),t.displayGifWarning?e("div",{staticClass:"d-flex help-text"},[e("p",{staticClass:"mt0 mb0 text-danger"},[e("i",{staticClass:"icon-info mr8"}),e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$store.commit("settings/TOGGLE_ANIMATIONS")}}},[t._v("Enable animations to show gifs")])])]):t._e()]):t._e(),e("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("thresholds")}}},[t._v(" THRESHOLDS ("+t._s(t.thresholds.length)+") "),e("i",{staticClass:"icon-up-thin"})])]),e("section",{staticClass:"section"},[t.sections.indexOf("audio")>-1?e("div",{staticClass:"form-group"},[e("div",{staticClass:"column section__controls"}),e("div",{staticClass:"column mb16"},[e("div",{staticClass:"form-group text-nowrap"},[e("label",{staticClass:"checkbox-control"},[e("input",{staticClass:"form-control",attrs:{type:"checkbox",disabled:!t.useAudio},domProps:{checked:t.muted},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_MUTED")}}}),e("div"),e("span",[t._v("Mute this pane")])])]),e("div",{staticClass:"-fill ml16"},[e("label",{staticClass:"mt8 d-block"},[t._v("Pane volume")]),e("div",{staticClass:"column"},[e("slider",{staticClass:"mrauto -fill mt8 mb8",attrs:{min:0,max:400,step:1,label:!0,disabled:t.muted,value:100*t.audioVolume,log:""},on:{input:function(e){t.$store.commit(t.paneId+"/SET_AUDIO_VOLUME",+(e/100).toFixed(2))},reset:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_VOLUME",null)}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.audioVolume>1?"+":"")+" "+t._s(+(100*t.audioVolume).toFixed(2))+"% ")]},proxy:!0}],null,!1,3403519117)}),e("editable",{staticClass:"-center text-nowrap ml8",staticStyle:{"line-height":"1"},attrs:{value:"× "+t.audioVolume},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_VOLUME",e)}}})],1),e("label",{staticClass:"mt16 d-block"},[t._v("Pitch")]),e("div",{staticClass:"column"},[e("slider",{staticClass:"mrauto -fill mt8 mb8",attrs:{min:.001,max:5,step:.01,showCompletion:!1,disabled:t.muted,value:t.audioPitch},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_PITCH",e)},reset:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_PITCH",null)}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v("× "+t._s(t.audioPitch)+" ")]},proxy:!0}],null,!1,3360634946)}),e("editable",{staticClass:"-center text-nowrap ml8",staticStyle:{"line-height":"1"},attrs:{value:"× "+t.audioPitch},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_PITCH",e)}}})],1)])]),t.useAudio&&!t.muted?e("div",{staticClass:"form-group"},[e("label",[t._v(" Minimum for a trade to trigger a sound "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info mr8",attrs:{title:"Enter the absolute amount<br>or % of significant amount"}})]),e("editable",{staticClass:"form-control",attrs:{value:t.audioThreshold,placeholder:t.audioThresholdPlaceholder},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_THRESHOLD",e)}}})],1):t._e(),t.useAudio?t._e():e("div",{staticClass:"d-flex help-text"},[e("p",{staticClass:"mt0 mb0 text-danger"},[e("i",{staticClass:"icon-info mr8"}),e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$store.commit("settings/TOGGLE_AUDIO",!0)}}},[t._v("Enable audio to use this feature")])])])]):t._e(),e("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("audio")}}},[t._v(" Audio "),e("i",{staticClass:"icon-up-thin"})])]),t.isLegacy?e("section",{staticClass:"section"},[t.sections.indexOf("multipliers")>-1?e("div",{staticClass:"form-group"},[t._m(0),t.multipliers.length?e("div",{staticClass:"multipliers"},t._l(t.multipliers,(function(s){return e("div",{key:s.identifier,staticClass:"d-flex multipliers-market",class:{"-disabled":1===s.multiplier}},[e("div",{staticClass:"multipliers-market__id",on:{dblclick:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_MULTIPLIER",{identifier:s.identifier,multiplier:null})}}},[e("div",{staticClass:"text-nowrap market-exchange"},[e("small",[t._v(t._s(s.exchange))])]),e("div",{staticClass:"text-nowrap market-pair"},[t._v(" "+t._s(s.pair)+" ")])]),e("div",{staticClass:"-fill -center ml16"},[e("slider",{staticStyle:{width:"100%","min-width":"150px"},attrs:{min:0,max:2,label:1!==s.multiplier,step:.01,showCompletion:!1,value:s.multiplier,editable:!1},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_MULTIPLIER",{identifier:s.identifier,multiplier:e})},reset:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_MULTIPLIER",{identifier:s.identifier,multiplier:1})}},scopedSlots:t._u([{key:"tooltip",fn:function({value:e}){return[t._v(" "+t._s(t.thresholds[0].amount*e)+" ")]}}],null,!0)})],1)])})),0):e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$store.dispatch("app/showSearch",t.paneId)}}},[t._v(" Add markets to pane ")])]):t._e(),e("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("multipliers")}}},[t._v(" THRESHOLD MULTIPLIER ("+t._s(t.mutipliersCount)+") "),e("i",{staticClass:"icon-up-thin"})])]):t._e()])},l=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("label",[e("div",{staticClass:"d-flex"},[e("div",[t._v(" ← Decrease threshold"),e("br"),e("small",[t._v("← Increase visibility")])]),e("div",{staticClass:"text-right mlauto"},[t._v(" Increase threshold →"),e("br"),e("small",[t._v("Decrease visibility →")])])])])}],c=s("9ab4"),d=s("0c01"),u=s("bd60"),h=s("28f3"),p=s("60a3"),m=s("7ab0"),f=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"thresholds",class:{"-dragging":t.dragging,"-rendering":t.rendering}},[t.showThresholdsAsTable?e("table",{staticClass:"table thresholds-table"},[e("thead",[e("tr",[e("th",{attrs:{colspan:"2"}},[t._v(t._s(t.label))]),e("th",{staticClass:"table-action"},[e("button",{staticClass:"btn -text",on:{click:function(e){return t.flipSwatches("buy")}}},[e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-sort",attrs:{title:"Flip"}})])]),e("th",{staticClass:"table-action"},[e("button",{staticClass:"btn -text",on:{click:function(e){return t.flipSwatches("sell")}}},[e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-sort",attrs:{title:"Flip"}})])])])]),e("transition-group",{attrs:{name:"flip-list",tag:"tbody"}},t._l(t.thresholds,(function(s,i){return e("tr",{key:s.id},[e("td",{staticClass:"table-input table-min"},[i===t.thresholds.length-1?e("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -small mb4",attrs:{title:"Set as maximum amount"}},[e("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.capToLastThreshold},on:{change:function(e){return t.toggleMaximumThreshold(s)}}}),e("div")]):t._e()]),e("td",{staticClass:"table-input"},[e("i",{staticClass:"icon icon-currency"}),e("editable",{staticClass:"pl16 w-100",attrs:{placeholder:"Amount*",value:s.amount},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_AMOUNT",{id:s.id,value:e})}}}),i===t.thresholds.length-1&&s.max?e("small",{staticClass:"pl8 text-danger"},[e("strong",[t._v("threshold is max")])]):t._e()],1),e("td",{staticClass:"table-action"},[e("color-picker-control",{attrs:{label:"Buy color",value:s.buyColor},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:s.id,side:"buyColor",value:e})}}})],1),e("td",{staticClass:"table-action"},[e("color-picker-control",{attrs:{label:"Sell color",value:s.sellColor},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:s.id,side:"sellColor",value:e})}}})],1),t.useAudio?e("td",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"thresholds-table__audio table-action",attrs:{title:"Configure threshold audio"},on:{click:function(e){return t.openThresholdAudio(s.id)}}},[e("button",{staticClass:"btn -text"},[e("i",{staticClass:"icon-music-note"})])]):t._e(),e("td",{staticClass:"table-action",on:{click:function(e){return t.selectThreshold(s.id,e)}}},[e("button",{staticClass:"btn -text"},[e("i",{staticClass:"icon-more"})])])])})),0)],1):e("div",{staticClass:"thresholds-slider"},[e("div",{staticClass:"thresholds-gradients"},[e("div",{ref:"buysGradient",staticClass:"thresholds-gradients__buys"}),e("div",{ref:"sellsGradient",staticClass:"thresholds-gradients__sells"})]),e("div",{ref:"thresholdContainer",staticClass:"thresholds-slider__bar"},t._l(t.thresholds,(function(s){return e("div",{key:s.id,staticClass:"thresholds-slider__handler",class:{"-selected":t.selectedThresholdId===s.id},attrs:{"data-id":s.id,"data-amount":t.formatAmount(s.amount,2)}})})),0)]),e("dropdown",{attrs:{interactive:""},model:{value:t.thresholdPanelTrigger,callback:function(e){t.thresholdPanelTrigger=e},expression:"thresholdPanelTrigger"}},[e("threshold-dropdown",{attrs:{threshold:t.selectedThreshold,"pane-id":t.paneId,"can-delete":t.thresholds.length>2},on:{input:function(e){t.thresholdPanelTrigger=e}}})],1)],1)},v=[],g=s("06c2"),b=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"pane-dialog -auto",on:{clickOutside:t.close,mousedown:function(e){t.clickOutsideClose=!1},mouseup:function(e){t.clickOutsideClose=!0}},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",[e("div",{staticClass:"title"},[e("div",[t._v("Threshold")])]),e("div",{staticClass:"subtitle"},[t._v(" "+t._s(t.thresholdId)+" "+t._s(t.formatAmount(t.threshold.amount))+" ")])])]},proxy:!0}])},[e("div",{staticClass:"form-group mb16"},[e("label",{attrs:{for:""}},[t._v(" When buy ")]),t.liveAnnotation&&"buy"===t.focusedSide?e("div",{staticClass:"live-annotation"},[e("div",{staticClass:"live-annotation__tooltip"},[t._v(t._s(t.liveAnnotation))])]):t._e(),e("div",{staticClass:"d-flex"},[t.buyAudio!==t.threshold.buyAudio?e("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -green mr8",attrs:{title:"Original"},on:{click:function(e){return t.testOriginal("buy",e)}}},[e("i",{staticClass:"icon-volume-high"})]):t._e(),e("prism-editor",{ref:"editor",staticClass:"editor__prism hide-scrollbar form-control",class:["buy"===t.dropping&&"-dropping"],attrs:{highlight:t.highlighter},on:{blur:function(e){t.liveAnnotation=null},focus:function(e){return t.scheduleLiveAnnotation(e,"buy")},drop:function(e){return t.handleDrop(e,"buy")},dragover:function(e){return t.handleDrop(e,"buy")},dragenter:function(e){return t.handleDropEnter("buy")},dragleave:function(e){t.dropping=null},keyup:function(e){return t.scheduleLiveAnnotation(e,"buy")},click:function(e){return t.scheduleLiveAnnotation(e,"buy")}},model:{value:t.buyAudio,callback:function(e){t.buyAudio=e},expression:"buyAudio"}}),e("button",{staticClass:"btn -green ml8",class:["buy"===t.loopingSide&&"shake-hard"],attrs:{title:"Custom"},on:{click:function(e){return t.testCustom("buy",e)},dblclick:function(e){return t.loopSide("buy")}}},[e("i",{staticClass:"icon-volume-high"})])],1),"buy"===t.focusedSide?e("div",{staticClass:"mt8 d-flex"},[e("button",{staticClass:"btn -small",on:{click:function(e){return t.openSoundAssistant("play","buy")}}},[e("i",{staticClass:"icon-music-note mr8"}),t._v(" Synthetize sound ")]),e("button",{staticClass:"btn -small ml8 mr8",on:{click:function(e){return t.openSoundAssistant("playurl","buy")}}},[e("i",{staticClass:"icon-upload mr8"}),t._v(" Import audio ")]),e("button",{staticClass:"btn -small -red mlauto -text",on:{click:function(e){return t.reset("buy")}}},[e("i",{staticClass:"icon-eraser mr8"}),t._v(" Reset ")])]):t._e(),t.buyError?e("p",{staticClass:"form-feedback"},[e("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.buyError)+" ")]):t._e()]),e("div",{staticClass:"form-group mb16"},[e("label",{attrs:{for:""}},[t._v(" When sell ")]),t.liveAnnotation&&"sell"===t.focusedSide?e("div",{staticClass:"live-annotation"},[e("div",{staticClass:"live-annotation__tooltip"},[t._v(t._s(t.liveAnnotation))])]):t._e(),e("div",{staticClass:"d-flex"},[t.sellAudio!==t.threshold.sellAudio?e("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -red mr8",attrs:{title:"Original"},on:{click:function(e){return t.testOriginal("sell",e)}}},[e("i",{staticClass:"icon-volume-high"})]):t._e(),e("prism-editor",{ref:"editor",staticClass:"editor__prism hide-scrollbar form-control",class:["sell"===t.dropping&&"-dropping"],attrs:{highlight:t.highlighter},on:{blur:function(e){t.liveAnnotation=null},focus:function(e){return t.scheduleLiveAnnotation(e,"sell")},drop:function(e){return t.handleDrop(e,"sell")},dragover:function(e){return t.handleDrop(e,"sell")},dragenter:function(e){return t.handleDropEnter("sell")},dragleave:function(e){t.dropping=null},keyup:function(e){return t.scheduleLiveAnnotation(e,"sell")},click:function(e){return t.scheduleLiveAnnotation(e,"sell")}},model:{value:t.sellAudio,callback:function(e){t.sellAudio=e},expression:"sellAudio"}}),e("button",{staticClass:"btn -red ml8",class:["sell"===t.loopingSide&&"shake-hard"],on:{click:function(e){return t.testCustom("sell",e)},dblclick:function(e){return t.loopSide("sell")}}},[e("i",{staticClass:"icon-volume-high"})])],1),"sell"===t.focusedSide?e("div",{staticClass:"mt8 d-flex"},[e("button",{staticClass:"btn -small",on:{click:function(e){return t.openSoundAssistant("play","sell")}}},[e("i",{staticClass:"icon-music-note mr8"}),t._v(" Synthetize sound ")]),e("button",{staticClass:"btn -small ml8 mr8",on:{click:function(e){return t.openSoundAssistant("playurl","sell")}}},[e("i",{staticClass:"icon-upload mr8"}),t._v(" Import audio ")]),e("button",{staticClass:"btn -small -red mlauto -text",on:{click:function(e){return t.reset("sell")}}},[e("i",{staticClass:"icon-eraser mr8"}),t._v(" Reset ")])]):t._e(),t.sellError?e("p",{staticClass:"form-feedback"},[e("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.sellError)+" ")]):t._e()]),e("footer",[e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text mrauto",attrs:{href:"javascript:void(0);",title:"Restart audio service (clear ALL queue)"},on:{click:function(e){return t.restartWebAudio()}}},[e("i",{staticClass:"icon-refresh mr8"}),t._v(" Restart audio ")]),e("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),e("button",{staticClass:"btn -large -green",on:{click:function(e){return t.saveInputs()}}},[e("i",{staticClass:"icon-check mr4"}),t._v(" Save ")])])])},y=[],_=s("4902"),C=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"pane-dialog -auto",on:{clickOutside:t.close,mousedown:function(e){t.clickOutsideClose=!1},mouseup:function(e){t.clickOutsideClose=!0}},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"title"},[t._v(t._s(t.title))])]},proxy:!0}])},["play"===t.type?e("div",{staticClass:"form-group mb16"},[e("label",{attrs:{for:"audio-assistant-source"}},[e("i",{staticClass:"icon-music-note mr8"}),t._v(" Frequency "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.frequency}})]),e("div",{staticClass:"column"},[e("slider",{staticClass:"mrauto -fill mt8 mb8",attrs:{min:0,max:8902,step:1,label:!0,"show-completion":!0,value:t.frequency},on:{input:function(e){t.frequency=e},reset:function(e){return t.reset("frequency")}}}),e("editable",{staticClass:"-center text-nowrap ml8",staticStyle:{"line-height":"1"},attrs:{value:t.frequency},on:{input:function(e){t.frequency=e}}})],1)]):e("div",{staticClass:"form-group mb16"},[e("label",{attrs:{for:"audio-assistant-source"}},[e("i",{staticClass:"icon-music-note mr8"}),t._v(" Source ")]),e("button",{staticClass:"btn -file -blue -large -cases w-100",on:{change:t.handleFile}},[e("i",{staticClass:"icon-upload mr8"}),t._v(" Browse "),e("input",{attrs:{type:"file",accept:"audio/*"}})])]),e("div",{staticClass:"form-group mb16"},[e("label",[t._v("Gain "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.gain}})]),e("div",{staticClass:"column"},[e("slider",{attrs:{min:0,max:2,step:.01,label:!0,"show-completion":!0,value:t.gain},on:{input:function(e){t.gain=e},reset:function(e){return t.reset("gain")}}}),e("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control checkbox-control-input",attrs:{title:"Dynamic"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dynamicGain,expression:"dynamicGain"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.dynamicGain)?t._i(t.dynamicGain,null)>-1:t.dynamicGain},on:{change:function(e){var s=t.dynamicGain,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.dynamicGain=s.concat([n])):a>-1&&(t.dynamicGain=s.slice(0,a).concat(s.slice(a+1)))}else t.dynamicGain=o}}}),e("div")])],1)]),e("div",{staticClass:"form-group mb16"},[e("label",[t._v("Duration "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.holdDuration}})]),e("div",{staticClass:"column"},[e("slider",{attrs:{min:0,max:10,step:.1,label:!0,"show-completion":!0,value:t.holdDuration},on:{input:function(e){t.holdDuration=e},reset:function(e){return t.reset("holdDuration")}}}),e("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control checkbox-control-input",attrs:{title:"Dynamic"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dynamicLength,expression:"dynamicLength"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.dynamicLength)?t._i(t.dynamicLength,null)>-1:t.dynamicLength},on:{change:function(e){var s=t.dynamicLength,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.dynamicLength=s.concat([n])):a>-1&&(t.dynamicLength=s.slice(0,a).concat(s.slice(a+1)))}else t.dynamicLength=o}}}),e("div")])],1)]),e("section",{staticClass:"section"},[t.showAdvanced?e("div",["play"===t.type?e("div",{staticClass:"form-group mb16"},[e("label",[t._v("Wave type ("),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode/type"}},[t._v("learn more")]),t._v(")")]),e("dropdown-button",{staticClass:"-outline form-control -arrow",attrs:{options:["'triangle'","'square'","'sine'","'sawtooth'"]},on:{input:function(e){t.osc=e}},scopedSlots:t._u([{key:"selection",fn:function(){return[t._v(" "+t._s(t.osc.replace(/'/g,""))+" ")]},proxy:!0},{key:"option",fn:function({value:e}){return[t._v(" "+t._s(e.replace(/'/g,""))+" ")]}}],null,!1,2424831711),model:{value:t.osc,callback:function(e){t.osc=e},expression:"osc"}})],1):t._e(),e("div",{staticClass:"column mb16"},[e("div",{staticClass:"form-group -fill"},[e("label",[t._v("Fade In "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.fadeIn}})]),e("slider",{staticClass:"mt8",attrs:{min:0,max:10,step:.1,label:!0,"show-completion":!0,value:t.fadeIn},on:{input:function(e){t.fadeIn=e},reset:function(e){return t.reset("fadeIn")}}})],1),e("div",{staticClass:"ml8 form-group -fill"},[e("label",[t._v("Fade Out "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.fadeOut}})]),e("slider",{staticClass:"mt8",attrs:{min:0,max:10,step:.1,label:!0,"show-completion":!0,value:t.fadeOut},on:{input:function(e){t.fadeOut=e},reset:function(e){return t.reset("fadeOut")}}})],1)]),e("div",{staticClass:"column mb16"},[e("div",{staticClass:"form-group -fill"},[e("label",[t._v("Start Gain "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.startGain}})]),e("slider",{staticClass:"mt8",attrs:{min:1e-4,max:1,step:.001,label:!0,"show-completion":!0,value:t.startGain},on:{input:function(e){t.startGain=e},reset:function(e){return t.reset("startGain")}}})],1),e("div",{staticClass:"ml8 form-group -fill"},[e("label",[t._v("End Gain "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.endGain}})]),e("slider",{staticClass:"mt8",attrs:{min:1e-4,max:1,step:.001,label:!0,"show-completion":!0,value:t.endGain},on:{input:function(e){t.endGain=e},reset:function(e){return t.reset("endGain")}}})],1)]),e("div",{staticClass:"form-group mb16"},[e("label",[t._v("Delay "),e("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.delay}})]),e("slider",{staticClass:"mt8",attrs:{min:0,max:10,step:.1,label:!0,"show-completion":!0,value:t.delay},on:{input:function(e){t.delay=e},reset:function(e){return t.reset("delay")}}})],1)]):t._e(),e("div",{staticClass:"section__title",on:{click:function(e){t.showAdvanced=!t.showAdvanced}}},[t._v(" Advanced "),e("i",{staticClass:"icon-up-thin"})])]),e("div",{staticClass:"form-group mt16"},[e("label",{attrs:{for:"audio-assistant-output"}},[t._v(" Output ")]),e("div",{staticClass:"d-flex"},[e("textarea",{ref:"output",staticClass:"form-control",attrs:{id:"audio-assistant-output",cols:"20",rows:"4",spellcheck:"false",readonly:""},domProps:{value:t.litteral}}),e("button",{staticClass:"btn -red ml8",on:{click:function(e){return t.$emit("test",{event:e,litteral:t.litteral})}}},[e("i",{staticClass:"icon-volume-high"})])]),t.error?e("p",{staticClass:"form-feedback"},[e("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.error)+" ")]):t._e()]),e("footer",[e("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text mrauto",attrs:{href:"javascript:void(0);",title:"Restart audio service (clear ALL queue)"},on:{click:function(e){return t.$emit("stop")}}},[e("i",{staticClass:"icon-refresh mr8"}),t._v(" Restart audio ")]),e("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),e("button",{staticClass:"btn -large",on:{click:t.submit}},[e("i",{staticClass:"icon-check mr4"}),t._v(" Ok ")])])])},A=[],T=s("e7a1"),x=s("be31"),w=s("3918");const k=["gain"],S=["holdDuration","fadeIn","fadeOut"];var I={components:{Slider:m["a"],DropdownButton:w["a"]},props:{type:{required:!0,type:String},error:{required:!1,type:String}},mixins:[n["a"]],data:()=>({url:null,frequencyHz:null,gain:null,fadeOut:null,delay:null,fadeIn:null,holdDuration:null,osc:null,startGain:null,endGain:null,startTime:null,dynamicGain:!0,dynamicLength:!0,uploadedSound:null,showAdvanced:!1}),computed:{title(){return"play"===this.type?"Synthetize sound":"Import your own"},descriptions(){return _["c"]},frequency:{get(){return this.frequencyHz},set(t){isNaN(t)?this.frequencyHz=this.noteToFrequency(t):this.frequencyHz=+t}},litteral(){const t=_["a"][this.type],e=Object.keys(t),s=e.map(e=>this.dynamicGain&&-1!==k.indexOf(e)||this.dynamicLength&&-1!==S.indexOf(e)?this[e]?"gain*"+this[e]:0!=t[e]?0:null:this[e]!=t[e]?this[e]:null);for(let i=s.length-1;i>=0;i--){if(null!==s[i])break;s.splice(i,1)}return`${this.type}(${s.map(t=>null===t?"":t)})`}},created(){this.setDefaultAudioAttributes()},beforeDestroy(){this.uploadedSound&&x["a"].removeSound(this.uploadedSound).then(()=>{this.$store.dispatch("app/showNotice",{title:`Deleted ${this.uploadedSound} (canceled)`,type:"info"})})},methods:{setDefaultAudioAttributes(){const t=_["a"][this.type];for(const e in t)this[e]=t[e]},noteToFrequency(t){const e=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];let s,i;return s=3===t.length?t.charAt(2):t.charAt(1),i=e.indexOf(t.slice(0,-1)),i=i<3?i+12+12*(s-1)+1:i+12*(s-1)+1,+(440*Math.pow(2,(i-49)/12)).toFixed(2)},async handleFile(t){const e=t.target.files[0];if(e)try{const t=await T["a"].importSound(e);t?(this.uploadedSound&&x["a"].removeSound(this.uploadedSound),this.uploadedSound=this.url=t.name):this.url=e.name}catch(s){return void this.$store.dispatch("app/showNotice",{title:s.message,type:"error"})}},reset(t){const e=_["a"][this.type][t];this[t]=e},submit(){this.$emit("append",{litteral:this.litteral,uploadedSound:this.uploadedSound}),this.uploadedSound=null,this.close()}}},L=I,O=s("2877"),E=Object(O["a"])(L,C,A,!1,null,null,null),$=E.exports,D=s("e57a"),P=s("8c7a"),H=(s("cb55"),s("416b"),{components:{PrismEditor:D["a"]},props:{paneId:{required:!0,type:String},thresholds:{required:!0},thresholdId:{required:!0,type:String}},mixins:[n["a"]],data:()=>({buyAudio:"",sellAudio:"",buyError:null,sellError:null,showHelp:!1,focusedSide:null,loopingSide:null,dropping:null,liveAnnotation:null,uploadedSounds:[]}),computed:{threshold:function(){return this.thresholds.find(t=>t.id===this.thresholdId)},amounts:function(){return this.thresholds.map(t=>t.amount)},audioPitch:function(){return this.$store.state[this.paneId].audioPitch},audioVolume:function(){return this.$store.state[this.paneId].audioVolume},index:function(){return this.amounts.indexOf(this.threshold.amount)},min:function(){return this.threshold.amount},max:function(){return this.amounts[this.index+1]||2*this.amounts[this.index]}},created(){if(!this.threshold)return this.$nextTick(()=>this.close(!1));this.buyAudio=this.threshold.buyAudio||"",this.sellAudio=this.threshold.sellAudio||""},beforeDestroy(){this._loopingTimeout&&(clearTimeout(this._loopingTimeout),this._loopingTimeout=!1);for(const t of this.uploadedSounds)x["a"].removeSound(t).then(()=>{this.$store.dispatch("app/showNotice",{title:`Deleted ${t} (canceled)`,type:"info"})})},methods:{highlighter(t){return Object(P["highlight"])(t,P["languages"].js,"js")},setInput(t,e){this[e+"Audio"]=t,this.liveAnnotation=null},saveInputs(){this.validate(!0)&&(this.$store.commit(this.paneId+"/SET_THRESHOLD_AUDIO",{id:this.thresholdId,buyAudio:this.buyAudio,sellAudio:this.sellAudio}),this.uploadedSounds.splice(0,this.uploadedSounds.length),this.close(!0))},validate(t=!1){for(const s of["buy","sell"]){const i=this[s+"Audio"];try{this.emulateAudioFunction(i,s)}catch(e){return t&&d["a"].confirm({message:`Please check that ${s} audio script is syntactically correct.`,ok:"OK",cancel:!1}),!1}}return!0},async testCustom(t,e,s){return this._loopingTimeout&&this.stopLoop(),s||(s=this[t+"Audio"]),await this.test(s,t,e)},testOriginal(t,e){this._loopingTimeout&&this.stopLoop();const s=this.threshold[t+"Audio"];this.test(s,t,e)},stopLoop(){this._loopingTimeout&&(clearTimeout(this._loopingTimeout),this._loopingTimeout=!1,this.loopingSide=null)},loopSide(t){this._loopingTimeout||(this.loopingSide=t),this._loopingTimeout=setTimeout(()=>{this.test(this[t+"Audio"],t),this.loopSide(t)},100*Math.random())},restartWebAudio(){_["d"].reconnect()},async test(t,e,s){let i,o=1;const n=this.max-this.min;if(s&&s.shiftKey||!n?i=this.min:(i=this.min+Math.random()*n,o=i/this.amounts[1]),i){const n=await this.emulateAudioFunction(t,e,o);return n&&s&&this.$store.dispatch("app/showNotice",{id:"testing-threshold-audio",type:"buy"===e?"success":"error",title:"NOW PLAYING : "+Object(g["c"])(i)+" "+e.toUpperCase()+" trade",timeout:1e3}),n}},formatAmount(t){return Object(g["c"])(t)},async emulateAudioFunction(t,e,s){try{const i=await _["d"].buildAudioFunction(t,e,this.audioPitch,this.audioVolume,!0);return"undefined"!==typeof s&&i(_["d"],s),this[e+"Error"]=null,!0}catch(i){return this[e+"Error"]=i.message,!1}},openSoundAssistant(t,e){const s=d["a"].open($,{type:t,error:this[e+"Error"]});s.$on("test",({event:t,litteral:s})=>this.testCustom(e,t,s)),s.$on("stop",this.restartWebAudio),s.$on("append",({litteral:t,uploadedSound:s})=>{s&&this.uploadedSounds.push(s),this[e+"Audio"].trim().length?this[e+"Audio"]+="\n"+t:this[e+"Audio"]=t})},handleDropEnter(t){this.dropping=t},async handleDrop(t,e){if(t.dataTransfer.files&&t.dataTransfer.files.length){if(t.preventDefault(),t.stopPropagation(),"drop"!==t.type)return!1;for(const s of t.dataTransfer.files)await this.importSound(s,e);this.dropping=null}},async importSound(t,e){try{const s=await T["a"].importSound(t);s&&this.uploadedSounds.push(s.name);const i=`playurl(${t.name})`;this[e+"Audio"].trim().length?this[e+"Audio"]+="\n"+i:this[e+"Audio"]=i}catch(s){return void this.$store.dispatch("app/showNotice",{title:s.message,type:"error"})}},async scheduleLiveAnnotation(t,e){this.focusedSide=e,this._liveAnnotationTimeout&&clearTimeout(this._liveAnnotationTimeout),this._liveAnnotationTimeout=setTimeout(this.findCurrentParameter.bind(this,t.currentTarget,e),200)},findCurrentParameter(t){if(this._liveAnnotationTimeout=null,!("selectionStart"in t)||document.activeElement!=t)return;let e=t.selectionStart-1,s=t.value.slice(),i=e;for(i;i>=0;i--){if(/\n/.test(s[i])){i++;break}0===i&&e--}i>=0&&(s=s.slice(i)),e-=i;const o=s.indexOf("\n");if(o>=0&&(s=s.slice(0,o)),!s.length)return;const n=new RegExp("(play(?:url)?)\\(","g");let a;do{if(a=n.exec(s)){const t=a[1],i=a.index,o=Object(h["g"])(s,i+t.length);if(e<i+t.length||e>=o)continue;const n=Object(h["t"])(s.slice(i+t.length+1,o),!1,5);let r=i+t.length+1;for(let s=0;s<n.length;s++){if(e<=r+n[s].length-1)return void this.showParameterAnnotation(t,s);r+=n[s].length+1}}}while(a);this.liveAnnotation&&(this.liveAnnotation=null)},showParameterAnnotation(t,e){let s;const i=_["b"][t][e];s=i?`${i.toUpperCase()} : ${_["c"][i]}`:`Too many parameters on ${t}() !`,this.liveAnnotation=s},reset(t){const e=JSON.parse(JSON.stringify(u["a"][this.$store.state.panes.panes[this.paneId].type].state));e.thresholds[Math.min(this.index,3)]&&(this[t+"Audio"]=e.thresholds[Math.min(this.index,3)][t+"Audio"])}}}),G=H,R=(s("f2cc"),Object(O["a"])(G,b,y,!1,null,"43c76488",null)),N=R.exports,q=s("81a6"),M=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"threshold-dropdown"},[e("h3",[t._v("@ "+t._s(t.formatAmount(t.threshold.amount)))]),e("div",{staticClass:"form-group mb8 threshold-panel__gif"},[e("div",{staticClass:"column"},[t.isLegacy?e("div",{staticClass:"form-group"},[e("label",[t._v("Buy gif")]),e("input",{staticClass:"form-control w-100",attrs:{type:"text",placeholder:"Giphy keyword"},domProps:{value:t.threshold.buyGif},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_GIF",{id:t.threshold.id,side:"buy",value:e.target.value})}}})]):t._e(),t.isLegacy?e("div",{staticClass:"form-group"},[e("label",[t._v("Sell gif")]),e("input",{staticClass:"form-control w-100",attrs:{type:"text",placeholder:"Giphy keyword"},domProps:{value:t.threshold.sellGif},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_GIF",{id:t.threshold.id,side:"sell",value:e.target.value})}}})]):t._e()])]),e("div",{staticClass:"form-group mb8 threshold-panel__colors"},[e("label",[t._v("Custom colors")]),e("div",{staticClass:"column mt8"},[e("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"form-group column flex-center",attrs:{title:"When buy"}},[e("p",{staticClass:"help-text -center mr16 mt0 mb0"},[t._v("Buy")]),e("color-picker-control",{attrs:{label:"Buy color",value:t.threshold.buyColor},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:t.threshold.id,side:"buyColor",value:e})}}})],1),e("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"form-group column flex-center",attrs:{title:"When sell"}},[e("p",{staticClass:"help-text -center mr16 mt0 mb0"},[t._v("Sell")]),e("color-picker-control",{attrs:{label:"Sell color",value:t.threshold.sellColor},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:t.threshold.id,side:"sellColor",value:e})}}})],1)])]),e("button",{staticClass:"btn -red mt16",attrs:{type:"button"},on:{click:t.removeThreshold}},[e("i",{staticClass:"icon-trash mr8"}),t._v(" Remove ")])])},j=[];let U=class extends p["c"]{get isLegacy(){return"trades"===this.$store.state.panes.panes[this.paneId].type}formatAmount(t){return Object(g["c"])(t)}removeThreshold(){this.canDelete?(this.$store.commit(this.paneId+"/DELETE_THRESHOLD",this.threshold.id),this.$emit("input",null)):d["a"].confirm({message:"You can't delete the threshold because there is only 2 and the minimum is 2",cancel:null})}};U=Object(c["a"])([Object(p["a"])({name:"ThresholdDropdown",components:{ColorPickerControl:q["a"]},props:{paneId:{type:String,required:!0},threshold:{required:!0},canDelete:{default:!1}}})],U);var F=U,W=F,B=(s("f6c8"),Object(O["a"])(W,M,j,!1,null,"16fb6cb0",null)),z=B.exports;let V=class extends p["c"]{constructor(){super(...arguments),this.rendering=!0,this.dragging=null,this.editing=null,this.selectedThresholdId=null,this.selectedSliderHandle=null,this.thresholdPanelTrigger=null,this._dragReference=null,this._minimum=null,this._maximum=null,this._offsetLeft=null}get selectedThreshold(){const t=this.$store.getters[this.paneId+"/getThreshold"](this.selectedThresholdId);return t}get showThresholdsAsTable(){return this.$store.state[this.paneId].showThresholdsAsTable}get useAudio(){return this.$store.state.settings.useAudio}get capToLastThreshold(){return this.thresholds[this.thresholds.length-1].max}created(){this._onStoreMutation=this.$store.subscribe(t=>{switch(t.type){case this.paneId+"/TOGGLE_SETTINGS_PANEL":case this.paneId+"/TOGGLE_THRESHOLDS_TABLE":(t.type===this.paneId+"/TOGGLE_SETTINGS_PANEL"&&"thresholds"===t.payload||t.type===this.paneId+"/TOGGLE_THRESHOLDS_TABLE"&&!1===t.payload)&&(this.rendering=!0,this.refreshHandlers(),this.refreshGradients());break;case this.paneId+"/SET_THRESHOLD_AMOUNT":this.reorderThresholds(),this.refreshHandlers();break;case this.paneId+"/SET_THRESHOLD_COLOR":this.refreshGradients();break;case this.paneId+"/ADD_THRESHOLD":this.refreshHandlers();break}})}mounted(){this.showThresholdsAsTable||(this.refreshHandlers(),this.refreshGradients()),this._startDrag=this.startDrag.bind(this),this.$el.addEventListener("touchstart",this._startDrag,!1),this.$el.addEventListener("mousedown",this._startDrag,!1),this._doDrag=this.doDrag.bind(this),window.addEventListener("touchmove",this._doDrag,!1),window.addEventListener("mousemove",this._doDrag,!1),this._endDrag=this.endDrag.bind(this),window.addEventListener("touchend",this._endDrag,!1),window.addEventListener("mouseup",this._endDrag,!1),this._doResize=this.refreshHandlers.bind(this),window.addEventListener("resize",this._doResize,!1)}beforeDestroy(){window.removeEventListener("touchmove",this._doDrag),window.removeEventListener("mousemove",this._doDrag),window.removeEventListener("touchend",this._endDrag),window.removeEventListener("mouseup",this._endDrag),window.removeEventListener("resize",this._doResize),this._onStoreMutation()}startDrag(t){if(!t.target.classList.contains("thresholds-slider__handler"))return;let e=t.pageX;t.touches&&t.touches.length&&(e=t.touches[0].pageX),this.selectThreshold(t.target.getAttribute("data-id"),t),this.selectedSliderHandle=t.target,this.$nextTick(()=>{this._dragReference={timestamp:Date.now(),position:e}})}selectThreshold(t,e){if(this.thresholdPanelTrigger&&this.selectedThresholdId===t)return this.thresholdPanelTrigger=null,this.selectedThresholdId=null,void(this.selectedSliderHandle&&this.endDrag());this.selectedThresholdId=t,this.selectedThresholdId&&(this.thresholdPanelTrigger=e.target)}doDrag(t){let e=t.pageX;if(t.touches&&t.touches.length&&(e=t.touches[0].pageX),null===this.selectedSliderHandle||!this._dragReference||Date.now()-this._dragReference.timestamp<1e3&&Math.abs(this._dragReference.position-e)<3)return;this.dragging=!0;const s=Math.max(0,Math.log(this._minimum+1)||0),i=s/Math.log(this._maximum+1)*this._width;let o=Math.max(this._width/3*-1,Math.min(1.5*this._width,e-this._offsetLeft)),n=Math.exp((i+o/this._width*(this._width-i))/this._width*Math.log(this._maximum+1))-1;e<this._offsetLeft?(n=this.selectedThreshold.amount-.1*(this.selectedThreshold.amount-n),o=0):e>this._offsetLeft+this._width&&(n=this.selectedThreshold.amount-.1*(this.selectedThreshold.amount-n),o=this._width),n<0&&(n=0),this.selectedSliderHandle.style.transform="translateX("+o+"px)",this.$store.commit(this.paneId+"/SET_THRESHOLD_AMOUNT",{id:this.selectedThresholdId,value:n})}endDrag(){this.selectedSliderHandle&&(this.selectedSliderHandle=null,this.reorderThresholds(),this.refreshHandlers(),this.refreshGradients()),this.dragging=!1}async refreshHandlers(){await Object(h["w"])(100);const t=this.thresholds.map(t=>t.amount);if(this._minimum=this.thresholds[0].amount,this._maximum=Math.max.apply(null,t),this.showThresholdsAsTable)return;const e=this.$refs.thresholdContainer.getBoundingClientRect();this._offsetLeft=e.left,this._width=this.$refs.thresholdContainer.clientWidth;const s=this.$refs.thresholdContainer.children,i=Math.max(0,Math.log(this._minimum+1)||0),o=Math.log(this._maximum+1)-i;for(let n=0;n<this.thresholds.length;n++){const t=s[n],e=this.thresholds[n],a=Math.log(e.amount+1)-i,r=this._width*(a/o);t.style.transform="translateX("+r+"px)"}this.rendering=!1}async refreshGradients(){if(this.showThresholdsAsTable)return;await Object(h["w"])(100);const t=Math.max(0,Math.log(this._minimum+1)||0),e=Math.log(this._maximum+1),s=[],i=[];for(let o=0;o<this.thresholds.length;o++){const n=0===o?0:o===this.thresholds.length-1?100:((Math.log(this.thresholds[o].amount+1)-t)/(e-t)*100).toFixed(2);s.push(`${this.thresholds[o].buyColor} ${n}%`),i.push(`${this.thresholds[o].sellColor} ${n}%`)}this.$refs.buysGradient.style.backgroundImage=`linear-gradient(to right, ${s.join(", ")})`,this.$refs.sellsGradient.style.backgroundImage=`linear-gradient(to right, ${i.join(", ")})`}reorderThresholds(){this.thresholds.sort((t,e)=>t.amount-e.amount)}deleteThreshold(t){this.thresholds.length<=2||this.$store.commit(this.paneId+"/DELETE_THRESHOLD",t)}openThresholdAudio(t){d["a"].open(N,{paneId:this.paneId,thresholds:this.thresholds,thresholdId:t})}formatAmount(t){return Object(g["c"])(t)}flipSwatches(t){const e=t+"Color",s=this.thresholds.map(t=>t[e]).reverse();for(let i=0;i<this.thresholds.length;i++)this.$store.commit(this.paneId+"/SET_THRESHOLD_COLOR",{id:this.thresholds[i].id,side:e,value:s[i]})}toggleMaximumThreshold(t){this.$store.commit(this.paneId+"/TOGGLE_THRESHOLD_MAX",t.id)}};V=Object(c["a"])([Object(p["a"])({name:"Thresholds",components:{ColorPickerControl:q["a"],ThresholdDropdown:z},props:{paneId:{type:String,required:!0},label:{type:String,default:null},thresholds:{required:!0}}})],V);var J=V,X=J,Y=(s("4b6d"),Object(O["a"])(X,f,v,!1,null,null,null)),K=Y.exports,Q=function(){var t=this,e=t._self._c;return e("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"title"},[t._v("Configure preset")])]},proxy:!0}])},[e("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form-group mb8"},[e("label",[t._v("Choose type")]),e("label",{staticClass:"checkbox-control mt8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.includeThresholds,expression:"includeThresholds"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeThresholds)?t._i(t.includeThresholds,null)>-1:t.includeThresholds},on:{change:function(e){var s=t.includeThresholds,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.includeThresholds=s.concat([n])):a>-1&&(t.includeThresholds=s.slice(0,a).concat(s.slice(a+1)))}else t.includeThresholds=o}}}),e("div"),e("span",[t._v("Trades")])])]),e("div",{staticClass:"form-group mb8"},[e("label",{staticClass:"checkbox-control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.includeLiquidations,expression:"includeLiquidations"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeLiquidations)?t._i(t.includeLiquidations,null)>-1:t.includeLiquidations},on:{change:function(e){var s=t.includeLiquidations,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.includeLiquidations=s.concat([n])):a>-1&&(t.includeLiquidations=s.slice(0,a).concat(s.slice(a+1)))}else t.includeLiquidations=o}}}),e("div"),e("span",[t._v("Liquidations")])])]),e("div",{staticClass:"form-group mb8 mt16"},[e("label",[t._v("Choose what to include in preset")]),e("label",{staticClass:"checkbox-control mt8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.includeAmounts,expression:"includeAmounts"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeAmounts)?t._i(t.includeAmounts,null)>-1:t.includeAmounts},on:{change:function(e){var s=t.includeAmounts,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.includeAmounts=s.concat([n])):a>-1&&(t.includeAmounts=s.slice(0,a).concat(s.slice(a+1)))}else t.includeAmounts=o}}}),e("div"),e("span",[t._v("Amounts")])])]),e("div",{staticClass:"form-group mb8"},[e("label",{staticClass:"checkbox-control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.includeColors,expression:"includeColors"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeColors)?t._i(t.includeColors,null)>-1:t.includeColors},on:{change:function(e){var s=t.includeColors,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.includeColors=s.concat([n])):a>-1&&(t.includeColors=s.slice(0,a).concat(s.slice(a+1)))}else t.includeColors=o}}}),e("div"),e("span",[t._v("Colors")])])]),e("div",{staticClass:"form-group mb8"},[e("label",{staticClass:"checkbox-control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.includeAudio,expression:"includeAudio"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeAudio)?t._i(t.includeAudio,null)>-1:t.includeAudio},on:{change:function(e){var s=t.includeAudio,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.includeAudio=s.concat([n])):a>-1&&(t.includeAudio=s.slice(0,a).concat(s.slice(a+1)))}else t.includeAudio=o}}}),e("div"),e("span",[t._v("Audio")])])]),e("footer",[e("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),e("button",{staticClass:"btn -large -green",attrs:{type:"submit"}},[e("i",{staticClass:"icon-check mr4"}),t._v(" Submit ")])])])])},Z=[],tt={mixins:[n["a"]],data:()=>({includeThresholds:!0,includeLiquidations:!0,includeAmounts:!1,includeColors:!0,includeAudio:!0}),methods:{submit(){this.close({thresholds:this.includeThresholds,liquidations:this.includeLiquidations,amounts:this.includeAmounts,colors:this.includeColors,audios:this.includeAudio})}}},et=tt,st=Object(O["a"])(et,Q,Z,!1,null,null,null),it=st.exports,ot=s("da81"),nt=s.n(ot);let at=class extends p["c"]{constructor(){super(...arguments),this.sections=["thresholds"],this.secondsAgoExample="0s ago"}get useAudio(){return this.$store.state.settings.useAudio}get markets(){return this.$store.state.panes.panes[this.paneId].markets}get maxRows(){return this.$store.state[this.paneId].maxRows}get thresholds(){return this.$store.state[this.paneId].thresholds}get liquidations(){return this.$store.state[this.paneId].liquidations}get showLogos(){return this.$store.state[this.paneId].showLogos}get monochromeLogos(){return this.$store.state[this.paneId].monochromeLogos}get showTimeAgo(){return this.$store.state[this.paneId].showTimeAgo}get showPrice(){return this.$store.state[this.paneId].showPrice}get tradeType(){return this.$store.state[this.paneId].tradeType}get showTradesPairs(){return this.$store.state[this.paneId].showTradesPairs}get showThresholdsAsTable(){return this.$store.state[this.paneId].showThresholdsAsTable}get audioThresholdPlaceholder(){return+(.1*this.thresholds[0].amount).toFixed(2)+" (10% of minimum threshold)"}get audioThreshold(){return this.$store.state[this.paneId].audioThreshold}get muted(){return this.$store.state[this.paneId].muted}get audioPitch(){return this.$store.state[this.paneId].audioPitch||1}get audioVolume(){const t=this.$store.state[this.paneId].audioVolume;return null===t?this.$store.state.settings.audioVolume:t}get thresholdsMultipler(){return this.$store.state[this.paneId].thresholdsMultipler}get disableAnimations(){return this.$store.state.settings.disableAnimations}get isLegacy(){return"trades"===this.$store.state.panes.panes[this.paneId].type}get displayGifWarning(){return this.isLegacy&&this.disableAnimations&&(this.thresholds.filter(t=>!!t.buyGif&&!!t.sellGif).length||this.liquidations.filter(t=>!!t.buyGif&&!!t.sellGif).length)}get multipliers(){return this.markets.map(t=>{const[e,s]=Object(g["m"])(t),i=this.$store.state[this.paneId].multipliers[t];return{exchange:e,pair:s,multiplier:isNaN(i)?1:i,identifier:t}})}get mutipliersCount(){return this.multipliers.filter(t=>1!==t.multiplier).length}mounted(){const t=Date.now();this._secondsAgoExampleTimeout=setInterval(()=>{this.secondsAgoExample=Object(h["a"])(t)+" ago"},1e3)}beforeDestroy(){this._secondsAgoExampleTimeout&&clearTimeout(this._secondsAgoExampleTimeout)}formatAmount(t){return Object(g["c"])(t)}toggleSection(t){const e=this.sections.indexOf(t);-1===e?this.sections.push(t):this.sections.splice(e,1)}async getAudioPreset(){const t=await d["a"].openAsPromise(it);if(t){if(!t.thresholds&&!t.liquidations&&!t.amounts&&!t.audios&&!t.colors)return void this.$store.dispatch("app/showNotice",{title:"You did not select anything to save in the preset !",type:"error"});const e={};for(const s of["thresholds","liquidations"])if(t[s]){e[s]=[];for(const i of this.$store.state[this.paneId][s]){const o={};t.amounts&&(o.amount=i.amount),t.colors&&(o.buyColor=i.buyColor,o.sellColor=i.sellColor),t.audios&&(o.buyAudio=i.buyAudio,o.sellAudio=i.sellAudio),e[s].push(o)}}return e}}applyAudioPreset(t){const e=JSON.parse(JSON.stringify(u["a"][this.$store.state.panes.panes[this.paneId].type].state));let s=null,i=null,o=null;if(t){if(t[0]){let e;t.liquidations&&(e=t.liquidations,delete t.liquidations),t={thresholds:Object.values(t),liquidations:e?[e]:null}}for(const n of["thresholds","liquidations"]){if(!t[n])continue;o="undefined"!==typeof t[n][0].amount,s="undefined"!==typeof t[n][0].buyColor,i="undefined"!==typeof t[n][0].buyAudio;const a=o&&s&&i,r=e[n].length;if(a){nt()(this.$store.state[this.paneId][n],t[n]);continue}let l=this.$store.state[this.paneId][n][0].amount;this.$store.state[this.paneId][n]=nt()(this.$store.state[this.paneId][n],t[n]).map((t,s)=>(t.id||(t.id=Object(h["v"])()),"undefined"===typeof t.amount&&(t.amount=l),"undefined"===typeof t.buyColor&&(t.buyColor=e[n][Math.min(s,r)].buyColor,t.sellColor=e[n][Math.min(s,r)].sellColor),"undefined"===typeof t.buyAudio&&(t.buyAudio=e[n][Math.min(s,r)].buyAudio,t.sellAudio=e[n][Math.min(s,r)].sellAudio),l=t.amount,t))}}else o=s=i=!0,this.$store.state[this.paneId].thresholds&&this.$store.state[this.paneId].thresholds.splice(0,this.$store.state[this.paneId].thresholds.length),this.$store.state[this.paneId].liquidations&&this.$store.state[this.paneId].liquidations.splice(0,this.$store.state[this.paneId].liquidations.length),nt()(this.$store.state[this.paneId],{thresholds:e.thresholds,liquidations:e.liquidations,thresholdsMultipler:1});const n=this.$store.state[this.paneId].thresholds[0];o&&this.$store.commit(this.paneId+"/SET_THRESHOLD_AMOUNT",{id:n.id,value:n.amount}),s&&this.$store.commit(this.paneId+"/SET_THRESHOLD_COLOR",{id:n.id,side:"buy",value:n.buyColor}),i&&this.$store.commit(this.paneId+"/SET_THRESHOLD_AUDIO",{id:n.id,buyAudio:n.buyAudio,sellAudio:n.sellAudio})}};at=Object(c["a"])([Object(p["a"])({components:{Thresholds:K,Slider:m["a"]},name:"TradesSettings",props:{paneId:{type:String,required:!0}}})],at);var rt=at,lt=rt,ct=(s("2a8c"),Object(O["a"])(lt,r,l,!1,null,"a169b4cc",null)),dt=ct.exports,ut={components:{TradesSettings:dt},mixins:[n["a"],a["a"]],data:()=>({renaming:!1}),methods:{}},ht=ut,pt=Object(O["a"])(ht,i,o,!1,null,null,null);e["default"]=pt.exports},"4b6d":function(t,e,s){"use strict";s("d5eb")},"8b6c":function(t,e,s){},d5eb:function(t,e,s){},e98b:function(t,e,s){},f2cc:function(t,e,s){"use strict";s("fb92")},f6c8:function(t,e,s){"use strict";s("e98b")},fb92:function(t,e,s){}}]);
//# sourceMappingURL=chunk-48f0107b.dc0cf54d.js.map