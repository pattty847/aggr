{"version":3,"sources":["webpack:///./src/mixins/paneMixin.ts","webpack:///./src/components/panes/PaneHeader.vue","webpack:///./src/components/panes/PaneHeader.vue?4649","webpack:///./src/components/panes/PaneHeader.vue?fd01","webpack:///./src/components/panes/PaneHeader.vue?c599","webpack:///./src/components/counters/Counters.vue?8687","webpack:///./src/components/counters/Counters.vue","webpack:///./src/components/counters/Counters.vue?e774","webpack:///./src/components/counters/Counters.vue?ef55","webpack:///./src/components/counters/Counters.vue?d4f8"],"names":["PaneMixin","Vue","this","$store","state","panes","paneId","mounted","$el","id","refreshZoom","$nextTick","width","clientWidth","onResize","clientHeight","addEventListener","focusPane","beforeDestroy","removeEventListener","_onStoreMutation","dispatch","commit","Component","props","required","type","String","render","_vm","_c","_self","_setupProxy","staticClass","class","loading","attrs","on","renamePane","_v","_s","name","maximizePane","_t","openSearch","settings","openSettings","_e","toggleDropdown","model","value","paneDropdownTrigger","callback","$$v","expression","$event","stopPropagation","changeZoom","resetZoom","apply","arguments","zoom","toFixed","duplicatePane","removePane","staticRenderFns","constructor","market","marketsListeners","markets","local","event","direction","shiftKey","$emit","dialogService","confirm","highlightPane","parentElement","classList","currentTarget","target","className","el","isMaximized","toggle","siblings","getSiblings","sibling","getAttribute","remove","style","display","cls","Event","window","dispatchEvent","prompt","action","input","open","default","default_1","Function","Boolean","component","_l","activeSteps","step","index","key","duration","buy","sell","countersCount","formatAmount","Mixins","steps","_feed","liquidationsOnly","count","granularity","filter","a","hasData","created","subscribe","mutation","payload","createCounters","_populateCountersInterval","setInterval","populateCounters","bind","countersGranularity","aggregatorService","off","onVolume","clearInterval","sums","volume","vbuy","vsell","lbuy","lsell","cbuy","csell","_activeChunk","timestamp","i","length","clearCounters","_counters","splice","countersSteps","push","chunks","counter","first","indexOf","getHms","getBucketId","pane","now","Date","decreaseBuy","decreaseSell","chunksToDecrease","Array","prototype","to","j","amount","components","PaneHeader"],"mappings":"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","file":"js/chunk-1e3ac1a1.4d720fe4.js","sourcesContent":["import { Pane } from '@/store/panes'\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\n@Component({\n  props: {\n    paneId: {\n      required: true,\n      type: String\n    }\n  }\n})\nexport default class PaneMixin extends Vue {\n  paneId: string\n  protected _onStoreMutation: () => void\n\n  get pane(): Pane {\n    return this.$store.state.panes.panes[this.paneId]\n  }\n\n  mounted() {\n    this.$el.id = this.paneId\n\n    this.refreshZoom()\n\n    this.$nextTick(() => {\n      const width = this.$el.clientWidth\n\n      if (typeof this.onResize === 'function') {\n        this.onResize(width, this.$el.clientHeight, true)\n      }\n    })\n\n    this.$el.addEventListener('mousedown', this.focusPane)\n  }\n\n  beforeDestroy() {\n    this.$el.removeEventListener('mousedown', this.focusPane)\n\n    if (this._onStoreMutation) {\n      this._onStoreMutation()\n    }\n  }\n\n  refreshZoom() {\n    this.$store.dispatch('panes/refreshZoom', this.paneId)\n  }\n\n  focusPane() {\n    this.$store.commit('app/SET_FOCUSED_PANE', this.paneId)\n  }\n\n  onResize?(newWidth: number, newHeight: number, isMounting?: boolean)\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"pane-header hide-scrollbar pane-overlay d-flex\",class:{ '-loading': _vm.loading }},[_c('div',{staticClass:\"pane-header__loader\"}),_c('span',{staticClass:\"pane-header__name ml4 mrauto\",attrs:{\"data-hide-header\":\"\"},on:{\"dblclick\":_vm.renamePane}},[_vm._v(_vm._s(_vm.name))]),_c('div',{staticClass:\"toolbar flex-grow-1\",on:{\"dblclick\":_vm.maximizePane}},[_vm._t(\"default\"),_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSearch}},[_c('i',{staticClass:\"icon-search\"})]),(_vm.settings)?_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"})]):_vm._e(),_c('button',{staticClass:\"toolbar__label\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.toggleDropdown}},[_c('i',{staticClass:\"icon-more\"})]),_c('dropdown',{model:{value:(_vm.paneDropdownTrigger),callback:function ($$v) {_vm.paneDropdownTrigger=$$v},expression:\"paneDropdownTrigger\"}},[_c('div',{staticClass:\"d-flex btn-group\"},[_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, -1)}}},[_c('i',{staticClass:\"icon-minus\"})]),_c('button',{staticClass:\"btn -green text-monospace flex-grow-1 text-center\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.resetZoom.apply(null, arguments)}}},[_vm._v(\" × \"+_vm._s(_vm.zoom.toFixed(2))+\" \")]),_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, 1)}}},[_c('i',{staticClass:\"icon-plus\"})])]),_vm._t(\"menu\"),(_vm.settings !== null)?_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"}),_c('span',[_vm._v(\"Settings\")])]):_vm._e(),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$store.dispatch('app/showSearch', _vm.paneId)}}},[_c('i',{staticClass:\"icon-search\"}),_c('span',[_vm._v(\"Sources\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.maximizePane}},[_c('i',{staticClass:\"icon-enlarge\"}),_c('span',[_vm._v(\"Maximize\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.duplicatePane}},[_c('i',{staticClass:\"icon-copy-paste\"}),_c('span',[_vm._v(\"Duplicate\")])]),_c('div',{staticClass:\"dropdown--divider\"}),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.removePane}},[_c('i',{staticClass:\"icon-trash\"}),_c('span',[_vm._v(\"Remove\")])])],2)],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\nimport { getSiblings } from '@/utils/helpers'\nimport dialogService from '@/services/dialogService'\n\n@Component({\n  name: 'PaneHeader',\n  props: {\n    paneId: {\n      type: String\n    },\n    settings: {\n      type: Function,\n      default: null\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  }\n})\nexport default class extends Vue {\n  private settings?: () => Promise<any>\n  paneId: string\n  paneDropdownTrigger = null\n\n  get zoom() {\n    return this.$store.state.panes.panes[this.paneId].zoom || 1\n  }\n\n  get type() {\n    return this.$store.state.panes.panes[this.paneId].type\n  }\n\n  get name() {\n    const name = this.$store.state.panes.panes[this.paneId].name\n    const market = this.$store.state.panes.marketsListeners[\n      this.$store.state.panes.panes[this.paneId].markets[0]\n    ]\n\n    if (name) {\n      return name\n    } else if (market) {\n      return market.local\n    } else {\n      return this.type\n    }\n  }\n\n  openSearch() {\n    this.$store.dispatch('app/showSearch', this.paneId)\n  }\n\n  changeZoom(event, direction) {\n    const zoom = this.zoom + (event.shiftKey ? 0.0625 : 0.125) * direction\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: zoom })\n\n    this.$emit('zoom', zoom)\n  }\n\n  resetZoom() {\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: 1 })\n\n    this.$emit('zoom', 1)\n  }\n\n  async removePane() {\n    if (await dialogService.confirm(`Delete pane \"${this.paneId}\" ?`)) {\n      this.$store.dispatch('panes/removePane', this.paneId)\n    }\n  }\n\n  duplicatePane() {\n    this.$store.dispatch('panes/duplicatePane', this.paneId)\n  }\n\n  highlightPane(value: boolean) {\n    this.$el.parentElement.parentElement.classList[value ? 'add' : 'remove'](\n      '-highlight'\n    )\n  }\n\n  maximizePane(event) {\n    if (\n      event.type === 'dblclick' &&\n      event.currentTarget !== event.target &&\n      event.target.className !== 'toolbar__spacer'\n    ) {\n      return\n    }\n\n    const el = this.$el.parentElement.parentElement\n    const isMaximized = el.classList.toggle('-maximized')\n\n    const siblings = getSiblings(el)\n\n    for (const sibling of siblings) {\n      if (!sibling.getAttribute('type')) {\n        continue\n      }\n      sibling.classList.remove('-maximized')\n      sibling.style.display = isMaximized ? 'none' : 'block'\n    }\n\n    const cls = Event as any\n\n    window.dispatchEvent(new cls('resize'))\n  }\n\n  async renamePane() {\n    const name = await dialogService.prompt({\n      action: 'Rename',\n      input: this.name\n    })\n\n    if (name !== this.name) {\n      this.$store.commit('panes/SET_PANE_NAME', { id: this.paneId, name: name })\n    }\n  }\n\n  toggleDropdown(event) {\n    if (this.paneDropdownTrigger) {\n      this.paneDropdownTrigger = null\n    } else {\n      this.paneDropdownTrigger = event.currentTarget\n    }\n  }\n\n  async openSettings() {\n    if (!this.settings) {\n      return\n    }\n\n    dialogService.open((await this.settings()).default, {\n      paneId: this.paneId\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PaneHeader.vue?vue&type=template&id=219eac84&\"\nimport script from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=style&index=0&id=3b2cb290&prod&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"pane-counters\"},[_c('pane-header',{attrs:{\"paneId\":_vm.paneId,\"settings\":() => import('@/components/counters/CountersDialog.vue')}}),_c('div',{staticClass:\"counters hide-scrollbar\"},_vm._l((_vm.activeSteps),function(step,index){return _c('div',{key:index,staticClass:\"counter\",attrs:{\"duration\":step.duration}},[_c('div',{staticClass:\"counter__side -buy\",style:({\n          width: (step.buy / (step.buy + step.sell)) * 100 + '%'\n        })},[(!_vm.countersCount)?_c('span',[_vm._v(_vm._s(_vm.formatAmount(step.buy)))]):_c('span',[_vm._v(_vm._s(step.buy))])]),_c('div',{staticClass:\"counter__side -sell\",style:({\n          width: (step.sell / (step.buy + step.sell)) * 100 + '%'\n        })},[(!_vm.countersCount)?_c('span',[_vm._v(_vm._s(_vm.formatAmount(step.sell)))]):_c('span',[_vm._v(_vm._s(step.sell))])])])}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { Component, Mixins } from 'vue-property-decorator'\n\nimport { getBucketId, getHms } from '@/utils/helpers'\nimport { formatAmount } from '@/services/productsService'\n\nimport aggregatorService from '@/services/aggregatorService'\nimport PaneMixin from '@/mixins/paneMixin'\nimport PaneHeader from '../panes/PaneHeader.vue'\n\ninterface Counter {\n  duration: number\n  chunks: CounterChunk[]\n}\n\ninterface CounterChunk {\n  timestamp: number\n  buy: number\n  sell: number\n}\n\ninterface CounterStep {\n  duration: string\n  buy: number\n  sell: number\n  hasData: boolean\n}\n\n@Component({\n  components: { PaneHeader },\n  name: 'Counters'\n})\nexport default class extends Mixins(PaneMixin) {\n  steps: CounterStep[] = []\n\n  private _populateCountersInterval: number\n  private _activeChunk: CounterChunk\n  private _counters: Counter[]\n  private _feed: string = null\n\n  get liquidationsOnly() {\n    return this.$store.state[this.paneId].liquidationsOnly\n  }\n\n  get countersSteps() {\n    return this.$store.state[this.paneId].steps\n  }\n\n  get countersCount() {\n    return this.$store.state[this.paneId].count\n  }\n\n  get countersGranularity() {\n    return this.$store.state[this.paneId].granularity\n  }\n\n  get activeSteps() {\n    return this.steps.filter(a => a.hasData)\n  }\n\n  created() {\n    this._onStoreMutation = this.$store.subscribe(mutation => {\n      switch (mutation.type) {\n        case 'panes/SET_PANE_MARKETS':\n          if (mutation.payload.id === this.paneId) {\n            this.createCounters()\n          }\n          break\n\n        case this.paneId + '/REPLACE_COUNTERS':\n        case this.paneId + '/TOGGLE_LIQUIDATIONS_ONLY':\n        case this.paneId + '/TOGGLE_COUNT':\n          this.createCounters()\n          break\n      }\n    })\n\n    this.createCounters()\n\n    this._populateCountersInterval = setInterval(\n      this.populateCounters.bind(this),\n      this.countersGranularity\n    )\n  }\n\n  beforeDestroy() {\n    if (this._feed) {\n      aggregatorService.off(this._feed, this.onVolume)\n    }\n\n    clearInterval(this._populateCountersInterval)\n  }\n\n  onVolume(sums) {\n    const volume = {\n      buy: sums.vbuy,\n      sell: sums.vsell\n    }\n\n    if (this.liquidationsOnly) {\n      volume.buy = sums.lbuy\n      volume.sell = sums.lsell\n    } else if (this.countersCount) {\n      volume.buy = sums.cbuy\n      volume.sell = sums.csell\n    }\n\n    if (volume.buy || volume.sell) {\n      if (!this._activeChunk.timestamp) {\n        this._activeChunk.timestamp = sums.timestamp\n      }\n\n      this._activeChunk.buy += volume.buy\n      this._activeChunk.sell += volume.sell\n\n      for (let i = 0; i < this.steps.length; i++) {\n        this.steps[i].buy += volume.buy\n        this.steps[i].sell += volume.sell\n      }\n    }\n  }\n  clearCounters() {\n    if (this._feed) {\n      console.log(`[counters/${this.paneId}] unsubscribe from feed`, this._feed)\n      aggregatorService.off(this._feed, this.onVolume)\n    }\n\n    if (this._counters) {\n      this._counters.splice(0, this._counters.length)\n      this._activeChunk.timestamp = null\n      this._activeChunk.buy = this._activeChunk.sell = 0\n      this.steps.splice(0, this.steps.length)\n    } else {\n      this._counters = []\n      this._activeChunk = {\n        timestamp: null,\n        buy: 0,\n        sell: 0\n      }\n      this.steps = []\n    }\n  }\n  createCounters() {\n    this.clearCounters()\n\n    for (const step of this.countersSteps) {\n      this._counters.push({\n        duration: step,\n        chunks: []\n      })\n    }\n\n    for (const counter of this._counters) {\n      const first = this._counters.indexOf(counter) === 0\n\n      this.steps.push({\n        duration: getHms(counter.duration),\n        buy: 0,\n        sell: 0,\n        hasData: first\n      })\n    }\n\n    this._feed = 'bucket-' + getBucketId(this.pane.markets)\n    console.log(`[counters/${this.paneId}] subscribe to feed`, this._feed)\n\n    if (this._feed.length) {\n      aggregatorService.on(this._feed, this.onVolume)\n    } else {\n      console.log(`[counters/${this.paneId}] error feed empty...`)\n    }\n  }\n  populateCounters() {\n    const now = Date.now()\n\n    if (this._activeChunk.timestamp) {\n      this._counters[0].chunks.push({\n        timestamp: this._activeChunk.timestamp,\n        buy: this._activeChunk.buy,\n        sell: this._activeChunk.sell\n      })\n\n      this._activeChunk.timestamp = null\n      this._activeChunk.buy = 0\n      this._activeChunk.sell = 0\n    }\n\n    let chunksToDecrease = []\n    let decreaseBuy\n    let decreaseSell\n\n    for (let i = 0; i < this._counters.length; i++) {\n      if (chunksToDecrease.length) {\n        Array.prototype.push.apply(\n          this._counters[i].chunks,\n          chunksToDecrease.splice(0, chunksToDecrease.length)\n        )\n\n        if (!this.steps[i].hasData) {\n          this.steps[i].hasData = true\n        }\n      }\n\n      decreaseBuy = 0\n      decreaseSell = 0\n\n      let to = 0\n\n      for (let j = 0; j < this._counters[i].chunks.length; j++) {\n        decreaseBuy += this._counters[i].chunks[j].buy\n        decreaseSell += this._counters[i].chunks[j].sell\n        if (\n          this._counters[i].chunks[j].timestamp >=\n          now - this._counters[i].duration\n        ) {\n          to = j\n          break\n        }\n      }\n\n      if (to) {\n        chunksToDecrease = this._counters[i].chunks.splice(0, to + 1)\n        this.steps[i].buy -= decreaseBuy\n        this.steps[i].sell -= decreaseSell\n      }\n    }\n  }\n\n  formatAmount(amount) {\n    return formatAmount(amount)\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Counters.vue?vue&type=template&id=3b2cb290&\"\nimport script from \"./Counters.vue?vue&type=script&lang=ts&\"\nexport * from \"./Counters.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Counters.vue?vue&type=style&index=0&id=3b2cb290&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}