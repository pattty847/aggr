{"version":3,"sources":["webpack:///./src/mixins/paneMixin.ts","webpack:///./src/components/panes/PaneHeader.vue","webpack:///./src/components/panes/PaneHeader.vue?4649","webpack:///./src/components/panes/PaneHeader.vue?fd01","webpack:///./src/components/panes/PaneHeader.vue?c599","webpack:///./src/components/website/Website.vue?5b67","webpack:///./src/components/website/Website.vue","webpack:///./src/components/website/Website.vue?01b0","webpack:///./src/components/website/Website.vue?9dc2","webpack:///./src/components/website/Website.vue?8e8b"],"names":["PaneMixin","Vue","this","$store","state","panes","paneId","mounted","$el","id","refreshZoom","$nextTick","width","clientWidth","onResize","clientHeight","addEventListener","focusPane","beforeDestroy","removeEventListener","_onStoreMutation","dispatch","commit","Component","props","required","type","String","render","_vm","_c","_self","_setupProxy","staticClass","class","loading","attrs","on","renamePane","_v","_s","name","maximizePane","_t","openSearch","settings","openSettings","_e","toggleDropdown","model","value","paneDropdownTrigger","callback","$$v","expression","$event","stopPropagation","changeZoom","resetZoom","apply","arguments","zoom","toFixed","duplicatePane","removePane","staticRenderFns","constructor","market","marketsListeners","markets","local","event","direction","shiftKey","$emit","dialogService","confirm","highlightPane","parentElement","classList","currentTarget","target","className","el","isMaximized","toggle","siblings","getSiblings","sibling","getAttribute","remove","style","display","cls","Event","window","dispatchEvent","prompt","action","input","open","default","default_1","Function","Boolean","component","ref","scopedSlots","_u","key","fn","domProps","interactive","reload","proxy","locked","directives","rawName","trimmedUrl","url","Mixins","customId","reloadTimer","size","transform","height","pointerEvents","length","slice","substr","onReloadTimerChange","setupReloadTimer","created","$refs","paneHeader","getSettingsDialog","_reloadTimeout","clearTimeout","interval","trim","test","parseFloat","now","Date","delay","Math","ceil","setTimeout","focus","iframe","src","onload","__decorate","Watch","components","PaneHeader"],"mappings":"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","file":"js/chunk-1d61eeb5.a17341d5.js","sourcesContent":["import { Pane } from '@/store/panes'\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\n@Component({\n  props: {\n    paneId: {\n      required: true,\n      type: String\n    }\n  }\n})\nexport default class PaneMixin extends Vue {\n  paneId: string\n  protected _onStoreMutation: () => void\n\n  get pane(): Pane {\n    return this.$store.state.panes.panes[this.paneId]\n  }\n\n  mounted() {\n    this.$el.id = this.paneId\n\n    this.refreshZoom()\n\n    this.$nextTick(() => {\n      const width = this.$el.clientWidth\n\n      if (typeof this.onResize === 'function') {\n        this.onResize(width, this.$el.clientHeight, true)\n      }\n    })\n\n    this.$el.addEventListener('mousedown', this.focusPane)\n  }\n\n  beforeDestroy() {\n    this.$el.removeEventListener('mousedown', this.focusPane)\n\n    if (this._onStoreMutation) {\n      this._onStoreMutation()\n    }\n  }\n\n  refreshZoom() {\n    this.$store.dispatch('panes/refreshZoom', this.paneId)\n  }\n\n  focusPane() {\n    this.$store.commit('app/SET_FOCUSED_PANE', this.paneId)\n  }\n\n  onResize?(newWidth: number, newHeight: number, isMounting?: boolean)\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"pane-header hide-scrollbar pane-overlay d-flex\",class:{ '-loading': _vm.loading }},[_c('div',{staticClass:\"pane-header__loader\"}),_c('span',{staticClass:\"pane-header__name ml4 mrauto\",attrs:{\"data-hide-header\":\"\"},on:{\"dblclick\":_vm.renamePane}},[_vm._v(_vm._s(_vm.name))]),_c('div',{staticClass:\"toolbar flex-grow-1\",on:{\"dblclick\":_vm.maximizePane}},[_vm._t(\"default\"),_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSearch}},[_c('i',{staticClass:\"icon-search\"})]),(_vm.settings)?_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"})]):_vm._e(),_c('button',{staticClass:\"toolbar__label\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.toggleDropdown}},[_c('i',{staticClass:\"icon-more\"})]),_c('dropdown',{model:{value:(_vm.paneDropdownTrigger),callback:function ($$v) {_vm.paneDropdownTrigger=$$v},expression:\"paneDropdownTrigger\"}},[_c('div',{staticClass:\"d-flex btn-group\"},[_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, -1)}}},[_c('i',{staticClass:\"icon-minus\"})]),_c('button',{staticClass:\"btn -green text-monospace flex-grow-1 text-center\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.resetZoom.apply(null, arguments)}}},[_vm._v(\" × \"+_vm._s(_vm.zoom.toFixed(2))+\" \")]),_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, 1)}}},[_c('i',{staticClass:\"icon-plus\"})])]),_vm._t(\"menu\"),(_vm.settings !== null)?_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"}),_c('span',[_vm._v(\"Settings\")])]):_vm._e(),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$store.dispatch('app/showSearch', _vm.paneId)}}},[_c('i',{staticClass:\"icon-search\"}),_c('span',[_vm._v(\"Sources\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.maximizePane}},[_c('i',{staticClass:\"icon-enlarge\"}),_c('span',[_vm._v(\"Maximize\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.duplicatePane}},[_c('i',{staticClass:\"icon-copy-paste\"}),_c('span',[_vm._v(\"Duplicate\")])]),_c('div',{staticClass:\"dropdown--divider\"}),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.removePane}},[_c('i',{staticClass:\"icon-trash\"}),_c('span',[_vm._v(\"Remove\")])])],2)],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\nimport { getSiblings } from '@/utils/helpers'\nimport dialogService from '@/services/dialogService'\n\n@Component({\n  name: 'PaneHeader',\n  props: {\n    paneId: {\n      type: String\n    },\n    settings: {\n      type: Function,\n      default: null\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  }\n})\nexport default class extends Vue {\n  private settings?: () => Promise<any>\n  paneId: string\n  paneDropdownTrigger = null\n\n  get zoom() {\n    return this.$store.state.panes.panes[this.paneId].zoom || 1\n  }\n\n  get type() {\n    return this.$store.state.panes.panes[this.paneId].type\n  }\n\n  get name() {\n    const name = this.$store.state.panes.panes[this.paneId].name\n    const market = this.$store.state.panes.marketsListeners[\n      this.$store.state.panes.panes[this.paneId].markets[0]\n    ]\n\n    if (name) {\n      return name\n    } else if (market) {\n      return market.local\n    } else {\n      return this.type\n    }\n  }\n\n  openSearch() {\n    this.$store.dispatch('app/showSearch', this.paneId)\n  }\n\n  changeZoom(event, direction) {\n    const zoom = this.zoom + (event.shiftKey ? 0.0625 : 0.125) * direction\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: zoom })\n\n    this.$emit('zoom', zoom)\n  }\n\n  resetZoom() {\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: 1 })\n\n    this.$emit('zoom', 1)\n  }\n\n  async removePane() {\n    if (await dialogService.confirm(`Delete pane \"${this.paneId}\" ?`)) {\n      this.$store.dispatch('panes/removePane', this.paneId)\n    }\n  }\n\n  duplicatePane() {\n    this.$store.dispatch('panes/duplicatePane', this.paneId)\n  }\n\n  highlightPane(value: boolean) {\n    this.$el.parentElement.parentElement.classList[value ? 'add' : 'remove'](\n      '-highlight'\n    )\n  }\n\n  maximizePane(event) {\n    if (\n      event.type === 'dblclick' &&\n      event.currentTarget !== event.target &&\n      event.target.className !== 'toolbar__spacer'\n    ) {\n      return\n    }\n\n    const el = this.$el.parentElement.parentElement\n    const isMaximized = el.classList.toggle('-maximized')\n\n    const siblings = getSiblings(el)\n\n    for (const sibling of siblings) {\n      if (!sibling.getAttribute('type')) {\n        continue\n      }\n      sibling.classList.remove('-maximized')\n      sibling.style.display = isMaximized ? 'none' : 'block'\n    }\n\n    const cls = Event as any\n\n    window.dispatchEvent(new cls('resize'))\n  }\n\n  async renamePane() {\n    const name = await dialogService.prompt({\n      action: 'Rename',\n      input: this.name\n    })\n\n    if (name !== this.name) {\n      this.$store.commit('panes/SET_PANE_NAME', { id: this.paneId, name: name })\n    }\n  }\n\n  toggleDropdown(event) {\n    if (this.paneDropdownTrigger) {\n      this.paneDropdownTrigger = null\n    } else {\n      this.paneDropdownTrigger = event.currentTarget\n    }\n  }\n\n  async openSettings() {\n    if (!this.settings) {\n      return\n    }\n\n    dialogService.open((await this.settings()).default, {\n      paneId: this.paneId\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PaneHeader.vue?vue&type=template&id=219eac84&\"\nimport script from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Website.vue?vue&type=style&index=0&id=1a416e95&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"pane-website\"},[_c('pane-header',{ref:\"paneHeader\",attrs:{\"paneId\":_vm.paneId,\"settings\":() => import('@/components/website/WebsiteDialog.vue')},scopedSlots:_vm._u([{key:\"menu\",fn:function(){return [_c('div',{staticClass:\"dropdown-item\"},[_c('label',{staticClass:\"checkbox-control -small\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.interactive},on:{\"change\":function($event){return _vm.$store.commit(_vm.paneId + '/TOGGLE_INTERACTIVE')}}}),_c('div'),_c('span',[_vm._v(\"Interactive\")])])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.reload(true)}}},[_c('i',{staticClass:\"icon-refresh\"}),_c('span',[_vm._v(\"Reload\")])]),_c('div',{staticClass:\"dropdown-divider\"})]},proxy:true}])}),(_vm.locked)?_c('div',{staticClass:\"iframe__lock\"},[_c('div',{staticClass:\"ml8 mr8\"},[_c('p',[_vm._v(\" Load \"),_c('span',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"condensed\",attrs:{\"title\":\"url\"},domProps:{\"textContent\":_vm._s(_vm.trimmedUrl)}}),_vm._v(\" ? \")]),_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$store.commit(_vm.paneId + '/UNLOCK_URL')}}},[_vm._v(\" Yes, authorize \")])])])]):_c('div',{staticClass:\"iframe__wrapper\"},[_c('iframe',{ref:\"iframe\",style:(_vm.style),attrs:{\"src\":_vm.url,\"frameborder\":\"0\",\"width\":\"100%\",\"height\":\"100%\"}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { Component, Mixins, Watch } from 'vue-property-decorator'\n\nimport PaneMixin from '@/mixins/paneMixin'\nimport PaneHeader from '../panes/PaneHeader.vue'\n\n@Component({\n  components: { PaneHeader },\n  name: 'Website'\n})\nexport default class extends Mixins(PaneMixin) {\n  customId = ''\n  private _reloadTimeout: number\n\n  $refs!: {\n    iframe: HTMLIFrameElement\n    paneHeader: PaneHeader\n  }\n\n  get locked() {\n    return this.$store.state[this.paneId].locked\n  }\n\n  get url() {\n    return this.$store.state[this.paneId].url || 'https://chat.aggr.trade'\n  }\n\n  get interactive() {\n    return this.$store.state[this.paneId].interactive\n  }\n\n  get reloadTimer() {\n    return this.$store.state[this.paneId].reloadTimer\n  }\n\n  get zoom() {\n    return this.$store.state.panes.panes[this.paneId].zoom\n  }\n\n  get style() {\n    const size = (1 / this.zoom) * 100\n\n    return {\n      transform: `scale(${this.zoom})`,\n      width: size + '%',\n      height: size + '%',\n      pointerEvents: this.interactive ? 'all' : 'none'\n    }\n  }\n\n  get trimmedUrl() {\n    if (this.url.length <= 33) {\n      return this.url\n    } else {\n      return this.url.slice(0, 15) + '[...]' + this.url.substr(-15)\n    }\n  }\n\n  @Watch('reloadTimer')\n  onReloadTimerChange() {\n    this.setupReloadTimer()\n  }\n\n  created() {\n    this.setupReloadTimer()\n  }\n\n  mounted() {\n    if (!this.$store.state[this.paneId].url) {\n      this.$refs.paneHeader.openSettings()\n    }\n  }\n\n  getSettingsDialog() {\n    return import('@/components/website/WebsiteDialog.vue')\n  }\n\n  beforeDestroy() {\n    if (this._reloadTimeout) {\n      clearTimeout(this._reloadTimeout)\n    }\n  }\n\n  setupReloadTimer() {\n    if (this._reloadTimeout) {\n      clearTimeout(this._reloadTimeout)\n    }\n\n    if (!this.reloadTimer) {\n      return\n    }\n\n    let interval = this.reloadTimer.trim()\n\n    if (/[\\d.]+s/.test(interval)) {\n      interval = parseFloat(interval) * 1000\n    } else if (/[\\d.]+h/.test(interval)) {\n      interval = parseFloat(interval) * 1000 * 60 * 60\n    } else {\n      interval = parseFloat(interval) * 1000 * 60\n    }\n\n    if (!interval) {\n      return\n    }\n\n    const now = Date.now()\n    let delay = Math.ceil(now / interval) * interval - now - 20\n\n    if (delay < 1000) {\n      delay += interval\n    }\n\n    this._reloadTimeout = setTimeout(() => {\n      this._reloadTimeout = null\n\n      this.reload()\n\n      this.setupReloadTimer()\n    }, delay)\n  }\n\n  async reload(focus?: boolean) {\n    this.$refs.iframe.src += ''\n\n    if (focus) {\n      this.$refs.iframe.onload = () => {\n        this.$refs.iframe.onload = null\n\n        this.$refs.iframe.focus()\n      }\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Website.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Website.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Website.vue?vue&type=template&id=1a416e95&scoped=true&\"\nimport script from \"./Website.vue?vue&type=script&lang=ts&\"\nexport * from \"./Website.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Website.vue?vue&type=style&index=0&id=1a416e95&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a416e95\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}