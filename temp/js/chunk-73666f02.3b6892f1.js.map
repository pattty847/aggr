{"version":3,"sources":["webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/dexie-export-import/dist/dexie-export-import.mjs","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/dexie/dist/dexie.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/isarray/index.js"],"names":["exports","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","Uint8Array","Array","code","i","len","length","charCodeAt","getLens","b64","Error","validLen","indexOf","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","push","join","extraBytes","parts","maxChunkLength","len2","nextTick","fn","args","prototype","slice","call","arguments","shift","setTimeout","apply","platform","arch","execPath","title","pid","browser","env","argv","binding","name","path","cwd","chdir","dir","resolve","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","log","LN2","__awaiter","thisArg","_arguments","P","generator","adopt","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","pop","getSchemaString","table","primKeyAndIndexes","schema","primKey","concat","indexes","map","index","src","extractDbSchema","exportedDb","_i","_a","tables","readBlobAsync","blob","type","reader","FileReader","onabort","ev","onerror","target","error","onload","readAsArrayBuffer","readAsText","readBlobSync","FileReaderSync","data","commonjsGlobal","globalThis","window","global","self","createCommonjsModule","module","typeson","constructor","isArray","Object","r","o","return","from","keys","toString","getPrototypeOf","hasOwnProperty","a","u","isThenable","Typeson","isObject","catch","toStringTag","hasConstructorOf","isPlainObject","types","p","stringify","assign","stringification","l","JSON","stringifySync","throwOnBadSyncType","sync","stringifyAsync","parse","h","parseSync","parseAsync","specialTypeNames","returnTypeNames","encapsulate","rootTypeName","iterateNone","b","O","cyclic","encapsulateObserver","T","_encapsulate","finish","values","getJSONType","Set","$types","$","checkPromises","all","splice","TypesonPromise","_adaptBuiltinStateObjectProperties","forEach","keypath","stateObj","promisesData","resolvingTypesonPromise","awaitingTypesonPromise","string","boolean","number","undefined","replace","replaced","iterateIn","iterateUnsetNumeric","cyclicKeypath","j","S","clone","w","ownKeys","escapeKeyPathComponent","A","endIterateIn","endIterateOwn","C","N","B","endIterateUnsetNumeric","test","replaceAsync","replacing","typeDetected","encapsulateSync","encapsulateAsync","revive","_revive","Undefined","getByKeyPath","substr","reduce","reviveAsync","reviveSync","register","R","JSON_TYPES","includes","testPlainObjects","filter","create","bind","fallback","unescapeKeyPathComponent","isUserObject","structuredCloning","userObject","sparseArrays","sparseUndefined","undef","StringObject","String","BooleanObject","Boolean","NumberObject","Number","nan","infinity","negativeInfinity","date","getTime","Date","regexp","source","flags","ignoreCase","multiline","sticky","unicode","RegExp","entries","Map","set","substring","ArrayBuffer","arraybuffer","buffers","toLowerCase","byteOffset","encoded","dataview","DataView","IntlCollator","Intl","Collator","resolvedOptions","locale","IntlDateTimeFormat","DateTimeFormat","IntlNumberFormat","NumberFormat","string2arraybuffer","Uint16Array","file","XMLHttpRequest","open","URL","createObjectURL","TextEncoder","overrideMimeType","status","send","stringContents","responseText","lastModified","File","isClosed","addEventListener","imagedata","array","width","height","ImageData","Uint8ClampedArray","imagebitmap","dataset","document","createElement","getContext","drawImage","toDataURL","createImageBitmap","filelist","item","FileList","_files","Blob","chars","encode","bytes","base64","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","_i2","_global","exportObj","typeName","arrType","TypedArray","x","b64Obj","arrayBuffer","TSON","readBlobsSynchronously","blobsToAwait","blobsToAwaitPos","blob2","size","finalize","ba","mustFinalize","items","allChunks","items_1","arrayType","keyPath","typeSpec","DEFAULT_ROWS_PER_CHUNK","exportDB","db","options","exportAll","tablesRowCounts","emptyExportJson","posEndDataArray","firstJsonSlice","_loop_1","tables_1","tableName","count","rowCount","progress","totalRows","emptyExport","prettyJson","lastIndexOf","slices","inbound","LIMIT","emptyTableExport","emptyTableExportJson","posEndRowsArray","lastKey","lastNumRows","mayHaveMoreRows","_loop_2","state_1","_b","numRowsPerChunk","rows","split","chunkedCollection","filteredValues","tsonValues","keyvals","tsonTuples","json","_c","progressCallback","ignoreTransaction","limit","where","above","toArray","waitFor","primaryKeys","key","tuple","completedRows","completedTables","totalTables","formatName","formatVersion","databaseName","databaseVersion","verno","noTransaction","transaction","VERSION","fakeStream","Stream","clarinet_1","clarinet","process","parser","opt","CParser","CStream","createStream","MAX_BUFFER_LENGTH","DEBUG","CDEBUG","INFO","EVENTS","textNode","numberNode","streamWraps","s_","STATE","BEGIN","VALUE","OPEN_OBJECT","CLOSE_OBJECT","OPEN_ARRAY","CLOSE_ARRAY","TEXT_ESCAPE","STRING","BACKSLASH","END","OPEN_KEY","CLOSE_KEY","TRUE","TRUE2","TRUE3","FALSE","FALSE2","FALSE3","FALSE4","NULL","NULL2","NULL3","NUMBER_DECIMAL_POINT","NUMBER_DIGIT","Char","tab","lineFeed","carriageReturn","space","doubleQuote","plus","comma","minus","period","_0","_9","colon","E","openBracket","backslash","closeBracket","openBrace","closeBrace","checkBufferLength","maxAllowed","max","maxActual","closeText","bufferCheckPosition","position","clearBuffers","stringTokenPattern","q","closed","closedRoot","sawRoot","tag","state","stack","column","line","slashed","unicodeI","unicodeS","depth","emit","resume","close","ex","_parser","writable","readable","bytes_remaining","bytes_in_sequence","temp_buffs","Buffer","me","onend","er","defineProperty","get","removeAllListeners","on","enumerable","configurable","event","emitNode","closeValue","textopts","closeNumber","parseFloat","text","trim","normalize","isWhitespace","chunk","fromCharCode","starti","STRING_BIGLOOP","parseInt","lastIndex","reResult","exec","k","handler","destroy","JsonStream","pos","JsonParser","rv","pullAsync","numBytes","slize","jsonPart","pullSync","eof","allowPartial","obj","level","onopenobject","newKey","newObj","onkey","onvalue","oncloseobject","incomplete","completedObj","onopenarray","onclosearray","DEFAULT_KILOBYTES_PER_CHUNK","importDB","exportedData","CHUNK_SIZE","stream","dbExport","chunkSizeBytes","loadUntilWeGotEnoughData","version","stores","importInto","peakImportFile","importAll","tableExport","tableSchemaStr","sourceRows","filteredRows","_d","acceptMissingTables","acceptChangedPrimaryKey","row","overwriteValues","bulkPut","bulkAdd","jsonStream","dbExportFile","acceptNameDiff","acceptVersionDiff","clearTablesBeforeImport","clear","export","import","dexieExportImport","ieee754","typedArraySupport","__proto__","foo","subarray","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","arg","encodingOrOffset","allocUnsafe","fromArrayBuffer","fromString","fromObject","assertSize","alloc","fill","encoding","checked","isEncoding","actual","fromArrayLike","isBuffer","copy","isnan","SlowBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","val","arrayIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","decodeCodePointsArray","INSPECT_MAX_BYTES","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","compare","list","swap16","swap32","swap64","equals","inspect","str","match","thisStart","thisEnd","thisCopy","targetCopy","isFinite","toJSON","_arr","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","base64clean","stringtrim","units","leadSurrogate","byteArray","hi","lo","dst","factory","__assign","__spreadArray","to","pack","ar","extend","extension","getProto","_hasOwn","hasOwn","prop","props","proto","Reflect","setProp","functionOrGetSet","derive","Child","Parent","getOwnPropertyDescriptor","getPropertyDescriptor","pd","_slice","override","origFunc","overridedFactory","assert","asap$1","setImmediate","arrayToObject","extractor","nameAndValue","tryCatch","innerObj","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","delByKeyPath","kp","shallowClone","flatten","intrinsicTypeNames","intrinsicTypes","circularRefs","deepClone","any","WeakMap","innerDeepClone","iteratorSymbol","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","isAsyncFunction","debug","location","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","getErrorWithStack","prettyStack","exception","numIgnoredFrames","message","frame","dexieErrorNames","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","_e","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","failuresByPos","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","Range","exceptionMap","mapError","domError","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","onsuccess","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","LONG_STACKS_CLIP_LIMIT","MAX_LONG_STACKS","ZONE_ECHO_LIMIT","_a$1","globalP","crypto","subtle","nativeP","digest","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","observe","attributes","setAttribute","asap","callback","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","id","ref","unhandleds","onunhandled","globalError","pgp","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","reason","_promise","origProp","addPossiblyUnhandledError","listeners","finalizePhysicalTick","listener","cb","callListener","markErrorAsHandled","getStack","stacks","errorName","failure","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","run_at_end_of_this_or_next_physical_tick","finalizer","some","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","err","finally","onFinally","timeout","ms","handle","Timeout","clearTimeout","snapShot","onPossibleParallellAsync","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","allSettled","possiblePromises","results","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise_1","targetEnv","GlobalPromise","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","tempTransaction","mode","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","_completion","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","DEXIE_VERSION","maxString","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","checkTableInTransaction","NotFound","idbtrans","transless","keyOrCrit","first","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","compoundIndex","ix","compound","every","_maxKey","idxByName","idb","_deps","indexedDB","cmp","prevIndex","prevFilterFn","multi","idx","filterFunction","toCollection","and","thenShortcut","numRows","each","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","unsubscribe","defineClass","Class","content","add","auto","objToAdd","mutate","numFailures","lastResult","update","keyOrObject","modify","InvalidArgument","put","delete","range","bulkGet","getMany","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","makeClassConstructor","createTableConstructor","tableSchema","_allTables","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","isLimitFilter","curr","addMatchFilter","isMatch","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","unique","query","iter","coreTrans","set_1","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","mappedFn","wrappedFn","continue","advancer","ta","tb","compareUint8Arrays","getUint8Array","compareArrays","al","bl","tsTag","_read","_ctx","_write","_addAlgorithm","raw","sortBy","lastPart","getval","order","sorter","aVal","bVal","sort","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","uniqueKeys","firstKey","distinct","strKey","changes","modifyer","anythingModified","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","nextChunk","cache","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","criteria","deleteCallback","changeSpec","coreRange","createCollectionConstructor","whereClause","keyRangeGenerator","keyRange","whereCtx","readingHook","simpleCompare","simpleCompareReverse","collectionOrWhereClause","collection","emptyCollection","rangeEqual","upperFactory","toUpperCase","lowerFactory","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","needles","suffix","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","between","includeLower","includeUpper","_cmp","aboveOrEqual","below","belowOrEqual","startsWith","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","_max","addRange","newRange","sortDirection","rangeSorter","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","keyWithinCurrentRange","checkKey","startsWithAnyOf","createWhereClauseConstructor","orCollection","_IDBKeyRange","IDBKeyRange","eventRejectHandler","preventDefault","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","OpenFailed","active","durability","chromeTransactionDurability","_reject","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","transactionBoundTable","createTransactionConstructor","dbschema","complete","wasActive","createIndexSpec","nameFromKeyPath","createTableSchema","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","extractSchema","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","makeIDBKeyRange","idbRange","upperBound","lowerBound","bound","createDbCoreTable","isAddOrPut","req","reqs","errorHandler","args1","args2","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsNotStarted","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","request","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","count_1","req_1","result_1","keyCount","callbackCount","successHandler","_pos","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStack","stackImpl","middlewares","down","createMiddlewareStacks","dbcore","generateMiddlewareStacks","_novip","_middlewares","tbl","setApiOnPlace","objs","tableNames","propDesc","removeTablesApi","lowerVersionFirst","_cfg","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","updateTablesAndIndexes","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","versToRun","runQueue","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","change","recreate","Upgrade","store_1","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema_1","returnValue_1","contentUpgradeIsAsync_1","promiseFollowed","decrementor","deleteRemovedTables","createMissingTables","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","contains","storeName","deleteObjectStore","createIndex","dbStoreNames","idbindex","readGlobalSchema","verifyInstalledSchema","installedSchema","ch","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","parseIndexSyntax","indexNum","Version","_parseStoresSpec","outSchema","storesSource","storesSpec","upgrade","upgradeFunction","createVersionConstructor","versionNumber","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","getDatabaseNames","infos","info","_onDatabaseCreated","_onDatabaseDeleted","vip","idbReady","intervalId","isSafari","userAgentData","tryIdb","setInterval","clearInterval","dexieOpen","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","round","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","delreq","deleteDatabase","NoSuchDatabase","oldVer","onversionchange","vcFired","onclose","onReadyBeingFired","ready","fireRemainders","remainders_1","awaitIterator","callNext","doThrow","throw","onSuccess","onError","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","returnValue","scopeFuncIsAsync","PrematureCommit","pad","createVirtualIndexMiddleware","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","virtualKeyPath","findBestIndex","translateRange","translateRequest","createVirtualCursor","_continue","virtualCursor","virtualIndexMiddleware","getObjectDiff","prfx","ap","bp","apTypeName","bpTypeName","getEffectiveKeys","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteRange","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deleteNextChunk","effectiveKeys","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","node","RangeSet","fromOrTree","left","right","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","getRangeSetIterator","nextResult1","i2","nextResult2","keyProvided","up","rootClone","oldRootRight","computeDepth","rangeSet","addKey","addKeys","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","part","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","trackAffectedIndexes","getRange","readSubscribers","method","subscr","pkRangeSet_1","delsRangeSet_1","queriedIndex","queriedRanges","keysPromise_1","resultingKeys","pKeys","cursor_1","wantValues_1","pkey","addAffectedIndex","addKeyOrKeys","oldKey","domDeps","Dexie","deps","dependencies","cancelOpen","bSticky","db_1","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","idbMode","onlyIfCompatible","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","observer","execute","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","propagateLocally","updateParts","wasMe","propagatingLocally","exists","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","semVer","maxKey","updatedParts","event_1","initCustomEvent","BroadcastChannel","bc_1","changedParts","postMessage","onmessage","localStorage","setItem","trig","random","matchAll","includeUncontrolled","client","newValue","swContainer","serviceWorker","propagateMessageLocally","namedExports","freeze","default","normalizeArray","allowAboveRoot","unshift","basename","matchedSlash","xs","resolvedPath","resolvedAbsolute","charAt","isAbsolute","trailingSlash","paths","relative","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","extname","startDot","startPart","preDotState"],"mappings":"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","file":"js/chunk-73666f02.3b6892f1.js","sourcesContent":["'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/* ========================================================================== \n *                           dexie-export-import.js\n * ==========================================================================\n *\n * Dexie addon for exporting and importing databases to / from Blobs.\n *\n * By David Fahlander, david.fahlander@gmail.com,\n *\n * ==========================================================================\n *\n * Version 1.0.3, Fri Jul 02 2021\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n * \n */\n\nimport Dexie from 'dexie';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nfunction getSchemaString(table) {\n    var primKeyAndIndexes = [table.schema.primKey].concat(table.schema.indexes);\n    return primKeyAndIndexes.map(function (index) { return index.src; }).join(',');\n}\nfunction extractDbSchema(exportedDb) {\n    var schema = {};\n    for (var _i = 0, _a = exportedDb.tables; _i < _a.length; _i++) {\n        var table = _a[_i];\n        schema[table.name] = table.schema;\n    }\n    return schema;\n}\nfunction readBlobAsync(blob, type) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onabort = function (ev) { return reject(new Error(\"file read aborted\")); };\n        reader.onerror = function (ev) { return reject(ev.target.error); };\n        reader.onload = function (ev) { return resolve(ev.target.result); };\n        if (type === 'binary')\n            reader.readAsArrayBuffer(blob);\n        else\n            reader.readAsText(blob);\n    });\n}\nfunction readBlobSync(blob, type) {\n    if (typeof FileReaderSync === 'undefined') {\n        throw new Error('FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.');\n    }\n    var reader = new FileReaderSync(); // Requires worker environment\n    var data = type === 'binary' ?\n        reader.readAsArrayBuffer(blob) :\n        reader.readAsText(blob);\n    return data;\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar typeson = createCommonjsModule(function (module, exports) {\n!function(e,n){module.exports=n();}(commonjsGlobal,function(){var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(t.push(s.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e;}finally{try{!r&&c.return&&c.return();}finally{if(i)throw o}}return t}(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),t=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,s=Object.getPrototypeOf,c={}.hasOwnProperty,a=c.toString,u=[\"type\",\"replaced\",\"iterateIn\",\"iterateUnsetNumeric\"];function isThenable(e,n){return Typeson.isObject(e)&&\"function\"==typeof e.then&&(!n||\"function\"==typeof e.catch)}function toStringTag(e){return o.call(e).slice(8,-1)}function hasConstructorOf(n,t){if(!n||\"object\"!==(void 0===n?\"undefined\":e(n)))return !1;var r=s(n);if(!r)return !1;var i=c.call(r,\"constructor\")&&r.constructor;return \"function\"!=typeof i?null===t:\"function\"==typeof i&&null!==t&&a.call(i)===a.call(t)}function isPlainObject(e){return !(!e||\"Object\"!==toStringTag(e))&&(!s(e)||hasConstructorOf(e,Object))}function isObject(n){return n&&\"object\"===(void 0===n?\"undefined\":e(n))}function Typeson(o){var s=[],c=[],a={},y=this.types={},p=this.stringify=function(e,n,t,r){r=Object.assign({},o,r,{stringification:!0});var s=l(e,null,r);return i(s)?JSON.stringify(s[0],n,t):s.then(function(e){return JSON.stringify(e,n,t)})};this.stringifySync=function(e,n,t,r){return p(e,n,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,n,t,r){return p(e,n,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var f=this.parse=function(e,n,t){return t=Object.assign({},o,t,{parse:!0}),h(JSON.parse(e,n),t)};this.parseSync=function(e,n,t){return f(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.parseAsync=function(e,n,t){return f(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.specialTypeNames=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.returnTypeNames=!0,this.encapsulate(e,n,t)},this.rootTypeName=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.iterateNone=!0,this.encapsulate(e,n,t)};var l=this.encapsulate=function(y,p,f){var l=(f=Object.assign({sync:!0},o,f)).sync,h={},v=[],d=[],b=[],O=!(f&&\"cyclic\"in f)||f.cyclic,m=f.encapsulateObserver,T=_encapsulate(\"\",y,O,p||{},b);function finish(e){var n=Object.values(h);if(f.iterateNone)return n.length?n[0]:Typeson.getJSONType(e);if(n.length){if(f.returnTypeNames)return [].concat(t(new Set(n)));e&&isPlainObject(e)&&!e.hasOwnProperty(\"$types\")?e.$types=h:e={$:e,$types:{$:h}};}else isObject(e)&&e.hasOwnProperty(\"$types\")&&(e={$:e,$types:!0});return !f.returnTypeNames&&e}return b.length?l&&f.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():Promise.resolve(function checkPromises(e,t){return Promise.all(t.map(function(e){return e[1].p})).then(function(r){return Promise.all(r.map(function(r){var i=[],o=t.splice(0,1)[0],s=n(o,7),c=s[0],a=s[2],u=s[3],y=s[4],p=s[5],f=s[6],l=_encapsulate(c,r,a,u,i,!0,f),h=hasConstructorOf(l,TypesonPromise);return c&&h?l.p.then(function(n){return y[p]=n,checkPromises(e,i)}):(c?y[p]=l:e=h?l.p:l,checkPromises(e,i))}))}).then(function(){return e})}(T,b)).then(finish):!l&&f.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():f.stringification&&l?[finish(T)]:l?finish(T):Promise.resolve(finish(T));function _adaptBuiltinStateObjectProperties(e,n,t){Object.assign(e,n);var r=u.map(function(n){var t=e[n];return delete e[n],t});t(),u.forEach(function(n,t){e[n]=r[t];});}function _encapsulate(n,t,o,c,a,u,y){var p=void 0,l={},b=void 0===t?\"undefined\":e(t),O=m?function(e){var r=y||c.type||Typeson.getJSONType(t);m(Object.assign(e||l,{keypath:n,value:t,cyclic:o,stateObj:c,promisesData:a,resolvingTypesonPromise:u,awaitingTypesonPromise:hasConstructorOf(t,TypesonPromise)},void 0!==r?{type:r}:{}));}:null;if(b in{string:1,boolean:1,number:1,undefined:1})return void 0===t||\"number\"===b&&(isNaN(t)||t===-1/0||t===1/0)?(p=replace(n,t,c,a,!1,u,O))!==t&&(l={replaced:p}):p=t,O&&O(),p;if(null===t)return O&&O(),t;if(o&&!c.iterateIn&&!c.iterateUnsetNumeric){var T=v.indexOf(t);if(!(T<0))return h[n]=\"#\",O&&O({cyclicKeypath:d[T]}),\"#\"+d[T];!0===o&&(v.push(t),d.push(n));}var g=isPlainObject(t),P=i(t),j=(g||P)&&(!s.length||c.replaced)||c.iterateIn?t:replace(n,t,c,a,g||P,null,O),S=void 0;if(j!==t?(p=j,l={replaced:j}):P||\"array\"===c.iterateIn?(S=new Array(t.length),l={clone:S}):g||\"object\"===c.iterateIn?l={clone:S={}}:\"\"===n&&hasConstructorOf(t,TypesonPromise)?(a.push([n,t,o,c,void 0,void 0,c.type]),p=t):p=t,O&&O(),f.iterateNone)return S||p;if(!S)return p;if(c.iterateIn){var w=function _loop(e){var r={ownKeys:t.hasOwnProperty(e)};_adaptBuiltinStateObjectProperties(c,r,function(){var r=n+(n?\".\":\"\")+escapeKeyPathComponent(e),i=_encapsulate(r,t[e],!!o,c,a,u);hasConstructorOf(i,TypesonPromise)?a.push([r,i,!!o,c,S,e,c.type]):void 0!==i&&(S[e]=i);});};for(var A in t)w(A);O&&O({endIterateIn:!0,end:!0});}else r(t).forEach(function(e){var r=n+(n?\".\":\"\")+escapeKeyPathComponent(e);_adaptBuiltinStateObjectProperties(c,{ownKeys:!0},function(){var n=_encapsulate(r,t[e],!!o,c,a,u);hasConstructorOf(n,TypesonPromise)?a.push([r,n,!!o,c,S,e,c.type]):void 0!==n&&(S[e]=n);});}),O&&O({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var C=t.length,N=function _loop2(e){if(!(e in t)){var r=n+(n?\".\":\"\")+e;_adaptBuiltinStateObjectProperties(c,{ownKeys:!1},function(){var n=_encapsulate(r,void 0,!!o,c,a,u);hasConstructorOf(n,TypesonPromise)?a.push([r,n,!!o,c,S,e,c.type]):void 0!==n&&(S[e]=n);});}},B=0;B<C;B++)N(B);O&&O({endIterateUnsetNumeric:!0,end:!0});}return S}function replace(e,n,t,r,i,o,u){for(var y=i?s:c,p=y.length;p--;){var f=y[p];if(f.test(n,t)){var v=f.type;if(a[v]){var d=h[e];h[e]=d?[v].concat(d):v;}return Object.assign(t,{type:v,replaced:!0}),!l&&f.replaceAsync||f.replace?(u&&u({replacing:!0}),_encapsulate(e,f[l||!f.replaceAsync?\"replace\":\"replaceAsync\"](n,t),O&&\"readonly\",t,r,o,v)):(u&&u({typeDetected:!0}),_encapsulate(e,n,O&&\"readonly\",t,r,o,v))}}return n}};this.encapsulateSync=function(e,n,t){return l(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.encapsulateAsync=function(e,n,t){return l(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))};var h=this.revive=function(e,t){var s=(t=Object.assign({sync:!0},o,t)).sync,c=e&&e.$types,u=!0;if(!c)return e;if(!0===c)return e.$;c.$&&isPlainObject(c.$)&&(e=e.$,c=c.$,u=!1);var y=[],p={},f=function _revive(e,t,o,s,f,l){if(u&&\"$types\"===e)return;var h=c[e];if(i(t)||isPlainObject(t)){var v=i(t)?new Array(t.length):{};for(r(t).forEach(function(n){var r=_revive(e+(e?\".\":\"\")+escapeKeyPathComponent(n),t[n],o||v,s,v,n);hasConstructorOf(r,Undefined)?v[n]=void 0:void 0!==r&&(v[n]=r);}),t=v;y.length;){var d=n(y[0],4),b=d[0],O=d[1],m=d[2],T=d[3],g=getByKeyPath(b,O);if(hasConstructorOf(g,Undefined))m[T]=void 0;else {if(void 0===g)break;m[T]=g;}y.splice(0,1);}}if(!h)return t;if(\"#\"===h){var P=getByKeyPath(o,t.substr(1));return void 0===P&&y.push([o,t.substr(1),f,l]),P}var j=s.sync;return [].concat(h).reduce(function(e,n){var t=a[n];if(!t)throw new Error(\"Unregistered type: \"+n);return t[j&&t.revive?\"revive\":!j&&t.reviveAsync?\"reviveAsync\":\"revive\"](e,p)},t)}(\"\",e,null,t);return isThenable(f=hasConstructorOf(f,Undefined)?void 0:f)?s&&t.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():f:!s&&t.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():s?f:Promise.resolve(f)};this.reviveSync=function(e,n){return h(e,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.reviveAsync=function(e,n){return h(e,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.register=function(e,n){return n=n||{},[].concat(e).forEach(function R(e){if(i(e))return e.map(R);e&&r(e).forEach(function(t){if(\"#\"===t)throw new TypeError(\"# cannot be used as a type name as it is reserved for cyclic objects\");if(Typeson.JSON_TYPES.includes(t))throw new TypeError(\"Plain JSON object types are reserved as type names\");var r=e[t],o=r.testPlainObjects?s:c,u=o.filter(function(e){return e.type===t});if(u.length&&(o.splice(o.indexOf(u[0]),1),delete a[t],delete y[t]),r){if(\"function\"==typeof r){var p=r;r={test:function test(e){return e&&e.constructor===p},replace:function replace(e){return assign({},e)},revive:function revive(e){return assign(Object.create(p.prototype),e)}};}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var f={type:t,test:r.test.bind(r)};r.replace&&(f.replace=r.replace.bind(r)),r.replaceAsync&&(f.replaceAsync=r.replaceAsync.bind(r));var l=\"number\"==typeof n.fallback?n.fallback:n.fallback?0:1/0;if(r.testPlainObjects?s.splice(l,0,f):c.splice(l,0,f),r.revive||r.reviveAsync){var h={};r.revive&&(h.revive=r.revive.bind(r)),r.reviveAsync&&(h.reviveAsync=r.reviveAsync.bind(r)),a[t]=h;}y[t]=r;}});}),this};}function assign(e,n){return r(n).map(function(t){e[t]=n[t];}),e}function escapeKeyPathComponent(e){return e.replace(/~/g,\"~0\").replace(/\\./g,\"~1\")}function unescapeKeyPathComponent(e){return e.replace(/~1/g,\".\").replace(/~0/g,\"~\")}function getByKeyPath(e,n){if(\"\"===n)return e;var t=n.indexOf(\".\");if(t>-1){var r=e[unescapeKeyPathComponent(n.substr(0,t))];return void 0===r?void 0:getByKeyPath(r,n.substr(t+1))}return e[unescapeKeyPathComponent(n)]}function Undefined(){}function TypesonPromise(e){this.p=new Promise(e);}return TypesonPromise.prototype.then=function(e,n){var t=this;return new TypesonPromise(function(r,i){t.p.then(function(n){r(e?e(n):n);},function(e){t.p.catch(function(e){return n?n(e):Promise.reject(e)}).then(r,i);});})},TypesonPromise.prototype.catch=function(e){return this.then(null,e)},TypesonPromise.resolve=function(e){return new TypesonPromise(function(n){n(e);})},TypesonPromise.reject=function(e){return new TypesonPromise(function(n,t){t(e);})},[\"all\",\"race\"].map(function(e){TypesonPromise[e]=function(n){return new TypesonPromise(function(t,r){Promise[e](n.map(function(e){return e.p})).then(t,r);})};}),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(e){if(!e||\"Object\"!==toStringTag(e))return !1;var n=s(e);return !n||hasConstructorOf(e,Object)||isUserObject(n)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(n){return null===n?\"null\":i(n)?\"array\":void 0===n?\"undefined\":e(n)},Typeson.JSON_TYPES=[\"null\",\"boolean\",\"number\",\"string\",\"array\",\"object\"],Typeson});\n});\n\nvar structuredCloning = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function(){var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e;}finally{try{!r&&a.return&&a.return();}finally{if(i)throw o}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,s=Object.getPrototypeOf,a={}.hasOwnProperty,c=a.toString,u=[\"type\",\"replaced\",\"iterateIn\",\"iterateUnsetNumeric\"];function isThenable(e,t){return Typeson.isObject(e)&&\"function\"==typeof e.then&&(!t||\"function\"==typeof e.catch)}function toStringTag(e){return o.call(e).slice(8,-1)}function hasConstructorOf(t,n){if(!t||\"object\"!==(void 0===t?\"undefined\":e(t)))return !1;var r=s(t);if(!r)return !1;var i=a.call(r,\"constructor\")&&r.constructor;return \"function\"!=typeof i?null===n:\"function\"==typeof i&&null!==n&&c.call(i)===c.call(n)}function isPlainObject(e){return !(!e||\"Object\"!==toStringTag(e))&&(!s(e)||hasConstructorOf(e,Object))}function isObject(t){return t&&\"object\"===(void 0===t?\"undefined\":e(t))}function Typeson(o){var s=[],a=[],c={},f=this.types={},p=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var s=y(e,null,r);return i(s)?JSON.stringify(s[0],t,n):s.then(function(e){return JSON.stringify(e,t,n)})};this.stringifySync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var l=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),v(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var y=this.encapsulate=function(f,p,l){var y=(l=Object.assign({sync:!0},o,l)).sync,v={},d=[],h=[],g=[],b=!(l&&\"cyclic\"in l)||l.cyclic,m=l.encapsulateObserver,T=_encapsulate(\"\",f,b,p||{},g);function finish(e){var t=Object.values(v);if(l.iterateNone)return t.length?t[0]:Typeson.getJSONType(e);if(t.length){if(l.returnTypeNames)return [].concat(n(new Set(t)));e&&isPlainObject(e)&&!e.hasOwnProperty(\"$types\")?e.$types=v:e={$:e,$types:{$:v}};}else isObject(e)&&e.hasOwnProperty(\"$types\")&&(e={$:e,$types:!0});return !l.returnTypeNames&&e}return g.length?y&&l.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():Promise.resolve(function checkPromises(e,n){return Promise.all(n.map(function(e){return e[1].p})).then(function(r){return Promise.all(r.map(function(r){var i=[],o=n.splice(0,1)[0],s=t(o,7),a=s[0],c=s[2],u=s[3],f=s[4],p=s[5],l=s[6],y=_encapsulate(a,r,c,u,i,!0,l),v=hasConstructorOf(y,TypesonPromise);return a&&v?y.p.then(function(t){return f[p]=t,checkPromises(e,i)}):(a?f[p]=y:e=v?y.p:y,checkPromises(e,i))}))}).then(function(){return e})}(T,g)).then(finish):!y&&l.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():l.stringification&&y?[finish(T)]:y?finish(T):Promise.resolve(finish(T));function _adaptBuiltinStateObjectProperties(e,t,n){Object.assign(e,t);var r=u.map(function(t){var n=e[t];return delete e[t],n});n(),u.forEach(function(t,n){e[t]=r[n];});}function _encapsulate(t,n,o,a,c,u,f){var p=void 0,y={},g=void 0===n?\"undefined\":e(n),b=m?function(e){var r=f||a.type||Typeson.getJSONType(n);m(Object.assign(e||y,{keypath:t,value:n,cyclic:o,stateObj:a,promisesData:c,resolvingTypesonPromise:u,awaitingTypesonPromise:hasConstructorOf(n,TypesonPromise)},void 0!==r?{type:r}:{}));}:null;if(g in{string:1,boolean:1,number:1,undefined:1})return void 0===n||\"number\"===g&&(isNaN(n)||n===-1/0||n===1/0)?(p=replace(t,n,a,c,!1,u,b))!==n&&(y={replaced:p}):p=n,b&&b(),p;if(null===n)return b&&b(),n;if(o&&!a.iterateIn&&!a.iterateUnsetNumeric){var T=d.indexOf(n);if(!(T<0))return v[t]=\"#\",b&&b({cyclicKeypath:h[T]}),\"#\"+h[T];!0===o&&(d.push(n),h.push(t));}var O=isPlainObject(n),w=i(n),S=(O||w)&&(!s.length||a.replaced)||a.iterateIn?n:replace(t,n,a,c,O||w,null,b),P=void 0;if(S!==n?(p=S,y={replaced:S}):w||\"array\"===a.iterateIn?(P=new Array(n.length),y={clone:P}):O||\"object\"===a.iterateIn?y={clone:P={}}:\"\"===t&&hasConstructorOf(n,TypesonPromise)?(c.push([t,n,o,a,void 0,void 0,a.type]),p=n):p=n,b&&b(),l.iterateNone)return P||p;if(!P)return p;if(a.iterateIn){var j=function _loop(e){var r={ownKeys:n.hasOwnProperty(e)};_adaptBuiltinStateObjectProperties(a,r,function(){var r=t+(t?\".\":\"\")+escapeKeyPathComponent(e),i=_encapsulate(r,n[e],!!o,a,c,u);hasConstructorOf(i,TypesonPromise)?c.push([r,i,!!o,a,P,e,a.type]):void 0!==i&&(P[e]=i);});};for(var A in n)j(A);b&&b({endIterateIn:!0,end:!0});}else r(n).forEach(function(e){var r=t+(t?\".\":\"\")+escapeKeyPathComponent(e);_adaptBuiltinStateObjectProperties(a,{ownKeys:!0},function(){var t=_encapsulate(r,n[e],!!o,a,c,u);hasConstructorOf(t,TypesonPromise)?c.push([r,t,!!o,a,P,e,a.type]):void 0!==t&&(P[e]=t);});}),b&&b({endIterateOwn:!0,end:!0});if(a.iterateUnsetNumeric){for(var C=n.length,N=function _loop2(e){if(!(e in n)){var r=t+(t?\".\":\"\")+e;_adaptBuiltinStateObjectProperties(a,{ownKeys:!1},function(){var t=_encapsulate(r,void 0,!!o,a,c,u);hasConstructorOf(t,TypesonPromise)?c.push([r,t,!!o,a,P,e,a.type]):void 0!==t&&(P[e]=t);});}},B=0;B<C;B++)N(B);b&&b({endIterateUnsetNumeric:!0,end:!0});}return P}function replace(e,t,n,r,i,o,u){for(var f=i?s:a,p=f.length;p--;){var l=f[p];if(l.test(t,n)){var d=l.type;if(c[d]){var h=v[e];v[e]=h?[d].concat(h):d;}return Object.assign(n,{type:d,replaced:!0}),!y&&l.replaceAsync||l.replace?(u&&u({replacing:!0}),_encapsulate(e,l[y||!l.replaceAsync?\"replace\":\"replaceAsync\"](t,n),b&&\"readonly\",n,r,o,d)):(u&&u({typeDetected:!0}),_encapsulate(e,t,b&&\"readonly\",n,r,o,d))}}return t}};this.encapsulateSync=function(e,t,n){return y(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return y(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var v=this.revive=function(e,n){var s=(n=Object.assign({sync:!0},o,n)).sync,a=e&&e.$types,u=!0;if(!a)return e;if(!0===a)return e.$;a.$&&isPlainObject(a.$)&&(e=e.$,a=a.$,u=!1);var f=[],p={},l=function _revive(e,n,o,s,l,y){if(u&&\"$types\"===e)return;var v=a[e];if(i(n)||isPlainObject(n)){var d=i(n)?new Array(n.length):{};for(r(n).forEach(function(t){var r=_revive(e+(e?\".\":\"\")+escapeKeyPathComponent(t),n[t],o||d,s,d,t);hasConstructorOf(r,Undefined)?d[t]=void 0:void 0!==r&&(d[t]=r);}),n=d;f.length;){var h=t(f[0],4),g=h[0],b=h[1],m=h[2],T=h[3],O=getByKeyPath(g,b);if(hasConstructorOf(O,Undefined))m[T]=void 0;else {if(void 0===O)break;m[T]=O;}f.splice(0,1);}}if(!v)return n;if(\"#\"===v){var w=getByKeyPath(o,n.substr(1));return void 0===w&&f.push([o,n.substr(1),l,y]),w}var S=s.sync;return [].concat(v).reduce(function(e,t){var n=c[t];if(!n)throw new Error(\"Unregistered type: \"+t);return n[S&&n.revive?\"revive\":!S&&n.reviveAsync?\"reviveAsync\":\"revive\"](e,p)},n)}(\"\",e,null,n);return isThenable(l=hasConstructorOf(l,Undefined)?void 0:l)?s&&n.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():l:!s&&n.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():s?l:Promise.resolve(l)};this.reviveSync=function(e,t){return v(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return v(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach(function R(e){if(i(e))return e.map(R);e&&r(e).forEach(function(n){if(\"#\"===n)throw new TypeError(\"# cannot be used as a type name as it is reserved for cyclic objects\");if(Typeson.JSON_TYPES.includes(n))throw new TypeError(\"Plain JSON object types are reserved as type names\");var r=e[n],o=r.testPlainObjects?s:a,u=o.filter(function(e){return e.type===n});if(u.length&&(o.splice(o.indexOf(u[0]),1),delete c[n],delete f[n]),r){if(\"function\"==typeof r){var p=r;r={test:function test(e){return e&&e.constructor===p},replace:function replace(e){return assign({},e)},revive:function revive(e){return assign(Object.create(p.prototype),e)}};}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var l={type:n,test:r.test.bind(r)};r.replace&&(l.replace=r.replace.bind(r)),r.replaceAsync&&(l.replaceAsync=r.replaceAsync.bind(r));var y=\"number\"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?s.splice(y,0,l):a.splice(y,0,l),r.revive||r.reviveAsync){var v={};r.revive&&(v.revive=r.revive.bind(r)),r.reviveAsync&&(v.reviveAsync=r.reviveAsync.bind(r)),c[n]=v;}f[n]=r;}});}),this};}function assign(e,t){return r(t).map(function(n){e[n]=t[n];}),e}function escapeKeyPathComponent(e){return e.replace(/~/g,\"~0\").replace(/\\./g,\"~1\")}function unescapeKeyPathComponent(e){return e.replace(/~1/g,\".\").replace(/~0/g,\"~\")}function getByKeyPath(e,t){if(\"\"===t)return e;var n=t.indexOf(\".\");if(n>-1){var r=e[unescapeKeyPathComponent(t.substr(0,n))];return void 0===r?void 0:getByKeyPath(r,t.substr(n+1))}return e[unescapeKeyPathComponent(t)]}function Undefined(){}function TypesonPromise(e){this.p=new Promise(e);}TypesonPromise.prototype.then=function(e,t){var n=this;return new TypesonPromise(function(r,i){n.p.then(function(t){r(e?e(t):t);},function(e){n.p.catch(function(e){return t?t(e):Promise.reject(e)}).then(r,i);});})},TypesonPromise.prototype.catch=function(e){return this.then(null,e)},TypesonPromise.resolve=function(e){return new TypesonPromise(function(t){t(e);})},TypesonPromise.reject=function(e){return new TypesonPromise(function(t,n){n(e);})},[\"all\",\"race\"].map(function(e){TypesonPromise[e]=function(t){return new TypesonPromise(function(n,r){Promise[e](t.map(function(e){return e.p})).then(n,r);})};}),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(e){if(!e||\"Object\"!==toStringTag(e))return !1;var t=s(e);return !t||hasConstructorOf(e,Object)||isUserObject(t)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(t){return null===t?\"null\":i(t)?\"array\":void 0===t?\"undefined\":e(t)},Typeson.JSON_TYPES=[\"null\",\"boolean\",\"number\",\"string\",\"array\",\"object\"];for(var f={userObject:{test:function test(e,t){return Typeson.isUserObject(e)},replace:function replace(e){return Object.assign({},e)},revive:function revive(e){return e}}},p=[[{sparseArrays:{testPlainObjects:!0,test:function test(e){return Array.isArray(e)},replace:function replace(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function test(e,t){return void 0===e&&!1===t.ownKeys},replace:function replace(e){return null},revive:function revive(e){}}}],{undef:{test:function test(e,t){return void 0===e&&(t.ownKeys||!(\"ownKeys\"in t))},replace:function replace(e){return null},revive:function revive(e){return new Typeson.Undefined}}}],l={StringObject:{test:function test(t){return \"String\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return String(e)},revive:function revive(e){return new String(e)}},BooleanObject:{test:function test(t){return \"Boolean\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return Boolean(e)},revive:function revive(e){return new Boolean(e)}},NumberObject:{test:function test(t){return \"Number\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return Number(e)},revive:function revive(e){return new Number(e)}}},y=[{nan:{test:function test(e){return \"number\"==typeof e&&isNaN(e)},replace:function replace(e){return \"NaN\"},revive:function revive(e){return NaN}}},{infinity:{test:function test(e){return e===1/0},replace:function replace(e){return \"Infinity\"},revive:function revive(e){return 1/0}}},{negativeInfinity:{test:function test(e){return e===-1/0},replace:function replace(e){return \"-Infinity\"},revive:function revive(e){return -1/0}}}],v={date:{test:function test(e){return \"Date\"===Typeson.toStringTag(e)},replace:function replace(e){var t=e.getTime();return isNaN(t)?\"NaN\":t},revive:function revive(e){return \"NaN\"===e?new Date(NaN):new Date(e)}}},d={regexp:{test:function test(e){return \"RegExp\"===Typeson.toStringTag(e)},replace:function replace(e){return {source:e.source,flags:(e.global?\"g\":\"\")+(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.sticky?\"y\":\"\")+(e.unicode?\"u\":\"\")}},revive:function revive(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},h={map:{test:function test(e){return \"Map\"===Typeson.toStringTag(e)},replace:function replace(e){return Array.from(e.entries())},revive:function revive(e){return new Map(e)}}},g={set:{test:function test(e){return \"Set\"===Typeson.toStringTag(e)},replace:function replace(e){return Array.from(e.values())},revive:function revive(e){return new Set(e)}}},b=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",m=new Uint8Array(256),T=0;T<b.length;T++)m[b.charCodeAt(T)]=T;var O=function encode(e,t,n){for(var r=new Uint8Array(e,t,n),i=r.length,o=\"\",s=0;s<i;s+=3)o+=b[r[s]>>2],o+=b[(3&r[s])<<4|r[s+1]>>4],o+=b[(15&r[s+1])<<2|r[s+2]>>6],o+=b[63&r[s+2]];return i%3==2?o=o.substring(0,o.length-1)+\"=\":i%3==1&&(o=o.substring(0,o.length-2)+\"==\"),o},w=function decode(e){var t=e.length,n=.75*e.length,r=0,i=void 0,o=void 0,s=void 0,a=void 0;\"=\"===e[e.length-1]&&(n--,\"=\"===e[e.length-2]&&n--);for(var c=new ArrayBuffer(n),u=new Uint8Array(c),f=0;f<t;f+=4)i=m[e.charCodeAt(f)],o=m[e.charCodeAt(f+1)],s=m[e.charCodeAt(f+2)],a=m[e.charCodeAt(f+3)],u[r++]=i<<2|o>>4,u[r++]=(15&o)<<4|s>>2,u[r++]=(3&s)<<6|63&a;return c},S={arraybuffer:{test:function test(e){return \"ArrayBuffer\"===Typeson.toStringTag(e)},replace:function replace(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),O(e))},revive:function revive(t,n){if(n.buffers||(n.buffers=[]),\"object\"===(void 0===t?\"undefined\":e(t)))return n.buffers[t.index];var r=w(t);return n.buffers.push(r),r}}},P=\"undefined\"==typeof self?commonjsGlobal:self,j={};[\"Int8Array\",\"Uint8Array\",\"Uint8ClampedArray\",\"Int16Array\",\"Uint16Array\",\"Int32Array\",\"Uint32Array\",\"Float32Array\",\"Float64Array\"].forEach(function(e){var t=e,n=P[t];n&&(j[e.toLowerCase()]={test:function test(e){return Typeson.toStringTag(e)===t},replace:function replace(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:O(n),byteOffset:r,length:i})},revive:function revive(e,t){t.buffers||(t.buffers=[]);var r=e.byteOffset,i=e.length,o=e.encoded,s=e.index,a=void 0;return \"index\"in e?a=t.buffers[s]:(a=w(o),t.buffers.push(a)),new n(a,r,i)}});});var A={dataview:{test:function test(e){return \"DataView\"===Typeson.toStringTag(e)},replace:function replace(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:O(n),byteOffset:r,byteLength:i})},revive:function revive(e,t){t.buffers||(t.buffers=[]);var n=e.byteOffset,r=e.byteLength,i=e.encoded,o=e.index,s=void 0;return \"index\"in e?s=t.buffers[o]:(s=w(i),t.buffers.push(s)),new DataView(s,n,r)}}},C={IntlCollator:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.Collator)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.NumberFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.NumberFormat(e.locale,e)}}};function string2arraybuffer(e){for(var t=new Uint16Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var N={file:{test:function test(e){return \"File\"===Typeson.toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.open(\"GET\",URL.createObjectURL(e),!1),\"undefined\"!=typeof TextEncoder&&t.overrideMimeType(\"text/plain; charset=utf-16le\"),200!==t.status&&0!==t.status)throw new Error(\"Bad Blob access: \"+t.status);return t.send(),{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function revive(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified,o=string2arraybuffer(r);return new File([o],t,{type:n,lastModified:i})},replaceAsync:function replaceAsync(e){return new Typeson.Promise(function(t,n){if(e.isClosed)n(new Error(\"The File is closed\"));else {var r=new FileReader;r.addEventListener(\"load\",function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified});}),r.addEventListener(\"error\",function(){n(r.error);}),r.readAsText(e,\"UTF-16\");}})}}};return [f,p,l,y,v,d,{imagedata:{test:function test(e){return \"ImageData\"===Typeson.toStringTag(e)},replace:function replace(e){return {array:Array.from(e.data),width:e.width,height:e.height}},revive:function revive(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function test(e){return \"ImageBitmap\"===Typeson.toStringTag(e)||e&&e.dataset&&\"ImageBitmap\"===e.dataset.toStringTag},replace:function replace(e){var t=document.createElement(\"canvas\");return t.getContext(\"2d\").drawImage(e,0,0),t.toDataURL()},revive:function revive(e){var t=document.createElement(\"canvas\"),n=t.getContext(\"2d\"),r=document.createElement(\"img\");return r.onload=function(){n.drawImage(r,0,0);},r.src=e,t},reviveAsync:function reviveAsync(e){var t=document.createElement(\"canvas\"),n=t.getContext(\"2d\"),r=document.createElement(\"img\");return r.onload=function(){n.drawImage(r,0,0);},r.src=e,createImageBitmap(t)}}},N,{file:N.file,filelist:{test:function test(e){return \"FileList\"===Typeson.toStringTag(e)},replace:function replace(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function revive(e){function FileList(){this._files=arguments[0],this.length=this._files.length;}return FileList.prototype.item=function(e){return this._files[e]},FileList.prototype[Symbol.toStringTag]=\"FileList\",new FileList(e)}}},{blob:{test:function test(e){return \"Blob\"===Typeson.toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.open(\"GET\",URL.createObjectURL(e),!1),\"undefined\"!=typeof TextEncoder&&t.overrideMimeType(\"text/plain; charset=utf-16le\"),200!==t.status&&0!==t.status)throw new Error(\"Bad Blob access: \"+t.status);return t.send(),{type:e.type,stringContents:t.responseText}},revive:function revive(e){var t=e.type,n=e.stringContents;return new Blob([string2arraybuffer(n)],{type:t})},replaceAsync:function replaceAsync(e){return new Typeson.Promise(function(t,n){if(e.isClosed)n(new Error(\"The Blob is closed\"));else {var r=new FileReader;r.addEventListener(\"load\",function(){t({type:e.type,stringContents:r.result});}),r.addEventListener(\"error\",function(){n(r.error);}),r.readAsText(e,\"UTF-16\");}})}}}].concat(\"function\"==typeof Map?h:[],\"function\"==typeof Set?g:[],\"function\"==typeof ArrayBuffer?S:[],\"function\"==typeof Uint8Array?j:[],\"function\"==typeof DataView?A:[],\"undefined\"!=typeof Intl?C:[])});\n\n});\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2017 Brett Zamir, 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; // Use a lookup table to find the index.\n\nvar lookup = new Uint8Array(256);\n\nfor (var i = 0; i < chars.length; i++) {\n  lookup[chars.charCodeAt(i)] = i;\n}\n\nvar encode = function encode(arraybuffer, byteOffset, length) {\n  if (length === null || length === undefined) {\n    length = arraybuffer.byteLength; // Needed for Safari\n  }\n\n  var bytes = new Uint8Array(arraybuffer, byteOffset || 0, // Default needed for Safari\n  length);\n  var len = bytes.length;\n  var base64 = '';\n\n  for (var _i = 0; _i < len; _i += 3) {\n    base64 += chars[bytes[_i] >> 2];\n    base64 += chars[(bytes[_i] & 3) << 4 | bytes[_i + 1] >> 4];\n    base64 += chars[(bytes[_i + 1] & 15) << 2 | bytes[_i + 2] >> 6];\n    base64 += chars[bytes[_i + 2] & 63];\n  }\n\n  if (len % 3 === 2) {\n    base64 = base64.substring(0, base64.length - 1) + '=';\n  } else if (len % 3 === 1) {\n    base64 = base64.substring(0, base64.length - 2) + '==';\n  }\n\n  return base64;\n};\nvar decode = function decode(base64) {\n  var len = base64.length;\n  var bufferLength = base64.length * 0.75;\n  var p = 0;\n  var encoded1, encoded2, encoded3, encoded4;\n\n  if (base64[base64.length - 1] === '=') {\n    bufferLength--;\n\n    if (base64[base64.length - 2] === '=') {\n      bufferLength--;\n    }\n  }\n\n  var arraybuffer = new ArrayBuffer(bufferLength),\n      bytes = new Uint8Array(arraybuffer);\n\n  for (var _i2 = 0; _i2 < len; _i2 += 4) {\n    encoded1 = lookup[base64.charCodeAt(_i2)];\n    encoded2 = lookup[base64.charCodeAt(_i2 + 1)];\n    encoded3 = lookup[base64.charCodeAt(_i2 + 2)];\n    encoded4 = lookup[base64.charCodeAt(_i2 + 3)];\n    bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n    bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n    bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n  }\n\n  return arraybuffer;\n};\n\n/* eslint-env browser, node */\nvar _global = typeof self === 'undefined' ? global : self;\nvar exportObj = {};\n[\n    'Int8Array',\n    'Uint8Array',\n    'Uint8ClampedArray',\n    'Int16Array',\n    'Uint16Array',\n    'Int32Array',\n    'Uint32Array',\n    'Float32Array',\n    'Float64Array'\n].forEach(function (typeName) {\n    var arrType = typeName;\n    var TypedArray = _global[arrType];\n    if (TypedArray) {\n        exportObj[typeName.toLowerCase() + \"2\"] = {\n            test: function (x) { return typeson.toStringTag(x) === arrType; },\n            replace: function (_a) {\n                var buffer = _a.buffer, byteOffset = _a.byteOffset, length = _a.length;\n                return {\n                    buffer: buffer,\n                    byteOffset: byteOffset,\n                    length: length\n                };\n            },\n            revive: function (b64Obj) {\n                var buffer = b64Obj.buffer, byteOffset = b64Obj.byteOffset, length = b64Obj.length;\n                return new TypedArray(buffer, byteOffset, length);\n            }\n        };\n    }\n});\n\nvar arrayBuffer = {\n    arraybuffer: {\n        test: function (x) { return typeson.toStringTag(x) === 'ArrayBuffer'; },\n        replace: function (b) {\n            return encode(b, 0, b.byteLength);\n        },\n        revive: function (b64) {\n            var buffer = decode(b64);\n            return buffer;\n        }\n    }\n};\n// See also typed-arrays!\n\nvar TSON = new typeson().register(structuredCloning);\nvar readBlobsSynchronously = 'FileReaderSync' in self; // true in workers only.\nvar blobsToAwait = [];\nvar blobsToAwaitPos = 0;\n// Need to patch encapsulateAsync as it does not work as of typeson 5.8.2\n// Also, current version of typespn-registry-1.0.0-alpha.21 does not\n// encapsulate/revive Blobs correctly (fails one of the unit tests in\n// this library (test 'export-format'))\nTSON.register([\n    arrayBuffer,\n    exportObj, {\n        blob2: {\n            test: function (x) { return typeson.toStringTag(x) === 'Blob'; },\n            replace: function (b) {\n                if (b.isClosed) { // On MDN, but not in https://w3c.github.io/FileAPI/#dfn-Blob\n                    throw new Error('The Blob is closed');\n                }\n                if (readBlobsSynchronously) {\n                    var data = readBlobSync(b, 'binary');\n                    var base64 = encode(data, 0, data.byteLength);\n                    return {\n                        type: b.type,\n                        data: base64\n                    };\n                }\n                else {\n                    blobsToAwait.push(b); // This will also make TSON.mustFinalize() return true.\n                    var result = {\n                        type: b.type,\n                        data: { start: blobsToAwaitPos, end: blobsToAwaitPos + b.size }\n                    };\n                    console.log(\"b.size: \" + b.size);\n                    blobsToAwaitPos += b.size;\n                    return result;\n                }\n            },\n            finalize: function (b, ba) {\n                b.data = encode(ba, 0, ba.byteLength);\n            },\n            revive: function (_a) {\n                var type = _a.type, data = _a.data;\n                return new Blob([decode(data)], { type: type });\n            }\n        }\n    }\n]);\nTSON.mustFinalize = function () { return blobsToAwait.length > 0; };\nTSON.finalize = function (items) { return __awaiter(void 0, void 0, void 0, function () {\n    var allChunks, _i, items_1, item, types, arrayType, keyPath, typeName, typeSpec, b;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, readBlobAsync(new Blob(blobsToAwait), 'binary')];\n            case 1:\n                allChunks = _a.sent();\n                if (items) {\n                    for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\n                        item = items_1[_i];\n                        // Manually go through all \"blob\" types in the result\n                        // and lookup the data slice they point at.\n                        if (item.$types) {\n                            types = item.$types;\n                            arrayType = types.$;\n                            if (arrayType)\n                                types = types.$;\n                            for (keyPath in types) {\n                                typeName = types[keyPath];\n                                typeSpec = TSON.types[typeName];\n                                if (typeSpec && typeSpec.finalize) {\n                                    b = Dexie.getByKeyPath(item, arrayType ? \"$.\" + keyPath : keyPath);\n                                    typeSpec.finalize(b, allChunks.slice(b.start, b.end));\n                                }\n                            }\n                        }\n                    }\n                }\n                // Free up memory\n                blobsToAwait = [];\n                return [2 /*return*/];\n        }\n    });\n}); };\n\nvar DEFAULT_ROWS_PER_CHUNK = 2000;\nfunction exportDB(db, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        function exportAll() {\n            return __awaiter(this, void 0, void 0, function () {\n                var tablesRowCounts, emptyExportJson, posEndDataArray, firstJsonSlice, filter, _loop_1, _i, tables_1, tableName;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, Promise.all(db.tables.map(function (table) { return table.count(); }))];\n                        case 1:\n                            tablesRowCounts = _a.sent();\n                            tablesRowCounts.forEach(function (rowCount, i) { return tables[i].rowCount = rowCount; });\n                            progress.totalRows = tablesRowCounts.reduce(function (p, c) { return p + c; });\n                            emptyExportJson = JSON.stringify(emptyExport, undefined, prettyJson ? 2 : undefined);\n                            posEndDataArray = emptyExportJson.lastIndexOf(']');\n                            firstJsonSlice = emptyExportJson.substring(0, posEndDataArray);\n                            slices.push(firstJsonSlice);\n                            filter = options.filter;\n                            _loop_1 = function (tableName) {\n                                var table, primKey, inbound, LIMIT, emptyTableExport, emptyTableExportJson, posEndRowsArray, lastKey, lastNumRows, mayHaveMoreRows, _loop_2, state_1;\n                                return __generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0:\n                                            table = db.table(tableName);\n                                            primKey = table.schema.primKey;\n                                            inbound = !!primKey.keyPath;\n                                            LIMIT = options.numRowsPerChunk || DEFAULT_ROWS_PER_CHUNK;\n                                            emptyTableExport = inbound ? {\n                                                tableName: table.name,\n                                                inbound: true,\n                                                rows: []\n                                            } : {\n                                                tableName: table.name,\n                                                inbound: false,\n                                                rows: []\n                                            };\n                                            emptyTableExportJson = JSON.stringify(emptyTableExport, undefined, prettyJson ? 2 : undefined);\n                                            if (prettyJson) {\n                                                // Increase indentation according to this:\n                                                // {\n                                                //   ...\n                                                //   data: [\n                                                //     ...\n                                                //     data: [\n                                                // 123456<---- here\n                                                //     ] \n                                                //   ]\n                                                // }\n                                                emptyTableExportJson = emptyTableExportJson.split('\\n').join('\\n    ');\n                                            }\n                                            posEndRowsArray = emptyTableExportJson.lastIndexOf(']');\n                                            slices.push(emptyTableExportJson.substring(0, posEndRowsArray));\n                                            lastKey = null;\n                                            lastNumRows = 0;\n                                            mayHaveMoreRows = true;\n                                            _loop_2 = function () {\n                                                var chunkedCollection, values, filteredValues, tsonValues, json, keys, keyvals, tsonTuples, json;\n                                                return __generator(this, function (_c) {\n                                                    switch (_c.label) {\n                                                        case 0:\n                                                            if (progressCallback) {\n                                                                // Keep ongoing transaction private\n                                                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                                                            }\n                                                            chunkedCollection = lastKey == null ?\n                                                                table.limit(LIMIT) :\n                                                                table.where(':id').above(lastKey).limit(LIMIT);\n                                                            return [4 /*yield*/, chunkedCollection.toArray()];\n                                                        case 1:\n                                                            values = _c.sent();\n                                                            if (values.length === 0)\n                                                                return [2 /*return*/, \"break\"];\n                                                            if (lastKey != null && lastNumRows > 0) {\n                                                                // Not initial chunk. Must add a comma:\n                                                                slices.push(\",\");\n                                                                if (prettyJson) {\n                                                                    slices.push(\"\\n      \");\n                                                                }\n                                                            }\n                                                            mayHaveMoreRows = values.length === LIMIT;\n                                                            if (!inbound) return [3 /*break*/, 4];\n                                                            filteredValues = filter ?\n                                                                values.filter(function (value) { return filter(tableName, value); }) :\n                                                                values;\n                                                            tsonValues = filteredValues.map(function (value) { return TSON.encapsulate(value); });\n                                                            if (!TSON.mustFinalize()) return [3 /*break*/, 3];\n                                                            return [4 /*yield*/, Dexie.waitFor(TSON.finalize(tsonValues))];\n                                                        case 2:\n                                                            _c.sent();\n                                                            _c.label = 3;\n                                                        case 3:\n                                                            json = JSON.stringify(tsonValues, undefined, prettyJson ? 2 : undefined);\n                                                            if (prettyJson)\n                                                                json = json.split('\\n').join('\\n      ');\n                                                            // By generating a blob here, we give web platform the opportunity to store the contents\n                                                            // on disk and release RAM.\n                                                            slices.push(new Blob([json.substring(1, json.length - 1)]));\n                                                            lastNumRows = filteredValues.length;\n                                                            lastKey = values.length > 0 ?\n                                                                Dexie.getByKeyPath(values[values.length - 1], primKey.keyPath) :\n                                                                null;\n                                                            return [3 /*break*/, 8];\n                                                        case 4: return [4 /*yield*/, chunkedCollection.primaryKeys()];\n                                                        case 5:\n                                                            keys = _c.sent();\n                                                            keyvals = keys.map(function (key, i) { return [key, values[i]]; });\n                                                            if (filter)\n                                                                keyvals = keyvals.filter(function (_a) {\n                                                                    var key = _a[0], value = _a[1];\n                                                                    return filter(tableName, value, key);\n                                                                });\n                                                            tsonTuples = keyvals.map(function (tuple) { return TSON.encapsulate(tuple); });\n                                                            if (!TSON.mustFinalize()) return [3 /*break*/, 7];\n                                                            return [4 /*yield*/, Dexie.waitFor(TSON.finalize(tsonTuples))];\n                                                        case 6:\n                                                            _c.sent();\n                                                            _c.label = 7;\n                                                        case 7:\n                                                            json = JSON.stringify(tsonTuples, undefined, prettyJson ? 2 : undefined);\n                                                            if (prettyJson)\n                                                                json = json.split('\\n').join('\\n      ');\n                                                            // By generating a blob here, we give web platform the opportunity to store the contents\n                                                            // on disk and release RAM.\n                                                            slices.push(new Blob([json.substring(1, json.length - 1)]));\n                                                            lastNumRows = keyvals.length;\n                                                            lastKey = keys.length > 0 ?\n                                                                keys[keys.length - 1] :\n                                                                null;\n                                                            _c.label = 8;\n                                                        case 8:\n                                                            progress.completedRows += values.length;\n                                                            return [2 /*return*/];\n                                                    }\n                                                });\n                                            };\n                                            _b.label = 1;\n                                        case 1:\n                                            if (!mayHaveMoreRows) return [3 /*break*/, 3];\n                                            return [5 /*yield**/, _loop_2()];\n                                        case 2:\n                                            state_1 = _b.sent();\n                                            if (state_1 === \"break\")\n                                                return [3 /*break*/, 3];\n                                            return [3 /*break*/, 1];\n                                        case 3:\n                                            slices.push(emptyTableExportJson.substr(posEndRowsArray)); // \"]}\"\n                                            progress.completedTables += 1;\n                                            if (progress.completedTables < progress.totalTables) {\n                                                slices.push(\",\");\n                                            }\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            };\n                            _i = 0, tables_1 = tables;\n                            _a.label = 2;\n                        case 2:\n                            if (!(_i < tables_1.length)) return [3 /*break*/, 5];\n                            tableName = tables_1[_i].name;\n                            return [5 /*yield**/, _loop_1(tableName)];\n                        case 3:\n                            _a.sent();\n                            _a.label = 4;\n                        case 4:\n                            _i++;\n                            return [3 /*break*/, 2];\n                        case 5:\n                            slices.push(emptyExportJson.substr(posEndDataArray));\n                            progress.done = true;\n                            if (progressCallback) {\n                                // Keep ongoing transaction private\n                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        }\n        var slices, tables, prettyJson, emptyExport, progressCallback, progress;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {};\n                    slices = [];\n                    tables = db.tables.map(function (table) { return ({\n                        name: table.name,\n                        schema: getSchemaString(table),\n                        rowCount: 0\n                    }); });\n                    prettyJson = options.prettyJson;\n                    emptyExport = {\n                        formatName: \"dexie\",\n                        formatVersion: 1,\n                        data: {\n                            databaseName: db.name,\n                            databaseVersion: db.verno,\n                            tables: tables,\n                            data: []\n                        }\n                    };\n                    progressCallback = options.progressCallback;\n                    progress = {\n                        done: false,\n                        completedRows: 0,\n                        completedTables: 0,\n                        totalRows: NaN,\n                        totalTables: db.tables.length\n                    };\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, , 6, 7]);\n                    if (!options.noTransaction) return [3 /*break*/, 3];\n                    return [4 /*yield*/, exportAll()];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3: return [4 /*yield*/, db.transaction('r', db.tables, exportAll)];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [3 /*break*/, 7];\n                case 6:\n                    TSON.finalize(); // Free up mem if error has occurred\n                    return [7 /*endfinally*/];\n                case 7:\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    return [2 /*return*/, new Blob(slices, { type: \"text/json\" })];\n            }\n        });\n    });\n}\n\nvar VERSION = 1;\n\nvar fakeStream = {Stream: function(){}};\n\nvar clarinet_1 = createCommonjsModule(function (module, exports) {\n(function (clarinet) {\n\n  // non node-js needs to set clarinet debug on root\n  var env =(typeof process === 'object' && process.env)\n    ? process.env\n    : self;\n\n  clarinet.parser            = function (opt) { return new CParser(opt);};\n  clarinet.CParser           = CParser;\n  clarinet.CStream           = CStream;\n  clarinet.createStream      = createStream;\n  clarinet.MAX_BUFFER_LENGTH = 10 * 1024 * 1024;\n  clarinet.DEBUG             = (env.CDEBUG==='debug');\n  clarinet.INFO              = (env.CDEBUG==='debug' || env.CDEBUG==='info');\n  clarinet.EVENTS            =\n    [ \"value\"\n    , \"string\"\n    , \"key\"\n    , \"openobject\"\n    , \"closeobject\"\n    , \"openarray\"\n    , \"closearray\"\n    , \"error\"\n    , \"end\"\n    , \"ready\"\n    ];\n\n  var buffers     = {\n        textNode: undefined,\n        numberNode: \"\"\n    }\n    , streamWraps = clarinet.EVENTS.filter(function (ev) {\n          return ev !== \"error\" && ev !== \"end\";\n        })\n    , S           = 0\n    , Stream\n    ;\n\n  clarinet.STATE =\n    { BEGIN                             : S++\n    , VALUE                             : S++ // general stuff\n    , OPEN_OBJECT                       : S++ // {\n    , CLOSE_OBJECT                      : S++ // }\n    , OPEN_ARRAY                        : S++ // [\n    , CLOSE_ARRAY                       : S++ // ]\n    , TEXT_ESCAPE                       : S++ // \\ stuff\n    , STRING                            : S++ // \"\"\n    , BACKSLASH                         : S++\n    , END                               : S++ // No more stack\n    , OPEN_KEY                          : S++ // , \"a\"\n    , CLOSE_KEY                         : S++ // :\n    , TRUE                              : S++ // r\n    , TRUE2                             : S++ // u\n    , TRUE3                             : S++ // e\n    , FALSE                             : S++ // a\n    , FALSE2                            : S++ // l\n    , FALSE3                            : S++ // s\n    , FALSE4                            : S++ // e\n    , NULL                              : S++ // u\n    , NULL2                             : S++ // l\n    , NULL3                             : S++ // l\n    , NUMBER_DECIMAL_POINT              : S++ // .\n    , NUMBER_DIGIT                      : S++ // [0-9]\n    };\n\n  for (var s_ in clarinet.STATE) clarinet.STATE[clarinet.STATE[s_]] = s_;\n\n  // switcharoo\n  S = clarinet.STATE;\n\n  const Char = {\n    tab                 : 0x09,     // \\t\n    lineFeed            : 0x0A,     // \\n\n    carriageReturn      : 0x0D,     // \\r\n    space               : 0x20,     // \" \"\n\n    doubleQuote         : 0x22,     // \"\n    plus                : 0x2B,     // +\n    comma               : 0x2C,     // ,\n    minus               : 0x2D,     // -\n    period              : 0x2E,     // .\n\n    _0                  : 0x30,     // 0\n    _9                  : 0x39,     // 9\n\n    colon               : 0x3A,     // :\n\n    E                   : 0x45,     // E\n\n    openBracket         : 0x5B,     // [\n    backslash           : 0x5C,     // \\\n    closeBracket        : 0x5D,     // ]\n\n    a                   : 0x61,     // a\n    b                   : 0x62,     // b\n    e                   : 0x65,     // e \n    f                   : 0x66,     // f\n    l                   : 0x6C,     // l\n    n                   : 0x6E,     // n\n    r                   : 0x72,     // r\n    s                   : 0x73,     // s\n    t                   : 0x74,     // t\n    u                   : 0x75,     // u\n\n    openBrace           : 0x7B,     // {\n    closeBrace          : 0x7D,     // }\n  };\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function f () { this[\"__proto__\"] = o; }\n      f.prototype = o;\n      return new f;\n    };\n  }\n\n  if (!Object.getPrototypeOf) {\n    Object.getPrototypeOf = function (o) {\n      return o[\"__proto__\"];\n    };\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = [];\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i);\n      return a;\n    };\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(clarinet.MAX_BUFFER_LENGTH, 10)\n      , maxActual = 0\n      ;\n    for (var buffer in buffers) {\n      var len = parser[buffer] === undefined ? 0 : parser[buffer].length;\n      if (len > maxAllowed) {\n        switch (buffer) {\n          case \"text\":\n            closeText(parser);\n          break;\n\n          default:\n            error(parser, \"Max buffer length exceeded: \"+ buffer);\n        }\n      }\n      maxActual = Math.max(maxActual, len);\n    }\n    parser.bufferCheckPosition = (clarinet.MAX_BUFFER_LENGTH - maxActual)\n                               + parser.position;\n  }\n\n  function clearBuffers (parser) {\n    for (var buffer in buffers) {\n      parser[buffer] = buffers[buffer];\n    }\n  }\n\n  var stringTokenPattern = /[\\\\\"\\n]/g;\n\n  function CParser (opt) {\n    if (!(this instanceof CParser)) return new CParser (opt);\n\n    var parser = this;\n    clearBuffers(parser);\n    parser.bufferCheckPosition = clarinet.MAX_BUFFER_LENGTH;\n    parser.q        = parser.c = parser.p = \"\";\n    parser.opt      = opt || {};\n    parser.closed   = parser.closedRoot = parser.sawRoot = false;\n    parser.tag      = parser.error = null;\n    parser.state    = S.BEGIN;\n    parser.stack    = new Array();\n    // mostly just for error reporting\n    parser.position = parser.column = 0;\n    parser.line     = 1;\n    parser.slashed  = false;\n    parser.unicodeI = 0;\n    parser.unicodeS = null;\n    parser.depth    = 0;\n    emit(parser, \"onready\");\n  }\n\n  CParser.prototype =\n    { end    : function () { end(this); }\n    , write  : write\n    , resume : function () { this.error = null; return this; }\n    , close  : function () { return this.write(null); }\n    };\n\n  try        { Stream = fakeStream.Stream; }\n  catch (ex) { Stream = function () {}; }\n\n  function createStream (opt) { return new CStream(opt); }\n\n  function CStream (opt) {\n    if (!(this instanceof CStream)) return new CStream(opt);\n\n    this._parser = new CParser(opt);\n    this.writable = true;\n    this.readable = true;\n\n    //var Buffer = this.Buffer || function Buffer () {}; // if we don't have Buffers, fake it so we can do `var instanceof Buffer` and not throw an error\n    this.bytes_remaining = 0; // number of bytes remaining in multi byte utf8 char to read after split boundary\n    this.bytes_in_sequence = 0; // bytes in multi byte utf8 char to read\n    this.temp_buffs = { \"2\": new Buffer(2), \"3\": new Buffer(3), \"4\": new Buffer(4) }; // for rebuilding chars split before boundary is reached\n    this.string = '';\n\n    var me = this;\n    Stream.apply(me);\n\n    this._parser.onend = function () { me.emit(\"end\"); };\n    this._parser.onerror = function (er) {\n      me.emit(\"error\", er);\n      me._parser.error = null;\n    };\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, \"on\" + ev,\n        { get          : function () { return me._parser[\"on\" + ev]; }\n        , set          : function (h) {\n            if (!h) {\n              me.removeAllListeners(ev);\n              me._parser[\"on\"+ev] = h;\n              return h;\n            }\n            me.on(ev, h);\n          }\n        , enumerable   : true\n        , configurable : false\n        });\n    });\n  }\n\n  CStream.prototype = Object.create(Stream.prototype,\n    { constructor: { value: CStream } });\n\n  CStream.prototype.write = function (data) {\n    data = new Buffer(data);\n    for (var i = 0; i < data.length; i++) {\n      var n = data[i];\n\n      // check for carry over of a multi byte char split between data chunks\n      // & fill temp buffer it with start of this data chunk up to the boundary limit set in the last iteration\n      if (this.bytes_remaining > 0) {\n        for (var j = 0; j < this.bytes_remaining; j++) {\n          this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence - this.bytes_remaining + j] = data[j];\n        }\n        this.string = this.temp_buffs[this.bytes_in_sequence].toString();\n        this.bytes_in_sequence = this.bytes_remaining = 0;\n\n        // move iterator forward by number of byte read during sequencing\n        i = i + j - 1;\n\n        // pass data to parser and move forward to parse rest of data\n        this._parser.write(this.string);\n        this.emit(\"data\", this.string);\n        continue;\n      }\n\n      // if no remainder bytes carried over, parse multi byte (>=128) chars one at a time\n      if (this.bytes_remaining === 0 && n >= 128) {\n        if ((n >= 194) && (n <= 223)) this.bytes_in_sequence = 2;\n        if ((n >= 224) && (n <= 239)) this.bytes_in_sequence = 3;\n        if ((n >= 240) && (n <= 244)) this.bytes_in_sequence = 4;\n        if ((this.bytes_in_sequence + i) > data.length) { // if bytes needed to complete char fall outside data length, we have a boundary split\n\n          for (var k = 0; k <= (data.length - 1 - i); k++) {\n            this.temp_buffs[this.bytes_in_sequence][k] = data[i + k]; // fill temp data of correct size with bytes available in this chunk\n          }\n          this.bytes_remaining = (i + this.bytes_in_sequence) - data.length;\n\n          // immediately return as we need another chunk to sequence the character\n          return true;\n        } else {\n          this.string = data.slice(i, (i + this.bytes_in_sequence)).toString();\n          i = i + this.bytes_in_sequence - 1;\n\n          this._parser.write(this.string);\n          this.emit(\"data\", this.string);\n          continue;\n        }\n      }\n\n      // is there a range of characters that are immediately parsable?\n      for (var p = i; p < data.length; p++) {\n        if (data[p] >= 128) break;\n      }\n      this.string = data.slice(i, p).toString();\n      this._parser.write(this.string);\n      this.emit(\"data\", this.string);\n      i = p - 1;\n\n      // handle any remaining characters using multibyte logic\n      continue;\n    }\n  };\n\n  CStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) this._parser.write(chunk.toString());\n    this._parser.end();\n    return true;\n  };\n\n  CStream.prototype.on = function (ev, handler) {\n    var me = this;\n    if (!me._parser[\"on\"+ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser[\"on\"+ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]]\n                 : Array.apply(null, arguments);\n        args.splice(0, 0, ev);\n        me.emit.apply(me, args);\n      };\n    }\n    return Stream.prototype.on.call(me, ev, handler);\n  };\n\n  CStream.prototype.destroy = function () {\n    clearBuffers(this._parser);\n    this.emit(\"close\");\n  };\n\n  function emit(parser, event, data) {\n    if(clarinet.INFO) console.log('-- emit', event, data);\n    if (parser[event]) parser[event](data);\n  }\n\n  function emitNode(parser, event, data) {\n    closeValue(parser);\n    emit(parser, event, data);\n  }\n\n  function closeValue(parser, event) {\n    parser.textNode = textopts(parser.opt, parser.textNode);\n    if (parser.textNode !== undefined) {\n      emit(parser, (event ? event : \"onvalue\"), parser.textNode);\n    }\n    parser.textNode = undefined;\n  }\n\n  function closeNumber(parser) {\n    if (parser.numberNode)\n      emit(parser, \"onvalue\", parseFloat(parser.numberNode));\n    parser.numberNode = \"\";\n  }\n\n  function textopts (opt, text) {\n    if (text === undefined) {\n      return text;\n    }\n    if (opt.trim) text = text.trim();\n    if (opt.normalize) text = text.replace(/\\s+/g, \" \");\n    return text;\n  }\n\n  function error (parser, er) {\n    closeValue(parser);\n    er += \"\\nLine: \"+parser.line+\n          \"\\nColumn: \"+parser.column+\n          \"\\nChar: \"+parser.c;\n    er = new Error(er);\n    parser.error = er;\n    emit(parser, \"onerror\", er);\n    return parser;\n  }\n\n  function end(parser) {\n    if (parser.state !== S.VALUE || parser.depth !== 0)\n      error(parser, \"Unexpected end\");\n\n    closeValue(parser);\n    parser.c      = \"\";\n    parser.closed = true;\n    emit(parser, \"onend\");\n    CParser.call(parser, parser.opt);\n    return parser;\n  }\n\n  function isWhitespace(c) {\n    return c === Char.carriageReturn || c === Char.lineFeed || c === Char.space || c === Char.tab;\n  }\n\n  function write (chunk) {\n    var parser = this;\n    if (this.error) throw this.error;\n    if (parser.closed) return error(parser,\n      \"Cannot write after close. Assign an onready handler.\");\n    if (chunk === null) return end(parser);\n    var i = 0, c = chunk.charCodeAt(0), p = parser.p;\n    if (clarinet.DEBUG) console.log('write -> [' + chunk + ']');\n    while (c) {\n      p = c;\n      parser.c = c = chunk.charCodeAt(i++);\n      // if chunk doesnt have next, like streaming char by char\n      // this way we need to check if previous is really previous\n      // if not we need to reset to what the parser says is the previous\n      // from buffer\n      if(p !== c ) parser.p = p;\n      else p = parser.p;\n\n      if(!c) break;\n\n      if (clarinet.DEBUG) console.log(i,c,clarinet.STATE[parser.state]);\n      parser.position ++;\n      if (c === Char.lineFeed) {\n        parser.line ++;\n        parser.column = 0;\n      } else parser.column ++;\n      switch (parser.state) {\n\n        case S.BEGIN:\n          if (c === Char.openBrace) parser.state = S.OPEN_OBJECT;\n          else if (c === Char.openBracket) parser.state = S.OPEN_ARRAY;\n          else if (!isWhitespace(c))\n            error(parser, \"Non-whitespace before {[.\");\n        continue;\n\n        case S.OPEN_KEY:\n        case S.OPEN_OBJECT:\n          if (isWhitespace(c)) continue;\n          if(parser.state === S.OPEN_KEY) parser.stack.push(S.CLOSE_KEY);\n          else {\n            if(c === Char.closeBrace) {\n              emit(parser, 'onopenobject');\n              this.depth++;\n              emit(parser, 'oncloseobject');\n              this.depth--;\n              parser.state = parser.stack.pop() || S.VALUE;\n              continue;\n            } else  parser.stack.push(S.CLOSE_OBJECT);\n          }\n          if(c === Char.doubleQuote) parser.state = S.STRING;\n          else error(parser, \"Malformed object key should start with \\\"\");\n        continue;\n\n        case S.CLOSE_KEY:\n        case S.CLOSE_OBJECT:\n          if (isWhitespace(c)) continue;\n          (parser.state === S.CLOSE_KEY) ? 'key' : 'object';\n          if(c === Char.colon) {\n            if(parser.state === S.CLOSE_OBJECT) {\n              parser.stack.push(S.CLOSE_OBJECT);\n              closeValue(parser, 'onopenobject');\n               this.depth++;\n            } else closeValue(parser, 'onkey');\n            parser.state  = S.VALUE;\n          } else if (c === Char.closeBrace) {\n            emitNode(parser, 'oncloseobject');\n            this.depth--;\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else if(c === Char.comma) {\n            if(parser.state === S.CLOSE_OBJECT)\n              parser.stack.push(S.CLOSE_OBJECT);\n            closeValue(parser);\n            parser.state  = S.OPEN_KEY;\n          } else error(parser, 'Bad object');\n        continue;\n\n        case S.OPEN_ARRAY: // after an array there always a value\n        case S.VALUE:\n          if (isWhitespace(c)) continue;\n          if(parser.state===S.OPEN_ARRAY) {\n            emit(parser, 'onopenarray');\n            this.depth++;\n            parser.state = S.VALUE;\n            if(c === Char.closeBracket) {\n              emit(parser, 'onclosearray');\n              this.depth--;\n              parser.state = parser.stack.pop() || S.VALUE;\n              continue;\n            } else {\n              parser.stack.push(S.CLOSE_ARRAY);\n            }\n          }\n               if(c === Char.doubleQuote) parser.state = S.STRING;\n          else if(c === Char.openBrace) parser.state = S.OPEN_OBJECT;\n          else if(c === Char.openBracket) parser.state = S.OPEN_ARRAY;\n          else if(c === Char.t) parser.state = S.TRUE;\n          else if(c === Char.f) parser.state = S.FALSE;\n          else if(c === Char.n) parser.state = S.NULL;\n          else if(c === Char.minus) { // keep and continue\n            parser.numberNode += \"-\";\n          } else if(Char._0 <= c && c <= Char._9) {\n            parser.numberNode += String.fromCharCode(c);\n            parser.state = S.NUMBER_DIGIT;\n          } else               error(parser, \"Bad value\");\n        continue;\n\n        case S.CLOSE_ARRAY:\n          if(c === Char.comma) {\n            parser.stack.push(S.CLOSE_ARRAY);\n            closeValue(parser, 'onvalue');\n            parser.state  = S.VALUE;\n          } else if (c === Char.closeBracket) {\n            emitNode(parser, 'onclosearray');\n            this.depth--;\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else if (isWhitespace(c))\n              continue;\n          else error(parser, 'Bad array');\n        continue;\n\n        case S.STRING:\n          if (parser.textNode === undefined) {\n            parser.textNode = \"\";\n          }\n\n          // thanks thejh, this is an about 50% performance improvement.\n          var starti              = i-1\n            , slashed = parser.slashed\n            , unicodeI = parser.unicodeI\n            ;\n          STRING_BIGLOOP: while (true) {\n            if (clarinet.DEBUG)\n              console.log(i,c,clarinet.STATE[parser.state]\n                         ,slashed);\n            // zero means \"no unicode active\". 1-4 mean \"parse some more\". end after 4.\n            while (unicodeI > 0) {\n              parser.unicodeS += String.fromCharCode(c);\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              if (unicodeI === 4) {\n                // TODO this might be slow? well, probably not used too often anyway\n                parser.textNode += String.fromCharCode(parseInt(parser.unicodeS, 16));\n                unicodeI = 0;\n                starti = i-1;\n              } else {\n                unicodeI++;\n              }\n              // we can just break here: no stuff we skipped that still has to be sliced out or so\n              if (!c) break STRING_BIGLOOP;\n            }\n            if (c === Char.doubleQuote && !slashed) {\n              parser.state = parser.stack.pop() || S.VALUE;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n            if (c === Char.backslash && !slashed) {\n              slashed = true;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              if (!c) break;\n            }\n            if (slashed) {\n              slashed = false;\n                   if (c === Char.n) { parser.textNode += '\\n'; }\n              else if (c === Char.r) { parser.textNode += '\\r'; }\n              else if (c === Char.t) { parser.textNode += '\\t'; }\n              else if (c === Char.f) { parser.textNode += '\\f'; }\n              else if (c === Char.b) { parser.textNode += '\\b'; }\n              else if (c === Char.u) {\n                // \\uxxxx. meh!\n                unicodeI = 1;\n                parser.unicodeS = '';\n              } else {\n                parser.textNode += String.fromCharCode(c);\n              }\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              starti = i-1;\n              if (!c) break;\n              else continue;\n            }\n\n            stringTokenPattern.lastIndex = i;\n            var reResult = stringTokenPattern.exec(chunk);\n            if (reResult === null) {\n              i = chunk.length+1;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n            i = reResult.index+1;\n            c = chunk.charCodeAt(reResult.index);\n            if (!c) {\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n          }\n          parser.slashed = slashed;\n          parser.unicodeI = unicodeI;\n        continue;\n\n        case S.TRUE:\n          if (c === Char.r) parser.state = S.TRUE2;\n          else error(parser, 'Invalid true started with t'+ c);\n        continue;\n\n        case S.TRUE2:\n          if (c === Char.u) parser.state = S.TRUE3;\n          else error(parser, 'Invalid true started with tr'+ c);\n        continue;\n\n        case S.TRUE3:\n          if(c === Char.e) {\n            emit(parser, \"onvalue\", true);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid true started with tru'+ c);\n        continue;\n\n        case S.FALSE:\n          if (c === Char.a) parser.state = S.FALSE2;\n          else error(parser, 'Invalid false started with f'+ c);\n        continue;\n\n        case S.FALSE2:\n          if (c === Char.l) parser.state = S.FALSE3;\n          else error(parser, 'Invalid false started with fa'+ c);\n        continue;\n\n        case S.FALSE3:\n          if (c === Char.s) parser.state = S.FALSE4;\n          else error(parser, 'Invalid false started with fal'+ c);\n        continue;\n\n        case S.FALSE4:\n          if (c === Char.e) {\n            emit(parser, \"onvalue\", false);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid false started with fals'+ c);\n        continue;\n\n        case S.NULL:\n          if (c === Char.u) parser.state = S.NULL2;\n          else error(parser, 'Invalid null started with n'+ c);\n        continue;\n\n        case S.NULL2:\n          if (c === Char.l) parser.state = S.NULL3;\n          else error(parser, 'Invalid null started with nu'+ c);\n        continue;\n\n        case S.NULL3:\n          if(c === Char.l) {\n            emit(parser, \"onvalue\", null);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid null started with nul'+ c);\n        continue;\n\n        case S.NUMBER_DECIMAL_POINT:\n          if(c === Char.period) {\n            parser.numberNode += \".\";\n            parser.state       = S.NUMBER_DIGIT;\n          } else error(parser, 'Leading zero not followed by .');\n        continue;\n\n        case S.NUMBER_DIGIT:\n          if(Char._0 <= c && c <= Char._9) parser.numberNode += String.fromCharCode(c);\n          else if (c === Char.period) {\n            if(parser.numberNode.indexOf('.')!==-1)\n              error(parser, 'Invalid number has two dots');\n            parser.numberNode += \".\";\n          } else if (c === Char.e || c === Char.E) {\n            if(parser.numberNode.indexOf('e')!==-1 ||\n               parser.numberNode.indexOf('E')!==-1 )\n               error(parser, 'Invalid number has two exponential');\n            parser.numberNode += \"e\";\n          } else if (c === Char.plus || c === Char.minus) {\n            if(!(p === Char.e || p === Char.E))\n              error(parser, 'Invalid symbol in number');\n            parser.numberNode += String.fromCharCode(c);\n          } else {\n            closeNumber(parser);\n            i--; // go back one\n            parser.state = parser.stack.pop() || S.VALUE;\n          }\n        continue;\n\n        default:\n          error(parser, \"Unknown state: \" + parser.state);\n      }\n    }\n    if (parser.position >= parser.bufferCheckPosition)\n      checkBufferLength(parser);\n    return parser;\n  }\n\n})(exports);\n});\n\nfunction JsonStream(blob) {\n    var pos = 0;\n    var parser = JsonParser(true);\n    var rv = {\n        pullAsync: function (numBytes) {\n            return __awaiter(this, void 0, void 0, function () {\n                var slize, jsonPart, result;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            slize = blob.slice(pos, pos + numBytes);\n                            pos += numBytes;\n                            return [4 /*yield*/, readBlobAsync(slize, 'text')];\n                        case 1:\n                            jsonPart = _a.sent();\n                            result = parser.write(jsonPart);\n                            rv.result = result || {};\n                            return [2 /*return*/, result];\n                    }\n                });\n            });\n        },\n        pullSync: function (numBytes) {\n            var slize = blob.slice(pos, pos + numBytes);\n            pos += numBytes;\n            var jsonPart = readBlobSync(slize, 'text');\n            var result = parser.write(jsonPart);\n            rv.result = result || {};\n            return result;\n        },\n        done: function () {\n            return parser.done();\n        },\n        eof: function () {\n            return pos >= blob.size;\n        },\n        result: {}\n    };\n    return rv;\n}\nfunction JsonParser(allowPartial) {\n    var parser = clarinet_1.parser();\n    var level = 0;\n    var result;\n    var stack = [];\n    var obj;\n    var key;\n    var done = false;\n    var array = false;\n    parser.onopenobject = function (newKey) {\n        var newObj = {};\n        newObj.incomplete = true;\n        if (!result)\n            result = newObj;\n        if (obj) {\n            stack.push([key, obj, array]);\n            if (allowPartial) {\n                if (array) {\n                    obj.push(newObj);\n                }\n                else {\n                    obj[key] = newObj;\n                }\n            }\n        }\n        obj = newObj;\n        key = newKey;\n        array = false;\n        ++level;\n    };\n    parser.onkey = function (newKey) { return key = newKey; };\n    parser.onvalue = function (value) { return array ? obj.push(value) : obj[key] = value; };\n    parser.oncloseobject = function () {\n        var _a;\n        delete obj.incomplete;\n        key = null;\n        if (--level === 0) {\n            done = true;\n        }\n        else {\n            var completedObj = obj;\n            _a = stack.pop(), key = _a[0], obj = _a[1], array = _a[2];\n            if (!allowPartial) {\n                if (array) {\n                    obj.push(completedObj);\n                }\n                else {\n                    obj[key] = completedObj;\n                }\n            }\n        }\n    };\n    parser.onopenarray = function () {\n        var newObj = [];\n        newObj.incomplete = true;\n        if (!result)\n            result = newObj;\n        if (obj) {\n            stack.push([key, obj, array]);\n            if (allowPartial) {\n                if (array) {\n                    obj.push(newObj);\n                }\n                else {\n                    obj[key] = newObj;\n                }\n            }\n        }\n        obj = newObj;\n        array = true;\n        key = null;\n        ++level;\n    };\n    parser.onclosearray = function () {\n        var _a;\n        delete obj.incomplete;\n        key = null;\n        if (--level === 0) {\n            done = true;\n        }\n        else {\n            var completedObj = obj;\n            _a = stack.pop(), key = _a[0], obj = _a[1], array = _a[2];\n            if (!allowPartial) {\n                if (array) {\n                    obj.push(completedObj);\n                }\n                else {\n                    obj[key] = completedObj;\n                }\n            }\n        }\n    };\n    return {\n        write: function (jsonPart) {\n            parser.write(jsonPart);\n            return result;\n        },\n        done: function () {\n            return done;\n        }\n    };\n}\n\nvar DEFAULT_KILOBYTES_PER_CHUNK = 1024;\nfunction importDB(exportedData, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var CHUNK_SIZE, stream, dbExport, db;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {}; // All booleans defaults to false.\n                    CHUNK_SIZE = options.chunkSizeBytes || (DEFAULT_KILOBYTES_PER_CHUNK * 1024);\n                    return [4 /*yield*/, loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE)];\n                case 1:\n                    stream = _a.sent();\n                    dbExport = stream.result.data;\n                    db = new Dexie(dbExport.databaseName);\n                    db.version(dbExport.databaseVersion).stores(extractDbSchema(dbExport));\n                    return [4 /*yield*/, importInto(db, stream, options)];\n                case 2:\n                    _a.sent();\n                    return [2 /*return*/, db];\n            }\n        });\n    });\n}\nfunction peakImportFile(exportedData) {\n    return __awaiter(this, void 0, void 0, function () {\n        var stream;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    stream = JsonStream(exportedData);\n                    _a.label = 1;\n                case 1:\n                    if (!!stream.eof()) return [3 /*break*/, 3];\n                    return [4 /*yield*/, stream.pullAsync(5 * 1024)];\n                case 2:\n                    _a.sent(); // 5 k is normally enough for the headers. If not, it will just do another go.\n                    if (stream.result.data && stream.result.data.data) {\n                        // @ts-ignore - TS won't allow us to delete a required property - but we are going to cast it.\n                        delete stream.result.data.data; // Don't return half-baked data array.\n                        return [3 /*break*/, 3];\n                    }\n                    return [3 /*break*/, 1];\n                case 3: return [2 /*return*/, stream.result];\n            }\n        });\n    });\n}\nfunction importInto(db, exportedData, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        function importAll() {\n            return __awaiter(this, void 0, void 0, function () {\n                var _loop_1, _i, _a, tableExport, state_1;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _loop_1 = function (tableExport) {\n                                var tableName, table, tableSchemaStr, sourceRows, rows, i, obj, filter, filteredRows, _c, keys, values;\n                                return __generator(this, function (_d) {\n                                    switch (_d.label) {\n                                        case 0:\n                                            if (!tableExport.rows)\n                                                return [2 /*return*/, \"break\"]; // Need to pull more!\n                                            if (!tableExport.rows.incomplete && tableExport.rows.length === 0)\n                                                return [2 /*return*/, \"continue\"];\n                                            if (progressCallback) {\n                                                // Keep ongoing transaction private\n                                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                                            }\n                                            tableName = tableExport.tableName;\n                                            table = db.table(tableName);\n                                            tableSchemaStr = dbExport.tables.filter(function (t) { return t.name === tableName; })[0].schema;\n                                            if (!table) {\n                                                if (!options.acceptMissingTables)\n                                                    throw new Error(\"Exported table \" + tableExport.tableName + \" is missing in installed database\");\n                                                else\n                                                    return [2 /*return*/, \"continue\"];\n                                            }\n                                            if (!options.acceptChangedPrimaryKey &&\n                                                tableSchemaStr.split(',')[0] != table.schema.primKey.src) {\n                                                throw new Error(\"Primary key differs for table \" + tableExport.tableName + \". \");\n                                            }\n                                            sourceRows = tableExport.rows;\n                                            rows = [];\n                                            for (i = 0; i < sourceRows.length; i++) {\n                                                obj = sourceRows[i];\n                                                if (!obj.incomplete) {\n                                                    rows.push(TSON.revive(obj));\n                                                }\n                                                else {\n                                                    break;\n                                                }\n                                            }\n                                            filter = options.filter;\n                                            filteredRows = filter ?\n                                                tableExport.inbound ?\n                                                    rows.filter(function (value) { return filter(tableName, value); }) :\n                                                    rows.filter(function (_a) {\n                                                        var key = _a[0], value = _a[1];\n                                                        return filter(tableName, value, key);\n                                                    }) :\n                                                rows;\n                                            _c = tableExport.inbound ?\n                                                [undefined, filteredRows] :\n                                                [filteredRows.map(function (row) { return row[0]; }), rows.map(function (row) { return row[1]; })], keys = _c[0], values = _c[1];\n                                            if (!options.overwriteValues) return [3 /*break*/, 2];\n                                            return [4 /*yield*/, table.bulkPut(values, keys)];\n                                        case 1:\n                                            _d.sent();\n                                            return [3 /*break*/, 4];\n                                        case 2: return [4 /*yield*/, table.bulkAdd(values, keys)];\n                                        case 3:\n                                            _d.sent();\n                                            _d.label = 4;\n                                        case 4:\n                                            progress.completedRows += rows.length;\n                                            if (!rows.incomplete) {\n                                                progress.completedTables += 1;\n                                            }\n                                            sourceRows.splice(0, rows.length); // Free up RAM, keep existing array instance.\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            };\n                            _i = 0, _a = dbExport.data;\n                            _b.label = 1;\n                        case 1:\n                            if (!(_i < _a.length)) return [3 /*break*/, 4];\n                            tableExport = _a[_i];\n                            return [5 /*yield**/, _loop_1(tableExport)];\n                        case 2:\n                            state_1 = _b.sent();\n                            if (state_1 === \"break\")\n                                return [3 /*break*/, 4];\n                            _b.label = 3;\n                        case 3:\n                            _i++;\n                            return [3 /*break*/, 1];\n                        case 4:\n                            // Avoid unnescessary loops in \"for (const tableExport of dbExport.data)\" \n                            while (dbExport.data.length > 0 && dbExport.data[0].rows && !dbExport.data[0].rows.incomplete) {\n                                // We've already imported all rows from the first table. Delete its occurrence\n                                dbExport.data.splice(0, 1);\n                            }\n                            if (!(!jsonStream.done() && !jsonStream.eof())) return [3 /*break*/, 8];\n                            if (!readBlobsSynchronously) return [3 /*break*/, 5];\n                            // If we can pull from blob synchronically, we don't have to\n                            // keep transaction alive using Dexie.waitFor().\n                            // This will only be possible in workers.\n                            jsonStream.pullSync(CHUNK_SIZE);\n                            return [3 /*break*/, 7];\n                        case 5: return [4 /*yield*/, Dexie.waitFor(jsonStream.pullAsync(CHUNK_SIZE))];\n                        case 6:\n                            _b.sent();\n                            _b.label = 7;\n                        case 7: return [3 /*break*/, 9];\n                        case 8: return [3 /*break*/, 10];\n                        case 9:\n                            return [3 /*break*/, 0];\n                        case 10: return [2 /*return*/];\n                    }\n                });\n            });\n        }\n        var CHUNK_SIZE, jsonStream, dbExportFile, readBlobsSynchronously, dbExport, progressCallback, progress, _i, _a, table;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    options = options || {}; // All booleans defaults to false.\n                    CHUNK_SIZE = options.chunkSizeBytes || (DEFAULT_KILOBYTES_PER_CHUNK * 1024);\n                    return [4 /*yield*/, loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE)];\n                case 1:\n                    jsonStream = _b.sent();\n                    dbExportFile = jsonStream.result;\n                    readBlobsSynchronously = 'FileReaderSync' in self;\n                    dbExport = dbExportFile.data;\n                    if (!options.acceptNameDiff && db.name !== dbExport.databaseName)\n                        throw new Error(\"Name differs. Current database name is \" + db.name + \" but export is \" + dbExport.databaseName);\n                    if (!options.acceptVersionDiff && db.verno !== dbExport.databaseVersion) {\n                        // Possible feature: Call upgraders in some isolated way if this happens... ?\n                        throw new Error(\"Database version differs. Current database is in version \" + db.verno + \" but export is \" + dbExport.databaseVersion);\n                    }\n                    progressCallback = options.progressCallback;\n                    progress = {\n                        done: false,\n                        completedRows: 0,\n                        completedTables: 0,\n                        totalRows: dbExport.tables.reduce(function (p, c) { return p + c.rowCount; }, 0),\n                        totalTables: dbExport.tables.length\n                    };\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    if (!options.clearTablesBeforeImport) return [3 /*break*/, 5];\n                    _i = 0, _a = db.tables;\n                    _b.label = 2;\n                case 2:\n                    if (!(_i < _a.length)) return [3 /*break*/, 5];\n                    table = _a[_i];\n                    return [4 /*yield*/, table.clear()];\n                case 3:\n                    _b.sent();\n                    _b.label = 4;\n                case 4:\n                    _i++;\n                    return [3 /*break*/, 2];\n                case 5:\n                    if (!options.noTransaction) return [3 /*break*/, 7];\n                    return [4 /*yield*/, importAll()];\n                case 6:\n                    _b.sent();\n                    return [3 /*break*/, 9];\n                case 7: return [4 /*yield*/, db.transaction('rw', db.tables, importAll)];\n                case 8:\n                    _b.sent();\n                    _b.label = 9;\n                case 9:\n                    progress.done = true;\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE) {\n    return __awaiter(this, void 0, void 0, function () {\n        var stream, dbExportFile;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    stream = ('slice' in exportedData ?\n                        JsonStream(exportedData) :\n                        exportedData);\n                    _a.label = 1;\n                case 1:\n                    if (!!stream.eof()) return [3 /*break*/, 3];\n                    return [4 /*yield*/, stream.pullAsync(CHUNK_SIZE)];\n                case 2:\n                    _a.sent();\n                    if (stream.result.data && stream.result.data.data)\n                        return [3 /*break*/, 3];\n                    return [3 /*break*/, 1];\n                case 3:\n                    dbExportFile = stream.result;\n                    if (!dbExportFile || dbExportFile.formatName != \"dexie\")\n                        throw new Error(\"Given file is not a dexie export\");\n                    if (dbExportFile.formatVersion > VERSION) {\n                        throw new Error(\"Format version \" + dbExportFile.formatVersion + \" not supported\");\n                    }\n                    if (!dbExportFile.data) {\n                        throw new Error(\"No data in export file\");\n                    }\n                    if (!dbExportFile.data.databaseName) {\n                        throw new Error(\"Missing databaseName in export file\");\n                    }\n                    if (!dbExportFile.data.databaseVersion) {\n                        throw new Error(\"Missing databaseVersion in export file\");\n                    }\n                    if (!dbExportFile.data.tables) {\n                        throw new Error(\"Missing tables in export file\");\n                    }\n                    return [2 /*return*/, stream];\n            }\n        });\n    });\n}\n\n//\n// Extend Dexie interface (runtime wise)\n//\nDexie.prototype.export = function (options) {\n    return exportDB(this, options);\n};\nDexie.prototype.import = function (blob, options) {\n    return importInto(this, blob, options);\n};\nDexie.import = function (blob, options) { return importDB(blob, options); };\nvar dexieExportImport = (function () {\n    throw new Error(\"This addon extends Dexie.prototype globally and does not have be included in Dexie constructor's addons options.\");\n});\n\nexport default dexieExportImport;\nexport { exportDB, importDB, importInto, peakImportFile };\n//# sourceMappingURL=dexie-export-import.mjs.map\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.2, Wed Apr 27 2022\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Dexie = factory());\n})(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var _global = typeof globalThis !== 'undefined' ? globalThis :\n        typeof self !== 'undefined' ? self :\n            typeof window !== 'undefined' ? window :\n                global;\n\n    var keys = Object.keys;\n    var isArray = Array.isArray;\n    if (typeof Promise !== 'undefined' && !_global.Promise) {\n        _global.Promise = Promise;\n    }\n    function extend(obj, extension) {\n        if (typeof extension !== 'object')\n            return obj;\n        keys(extension).forEach(function (key) {\n            obj[key] = extension[key];\n        });\n        return obj;\n    }\n    var getProto = Object.getPrototypeOf;\n    var _hasOwn = {}.hasOwnProperty;\n    function hasOwn(obj, prop) {\n        return _hasOwn.call(obj, prop);\n    }\n    function props(proto, extension) {\n        if (typeof extension === 'function')\n            extension = extension(getProto(proto));\n        (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n            setProp(proto, key, extension[key]);\n        });\n    }\n    var defineProperty = Object.defineProperty;\n    function setProp(obj, prop, functionOrGetSet, options) {\n        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n            { value: functionOrGetSet, configurable: true, writable: true }, options));\n    }\n    function derive(Child) {\n        return {\n            from: function (Parent) {\n                Child.prototype = Object.create(Parent.prototype);\n                setProp(Child.prototype, \"constructor\", Child);\n                return {\n                    extend: props.bind(null, Child.prototype)\n                };\n            }\n        };\n    }\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    function getPropertyDescriptor(obj, prop) {\n        var pd = getOwnPropertyDescriptor(obj, prop);\n        var proto;\n        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n    }\n    var _slice = [].slice;\n    function slice(args, start, end) {\n        return _slice.call(args, start, end);\n    }\n    function override(origFunc, overridedFactory) {\n        return overridedFactory(origFunc);\n    }\n    function assert(b) {\n        if (!b)\n            throw new Error(\"Assertion Failed\");\n    }\n    function asap$1(fn) {\n        if (_global.setImmediate)\n            setImmediate(fn);\n        else\n            setTimeout(fn, 0);\n    }\n    function arrayToObject(array, extractor) {\n        return array.reduce(function (result, item, i) {\n            var nameAndValue = extractor(item, i);\n            if (nameAndValue)\n                result[nameAndValue[0]] = nameAndValue[1];\n            return result;\n        }, {});\n    }\n    function tryCatch(fn, onerror, args) {\n        try {\n            fn.apply(null, args);\n        }\n        catch (ex) {\n            onerror && onerror(ex);\n        }\n    }\n    function getByKeyPath(obj, keyPath) {\n        if (hasOwn(obj, keyPath))\n            return obj[keyPath];\n        if (!keyPath)\n            return obj;\n        if (typeof keyPath !== 'string') {\n            var rv = [];\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                var val = getByKeyPath(obj, keyPath[i]);\n                rv.push(val);\n            }\n            return rv;\n        }\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var innerObj = obj[keyPath.substr(0, period)];\n            return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n        }\n        return undefined;\n    }\n    function setByKeyPath(obj, keyPath, value) {\n        if (!obj || keyPath === undefined)\n            return;\n        if ('isFrozen' in Object && Object.isFrozen(obj))\n            return;\n        if (typeof keyPath !== 'string' && 'length' in keyPath) {\n            assert(typeof value !== 'string' && 'length' in value);\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                setByKeyPath(obj, keyPath[i], value[i]);\n            }\n        }\n        else {\n            var period = keyPath.indexOf('.');\n            if (period !== -1) {\n                var currentKeyPath = keyPath.substr(0, period);\n                var remainingKeyPath = keyPath.substr(period + 1);\n                if (remainingKeyPath === \"\")\n                    if (value === undefined) {\n                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                            obj.splice(currentKeyPath, 1);\n                        else\n                            delete obj[currentKeyPath];\n                    }\n                    else\n                        obj[currentKeyPath] = value;\n                else {\n                    var innerObj = obj[currentKeyPath];\n                    if (!innerObj || !hasOwn(obj, currentKeyPath))\n                        innerObj = (obj[currentKeyPath] = {});\n                    setByKeyPath(innerObj, remainingKeyPath, value);\n                }\n            }\n            else {\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                        obj.splice(keyPath, 1);\n                    else\n                        delete obj[keyPath];\n                }\n                else\n                    obj[keyPath] = value;\n            }\n        }\n    }\n    function delByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string')\n            setByKeyPath(obj, keyPath, undefined);\n        else if ('length' in keyPath)\n            [].map.call(keyPath, function (kp) {\n                setByKeyPath(obj, kp, undefined);\n            });\n    }\n    function shallowClone(obj) {\n        var rv = {};\n        for (var m in obj) {\n            if (hasOwn(obj, m))\n                rv[m] = obj[m];\n        }\n        return rv;\n    }\n    var concat = [].concat;\n    function flatten(a) {\n        return concat.apply([], a);\n    }\n    var intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\n    var intrinsicTypes = intrinsicTypeNames.map(function (t) { return _global[t]; });\n    arrayToObject(intrinsicTypeNames, function (x) { return [x, true]; });\n    var circularRefs = null;\n    function deepClone(any) {\n        circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n        var rv = innerDeepClone(any);\n        circularRefs = null;\n        return rv;\n    }\n    function innerDeepClone(any) {\n        if (!any || typeof any !== 'object')\n            return any;\n        var rv = circularRefs && circularRefs.get(any);\n        if (rv)\n            return rv;\n        if (isArray(any)) {\n            rv = [];\n            circularRefs && circularRefs.set(any, rv);\n            for (var i = 0, l = any.length; i < l; ++i) {\n                rv.push(innerDeepClone(any[i]));\n            }\n        }\n        else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n            rv = any;\n        }\n        else {\n            var proto = getProto(any);\n            rv = proto === Object.prototype ? {} : Object.create(proto);\n            circularRefs && circularRefs.set(any, rv);\n            for (var prop in any) {\n                if (hasOwn(any, prop)) {\n                    rv[prop] = innerDeepClone(any[prop]);\n                }\n            }\n        }\n        return rv;\n    }\n    var toString = {}.toString;\n    function toStringTag(o) {\n        return toString.call(o).slice(8, -1);\n    }\n    var iteratorSymbol = typeof Symbol !== 'undefined' ?\n        Symbol.iterator :\n        '@@iterator';\n    var getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n        var i;\n        return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n    } : function () { return null; };\n    var NO_CHAR_ARRAY = {};\n    function getArrayOf(arrayLike) {\n        var i, a, x, it;\n        if (arguments.length === 1) {\n            if (isArray(arrayLike))\n                return arrayLike.slice();\n            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n                return [arrayLike];\n            if ((it = getIteratorOf(arrayLike))) {\n                a = [];\n                while ((x = it.next()), !x.done)\n                    a.push(x.value);\n                return a;\n            }\n            if (arrayLike == null)\n                return [arrayLike];\n            i = arrayLike.length;\n            if (typeof i === 'number') {\n                a = new Array(i);\n                while (i--)\n                    a[i] = arrayLike[i];\n                return a;\n            }\n            return [arrayLike];\n        }\n        i = arguments.length;\n        a = new Array(i);\n        while (i--)\n            a[i] = arguments[i];\n        return a;\n    }\n    var isAsyncFunction = typeof Symbol !== 'undefined'\n        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n        : function () { return false; };\n\n    var debug = typeof location !== 'undefined' &&\n        /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n    function setDebug(value, filter) {\n        debug = value;\n        libraryFilter = filter;\n    }\n    var libraryFilter = function () { return true; };\n    var NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\n    function getErrorWithStack() {\n        if (NEEDS_THROW_FOR_STACK)\n            try {\n                getErrorWithStack.arguments;\n                throw new Error();\n            }\n            catch (e) {\n                return e;\n            }\n        return new Error();\n    }\n    function prettyStack(exception, numIgnoredFrames) {\n        var stack = exception.stack;\n        if (!stack)\n            return \"\";\n        numIgnoredFrames = (numIgnoredFrames || 0);\n        if (stack.indexOf(exception.name) === 0)\n            numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n        return stack.split('\\n')\n            .slice(numIgnoredFrames)\n            .filter(libraryFilter)\n            .map(function (frame) { return \"\\n\" + frame; })\n            .join('');\n    }\n\n    var dexieErrorNames = [\n        'Modify',\n        'Bulk',\n        'OpenFailed',\n        'VersionChange',\n        'Schema',\n        'Upgrade',\n        'InvalidTable',\n        'MissingAPI',\n        'NoSuchDatabase',\n        'InvalidArgument',\n        'SubTransaction',\n        'Unsupported',\n        'Internal',\n        'DatabaseClosed',\n        'PrematureCommit',\n        'ForeignAwait'\n    ];\n    var idbDomErrorNames = [\n        'Unknown',\n        'Constraint',\n        'Data',\n        'TransactionInactive',\n        'ReadOnly',\n        'Version',\n        'NotFound',\n        'InvalidState',\n        'InvalidAccess',\n        'Abort',\n        'Timeout',\n        'QuotaExceeded',\n        'Syntax',\n        'DataClone'\n    ];\n    var errorList = dexieErrorNames.concat(idbDomErrorNames);\n    var defaultTexts = {\n        VersionChanged: \"Database version changed by other database connection\",\n        DatabaseClosed: \"Database has been closed\",\n        Abort: \"Transaction aborted\",\n        TransactionInactive: \"Transaction has already completed or failed\",\n        MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n    function DexieError(name, msg) {\n        this._e = getErrorWithStack();\n        this.name = name;\n        this.message = msg;\n    }\n    derive(DexieError).from(Error).extend({\n        stack: {\n            get: function () {\n                return this._stack ||\n                    (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n            }\n        },\n        toString: function () { return this.name + \": \" + this.message; }\n    });\n    function getMultiErrorMessage(msg, failures) {\n        return msg + \". Errors: \" + Object.keys(failures)\n            .map(function (key) { return failures[key].toString(); })\n            .filter(function (v, i, s) { return s.indexOf(v) === i; })\n            .join('\\n');\n    }\n    function ModifyError(msg, failures, successCount, failedKeys) {\n        this._e = getErrorWithStack();\n        this.failures = failures;\n        this.failedKeys = failedKeys;\n        this.successCount = successCount;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(ModifyError).from(DexieError);\n    function BulkError(msg, failures) {\n        this._e = getErrorWithStack();\n        this.name = \"BulkError\";\n        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n        this.failuresByPos = failures;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(BulkError).from(DexieError);\n    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\n    var BaseException = DexieError;\n    var exceptions = errorList.reduce(function (obj, name) {\n        var fullName = name + \"Error\";\n        function DexieError(msgOrInner, inner) {\n            this._e = getErrorWithStack();\n            this.name = fullName;\n            if (!msgOrInner) {\n                this.message = defaultTexts[name] || fullName;\n                this.inner = null;\n            }\n            else if (typeof msgOrInner === 'string') {\n                this.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n                this.inner = inner || null;\n            }\n            else if (typeof msgOrInner === 'object') {\n                this.message = msgOrInner.name + \" \" + msgOrInner.message;\n                this.inner = msgOrInner;\n            }\n        }\n        derive(DexieError).from(BaseException);\n        obj[name] = DexieError;\n        return obj;\n    }, {});\n    exceptions.Syntax = SyntaxError;\n    exceptions.Type = TypeError;\n    exceptions.Range = RangeError;\n    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n        obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    function mapError(domError, message) {\n        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n            return domError;\n        var rv = new exceptionMap[domError.name](message || domError.message, domError);\n        if (\"stack\" in domError) {\n            setProp(rv, \"stack\", { get: function () {\n                    return this.inner.stack;\n                } });\n        }\n        return rv;\n    }\n    var fullNameExceptions = errorList.reduce(function (obj, name) {\n        if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n            obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    fullNameExceptions.ModifyError = ModifyError;\n    fullNameExceptions.DexieError = DexieError;\n    fullNameExceptions.BulkError = BulkError;\n\n    function nop() { }\n    function mirror(val) { return val; }\n    function pureFunctionChain(f1, f2) {\n        if (f1 == null || f1 === mirror)\n            return f2;\n        return function (val) {\n            return f2(f1(val));\n        };\n    }\n    function callBoth(on1, on2) {\n        return function () {\n            on1.apply(this, arguments);\n            on2.apply(this, arguments);\n        };\n    }\n    function hookCreatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res !== undefined)\n                arguments[0] = res;\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res2 !== undefined ? res2 : res;\n        };\n    }\n    function hookDeletingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            f1.apply(this, arguments);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = this.onerror = null;\n            f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        };\n    }\n    function hookUpdatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function (modifications) {\n            var res = f1.apply(this, arguments);\n            extend(modifications, res);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res === undefined ?\n                (res2 === undefined ? undefined : res2) :\n                (extend(res, res2));\n        };\n    }\n    function reverseStoppableEventChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            if (f2.apply(this, arguments) === false)\n                return false;\n            return f1.apply(this, arguments);\n        };\n    }\n    function promisableChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res && typeof res.then === 'function') {\n                var thiz = this, i = arguments.length, args = new Array(i);\n                while (i--)\n                    args[i] = arguments[i];\n                return res.then(function () {\n                    return f2.apply(thiz, args);\n                });\n            }\n            return f2.apply(this, arguments);\n        };\n    }\n\n    var INTERNAL = {};\n    var LONG_STACKS_CLIP_LIMIT = 100,\n    MAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n        [] :\n        (function () {\n            var globalP = Promise.resolve();\n            if (typeof crypto === 'undefined' || !crypto.subtle)\n                return [globalP, getProto(globalP), globalP];\n            var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n            return [\n                nativeP,\n                getProto(nativeP),\n                globalP\n            ];\n        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\n    var patchGlobalPromise = !!resolvedGlobalPromise;\n    var stack_being_generated = false;\n    var schedulePhysicalTick = resolvedGlobalPromise ?\n        function () { resolvedGlobalPromise.then(physicalTick); }\n        :\n            _global.setImmediate ?\n                setImmediate.bind(null, physicalTick) :\n                _global.MutationObserver ?\n                    function () {\n                        var hiddenDiv = document.createElement(\"div\");\n                        (new MutationObserver(function () {\n                            physicalTick();\n                            hiddenDiv = null;\n                        })).observe(hiddenDiv, { attributes: true });\n                        hiddenDiv.setAttribute('i', '1');\n                    } :\n                    function () { setTimeout(physicalTick, 0); };\n    var asap = function (callback, args) {\n        microtickQueue.push([callback, args]);\n        if (needsNewPhysicalTick) {\n            schedulePhysicalTick();\n            needsNewPhysicalTick = false;\n        }\n    };\n    var isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    currentFulfiller = null, rejectionMapper = mirror;\n    var globalPSD = {\n        id: 'global',\n        global: true,\n        ref: 0,\n        unhandleds: [],\n        onunhandled: globalError,\n        pgp: false,\n        env: {},\n        finalize: function () {\n            this.unhandleds.forEach(function (uh) {\n                try {\n                    globalError(uh[0], uh[1]);\n                }\n                catch (e) { }\n            });\n        }\n    };\n    var PSD = globalPSD;\n    var microtickQueue = [];\n    var numScheduledCalls = 0;\n    var tickFinalizers = [];\n    function DexiePromise(fn) {\n        if (typeof this !== 'object')\n            throw new TypeError('Promises must be constructed via new');\n        this._listeners = [];\n        this.onuncatched = nop;\n        this._lib = false;\n        var psd = (this._PSD = PSD);\n        if (debug) {\n            this._stackHolder = getErrorWithStack();\n            this._prev = null;\n            this._numPrev = 0;\n        }\n        if (typeof fn !== 'function') {\n            if (fn !== INTERNAL)\n                throw new TypeError('Not a function');\n            this._state = arguments[1];\n            this._value = arguments[2];\n            if (this._state === false)\n                handleRejection(this, this._value);\n            return;\n        }\n        this._state = null;\n        this._value = null;\n        ++psd.ref;\n        executePromiseTask(this, fn);\n    }\n    var thenProp = {\n        get: function () {\n            var psd = PSD, microTaskId = totalEchoes;\n            function then(onFulfilled, onRejected) {\n                var _this = this;\n                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n                var cleanup = possibleAwait && !decrementExpectedAwaits();\n                var rv = new DexiePromise(function (resolve, reject) {\n                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n                });\n                debug && linkToPreviousPromise(rv, this);\n                return rv;\n            }\n            then.prototype = INTERNAL;\n            return then;\n        },\n        set: function (value) {\n            setProp(this, 'then', value && value.prototype === INTERNAL ?\n                thenProp :\n                {\n                    get: function () {\n                        return value;\n                    },\n                    set: thenProp.set\n                });\n        }\n    };\n    props(DexiePromise.prototype, {\n        then: thenProp,\n        _then: function (onFulfilled, onRejected) {\n            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n        },\n        catch: function (onRejected) {\n            if (arguments.length === 1)\n                return this.then(null, onRejected);\n            var type = arguments[0], handler = arguments[1];\n            return typeof type === 'function' ? this.then(null, function (err) {\n                return err instanceof type ? handler(err) : PromiseReject(err);\n            })\n                : this.then(null, function (err) {\n                    return err && err.name === type ? handler(err) : PromiseReject(err);\n                });\n        },\n        finally: function (onFinally) {\n            return this.then(function (value) {\n                onFinally();\n                return value;\n            }, function (err) {\n                onFinally();\n                return PromiseReject(err);\n            });\n        },\n        stack: {\n            get: function () {\n                if (this._stack)\n                    return this._stack;\n                try {\n                    stack_being_generated = true;\n                    var stacks = getStack(this, [], MAX_LONG_STACKS);\n                    var stack = stacks.join(\"\\nFrom previous: \");\n                    if (this._state !== null)\n                        this._stack = stack;\n                    return stack;\n                }\n                finally {\n                    stack_being_generated = false;\n                }\n            }\n        },\n        timeout: function (ms, msg) {\n            var _this = this;\n            return ms < Infinity ?\n                new DexiePromise(function (resolve, reject) {\n                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n                }) : this;\n        }\n    });\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\n    globalPSD.env = snapShot();\n    function Listener(onFulfilled, onRejected, resolve, reject, zone) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.psd = zone;\n    }\n    props(DexiePromise, {\n        all: function () {\n            var values = getArrayOf.apply(null, arguments)\n                .map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (values.length === 0)\n                    resolve([]);\n                var remaining = values.length;\n                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (!--remaining)\n                        resolve(values);\n                }, reject); });\n            });\n        },\n        resolve: function (value) {\n            if (value instanceof DexiePromise)\n                return value;\n            if (value && typeof value.then === 'function')\n                return new DexiePromise(function (resolve, reject) {\n                    value.then(resolve, reject);\n                });\n            var rv = new DexiePromise(INTERNAL, true, value);\n            linkToPreviousPromise(rv, currentFulfiller);\n            return rv;\n        },\n        reject: PromiseReject,\n        race: function () {\n            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n            });\n        },\n        PSD: {\n            get: function () { return PSD; },\n            set: function (value) { return PSD = value; }\n        },\n        totalEchoes: { get: function () { return totalEchoes; } },\n        newPSD: newScope,\n        usePSD: usePSD,\n        scheduler: {\n            get: function () { return asap; },\n            set: function (value) { asap = value; }\n        },\n        rejectionMapper: {\n            get: function () { return rejectionMapper; },\n            set: function (value) { rejectionMapper = value; }\n        },\n        follow: function (fn, zoneProps) {\n            return new DexiePromise(function (resolve, reject) {\n                return newScope(function (resolve, reject) {\n                    var psd = PSD;\n                    psd.unhandleds = [];\n                    psd.onunhandled = reject;\n                    psd.finalize = callBoth(function () {\n                        var _this = this;\n                        run_at_end_of_this_or_next_physical_tick(function () {\n                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                        });\n                    }, psd.finalize);\n                    fn();\n                }, zoneProps, resolve, reject);\n            });\n        }\n    });\n    if (NativePromise) {\n        if (NativePromise.allSettled)\n            setProp(DexiePromise, \"allSettled\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve) {\n                    if (possiblePromises.length === 0)\n                        resolve([]);\n                    var remaining = possiblePromises.length;\n                    var results = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                        .then(function () { return --remaining || resolve(results); }); });\n                });\n            });\n        if (NativePromise.any && typeof AggregateError !== 'undefined')\n            setProp(DexiePromise, \"any\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve, reject) {\n                    if (possiblePromises.length === 0)\n                        reject(new AggregateError([]));\n                    var remaining = possiblePromises.length;\n                    var failures = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                        failures[i] = failure;\n                        if (!--remaining)\n                            reject(new AggregateError(failures));\n                    }); });\n                });\n            });\n    }\n    function executePromiseTask(promise, fn) {\n        try {\n            fn(function (value) {\n                if (promise._state !== null)\n                    return;\n                if (value === promise)\n                    throw new TypeError('A promise cannot be resolved with itself.');\n                var shouldExecuteTick = promise._lib && beginMicroTickScope();\n                if (value && typeof value.then === 'function') {\n                    executePromiseTask(promise, function (resolve, reject) {\n                        value instanceof DexiePromise ?\n                            value._then(resolve, reject) :\n                            value.then(resolve, reject);\n                    });\n                }\n                else {\n                    promise._state = true;\n                    promise._value = value;\n                    propagateAllListeners(promise);\n                }\n                if (shouldExecuteTick)\n                    endMicroTickScope();\n            }, handleRejection.bind(null, promise));\n        }\n        catch (ex) {\n            handleRejection(promise, ex);\n        }\n    }\n    function handleRejection(promise, reason) {\n        rejectingErrors.push(reason);\n        if (promise._state !== null)\n            return;\n        var shouldExecuteTick = promise._lib && beginMicroTickScope();\n        reason = rejectionMapper(reason);\n        promise._state = false;\n        promise._value = reason;\n        debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n            var origProp = getPropertyDescriptor(reason, \"stack\");\n            reason._promise = promise;\n            setProp(reason, \"stack\", {\n                get: function () {\n                    return stack_being_generated ?\n                        origProp && (origProp.get ?\n                            origProp.get.apply(reason) :\n                            origProp.value) :\n                        promise.stack;\n                }\n            });\n        });\n        addPossiblyUnhandledError(promise);\n        propagateAllListeners(promise);\n        if (shouldExecuteTick)\n            endMicroTickScope();\n    }\n    function propagateAllListeners(promise) {\n        var listeners = promise._listeners;\n        promise._listeners = [];\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            propagateToListener(promise, listeners[i]);\n        }\n        var psd = promise._PSD;\n        --psd.ref || psd.finalize();\n        if (numScheduledCalls === 0) {\n            ++numScheduledCalls;\n            asap(function () {\n                if (--numScheduledCalls === 0)\n                    finalizePhysicalTick();\n            }, []);\n        }\n    }\n    function propagateToListener(promise, listener) {\n        if (promise._state === null) {\n            promise._listeners.push(listener);\n            return;\n        }\n        var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n        if (cb === null) {\n            return (promise._state ? listener.resolve : listener.reject)(promise._value);\n        }\n        ++listener.psd.ref;\n        ++numScheduledCalls;\n        asap(callListener, [cb, promise, listener]);\n    }\n    function callListener(cb, promise, listener) {\n        try {\n            currentFulfiller = promise;\n            var ret, value = promise._value;\n            if (promise._state) {\n                ret = cb(value);\n            }\n            else {\n                if (rejectingErrors.length)\n                    rejectingErrors = [];\n                ret = cb(value);\n                if (rejectingErrors.indexOf(value) === -1)\n                    markErrorAsHandled(promise);\n            }\n            listener.resolve(ret);\n        }\n        catch (e) {\n            listener.reject(e);\n        }\n        finally {\n            currentFulfiller = null;\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n            --listener.psd.ref || listener.psd.finalize();\n        }\n    }\n    function getStack(promise, stacks, limit) {\n        if (stacks.length === limit)\n            return stacks;\n        var stack = \"\";\n        if (promise._state === false) {\n            var failure = promise._value, errorName, message;\n            if (failure != null) {\n                errorName = failure.name || \"Error\";\n                message = failure.message || failure;\n                stack = prettyStack(failure, 0);\n            }\n            else {\n                errorName = failure;\n                message = \"\";\n            }\n            stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n        }\n        if (debug) {\n            stack = prettyStack(promise._stackHolder, 2);\n            if (stack && stacks.indexOf(stack) === -1)\n                stacks.push(stack);\n            if (promise._prev)\n                getStack(promise._prev, stacks, limit);\n        }\n        return stacks;\n    }\n    function linkToPreviousPromise(promise, prev) {\n        var numPrev = prev ? prev._numPrev + 1 : 0;\n        if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n            promise._prev = prev;\n            promise._numPrev = numPrev;\n        }\n    }\n    function physicalTick() {\n        beginMicroTickScope() && endMicroTickScope();\n    }\n    function beginMicroTickScope() {\n        var wasRootExec = isOutsideMicroTick;\n        isOutsideMicroTick = false;\n        needsNewPhysicalTick = false;\n        return wasRootExec;\n    }\n    function endMicroTickScope() {\n        var callbacks, i, l;\n        do {\n            while (microtickQueue.length > 0) {\n                callbacks = microtickQueue;\n                microtickQueue = [];\n                l = callbacks.length;\n                for (i = 0; i < l; ++i) {\n                    var item = callbacks[i];\n                    item[0].apply(null, item[1]);\n                }\n            }\n        } while (microtickQueue.length > 0);\n        isOutsideMicroTick = true;\n        needsNewPhysicalTick = true;\n    }\n    function finalizePhysicalTick() {\n        var unhandledErrs = unhandledErrors;\n        unhandledErrors = [];\n        unhandledErrs.forEach(function (p) {\n            p._PSD.onunhandled.call(null, p._value, p);\n        });\n        var finalizers = tickFinalizers.slice(0);\n        var i = finalizers.length;\n        while (i)\n            finalizers[--i]();\n    }\n    function run_at_end_of_this_or_next_physical_tick(fn) {\n        function finalizer() {\n            fn();\n            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n        }\n        tickFinalizers.push(finalizer);\n        ++numScheduledCalls;\n        asap(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n    function addPossiblyUnhandledError(promise) {\n        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n            unhandledErrors.push(promise);\n    }\n    function markErrorAsHandled(promise) {\n        var i = unhandledErrors.length;\n        while (i)\n            if (unhandledErrors[--i]._value === promise._value) {\n                unhandledErrors.splice(i, 1);\n                return;\n            }\n    }\n    function PromiseReject(reason) {\n        return new DexiePromise(INTERNAL, false, reason);\n    }\n    function wrap(fn, errorCatcher) {\n        var psd = PSD;\n        return function () {\n            var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n            try {\n                switchToZone(psd, true);\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                errorCatcher && errorCatcher(e);\n            }\n            finally {\n                switchToZone(outerScope, false);\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n    }\n    var task = { awaits: 0, echoes: 0, id: 0 };\n    var taskCounter = 0;\n    var zoneStack = [];\n    var zoneEchoes = 0;\n    var totalEchoes = 0;\n    var zone_id_counter = 0;\n    function newScope(fn, props, a1, a2) {\n        var parent = PSD, psd = Object.create(parent);\n        psd.parent = parent;\n        psd.ref = 0;\n        psd.global = false;\n        psd.id = ++zone_id_counter;\n        var globalEnv = globalPSD.env;\n        psd.env = patchGlobalPromise ? {\n            Promise: DexiePromise,\n            PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n            all: DexiePromise.all,\n            race: DexiePromise.race,\n            allSettled: DexiePromise.allSettled,\n            any: DexiePromise.any,\n            resolve: DexiePromise.resolve,\n            reject: DexiePromise.reject,\n            nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n            gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n        } : {};\n        if (props)\n            extend(psd, props);\n        ++parent.ref;\n        psd.finalize = function () {\n            --this.parent.ref || this.parent.finalize();\n        };\n        var rv = usePSD(psd, fn, a1, a2);\n        if (psd.ref === 0)\n            psd.finalize();\n        return rv;\n    }\n    function incrementExpectedAwaits() {\n        if (!task.id)\n            task.id = ++taskCounter;\n        ++task.awaits;\n        task.echoes += ZONE_ECHO_LIMIT;\n        return task.id;\n    }\n    function decrementExpectedAwaits() {\n        if (!task.awaits)\n            return false;\n        if (--task.awaits === 0)\n            task.id = 0;\n        task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n        return true;\n    }\n    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n        incrementExpectedAwaits = decrementExpectedAwaits = nop;\n    }\n    function onPossibleParallellAsync(possiblePromise) {\n        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n            incrementExpectedAwaits();\n            return possiblePromise.then(function (x) {\n                decrementExpectedAwaits();\n                return x;\n            }, function (e) {\n                decrementExpectedAwaits();\n                return rejection(e);\n            });\n        }\n        return possiblePromise;\n    }\n    function zoneEnterEcho(targetZone) {\n        ++totalEchoes;\n        if (!task.echoes || --task.echoes === 0) {\n            task.echoes = task.id = 0;\n        }\n        zoneStack.push(PSD);\n        switchToZone(targetZone, true);\n    }\n    function zoneLeaveEcho() {\n        var zone = zoneStack[zoneStack.length - 1];\n        zoneStack.pop();\n        switchToZone(zone, false);\n    }\n    function switchToZone(targetZone, bEnteringZone) {\n        var currentZone = PSD;\n        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n            enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n        }\n        if (targetZone === PSD)\n            return;\n        PSD = targetZone;\n        if (currentZone === globalPSD)\n            globalPSD.env = snapShot();\n        if (patchGlobalPromise) {\n            var GlobalPromise_1 = globalPSD.env.Promise;\n            var targetEnv = targetZone.env;\n            nativePromiseProto.then = targetEnv.nthen;\n            GlobalPromise_1.prototype.then = targetEnv.gthen;\n            if (currentZone.global || targetZone.global) {\n                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n                GlobalPromise_1.all = targetEnv.all;\n                GlobalPromise_1.race = targetEnv.race;\n                GlobalPromise_1.resolve = targetEnv.resolve;\n                GlobalPromise_1.reject = targetEnv.reject;\n                if (targetEnv.allSettled)\n                    GlobalPromise_1.allSettled = targetEnv.allSettled;\n                if (targetEnv.any)\n                    GlobalPromise_1.any = targetEnv.any;\n            }\n        }\n    }\n    function snapShot() {\n        var GlobalPromise = _global.Promise;\n        return patchGlobalPromise ? {\n            Promise: GlobalPromise,\n            PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n            all: GlobalPromise.all,\n            race: GlobalPromise.race,\n            allSettled: GlobalPromise.allSettled,\n            any: GlobalPromise.any,\n            resolve: GlobalPromise.resolve,\n            reject: GlobalPromise.reject,\n            nthen: nativePromiseProto.then,\n            gthen: GlobalPromise.prototype.then\n        } : {};\n    }\n    function usePSD(psd, fn, a1, a2, a3) {\n        var outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn(a1, a2, a3);\n        }\n        finally {\n            switchToZone(outerScope, false);\n        }\n    }\n    function enqueueNativeMicroTask(job) {\n        nativePromiseThen.call(resolvedNativePromise, job);\n    }\n    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n        return typeof fn !== 'function' ? fn : function () {\n            var outerZone = PSD;\n            if (possibleAwait)\n                incrementExpectedAwaits();\n            switchToZone(zone, true);\n            try {\n                return fn.apply(this, arguments);\n            }\n            finally {\n                switchToZone(outerZone, false);\n                if (cleanup)\n                    enqueueNativeMicroTask(decrementExpectedAwaits);\n            }\n        };\n    }\n    function getPatchedPromiseThen(origThen, zone) {\n        return function (onResolved, onRejected) {\n            return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n        };\n    }\n    var UNHANDLEDREJECTION = \"unhandledrejection\";\n    function globalError(err, promise) {\n        var rv;\n        try {\n            rv = promise.onuncatched(err);\n        }\n        catch (e) { }\n        if (rv !== false)\n            try {\n                var event, eventData = { promise: promise, reason: err };\n                if (_global.document && document.createEvent) {\n                    event = document.createEvent('Event');\n                    event.initEvent(UNHANDLEDREJECTION, true, true);\n                    extend(event, eventData);\n                }\n                else if (_global.CustomEvent) {\n                    event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                    extend(event, eventData);\n                }\n                if (event && _global.dispatchEvent) {\n                    dispatchEvent(event);\n                    if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                        try {\n                            _global.onunhandledrejection(event);\n                        }\n                        catch (_) { }\n                }\n                if (debug && event && !event.defaultPrevented) {\n                    console.warn(\"Unhandled rejection: \" + (err.stack || err));\n                }\n            }\n            catch (e) { }\n    }\n    var rejection = DexiePromise.reject;\n\n    function tempTransaction(db, mode, storeNames, fn) {\n        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n            if (db._state.openComplete) {\n                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n            }\n            if (!db._state.isBeingOpened) {\n                if (!db._options.autoOpen)\n                    return rejection(new exceptions.DatabaseClosed());\n                db.open().catch(nop);\n            }\n            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n        }\n        else {\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db._close();\n                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n                }\n                return rejection(ex);\n            }\n            return trans._promise(mode, function (resolve, reject) {\n                return newScope(function () {\n                    PSD.trans = trans;\n                    return fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                return trans._completion.then(function () { return result; });\n            });\n        }\n    }\n\n    var DEXIE_VERSION = '3.2.2';\n    var maxString = String.fromCharCode(65535);\n    var minKey = -Infinity;\n    var INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\n    var STRING_EXPECTED = \"String expected.\";\n    var connections = [];\n    var isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\n    var hasIEDeleteObjectStoreBug = isIEOrEdge;\n    var hangsOnDeleteLargeKeyRange = isIEOrEdge;\n    var dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\n    var DBNAMES_DB = '__dbnames';\n    var READONLY = 'readonly';\n    var READWRITE = 'readwrite';\n\n    function combine(filter1, filter2) {\n        return filter1 ?\n            filter2 ?\n                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n                filter1 :\n            filter2;\n    }\n\n    var AnyRange = {\n        type: 3 ,\n        lower: -Infinity,\n        lowerOpen: false,\n        upper: [[]],\n        upperOpen: false\n    };\n\n    function workaroundForUndefinedPrimKey(keyPath) {\n        return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n            ? function (obj) {\n                if (obj[keyPath] === undefined && (keyPath in obj)) {\n                    obj = deepClone(obj);\n                    delete obj[keyPath];\n                }\n                return obj;\n            }\n            : function (obj) { return obj; };\n    }\n\n    var Table =  (function () {\n        function Table() {\n        }\n        Table.prototype._trans = function (mode, fn, writeLocked) {\n            var trans = this._tx || PSD.trans;\n            var tableName = this.name;\n            function checkTableInTransaction(resolve, reject, trans) {\n                if (!trans.schema[tableName])\n                    throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n                return fn(trans.idbtrans, trans);\n            }\n            var wasRootExec = beginMicroTickScope();\n            try {\n                return trans && trans.db === this.db ?\n                    trans === PSD.trans ?\n                        trans._promise(mode, checkTableInTransaction, writeLocked) :\n                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n            }\n            finally {\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n        Table.prototype.get = function (keyOrCrit, cb) {\n            var _this = this;\n            if (keyOrCrit && keyOrCrit.constructor === Object)\n                return this.where(keyOrCrit).first(cb);\n            return this._trans('readonly', function (trans) {\n                return _this.core.get({ trans: trans, key: keyOrCrit })\n                    .then(function (res) { return _this.hook.reading.fire(res); });\n            }).then(cb);\n        };\n        Table.prototype.where = function (indexOrCrit) {\n            if (typeof indexOrCrit === 'string')\n                return new this.db.WhereClause(this, indexOrCrit);\n            if (isArray(indexOrCrit))\n                return new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n            var keyPaths = keys(indexOrCrit);\n            if (keyPaths.length === 1)\n                return this\n                    .where(keyPaths[0])\n                    .equals(indexOrCrit[keyPaths[0]]);\n            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n                return ix.compound &&\n                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n                    ix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n            })[0];\n            if (compoundIndex && this.db._maxKey !== maxString)\n                return this\n                    .where(compoundIndex.name)\n                    .equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n            if (!compoundIndex && debug)\n                console.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n                    (\"compound index [\" + keyPaths.join('+') + \"]\"));\n            var idxByName = this.schema.idxByName;\n            var idb = this.db._deps.indexedDB;\n            function equals(a, b) {\n                try {\n                    return idb.cmp(a, b) === 0;\n                }\n                catch (e) {\n                    return false;\n                }\n            }\n            var _a = keyPaths.reduce(function (_a, keyPath) {\n                var prevIndex = _a[0], prevFilterFn = _a[1];\n                var index = idxByName[keyPath];\n                var value = indexOrCrit[keyPath];\n                return [\n                    prevIndex || index,\n                    prevIndex || !index ?\n                        combine(prevFilterFn, index && index.multi ?\n                            function (x) {\n                                var prop = getByKeyPath(x, keyPath);\n                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                        : prevFilterFn\n                ];\n            }, [null, null]), idx = _a[0], filterFunction = _a[1];\n            return idx ?\n                this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                    .filter(filterFunction) :\n                compoundIndex ?\n                    this.filter(filterFunction) :\n                    this.where(keyPaths).equals('');\n        };\n        Table.prototype.filter = function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        };\n        Table.prototype.count = function (thenShortcut) {\n            return this.toCollection().count(thenShortcut);\n        };\n        Table.prototype.offset = function (offset) {\n            return this.toCollection().offset(offset);\n        };\n        Table.prototype.limit = function (numRows) {\n            return this.toCollection().limit(numRows);\n        };\n        Table.prototype.each = function (callback) {\n            return this.toCollection().each(callback);\n        };\n        Table.prototype.toArray = function (thenShortcut) {\n            return this.toCollection().toArray(thenShortcut);\n        };\n        Table.prototype.toCollection = function () {\n            return new this.db.Collection(new this.db.WhereClause(this));\n        };\n        Table.prototype.orderBy = function (index) {\n            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n                \"[\" + index.join('+') + \"]\" :\n                index));\n        };\n        Table.prototype.reverse = function () {\n            return this.toCollection().reverse();\n        };\n        Table.prototype.mapToClass = function (constructor) {\n            this.schema.mappedClass = constructor;\n            var readHook = function (obj) {\n                if (!obj)\n                    return obj;\n                var res = Object.create(constructor.prototype);\n                for (var m in obj)\n                    if (hasOwn(obj, m))\n                        try {\n                            res[m] = obj[m];\n                        }\n                        catch (_) { }\n                return res;\n            };\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        };\n        Table.prototype.defineClass = function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return this.mapToClass(Class);\n        };\n        Table.prototype.add = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.update = function (keyOrObject, modifications) {\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined)\n                    return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n                try {\n                    if (typeof modifications !== \"function\") {\n                        keys(modifications).forEach(function (keyPath) {\n                            setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                        });\n                    }\n                    else {\n                        modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                    }\n                }\n                catch (_a) {\n                }\n                return this.where(\":id\").equals(key).modify(modifications);\n            }\n            else {\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        };\n        Table.prototype.put = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.delete = function (key) {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.clear = function () {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.bulkGet = function (keys) {\n            var _this = this;\n            return this._trans('readonly', function (trans) {\n                return _this.core.getMany({\n                    keys: keys,\n                    trans: trans\n                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n            });\n        };\n        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToAdd = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToPut = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkDelete = function (keys) {\n            var _this = this;\n            var numKeys = keys.length;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys });\n            }).then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + numKeys + \" operations failed\", failures);\n            });\n        };\n        return Table;\n    }());\n\n    function Events(ctx) {\n        var evs = {};\n        var rv = function (eventName, subscriber) {\n            if (subscriber) {\n                var i = arguments.length, args = new Array(i - 1);\n                while (--i)\n                    args[i - 1] = arguments[i];\n                evs[eventName].subscribe.apply(null, args);\n                return ctx;\n            }\n            else if (typeof (eventName) === 'string') {\n                return evs[eventName];\n            }\n        };\n        rv.addEventType = add;\n        for (var i = 1, l = arguments.length; i < l; ++i) {\n            add(arguments[i]);\n        }\n        return rv;\n        function add(eventName, chainFunction, defaultFunction) {\n            if (typeof eventName === 'object')\n                return addConfiguredEvents(eventName);\n            if (!chainFunction)\n                chainFunction = reverseStoppableEventChain;\n            if (!defaultFunction)\n                defaultFunction = nop;\n            var context = {\n                subscribers: [],\n                fire: defaultFunction,\n                subscribe: function (cb) {\n                    if (context.subscribers.indexOf(cb) === -1) {\n                        context.subscribers.push(cb);\n                        context.fire = chainFunction(context.fire, cb);\n                    }\n                },\n                unsubscribe: function (cb) {\n                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n                }\n            };\n            evs[eventName] = rv[eventName] = context;\n            return context;\n        }\n        function addConfiguredEvents(cfg) {\n            keys(cfg).forEach(function (eventName) {\n                var args = cfg[eventName];\n                if (isArray(args)) {\n                    add(eventName, cfg[eventName][0], cfg[eventName][1]);\n                }\n                else if (args === 'asap') {\n                    var context = add(eventName, mirror, function fire() {\n                        var i = arguments.length, args = new Array(i);\n                        while (i--)\n                            args[i] = arguments[i];\n                        context.subscribers.forEach(function (fn) {\n                            asap$1(function fireEvent() {\n                                fn.apply(null, args);\n                            });\n                        });\n                    });\n                }\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid event config\");\n            });\n        }\n    }\n\n    function makeClassConstructor(prototype, constructor) {\n        derive(constructor).from({ prototype: prototype });\n        return constructor;\n    }\n\n    function createTableConstructor(db) {\n        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n            this.db = db;\n            this._tx = trans;\n            this.name = name;\n            this.schema = tableSchema;\n            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n                \"creating\": [hookCreatingChain, nop],\n                \"reading\": [pureFunctionChain, mirror],\n                \"updating\": [hookUpdatingChain, nop],\n                \"deleting\": [hookDeletingChain, nop]\n            });\n        });\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) &&\n            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n    function addFilter(ctx, fn) {\n        ctx.filter = combine(ctx.filter, fn);\n    }\n    function addReplayFilter(ctx, factory, isLimitFilter) {\n        var curr = ctx.replayFilter;\n        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n        ctx.justLimit = isLimitFilter && !curr;\n    }\n    function addMatchFilter(ctx, fn) {\n        ctx.isMatch = combine(ctx.isMatch, fn);\n    }\n    function getIndexOrStore(ctx, coreSchema) {\n        if (ctx.isPrimKey)\n            return coreSchema.primaryKey;\n        var index = coreSchema.getIndexByKeyPath(ctx.index);\n        if (!index)\n            throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n        return index;\n    }\n    function openCursor(ctx, coreTable, trans) {\n        var index = getIndexOrStore(ctx, coreTable.schema);\n        return coreTable.openCursor({\n            trans: trans,\n            values: !ctx.keysOnly,\n            reverse: ctx.dir === 'prev',\n            unique: !!ctx.unique,\n            query: {\n                index: index,\n                range: ctx.range\n            }\n        });\n    }\n    function iter(ctx, fn, coreTrans, coreTable) {\n        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n        if (!ctx.or) {\n            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n        }\n        else {\n            var set_1 = {};\n            var union = function (item, cursor, advance) {\n                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                    var primaryKey = cursor.primaryKey;\n                    var key = '' + primaryKey;\n                    if (key === '[object ArrayBuffer]')\n                        key = '' + new Uint8Array(primaryKey);\n                    if (!hasOwn(set_1, key)) {\n                        set_1[key] = true;\n                        fn(item, cursor, advance);\n                    }\n                }\n            };\n            return Promise.all([\n                ctx.or._iterate(union, coreTrans),\n                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n            ]);\n        }\n    }\n    function iterate(cursorPromise, filter, fn, valueMapper) {\n        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n        var wrappedFn = wrap(mappedFn);\n        return cursorPromise.then(function (cursor) {\n            if (cursor) {\n                return cursor.start(function () {\n                    var c = function () { return cursor.continue(); };\n                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                    c();\n                });\n            }\n        });\n    }\n\n    function cmp(a, b) {\n        try {\n            var ta = type(a);\n            var tb = type(b);\n            if (ta !== tb) {\n                if (ta === 'Array')\n                    return 1;\n                if (tb === 'Array')\n                    return -1;\n                if (ta === 'binary')\n                    return 1;\n                if (tb === 'binary')\n                    return -1;\n                if (ta === 'string')\n                    return 1;\n                if (tb === 'string')\n                    return -1;\n                if (ta === 'Date')\n                    return 1;\n                if (tb !== 'Date')\n                    return NaN;\n                return -1;\n            }\n            switch (ta) {\n                case 'number':\n                case 'Date':\n                case 'string':\n                    return a > b ? 1 : a < b ? -1 : 0;\n                case 'binary': {\n                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n                }\n                case 'Array':\n                    return compareArrays(a, b);\n            }\n        }\n        catch (_a) { }\n        return NaN;\n    }\n    function compareArrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            var res = cmp(a[i], b[i]);\n            if (res !== 0)\n                return res;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function compareUint8Arrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            if (a[i] !== b[i])\n                return a[i] < b[i] ? -1 : 1;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function type(x) {\n        var t = typeof x;\n        if (t !== 'object')\n            return t;\n        if (ArrayBuffer.isView(x))\n            return 'binary';\n        var tsTag = toStringTag(x);\n        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n    }\n    function getUint8Array(a) {\n        if (a instanceof Uint8Array)\n            return a;\n        if (ArrayBuffer.isView(a))\n            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n        return new Uint8Array(a);\n    }\n\n    var Collection =  (function () {\n        function Collection() {\n        }\n        Collection.prototype._read = function (fn, cb) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readonly', fn).then(cb);\n        };\n        Collection.prototype._write = function (fn) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readwrite', fn, \"locked\");\n        };\n        Collection.prototype._addAlgorithm = function (fn) {\n            var ctx = this._ctx;\n            ctx.algorithm = combine(ctx.algorithm, fn);\n        };\n        Collection.prototype._iterate = function (fn, coreTrans) {\n            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n        };\n        Collection.prototype.clone = function (props) {\n            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n            if (props)\n                extend(ctx, props);\n            rv._ctx = ctx;\n            return rv;\n        };\n        Collection.prototype.raw = function () {\n            this._ctx.valueMapper = null;\n            return this;\n        };\n        Collection.prototype.each = function (fn) {\n            var ctx = this._ctx;\n            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n        };\n        Collection.prototype.count = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                var coreTable = ctx.table.core;\n                if (isPlainKeyRange(ctx, true)) {\n                    return coreTable.count({\n                        trans: trans,\n                        query: {\n                            index: getIndexOrStore(ctx, coreTable.schema),\n                            range: ctx.range\n                        }\n                    }).then(function (count) { return Math.min(count, ctx.limit); });\n                }\n                else {\n                    var count = 0;\n                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                        .then(function () { return count; });\n                }\n            }).then(cb);\n        };\n        Collection.prototype.sortBy = function (keyPath, cb) {\n            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n            function getval(obj, i) {\n                if (i)\n                    return getval(obj[parts[i]], i - 1);\n                return obj[lastPart];\n            }\n            var order = this._ctx.dir === \"next\" ? 1 : -1;\n            function sorter(a, b) {\n                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n                return aVal < bVal ? -order : aVal > bVal ? order : 0;\n            }\n            return this.toArray(function (a) {\n                return a.sort(sorter);\n            }).then(cb);\n        };\n        Collection.prototype.toArray = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    var valueMapper_1 = ctx.valueMapper;\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        limit: ctx.limit,\n                        values: true,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    }).then(function (_a) {\n                        var result = _a.result;\n                        return valueMapper_1 ? result.map(valueMapper_1) : result;\n                    });\n                }\n                else {\n                    var a_1 = [];\n                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n                }\n            }, cb);\n        };\n        Collection.prototype.offset = function (offset) {\n            var ctx = this._ctx;\n            if (offset <= 0)\n                return this;\n            ctx.offset += offset;\n            if (isPlainKeyRange(ctx)) {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function (cursor, advance) {\n                        if (offsetLeft === 0)\n                            return true;\n                        if (offsetLeft === 1) {\n                            --offsetLeft;\n                            return false;\n                        }\n                        advance(function () {\n                            cursor.advance(offsetLeft);\n                            offsetLeft = 0;\n                        });\n                        return false;\n                    };\n                });\n            }\n            else {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function () { return (--offsetLeft < 0); };\n                });\n            }\n            return this;\n        };\n        Collection.prototype.limit = function (numRows) {\n            this._ctx.limit = Math.min(this._ctx.limit, numRows);\n            addReplayFilter(this._ctx, function () {\n                var rowsLeft = numRows;\n                return function (cursor, advance, resolve) {\n                    if (--rowsLeft <= 0)\n                        advance(resolve);\n                    return rowsLeft >= 0;\n                };\n            }, true);\n            return this;\n        };\n        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n            addFilter(this._ctx, function (cursor, advance, resolve) {\n                if (filterFunction(cursor.value)) {\n                    advance(resolve);\n                    return bIncludeStopEntry;\n                }\n                else {\n                    return true;\n                }\n            });\n            return this;\n        };\n        Collection.prototype.first = function (cb) {\n            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.last = function (cb) {\n            return this.reverse().first(cb);\n        };\n        Collection.prototype.filter = function (filterFunction) {\n            addFilter(this._ctx, function (cursor) {\n                return filterFunction(cursor.value);\n            });\n            addMatchFilter(this._ctx, filterFunction);\n            return this;\n        };\n        Collection.prototype.and = function (filter) {\n            return this.filter(filter);\n        };\n        Collection.prototype.or = function (indexName) {\n            return new this.db.WhereClause(this._ctx.table, indexName, this);\n        };\n        Collection.prototype.reverse = function () {\n            this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n            if (this._ondirectionchange)\n                this._ondirectionchange(this._ctx.dir);\n            return this;\n        };\n        Collection.prototype.desc = function () {\n            return this.reverse();\n        };\n        Collection.prototype.eachKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n        };\n        Collection.prototype.eachUniqueKey = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.eachKey(cb);\n        };\n        Collection.prototype.eachPrimaryKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n        };\n        Collection.prototype.keys = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.key);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.primaryKeys = function (cb) {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                return this._read(function (trans) {\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        values: false,\n                        limit: ctx.limit,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    });\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return result;\n                }).then(cb);\n            }\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.primaryKey);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.uniqueKeys = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.keys(cb);\n        };\n        Collection.prototype.firstKey = function (cb) {\n            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.lastKey = function (cb) {\n            return this.reverse().firstKey(cb);\n        };\n        Collection.prototype.distinct = function () {\n            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n            if (!idx || !idx.multi)\n                return this;\n            var set = {};\n            addFilter(this._ctx, function (cursor) {\n                var strKey = cursor.primaryKey.toString();\n                var found = hasOwn(set, strKey);\n                set[strKey] = true;\n                return !found;\n            });\n            return this;\n        };\n        Collection.prototype.modify = function (changes) {\n            var _this = this;\n            var ctx = this._ctx;\n            return this._write(function (trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    modifyer = changes;\n                }\n                else {\n                    var keyPaths = keys(changes);\n                    var numKeys = keyPaths.length;\n                    modifyer = function (item) {\n                        var anythingModified = false;\n                        for (var i = 0; i < numKeys; ++i) {\n                            var keyPath = keyPaths[i], val = changes[keyPath];\n                            if (getByKeyPath(item, keyPath) !== val) {\n                                setByKeyPath(item, keyPath, val);\n                                anythingModified = true;\n                            }\n                        }\n                        return anythingModified;\n                    };\n                }\n                var coreTable = ctx.table.core;\n                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n                var limit = _this.db._options.modifyChunkSize || 200;\n                var totalFailures = [];\n                var successCount = 0;\n                var failedKeys = [];\n                var applyMutateResult = function (expectedCount, res) {\n                    var failures = res.failures, numFailures = res.numFailures;\n                    successCount += expectedCount - numFailures;\n                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                        var pos = _a[_i];\n                        totalFailures.push(failures[pos]);\n                    }\n                };\n                return _this.clone().primaryKeys().then(function (keys) {\n                    var nextChunk = function (offset) {\n                        var count = Math.min(limit, keys.length - offset);\n                        return coreTable.getMany({\n                            trans: trans,\n                            keys: keys.slice(offset, offset + count),\n                            cache: \"immutable\"\n                        }).then(function (values) {\n                            var addValues = [];\n                            var putValues = [];\n                            var putKeys = outbound ? [] : null;\n                            var deleteKeys = [];\n                            for (var i = 0; i < count; ++i) {\n                                var origValue = values[i];\n                                var ctx_1 = {\n                                    value: deepClone(origValue),\n                                    primKey: keys[offset + i]\n                                };\n                                if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                    if (ctx_1.value == null) {\n                                        deleteKeys.push(keys[offset + i]);\n                                    }\n                                    else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                        deleteKeys.push(keys[offset + i]);\n                                        addValues.push(ctx_1.value);\n                                    }\n                                    else {\n                                        putValues.push(ctx_1.value);\n                                        if (outbound)\n                                            putKeys.push(keys[offset + i]);\n                                    }\n                                }\n                            }\n                            var criteria = isPlainKeyRange(ctx) &&\n                                ctx.limit === Infinity &&\n                                (typeof changes !== 'function' || changes === deleteCallback) && {\n                                index: ctx.index,\n                                range: ctx.range\n                            };\n                            return Promise.resolve(addValues.length > 0 &&\n                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                    .then(function (res) {\n                                    for (var pos in res.failures) {\n                                        deleteKeys.splice(parseInt(pos), 1);\n                                    }\n                                    applyMutateResult(addValues.length, res);\n                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'put',\n                                    keys: putKeys,\n                                    values: putValues,\n                                    criteria: criteria,\n                                    changeSpec: typeof changes !== 'function'\n                                        && changes\n                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'delete',\n                                    keys: deleteKeys,\n                                    criteria: criteria\n                                }).then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                                return keys.length > offset + count && nextChunk(offset + limit);\n                            });\n                        });\n                    };\n                    return nextChunk(0).then(function () {\n                        if (totalFailures.length > 0)\n                            throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                        return keys.length;\n                    });\n                });\n            });\n        };\n        Collection.prototype.delete = function () {\n            var ctx = this._ctx, range = ctx.range;\n            if (isPlainKeyRange(ctx) &&\n                ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n             {\n                return this._write(function (trans) {\n                    var primaryKey = ctx.table.core.schema.primaryKey;\n                    var coreRange = range;\n                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                            .then(function (_a) {\n                            var failures = _a.failures; _a.lastResult; _a.results; var numFailures = _a.numFailures;\n                            if (numFailures)\n                                throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                            return count - numFailures;\n                        });\n                    });\n                });\n            }\n            return this.modify(deleteCallback);\n        };\n        return Collection;\n    }());\n    var deleteCallback = function (value, ctx) { return ctx.value = null; };\n\n    function createCollectionConstructor(db) {\n        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n            this.db = db;\n            var keyRange = AnyRange, error = null;\n            if (keyRangeGenerator)\n                try {\n                    keyRange = keyRangeGenerator();\n                }\n                catch (ex) {\n                    error = ex;\n                }\n            var whereCtx = whereClause._ctx;\n            var table = whereCtx.table;\n            var readingHook = table.hook.reading.fire;\n            this._ctx = {\n                table: table,\n                index: whereCtx.index,\n                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n                range: keyRange,\n                keysOnly: false,\n                dir: \"next\",\n                unique: \"\",\n                algorithm: null,\n                filter: null,\n                replayFilter: null,\n                justLimit: true,\n                isMatch: null,\n                offset: 0,\n                limit: Infinity,\n                error: error,\n                or: whereCtx.or,\n                valueMapper: readingHook !== mirror ? readingHook : null\n            };\n        });\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function fail(collectionOrWhereClause, err, T) {\n        var collection = collectionOrWhereClause instanceof WhereClause ?\n            new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n            collectionOrWhereClause;\n        collection._ctx.error = T ? new T(err) : new TypeError(err);\n        return collection;\n    }\n    function emptyCollection(whereClause) {\n        return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n    }\n    function upperFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toUpperCase(); } :\n            function (s) { return s.toLowerCase(); };\n    }\n    function lowerFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toLowerCase(); } :\n            function (s) { return s.toUpperCase(); };\n    }\n    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n        var length = Math.min(key.length, lowerNeedle.length);\n        var llp = -1;\n        for (var i = 0; i < length; ++i) {\n            var lwrKeyChar = lowerKey[i];\n            if (lwrKeyChar !== lowerNeedle[i]) {\n                if (cmp(key[i], upperNeedle[i]) < 0)\n                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                if (cmp(key[i], lowerNeedle[i]) < 0)\n                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                if (llp >= 0)\n                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                return null;\n            }\n            if (cmp(key[i], lwrKeyChar) < 0)\n                llp = i;\n        }\n        if (length < lowerNeedle.length && dir === \"next\")\n            return key + upperNeedle.substr(key.length);\n        if (length < key.length && dir === \"prev\")\n            return key.substr(0, upperNeedle.length);\n        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n    }\n    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n        if (!needles.every(function (s) { return typeof s === 'string'; })) {\n            return fail(whereClause, STRING_EXPECTED);\n        }\n        function initDirection(dir) {\n            upper = upperFactory(dir);\n            lower = lowerFactory(dir);\n            compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n            var needleBounds = needles.map(function (needle) {\n                return { lower: lower(needle), upper: upper(needle) };\n            }).sort(function (a, b) {\n                return compare(a.lower, b.lower);\n            });\n            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n            direction = dir;\n            nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n        }\n        initDirection(\"next\");\n        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n        c._ondirectionchange = function (direction) {\n            initDirection(direction);\n        };\n        var firstPossibleNeedle = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            if (typeof key !== 'string')\n                return false;\n            var lowerKey = lower(key);\n            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                return true;\n            }\n            else {\n                var lowestPossibleCasing = null;\n                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                    if (casing === null && lowestPossibleCasing === null)\n                        firstPossibleNeedle = i + 1;\n                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                        lowestPossibleCasing = casing;\n                    }\n                }\n                if (lowestPossibleCasing !== null) {\n                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n                }\n                else {\n                    advance(resolve);\n                }\n                return false;\n            }\n        });\n        return c;\n    }\n    function createRange(lower, upper, lowerOpen, upperOpen) {\n        return {\n            type: 2 ,\n            lower: lower,\n            upper: upper,\n            lowerOpen: lowerOpen,\n            upperOpen: upperOpen\n        };\n    }\n    function rangeEqual(value) {\n        return {\n            type: 1 ,\n            lower: value,\n            upper: value\n        };\n    }\n\n    var WhereClause =  (function () {\n        function WhereClause() {\n        }\n        Object.defineProperty(WhereClause.prototype, \"Collection\", {\n            get: function () {\n                return this._ctx.table.db.Collection;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n            includeLower = includeLower !== false;\n            includeUpper = includeUpper === true;\n            try {\n                if ((this._cmp(lower, upper) > 0) ||\n                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                    return emptyCollection(this);\n                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n        };\n        WhereClause.prototype.equals = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return rangeEqual(value); });\n        };\n        WhereClause.prototype.above = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, true); });\n        };\n        WhereClause.prototype.aboveOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, false); });\n        };\n        WhereClause.prototype.below = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n        };\n        WhereClause.prototype.belowOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value); });\n        };\n        WhereClause.prototype.startsWith = function (str) {\n            if (typeof str !== 'string')\n                return fail(this, STRING_EXPECTED);\n            return this.between(str, str + maxString, true, true);\n        };\n        WhereClause.prototype.startsWithIgnoreCase = function (str) {\n            if (str === \"\")\n                return this.startsWith(str);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n        };\n        WhereClause.prototype.equalsIgnoreCase = function (str) {\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n        };\n        WhereClause.prototype.anyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n        };\n        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n        };\n        WhereClause.prototype.anyOf = function () {\n            var _this = this;\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            var compare = this._cmp;\n            try {\n                set.sort(compare);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n            c._ondirectionchange = function (direction) {\n                compare = (direction === \"next\" ?\n                    _this._ascending :\n                    _this._descending);\n                set.sort(compare);\n            };\n            var i = 0;\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (compare(key, set[i]) > 0) {\n                    ++i;\n                    if (i === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (compare(key, set[i]) === 0) {\n                    return true;\n                }\n                else {\n                    advance(function () { cursor.continue(set[i]); });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.notEqual = function (value) {\n            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.noneOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return new this.Collection(this);\n            try {\n                set.sort(this._ascending);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var ranges = set.reduce(function (res, val) { return res ?\n                res.concat([[res[res.length - 1][1], val]]) :\n                [[minKey, val]]; }, null);\n            ranges.push([set[set.length - 1], this.db._maxKey]);\n            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.inAnyRange = function (ranges, options) {\n            var _this = this;\n            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n            if (ranges.length === 0)\n                return emptyCollection(this);\n            if (!ranges.every(function (range) {\n                return range[0] !== undefined &&\n                    range[1] !== undefined &&\n                    ascending(range[0], range[1]) <= 0;\n            })) {\n                return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n            }\n            var includeLowers = !options || options.includeLowers !== false;\n            var includeUppers = options && options.includeUppers === true;\n            function addRange(ranges, newRange) {\n                var i = 0, l = ranges.length;\n                for (; i < l; ++i) {\n                    var range = ranges[i];\n                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                        range[0] = min(range[0], newRange[0]);\n                        range[1] = max(range[1], newRange[1]);\n                        break;\n                    }\n                }\n                if (i === l)\n                    ranges.push(newRange);\n                return ranges;\n            }\n            var sortDirection = ascending;\n            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n            var set;\n            try {\n                set = ranges.reduce(addRange, []);\n                set.sort(rangeSorter);\n            }\n            catch (ex) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var rangePos = 0;\n            var keyIsBeyondCurrentEntry = includeUppers ?\n                function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n                function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n            var keyIsBeforeCurrentEntry = includeLowers ?\n                function (key) { return descending(key, set[rangePos][0]) > 0; } :\n                function (key) { return descending(key, set[rangePos][0]) >= 0; };\n            function keyWithinCurrentRange(key) {\n                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n            }\n            var checkKey = keyIsBeyondCurrentEntry;\n            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n            c._ondirectionchange = function (direction) {\n                if (direction === \"next\") {\n                    checkKey = keyIsBeyondCurrentEntry;\n                    sortDirection = ascending;\n                }\n                else {\n                    checkKey = keyIsBeforeCurrentEntry;\n                    sortDirection = descending;\n                }\n                set.sort(rangeSorter);\n            };\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (checkKey(key)) {\n                    ++rangePos;\n                    if (rangePos === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (keyWithinCurrentRange(key)) {\n                    return true;\n                }\n                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                    return false;\n                }\n                else {\n                    advance(function () {\n                        if (sortDirection === ascending)\n                            cursor.continue(set[rangePos][0]);\n                        else\n                            cursor.continue(set[rangePos][1]);\n                    });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.startsWithAnyOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (!set.every(function (s) { return typeof s === 'string'; })) {\n                return fail(this, \"startsWithAnyOf() only works with strings\");\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n        };\n        return WhereClause;\n    }());\n\n    function createWhereClauseConstructor(db) {\n        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n            this.db = db;\n            this._ctx = {\n                table: table,\n                index: index === \":id\" ? null : index,\n                or: orCollection\n            };\n            var indexedDB = db._deps.indexedDB;\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n            this._descending = function (a, b) { return indexedDB.cmp(b, a); };\n            this._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n            this._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n            this._IDBKeyRange = db._deps.IDBKeyRange;\n        });\n    }\n\n    function eventRejectHandler(reject) {\n        return wrap(function (event) {\n            preventDefault(event);\n            reject(event.target.error);\n            return false;\n        });\n    }\n    function preventDefault(event) {\n        if (event.stopPropagation)\n            event.stopPropagation();\n        if (event.preventDefault)\n            event.preventDefault();\n    }\n\n    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\n    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\n    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\n    var Transaction =  (function () {\n        function Transaction() {\n        }\n        Transaction.prototype._lock = function () {\n            assert(!PSD.global);\n            ++this._reculock;\n            if (this._reculock === 1 && !PSD.global)\n                PSD.lockOwnerFor = this;\n            return this;\n        };\n        Transaction.prototype._unlock = function () {\n            assert(!PSD.global);\n            if (--this._reculock === 0) {\n                if (!PSD.global)\n                    PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    }\n                    catch (e) { }\n                }\n            }\n            return this;\n        };\n        Transaction.prototype._locked = function () {\n            return this._reculock && PSD.lockOwnerFor !== this;\n        };\n        Transaction.prototype.create = function (idbtrans) {\n            var _this = this;\n            if (!this.mode)\n                return this;\n            var idbdb = this.db.idbdb;\n            var dbOpenError = this.db._state.dbOpenError;\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active)\n                throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n            idbtrans = this.idbtrans = idbtrans ||\n                (this.db.core\n                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev);\n                _this._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n                _this.active = false;\n                _this.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this.active = false;\n                _this._resolve();\n                if ('mutatedParts' in idbtrans) {\n                    globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n                }\n            });\n            return this;\n        };\n        Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n            var _this = this;\n            if (mode === 'readwrite' && this.mode !== 'readwrite')\n                return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n            if (!this.active)\n                return rejection(new exceptions.TransactionInactive());\n            if (this._locked()) {\n                return new DexiePromise(function (resolve, reject) {\n                    _this._blockedFuncs.push([function () {\n                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                        }, PSD]);\n                });\n            }\n            else if (bWriteLock) {\n                return newScope(function () {\n                    var p = new DexiePromise(function (resolve, reject) {\n                        _this._lock();\n                        var rv = fn(resolve, reject, _this);\n                        if (rv && rv.then)\n                            rv.then(resolve, reject);\n                    });\n                    p.finally(function () { return _this._unlock(); });\n                    p._lib = true;\n                    return p;\n                });\n            }\n            else {\n                var p = new DexiePromise(function (resolve, reject) {\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p._lib = true;\n                return p;\n            }\n        };\n        Transaction.prototype._root = function () {\n            return this.parent ? this.parent._root() : this;\n        };\n        Transaction.prototype.waitFor = function (promiseLike) {\n            var root = this._root();\n            var promise = DexiePromise.resolve(promiseLike);\n            if (root._waitingFor) {\n                root._waitingFor = root._waitingFor.then(function () { return promise; });\n            }\n            else {\n                root._waitingFor = promise;\n                root._waitingQueue = [];\n                var store = root.idbtrans.objectStore(root.storeNames[0]);\n                (function spin() {\n                    ++root._spinCount;\n                    while (root._waitingQueue.length)\n                        (root._waitingQueue.shift())();\n                    if (root._waitingFor)\n                        store.get(-Infinity).onsuccess = spin;\n                }());\n            }\n            var currentWaitPromise = root._waitingFor;\n            return new DexiePromise(function (resolve, reject) {\n                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                    if (root._waitingFor === currentWaitPromise) {\n                        root._waitingFor = null;\n                    }\n                });\n            });\n        };\n        Transaction.prototype.abort = function () {\n            if (this.active) {\n                this.active = false;\n                if (this.idbtrans)\n                    this.idbtrans.abort();\n                this._reject(new exceptions.Abort());\n            }\n        };\n        Transaction.prototype.table = function (tableName) {\n            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n            if (hasOwn(memoizedTables, tableName))\n                return memoizedTables[tableName];\n            var tableSchema = this.schema[tableName];\n            if (!tableSchema) {\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            }\n            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n            transactionBoundTable.core = this.db.core.table(tableName);\n            memoizedTables[tableName] = transactionBoundTable;\n            return transactionBoundTable;\n        };\n        return Transaction;\n    }());\n\n    function createTransactionConstructor(db) {\n        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n            var _this = this;\n            this.db = db;\n            this.mode = mode;\n            this.storeNames = storeNames;\n            this.schema = dbschema;\n            this.chromeTransactionDurability = chromeTransactionDurability;\n            this.idbtrans = null;\n            this.on = Events(this, \"complete\", \"error\", \"abort\");\n            this.parent = parent || null;\n            this.active = true;\n            this._reculock = 0;\n            this._blockedFuncs = [];\n            this._resolve = null;\n            this._reject = null;\n            this._waitingFor = null;\n            this._waitingQueue = null;\n            this._spinCount = 0;\n            this._completion = new DexiePromise(function (resolve, reject) {\n                _this._resolve = resolve;\n                _this._reject = reject;\n            });\n            this._completion.then(function () {\n                _this.active = false;\n                _this.on.complete.fire();\n            }, function (e) {\n                var wasActive = _this.active;\n                _this.active = false;\n                _this.on.error.fire(e);\n                _this.parent ?\n                    _this.parent._reject(e) :\n                    wasActive && _this.idbtrans && _this.idbtrans.abort();\n                return rejection(e);\n            });\n        });\n    }\n\n    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n        return {\n            name: name,\n            keyPath: keyPath,\n            unique: unique,\n            multi: multi,\n            auto: auto,\n            compound: compound,\n            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n        };\n    }\n    function nameFromKeyPath(keyPath) {\n        return typeof keyPath === 'string' ?\n            keyPath :\n            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n    }\n\n    function createTableSchema(name, primKey, indexes) {\n        return {\n            name: name,\n            primKey: primKey,\n            indexes: indexes,\n            mappedClass: null,\n            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n        };\n    }\n\n    function safariMultiStoreFix(storeNames) {\n        return storeNames.length === 1 ? storeNames[0] : storeNames;\n    }\n    var getMaxKey = function (IdbKeyRange) {\n        try {\n            IdbKeyRange.only([[]]);\n            getMaxKey = function () { return [[]]; };\n            return [[]];\n        }\n        catch (e) {\n            getMaxKey = function () { return maxString; };\n            return maxString;\n        }\n    };\n\n    function getKeyExtractor(keyPath) {\n        if (keyPath == null) {\n            return function () { return undefined; };\n        }\n        else if (typeof keyPath === 'string') {\n            return getSinglePathKeyExtractor(keyPath);\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n    function getSinglePathKeyExtractor(keyPath) {\n        var split = keyPath.split('.');\n        if (split.length === 1) {\n            return function (obj) { return obj[keyPath]; };\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n\n    function arrayify(arrayLike) {\n        return [].slice.call(arrayLike);\n    }\n    var _id_counter = 0;\n    function getKeyPathAlias(keyPath) {\n        return keyPath == null ?\n            \":id\" :\n            typeof keyPath === 'string' ?\n                keyPath :\n                \"[\" + keyPath.join('+') + \"]\";\n    }\n    function createDBCore(db, IdbKeyRange, tmpTrans) {\n        function extractSchema(db, trans) {\n            var tables = arrayify(db.objectStoreNames);\n            return {\n                schema: {\n                    name: db.name,\n                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                        var compound = isArray(keyPath);\n                        var outbound = keyPath == null;\n                        var indexByKeyPath = {};\n                        var result = {\n                            name: store.name,\n                            primaryKey: {\n                                name: null,\n                                isPrimaryKey: true,\n                                outbound: outbound,\n                                compound: compound,\n                                keyPath: keyPath,\n                                autoIncrement: autoIncrement,\n                                unique: true,\n                                extractKey: getKeyExtractor(keyPath)\n                            },\n                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                                .map(function (index) {\n                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                                var compound = isArray(keyPath);\n                                var result = {\n                                    name: name,\n                                    compound: compound,\n                                    keyPath: keyPath,\n                                    unique: unique,\n                                    multiEntry: multiEntry,\n                                    extractKey: getKeyExtractor(keyPath)\n                                };\n                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                                return result;\n                            }),\n                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                        };\n                        indexByKeyPath[\":id\"] = result.primaryKey;\n                        if (keyPath != null) {\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                        }\n                        return result;\n                    })\n                },\n                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n            };\n        }\n        function makeIDBKeyRange(range) {\n            if (range.type === 3 )\n                return null;\n            if (range.type === 4 )\n                throw new Error(\"Cannot convert never type to IDBKeyRange\");\n            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n            var idbRange = lower === undefined ?\n                upper === undefined ?\n                    null :\n                    IdbKeyRange.upperBound(upper, !!upperOpen) :\n                upper === undefined ?\n                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n            return idbRange;\n        }\n        function createDbCoreTable(tableSchema) {\n            var tableName = tableSchema.name;\n            function mutate(_a) {\n                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var outbound = store.keyPath == null;\n                    var isAddOrPut = type === \"put\" || type === \"add\";\n                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                        throw new Error(\"Invalid operation type: \" + type);\n                    var length = (keys || values || { length: 1 }).length;\n                    if (keys && values && keys.length !== values.length) {\n                        throw new Error(\"Given keys array must have same length as given values array.\");\n                    }\n                    if (length === 0)\n                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                    var req;\n                    var reqs = [];\n                    var failures = [];\n                    var numFailures = 0;\n                    var errorHandler = function (event) {\n                        ++numFailures;\n                        preventDefault(event);\n                    };\n                    if (type === 'deleteRange') {\n                        if (range.type === 4 )\n                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n                        if (range.type === 3 )\n                            reqs.push(req = store.clear());\n                        else\n                            reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                    }\n                    else {\n                        var _a = isAddOrPut ?\n                            outbound ?\n                                [values, keys] :\n                                [values, null] :\n                            [keys, null], args1 = _a[0], args2 = _a[1];\n                        if (isAddOrPut) {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = (args2 && args2[i] !== undefined ?\n                                    store[type](args1[i], args2[i]) :\n                                    store[type](args1[i])));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = store[type](args1[i]));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                    }\n                    var done = function (event) {\n                        var lastResult = event.target.result;\n                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n                        resolve({\n                            numFailures: numFailures,\n                            failures: failures,\n                            results: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n                            lastResult: lastResult\n                        });\n                    };\n                    req.onerror = function (event) {\n                        errorHandler(event);\n                        done(event);\n                    };\n                    req.onsuccess = done;\n                });\n            }\n            function openCursor(_a) {\n                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ?\n                        store :\n                        store.index(index.name);\n                    var direction = reverse ?\n                        unique ?\n                            \"prevunique\" :\n                            \"prev\" :\n                        unique ?\n                            \"nextunique\" :\n                            \"next\";\n                    var req = values || !('openKeyCursor' in source) ?\n                        source.openCursor(makeIDBKeyRange(range), direction) :\n                        source.openKeyCursor(makeIDBKeyRange(range), direction);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = wrap(function (ev) {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            resolve(null);\n                            return;\n                        }\n                        cursor.___id = ++_id_counter;\n                        cursor.done = false;\n                        var _cursorContinue = cursor.continue.bind(cursor);\n                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                        if (_cursorContinuePrimaryKey)\n                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                        var _cursorAdvance = cursor.advance.bind(cursor);\n                        var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                        var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                        cursor.trans = trans;\n                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                        cursor.fail = wrap(reject);\n                        cursor.next = function () {\n                            var _this = this;\n                            var gotOne = 1;\n                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                        };\n                        cursor.start = function (callback) {\n                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                                resolveIteration = wrap(resolveIteration);\n                                req.onerror = eventRejectHandler(rejectIteration);\n                                cursor.fail = rejectIteration;\n                                cursor.stop = function (value) {\n                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                    resolveIteration(value);\n                                };\n                            });\n                            var guardedCallback = function () {\n                                if (req.result) {\n                                    try {\n                                        callback();\n                                    }\n                                    catch (err) {\n                                        cursor.fail(err);\n                                    }\n                                }\n                                else {\n                                    cursor.done = true;\n                                    cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                    cursor.stop();\n                                }\n                            };\n                            req.onsuccess = wrap(function (ev) {\n                                req.onsuccess = guardedCallback;\n                                guardedCallback();\n                            });\n                            cursor.continue = _cursorContinue;\n                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                            cursor.advance = _cursorAdvance;\n                            guardedCallback();\n                            return iterationPromise;\n                        };\n                        resolve(cursor);\n                    }, reject);\n                });\n            }\n            function query(hasGetAll) {\n                return function (request) {\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                        var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                        var index = query.index, range = query.range;\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        if (limit === 0)\n                            return resolve({ result: [] });\n                        if (hasGetAll) {\n                            var req = values ?\n                                source.getAll(idbKeyRange, nonInfinitLimit) :\n                                source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                            req.onerror = eventRejectHandler(reject);\n                        }\n                        else {\n                            var count_1 = 0;\n                            var req_1 = values || !('openKeyCursor' in source) ?\n                                source.openCursor(idbKeyRange) :\n                                source.openKeyCursor(idbKeyRange);\n                            var result_1 = [];\n                            req_1.onsuccess = function (event) {\n                                var cursor = req_1.result;\n                                if (!cursor)\n                                    return resolve({ result: result_1 });\n                                result_1.push(values ? cursor.value : cursor.primaryKey);\n                                if (++count_1 === limit)\n                                    return resolve({ result: result_1 });\n                                cursor.continue();\n                            };\n                            req_1.onerror = eventRejectHandler(reject);\n                        }\n                    });\n                };\n            }\n            return {\n                name: tableName,\n                schema: tableSchema,\n                mutate: mutate,\n                getMany: function (_a) {\n                    var trans = _a.trans, keys = _a.keys;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var length = keys.length;\n                        var result = new Array(length);\n                        var keyCount = 0;\n                        var callbackCount = 0;\n                        var req;\n                        var successHandler = function (event) {\n                            var req = event.target;\n                            if ((result[req._pos] = req.result) != null)\n                                ;\n                            if (++callbackCount === keyCount)\n                                resolve(result);\n                        };\n                        var errorHandler = eventRejectHandler(reject);\n                        for (var i = 0; i < length; ++i) {\n                            var key = keys[i];\n                            if (key != null) {\n                                req = store.get(keys[i]);\n                                req._pos = i;\n                                req.onsuccess = successHandler;\n                                req.onerror = errorHandler;\n                                ++keyCount;\n                            }\n                        }\n                        if (keyCount === 0)\n                            resolve(result);\n                    });\n                },\n                get: function (_a) {\n                    var trans = _a.trans, key = _a.key;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var req = store.get(key);\n                        req.onsuccess = function (event) { return resolve(event.target.result); };\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                },\n                query: query(hasGetAll),\n                openCursor: openCursor,\n                count: function (_a) {\n                    var query = _a.query, trans = _a.trans;\n                    var index = query.index, range = query.range;\n                    return new Promise(function (resolve, reject) {\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                }\n            };\n        }\n        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n        var tableMap = {};\n        tables.forEach(function (table) { return tableMap[table.name] = table; });\n        return {\n            stack: \"dbcore\",\n            transaction: db.transaction.bind(db),\n            table: function (name) {\n                var result = tableMap[name];\n                if (!result)\n                    throw new Error(\"Table '\" + name + \"' not found\");\n                return tableMap[name];\n            },\n            MIN_KEY: -Infinity,\n            MAX_KEY: getMaxKey(IdbKeyRange),\n            schema: schema\n        };\n    }\n\n    function createMiddlewareStack(stackImpl, middlewares) {\n        return middlewares.reduce(function (down, _a) {\n            var create = _a.create;\n            return (__assign(__assign({}, down), create(down)));\n        }, stackImpl);\n    }\n    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n        return {\n            dbcore: dbcore\n        };\n    }\n    function generateMiddlewareStacks(_a, tmpTrans) {\n        var db = _a._novip;\n        var idbdb = tmpTrans.db;\n        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n        db.core = stacks.dbcore;\n        db.tables.forEach(function (table) {\n            var tableName = table.name;\n            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n                table.core = db.core.table(tableName);\n                if (db[tableName] instanceof db.Table) {\n                    db[tableName].core = table.core;\n                }\n            }\n        });\n    }\n\n    function setApiOnPlace(_a, objs, tableNames, dbschema) {\n        var db = _a._novip;\n        tableNames.forEach(function (tableName) {\n            var schema = dbschema[tableName];\n            objs.forEach(function (obj) {\n                var propDesc = getPropertyDescriptor(obj, tableName);\n                if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                        setProp(obj, tableName, {\n                            get: function () { return this.table(tableName); },\n                            set: function (value) {\n                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                            }\n                        });\n                    }\n                    else {\n                        obj[tableName] = new db.Table(tableName, schema);\n                    }\n                }\n            });\n        });\n    }\n    function removeTablesApi(_a, objs) {\n        var db = _a._novip;\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof db.Table)\n                    delete obj[key];\n            }\n        });\n    }\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n        var globalSchema = db._dbSchema;\n        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n        trans.create(idbUpgradeTrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        var transless = PSD.transless || PSD;\n        newScope(function () {\n            PSD.trans = trans;\n            PSD.transless = transless;\n            if (oldVersion === 0) {\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n            }\n            else\n                updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n        });\n    }\n    function updateTablesAndIndexes(_a, oldVersion, trans, idbUpgradeTrans) {\n        var db = _a._novip;\n        var queue = [];\n        var versions = db._versions;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        var anyContentUpgraderHasRun = false;\n        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n        versToRun.forEach(function (version) {\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                diff.add.forEach(function (tuple) {\n                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    }\n                    else {\n                        var store_1 = idbUpgradeTrans.objectStore(change.name);\n                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                        change.change.forEach(function (idx) {\n                            store_1.deleteIndex(idx.name);\n                            addIndex(store_1, idx);\n                        });\n                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                    }\n                });\n                var contentUpgrade = version._cfg.contentUpgrade;\n                if (contentUpgrade && version._cfg.version > oldVersion) {\n                    generateMiddlewareStacks(db, idbUpgradeTrans);\n                    trans._memoizedTables = {};\n                    anyContentUpgraderHasRun = true;\n                    var upgradeSchema_1 = shallowClone(newSchema);\n                    diff.del.forEach(function (table) {\n                        upgradeSchema_1[table] = oldSchema[table];\n                    });\n                    removeTablesApi(db, [db.Transaction.prototype]);\n                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                    trans.schema = upgradeSchema_1;\n                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                    if (contentUpgradeIsAsync_1) {\n                        incrementExpectedAwaits();\n                    }\n                    var returnValue_1;\n                    var promiseFollowed = DexiePromise.follow(function () {\n                        returnValue_1 = contentUpgrade(trans);\n                        if (returnValue_1) {\n                            if (contentUpgradeIsAsync_1) {\n                                var decrementor = decrementExpectedAwaits.bind(null, null);\n                                returnValue_1.then(decrementor, decrementor);\n                            }\n                        }\n                    });\n                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n                }\n            });\n            queue.push(function (idbtrans) {\n                if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                    var newSchema = version._cfg.dbschema;\n                    deleteRemovedTables(newSchema, idbtrans);\n                }\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n                trans.schema = db._dbSchema;\n            });\n        });\n        function runQueue() {\n            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n                DexiePromise.resolve();\n        }\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbUpgradeTrans);\n        });\n    }\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [],\n            add: [],\n            change: []\n        };\n        var table;\n        for (table in oldSchema) {\n            if (!newSchema[table])\n                diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table], newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            }\n            else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if ((\n                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                    (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n                 {\n                    change.recreate = true;\n                    diff.change.push(change);\n                }\n                else {\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    var idxName = void 0;\n                    for (idxName in oldIndexes) {\n                        if (!newIndexes[idxName])\n                            change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                        if (!oldIdx)\n                            change.add.push(newIdx);\n                        else if (oldIdx.src !== newIdx.src)\n                            change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n            { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) { return addIndex(store, idx); });\n        return store;\n    }\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n    function deleteRemovedTables(newSchema, idbtrans) {\n        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n        });\n    }\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n    function buildGlobalSchema(db, idbdb, tmpTrans) {\n        var globalSchema = {};\n        var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        dbStoreNames.forEach(function (storeName) {\n            var store = tmpTrans.objectStore(storeName);\n            var keyPath = store.keyPath;\n            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n        });\n        return globalSchema;\n    }\n    function readGlobalSchema(_a, idbdb, tmpTrans) {\n        var db = _a._novip;\n        db.verno = idbdb.version / 10;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n        db._storeNames = slice(idbdb.objectStoreNames, 0);\n        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n    }\n    function verifyInstalledSchema(db, tmpTrans) {\n        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n        var diff = getSchemaDiff(installedSchema, db._dbSchema);\n        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n    }\n    function adjustToExistingIndexNames(_a, schema, idbtrans) {\n        var db = _a._novip;\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            db._hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) {\n                        indexSpec.name = indexName;\n                        delete schema[storeName].idxByName[dexieName];\n                        schema[storeName].idxByName[indexName] = indexSpec;\n                    }\n                }\n            }\n        }\n        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n            !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n            [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n            db._hasGetAll = false;\n        }\n    }\n    function parseIndexSyntax(primKeyAndIndexes) {\n        return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n            index = index.trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n            return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n        });\n    }\n\n    var Version =  (function () {\n        function Version() {\n        }\n        Version.prototype._parseStoresSpec = function (stores, outSchema) {\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var indexes = parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (primKey.multi)\n                        throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                    indexes.forEach(function (idx) {\n                        if (idx.auto)\n                            throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                        if (!idx.keyPath)\n                            throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                    });\n                    outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n                }\n            });\n        };\n        Version.prototype.stores = function (stores) {\n            var db = this.db;\n            this._cfg.storesSource = this._cfg.storesSource ?\n                extend(this._cfg.storesSource, stores) :\n                stores;\n            var versions = db._versions;\n            var storesSpec = {};\n            var dbschema = {};\n            versions.forEach(function (version) {\n                extend(storesSpec, version._cfg.storesSource);\n                dbschema = (version._cfg.dbschema = {});\n                version._parseStoresSpec(storesSpec, dbschema);\n            });\n            db._dbSchema = dbschema;\n            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n            db._storeNames = keys(dbschema);\n            return this;\n        };\n        Version.prototype.upgrade = function (upgradeFunction) {\n            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n            return this;\n        };\n        return Version;\n    }());\n\n    function createVersionConstructor(db) {\n        return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n            this.db = db;\n            this._cfg = {\n                version: versionNumber,\n                storesSource: null,\n                dbschema: {},\n                tables: {},\n                contentUpgrade: null\n            };\n        });\n    }\n\n    function getDbNamesTable(indexedDB, IDBKeyRange) {\n        var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n        if (!dbNamesDB) {\n            dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n                addons: [],\n                indexedDB: indexedDB,\n                IDBKeyRange: IDBKeyRange,\n            });\n            dbNamesDB.version(1).stores({ dbnames: \"name\" });\n        }\n        return dbNamesDB.table(\"dbnames\");\n    }\n    function hasDatabasesNative(indexedDB) {\n        return indexedDB && typeof indexedDB.databases === \"function\";\n    }\n    function getDatabaseNames(_a) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        return hasDatabasesNative(indexedDB)\n            ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n                return infos\n                    .map(function (info) { return info.name; })\n                    .filter(function (name) { return name !== DBNAMES_DB; });\n            })\n            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n    }\n    function _onDatabaseCreated(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n    }\n    function _onDatabaseDeleted(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n    }\n\n    function vip(fn) {\n        return newScope(function () {\n            PSD.letThrough = true;\n            return fn();\n        });\n    }\n\n    function idbReady() {\n        var isSafari = !navigator.userAgentData &&\n            /Safari\\//.test(navigator.userAgent) &&\n            !/Chrom(e|ium)\\//.test(navigator.userAgent);\n        if (!isSafari || !indexedDB.databases)\n            return Promise.resolve();\n        var intervalId;\n        return new Promise(function (resolve) {\n            var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n            intervalId = setInterval(tryIdb, 100);\n            tryIdb();\n        }).finally(function () { return clearInterval(intervalId); });\n    }\n\n    function dexieOpen(db) {\n        var state = db._state;\n        var indexedDB = db._deps.indexedDB;\n        if (state.isBeingOpened || db.idbdb)\n            return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n                rejection(state.dbOpenError) :\n                db; });\n        debug && (state.openCanceller._stackHolder = getErrorWithStack());\n        state.isBeingOpened = true;\n        state.dbOpenError = null;\n        state.openComplete = false;\n        var openCanceller = state.openCanceller;\n        function throwIfCancelled() {\n            if (state.openCanceller !== openCanceller)\n                throw new exceptions.DatabaseClosed('db.open() was cancelled');\n        }\n        var resolveDbReady = state.dbReadyResolve,\n        upgradeTransaction = null, wasCreated = false;\n        return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(function () { return new DexiePromise(function (resolve, reject) {\n                throwIfCancelled();\n                if (!indexedDB)\n                    throw new exceptions.MissingAPI();\n                var dbName = db.name;\n                var req = state.autoSchema ?\n                    indexedDB.open(dbName) :\n                    indexedDB.open(dbName, Math.round(db.verno * 10));\n                if (!req)\n                    throw new exceptions.MissingAPI();\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = wrap(db._fireOnBlocked);\n                req.onupgradeneeded = wrap(function (e) {\n                    upgradeTransaction = req.transaction;\n                    if (state.autoSchema && !db._options.allowEmptyDB) {\n                        req.onerror = preventDefault;\n                        upgradeTransaction.abort();\n                        req.result.close();\n                        var delreq = indexedDB.deleteDatabase(dbName);\n                        delreq.onsuccess = delreq.onerror = wrap(function () {\n                            reject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n                        });\n                    }\n                    else {\n                        upgradeTransaction.onerror = eventRejectHandler(reject);\n                        var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                        wasCreated = oldVer < 1;\n                        db._novip.idbdb = req.result;\n                        runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                    }\n                }, reject);\n                req.onsuccess = wrap(function () {\n                    upgradeTransaction = null;\n                    var idbdb = db._novip.idbdb = req.result;\n                    var objectStoreNames = slice(idbdb.objectStoreNames);\n                    if (objectStoreNames.length > 0)\n                        try {\n                            var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                            if (state.autoSchema)\n                                readGlobalSchema(db, idbdb, tmpTrans);\n                            else {\n                                adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                                if (!verifyInstalledSchema(db, tmpTrans)) {\n                                    console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n                                }\n                            }\n                            generateMiddlewareStacks(db, tmpTrans);\n                        }\n                        catch (e) {\n                        }\n                    connections.push(db);\n                    idbdb.onversionchange = wrap(function (ev) {\n                        state.vcFired = true;\n                        db.on(\"versionchange\").fire(ev);\n                    });\n                    idbdb.onclose = wrap(function (ev) {\n                        db.on(\"close\").fire(ev);\n                    });\n                    if (wasCreated)\n                        _onDatabaseCreated(db._deps, dbName);\n                    resolve();\n                }, reject);\n            }); })]).then(function () {\n            throwIfCancelled();\n            state.onReadyBeingFired = [];\n            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n                if (state.onReadyBeingFired.length > 0) {\n                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n                    state.onReadyBeingFired = [];\n                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n                }\n            });\n        }).finally(function () {\n            state.onReadyBeingFired = null;\n            state.isBeingOpened = false;\n        }).then(function () {\n            return db;\n        }).catch(function (err) {\n            state.dbOpenError = err;\n            try {\n                upgradeTransaction && upgradeTransaction.abort();\n            }\n            catch (_a) { }\n            if (openCanceller === state.openCanceller) {\n                db._close();\n            }\n            return rejection(err);\n        }).finally(function () {\n            state.openComplete = true;\n            resolveDbReady();\n        });\n    }\n\n    function awaitIterator(iterator) {\n        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n        function step(getNext) {\n            return function (val) {\n                var next = getNext(val), value = next.value;\n                return next.done ? value :\n                    (!value || typeof value.then !== 'function' ?\n                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                        value.then(onSuccess, onError));\n            };\n        }\n        return step(callNext)();\n    }\n\n    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n        var i = arguments.length;\n        if (i < 2)\n            throw new exceptions.InvalidArgument(\"Too few arguments\");\n        var args = new Array(i - 1);\n        while (--i)\n            args[i - 1] = arguments[i];\n        scopeFunc = args.pop();\n        var tables = flatten(args);\n        return [mode, tables, scopeFunc];\n    }\n    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n        return DexiePromise.resolve().then(function () {\n            var transless = PSD.transless || PSD;\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n            var zoneProps = {\n                trans: trans,\n                transless: transless\n            };\n            if (parentTransaction) {\n                trans.idbtrans = parentTransaction.idbtrans;\n            }\n            else {\n                try {\n                    trans.create();\n                    db._state.PR1398_maxLoop = 3;\n                }\n                catch (ex) {\n                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                        console.warn('Dexie: Need to reopen db');\n                        db._close();\n                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n                    }\n                    return rejection(ex);\n                }\n            }\n            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            var returnValue;\n            var promiseFollowed = DexiePromise.follow(function () {\n                returnValue = scopeFunc.call(trans, trans);\n                if (returnValue) {\n                    if (scopeFuncIsAsync) {\n                        var decrementor = decrementExpectedAwaits.bind(null, null);\n                        returnValue.then(decrementor, decrementor);\n                    }\n                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                        returnValue = awaitIterator(returnValue);\n                    }\n                }\n            }, zoneProps);\n            return (returnValue && typeof returnValue.then === 'function' ?\n                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                    x\n                    : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n                if (parentTransaction)\n                    trans._resolve();\n                return trans._completion.then(function () { return x; });\n            }).catch(function (e) {\n                trans._reject(e);\n                return rejection(e);\n            });\n        });\n    }\n\n    function pad(a, value, count) {\n        var result = isArray(a) ? a.slice() : [a];\n        for (var i = 0; i < count; ++i)\n            result.push(value);\n        return result;\n    }\n    function createVirtualIndexMiddleware(down) {\n        return __assign(__assign({}, down), { table: function (tableName) {\n                var table = down.table(tableName);\n                var schema = table.schema;\n                var indexLookup = {};\n                var allVirtualIndexes = [];\n                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                    var keyPathAlias = getKeyPathAlias(keyPath);\n                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                    var isVirtual = keyTail > 0;\n                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                    indexList.push(virtualIndex);\n                    if (!virtualIndex.isPrimaryKey) {\n                        allVirtualIndexes.push(virtualIndex);\n                    }\n                    if (keyLength > 1) {\n                        var virtualKeyPath = keyLength === 2 ?\n                            keyPath[0] :\n                            keyPath.slice(0, keyLength - 1);\n                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                    }\n                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                    return virtualIndex;\n                }\n                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n                indexLookup[\":id\"] = [primaryKey];\n                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                    var index = _a[_i];\n                    addVirtualIndexes(index.keyPath, 0, index);\n                }\n                function findBestIndex(keyPath) {\n                    var result = indexLookup[getKeyPathAlias(keyPath)];\n                    return result && result[0];\n                }\n                function translateRange(range, keyTail) {\n                    return {\n                        type: range.type === 1  ?\n                            2  :\n                            range.type,\n                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                        lowerOpen: true,\n                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                        upperOpen: true\n                    };\n                }\n                function translateRequest(req) {\n                    var index = req.query.index;\n                    return index.isVirtual ? __assign(__assign({}, req), { query: {\n                            index: index,\n                            range: translateRange(req.query.range, index.keyTail)\n                        } }) : req;\n                }\n                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                        return table.count(translateRequest(req));\n                    }, query: function (req) {\n                        return table.query(translateRequest(req));\n                    }, openCursor: function (req) {\n                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                        if (!isVirtual)\n                            return table.openCursor(req);\n                        function createVirtualCursor(cursor) {\n                            function _continue(key) {\n                                key != null ?\n                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                    req.unique ?\n                                        cursor.continue(cursor.key.slice(0, keyLength)\n                                            .concat(req.reverse\n                                            ? down.MIN_KEY\n                                            : down.MAX_KEY, keyTail)) :\n                                        cursor.continue();\n                            }\n                            var virtualCursor = Object.create(cursor, {\n                                continue: { value: _continue },\n                                continuePrimaryKey: {\n                                    value: function (key, primaryKey) {\n                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                    }\n                                },\n                                primaryKey: {\n                                    get: function () {\n                                        return cursor.primaryKey;\n                                    }\n                                },\n                                key: {\n                                    get: function () {\n                                        var key = cursor.key;\n                                        return keyLength === 1 ?\n                                            key[0] :\n                                            key.slice(0, keyLength);\n                                    }\n                                },\n                                value: {\n                                    get: function () {\n                                        return cursor.value;\n                                    }\n                                }\n                            });\n                            return virtualCursor;\n                        }\n                        return table.openCursor(translateRequest(req))\n                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                    } });\n                return result;\n            } });\n    }\n    var virtualIndexMiddleware = {\n        stack: \"dbcore\",\n        name: \"VirtualIndexMiddleware\",\n        level: 1,\n        create: createVirtualIndexMiddleware\n    };\n\n    function getObjectDiff(a, b, rv, prfx) {\n        rv = rv || {};\n        prfx = prfx || '';\n        keys(a).forEach(function (prop) {\n            if (!hasOwn(b, prop)) {\n                rv[prfx + prop] = undefined;\n            }\n            else {\n                var ap = a[prop], bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                    var apTypeName = toStringTag(ap);\n                    var bpTypeName = toStringTag(bp);\n                    if (apTypeName !== bpTypeName) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                    else if (apTypeName === 'Object') {\n                        getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                    }\n                    else if (ap !== bp) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                }\n                else if (ap !== bp)\n                    rv[prfx + prop] = b[prop];\n            }\n        });\n        keys(b).forEach(function (prop) {\n            if (!hasOwn(a, prop)) {\n                rv[prfx + prop] = b[prop];\n            }\n        });\n        return rv;\n    }\n\n    function getEffectiveKeys(primaryKey, req) {\n        if (req.type === 'delete')\n            return req.keys;\n        return req.keys || req.values.map(primaryKey.extractKey);\n    }\n\n    var hooksMiddleware = {\n        stack: \"dbcore\",\n        name: \"HooksMiddleware\",\n        level: 2,\n        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n                var downTable = downCore.table(tableName);\n                var primaryKey = downTable.schema.primaryKey;\n                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                        var dxTrans = PSD.trans;\n                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                        switch (req.type) {\n                            case 'add':\n                                if (creating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'put':\n                                if (creating.fire === nop && updating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'delete':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'deleteRange':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                        }\n                        return downTable.mutate(req);\n                        function addPutOrDelete(req) {\n                            var dxTrans = PSD.trans;\n                            var keys = req.keys || getEffectiveKeys(primaryKey, req);\n                            if (!keys)\n                                throw new Error(\"Keys missing\");\n                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n                            if (req.type !== 'delete')\n                                req.values = __spreadArray([], req.values, true);\n                            if (req.keys)\n                                req.keys = __spreadArray([], req.keys, true);\n                            return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                                var contexts = keys.map(function (key, i) {\n                                    var existingValue = existingValues[i];\n                                    var ctx = { onerror: null, onsuccess: null };\n                                    if (req.type === 'delete') {\n                                        deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                    }\n                                    else if (req.type === 'add' || existingValue === undefined) {\n                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                        if (key == null && generatedPrimaryKey != null) {\n                                            key = generatedPrimaryKey;\n                                            req.keys[i] = key;\n                                            if (!primaryKey.outbound) {\n                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                        if (additionalChanges_1) {\n                                            var requestedValue_1 = req.values[i];\n                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                                if (hasOwn(requestedValue_1, keyPath)) {\n                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                                }\n                                                else {\n                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    return ctx;\n                                });\n                                return downTable.mutate(req).then(function (_a) {\n                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                    for (var i = 0; i < keys.length; ++i) {\n                                        var primKey = results ? results[i] : keys[i];\n                                        var ctx = contexts[i];\n                                        if (primKey == null) {\n                                            ctx.onerror && ctx.onerror(failures[i]);\n                                        }\n                                        else {\n                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                                req.values[i] :\n                                                primKey\n                                            );\n                                        }\n                                    }\n                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                                }).catch(function (error) {\n                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                    return Promise.reject(error);\n                                });\n                            });\n                        }\n                        function deleteRange(req) {\n                            return deleteNextChunk(req.trans, req.range, 10000);\n                        }\n                        function deleteNextChunk(trans, range, limit) {\n                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                                .then(function (_a) {\n                                var result = _a.result;\n                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                    if (res.numFailures > 0)\n                                        return Promise.reject(res.failures[0]);\n                                    if (result.length < limit) {\n                                        return { failures: [], numFailures: 0, lastResult: undefined };\n                                    }\n                                    else {\n                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                    }\n                                });\n                            });\n                        }\n                    } });\n                return tableMiddleware;\n            } })); }\n    };\n    function getExistingValues(table, req, effectiveKeys) {\n        return req.type === \"add\"\n            ? Promise.resolve([])\n            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n    }\n\n    function getFromTransactionCache(keys, cache, clone) {\n        try {\n            if (!cache)\n                return null;\n            if (cache.keys.length < keys.length)\n                return null;\n            var result = [];\n            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n                if (cmp(cache.keys[i], keys[j]) !== 0)\n                    continue;\n                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n                ++j;\n            }\n            return result.length === keys.length ? result : null;\n        }\n        catch (_a) {\n            return null;\n        }\n    }\n    var cacheExistingValuesMiddleware = {\n        stack: \"dbcore\",\n        level: -1,\n        create: function (core) {\n            return {\n                table: function (tableName) {\n                    var table = core.table(tableName);\n                    return __assign(__assign({}, table), { getMany: function (req) {\n                            if (!req.cache) {\n                                return table.getMany(req);\n                            }\n                            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                            if (cachedResult) {\n                                return DexiePromise.resolve(cachedResult);\n                            }\n                            return table.getMany(req).then(function (res) {\n                                req.trans[\"_cache\"] = {\n                                    keys: req.keys,\n                                    values: req.cache === \"clone\" ? deepClone(res) : res,\n                                };\n                                return res;\n                            });\n                        }, mutate: function (req) {\n                            if (req.type !== \"add\")\n                                req.trans[\"_cache\"] = null;\n                            return table.mutate(req);\n                        } });\n                },\n            };\n        },\n    };\n\n    var _a;\n    function isEmptyRange(node) {\n        return !(\"from\" in node);\n    }\n    var RangeSet = function (fromOrTree, to) {\n        if (this) {\n            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n        }\n        else {\n            var rv = new RangeSet();\n            if (fromOrTree && (\"d\" in fromOrTree)) {\n                extend(rv, fromOrTree);\n            }\n            return rv;\n        }\n    };\n    props(RangeSet.prototype, (_a = {\n            add: function (rangeSet) {\n                mergeRanges(this, rangeSet);\n                return this;\n            },\n            addKey: function (key) {\n                addRange(this, key, key);\n                return this;\n            },\n            addKeys: function (keys) {\n                var _this = this;\n                keys.forEach(function (key) { return addRange(_this, key, key); });\n                return this;\n            }\n        },\n        _a[iteratorSymbol] = function () {\n            return getRangeSetIterator(this);\n        },\n        _a));\n    function addRange(target, from, to) {\n        var diff = cmp(from, to);\n        if (isNaN(diff))\n            return;\n        if (diff > 0)\n            throw RangeError();\n        if (isEmptyRange(target))\n            return extend(target, { from: from, to: to, d: 1 });\n        var left = target.l;\n        var right = target.r;\n        if (cmp(to, target.from) < 0) {\n            left\n                ? addRange(left, from, to)\n                : (target.l = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.to) > 0) {\n            right\n                ? addRange(right, from, to)\n                : (target.r = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.from) < 0) {\n            target.from = from;\n            target.l = null;\n            target.d = right ? right.d + 1 : 1;\n        }\n        if (cmp(to, target.to) > 0) {\n            target.to = to;\n            target.r = null;\n            target.d = target.l ? target.l.d + 1 : 1;\n        }\n        var rightWasCutOff = !target.r;\n        if (left && !target.l) {\n            mergeRanges(target, left);\n        }\n        if (right && rightWasCutOff) {\n            mergeRanges(target, right);\n        }\n    }\n    function mergeRanges(target, newSet) {\n        function _addRangeSet(target, _a) {\n            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n            addRange(target, from, to);\n            if (l)\n                _addRangeSet(target, l);\n            if (r)\n                _addRangeSet(target, r);\n        }\n        if (!isEmptyRange(newSet))\n            _addRangeSet(target, newSet);\n    }\n    function rangesOverlap(rangeSet1, rangeSet2) {\n        var i1 = getRangeSetIterator(rangeSet2);\n        var nextResult1 = i1.next();\n        if (nextResult1.done)\n            return false;\n        var a = nextResult1.value;\n        var i2 = getRangeSetIterator(rangeSet1);\n        var nextResult2 = i2.next(a.from);\n        var b = nextResult2.value;\n        while (!nextResult1.done && !nextResult2.done) {\n            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n                return true;\n            cmp(a.from, b.from) < 0\n                ? (a = (nextResult1 = i1.next(b.from)).value)\n                : (b = (nextResult2 = i2.next(a.from)).value);\n        }\n        return false;\n    }\n    function getRangeSetIterator(node) {\n        var state = isEmptyRange(node) ? null : { s: 0, n: node };\n        return {\n            next: function (key) {\n                var keyProvided = arguments.length > 0;\n                while (state) {\n                    switch (state.s) {\n                        case 0:\n                            state.s = 1;\n                            if (keyProvided) {\n                                while (state.n.l && cmp(key, state.n.from) < 0)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                            else {\n                                while (state.n.l)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                        case 1:\n                            state.s = 2;\n                            if (!keyProvided || cmp(key, state.n.to) <= 0)\n                                return { value: state.n, done: false };\n                        case 2:\n                            if (state.n.r) {\n                                state.s = 3;\n                                state = { up: state, n: state.n.r, s: 0 };\n                                continue;\n                            }\n                        case 3:\n                            state = state.up;\n                    }\n                }\n                return { done: true };\n            },\n        };\n    }\n    function rebalance(target) {\n        var _a, _b;\n        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n        var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n        if (r) {\n            var l = r === \"r\" ? \"l\" : \"r\";\n            var rootClone = __assign({}, target);\n            var oldRootRight = target[r];\n            target.from = oldRootRight.from;\n            target.to = oldRootRight.to;\n            target[r] = oldRootRight[r];\n            rootClone[r] = oldRootRight[l];\n            target[l] = rootClone;\n            rootClone.d = computeDepth(rootClone);\n        }\n        target.d = computeDepth(target);\n    }\n    function computeDepth(_a) {\n        var r = _a.r, l = _a.l;\n        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n    }\n\n    var observabilityMiddleware = {\n        stack: \"dbcore\",\n        level: 0,\n        create: function (core) {\n            var dbName = core.schema.name;\n            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n            return __assign(__assign({}, core), { table: function (tableName) {\n                    var table = core.table(tableName);\n                    var schema = table.schema;\n                    var primaryKey = schema.primaryKey;\n                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {\n                            var trans = req.trans;\n                            var mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                            var getRangeSet = function (indexName) {\n                                var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                return (mutatedParts[part] ||\n                                    (mutatedParts[part] = new RangeSet()));\n                            };\n                            var pkRangeSet = getRangeSet(\"\");\n                            var delsRangeSet = getRangeSet(\":dels\");\n                            var type = req.type;\n                            var _a = req.type === \"deleteRange\"\n                                ? [req.range]\n                                : req.type === \"delete\"\n                                    ? [req.keys]\n                                    : req.values.length < 50\n                                        ? [[], req.values]\n                                        : [], keys = _a[0], newObjs = _a[1];\n                            var oldCache = req.trans[\"_cache\"];\n                            return table.mutate(req).then(function (res) {\n                                if (isArray(keys)) {\n                                    if (type !== \"delete\")\n                                        keys = res.results;\n                                    pkRangeSet.addKeys(keys);\n                                    var oldObjs = getFromTransactionCache(keys, oldCache);\n                                    if (!oldObjs && type !== \"add\") {\n                                        delsRangeSet.addKeys(keys);\n                                    }\n                                    if (oldObjs || newObjs) {\n                                        trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                    }\n                                }\n                                else if (keys) {\n                                    var range = { from: keys.lower, to: keys.upper };\n                                    delsRangeSet.add(range);\n                                    pkRangeSet.add(range);\n                                }\n                                else {\n                                    pkRangeSet.add(FULL_RANGE);\n                                    delsRangeSet.add(FULL_RANGE);\n                                    schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n                                }\n                                return res;\n                            });\n                        } });\n                    var getRange = function (_a) {\n                        var _b, _c;\n                        var _d = _a.query, index = _d.index, range = _d.range;\n                        return [\n                            index,\n                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n                        ];\n                    };\n                    var readSubscribers = {\n                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n                        count: getRange,\n                        query: getRange,\n                        openCursor: getRange,\n                    };\n                    keys(readSubscribers).forEach(function (method) {\n                        tableClone[method] = function (req) {\n                            var subscr = PSD.subscr;\n                            if (subscr) {\n                                var getRangeSet = function (indexName) {\n                                    var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                    return (subscr[part] ||\n                                        (subscr[part] = new RangeSet()));\n                                };\n                                var pkRangeSet_1 = getRangeSet(\"\");\n                                var delsRangeSet_1 = getRangeSet(\":dels\");\n                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n                                getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                                if (!queriedIndex.isPrimaryKey) {\n                                    if (method === \"count\") {\n                                        delsRangeSet_1.add(FULL_RANGE);\n                                    }\n                                    else {\n                                        var keysPromise_1 = method === \"query\" &&\n                                            outbound &&\n                                            req.values &&\n                                            table.query(__assign(__assign({}, req), { values: false }));\n                                        return table[method].apply(this, arguments).then(function (res) {\n                                            if (method === \"query\") {\n                                                if (outbound && req.values) {\n                                                    return keysPromise_1.then(function (_a) {\n                                                        var resultingKeys = _a.result;\n                                                        pkRangeSet_1.addKeys(resultingKeys);\n                                                        return res;\n                                                    });\n                                                }\n                                                var pKeys = req.values\n                                                    ? res.result.map(extractKey)\n                                                    : res.result;\n                                                if (req.values) {\n                                                    pkRangeSet_1.addKeys(pKeys);\n                                                }\n                                                else {\n                                                    delsRangeSet_1.addKeys(pKeys);\n                                                }\n                                            }\n                                            else if (method === \"openCursor\") {\n                                                var cursor_1 = res;\n                                                var wantValues_1 = req.values;\n                                                return (cursor_1 &&\n                                                    Object.create(cursor_1, {\n                                                        key: {\n                                                            get: function () {\n                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.key;\n                                                            },\n                                                        },\n                                                        primaryKey: {\n                                                            get: function () {\n                                                                var pkey = cursor_1.primaryKey;\n                                                                delsRangeSet_1.addKey(pkey);\n                                                                return pkey;\n                                                            },\n                                                        },\n                                                        value: {\n                                                            get: function () {\n                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.value;\n                                                            },\n                                                        },\n                                                    }));\n                                            }\n                                            return res;\n                                        });\n                                    }\n                                }\n                            }\n                            return table[method].apply(this, arguments);\n                        };\n                    });\n                    return tableClone;\n                } });\n        },\n    };\n    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n        function addAffectedIndex(ix) {\n            var rangeSet = getRangeSet(ix.name || \"\");\n            function extractKey(obj) {\n                return obj != null ? ix.extractKey(obj) : null;\n            }\n            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n                ? key.forEach(function (key) { return rangeSet.addKey(key); })\n                : rangeSet.addKey(key); };\n            (oldObjs || newObjs).forEach(function (_, i) {\n                var oldKey = oldObjs && extractKey(oldObjs[i]);\n                var newKey = newObjs && extractKey(newObjs[i]);\n                if (cmp(oldKey, newKey) !== 0) {\n                    if (oldKey != null)\n                        addKeyOrKeys(oldKey);\n                    if (newKey != null)\n                        addKeyOrKeys(newKey);\n                }\n            });\n        }\n        schema.indexes.forEach(addAffectedIndex);\n    }\n\n    var Dexie$1 =  (function () {\n        function Dexie(name, options) {\n            var _this = this;\n            this._middlewares = {};\n            this.verno = 0;\n            var deps = Dexie.dependencies;\n            this._options = options = __assign({\n                addons: Dexie.addons, autoOpen: true,\n                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n            this._deps = {\n                indexedDB: options.indexedDB,\n                IDBKeyRange: options.IDBKeyRange\n            };\n            var addons = options.addons;\n            this._dbSchema = {};\n            this._versions = [];\n            this._storeNames = [];\n            this._allTables = {};\n            this.idbdb = null;\n            this._novip = this;\n            var state = {\n                dbOpenError: null,\n                isBeingOpened: false,\n                onReadyBeingFired: null,\n                openComplete: false,\n                dbReadyResolve: nop,\n                dbReadyPromise: null,\n                cancelOpen: nop,\n                openCanceller: null,\n                autoSchema: true,\n                PR1398_maxLoop: 3\n            };\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n            this._state = state;\n            this.name = name;\n            this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n                return function (subscriber, bSticky) {\n                    Dexie.vip(function () {\n                        var state = _this._state;\n                        if (state.openComplete) {\n                            if (!state.dbOpenError)\n                                DexiePromise.resolve().then(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else if (state.onReadyBeingFired) {\n                            state.onReadyBeingFired.push(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else {\n                            subscribe(subscriber);\n                            var db_1 = _this;\n                            if (!bSticky)\n                                subscribe(function unsubscribe() {\n                                    db_1.on.ready.unsubscribe(subscriber);\n                                    db_1.on.ready.unsubscribe(unsubscribe);\n                                });\n                        }\n                    });\n                };\n            });\n            this.Collection = createCollectionConstructor(this);\n            this.Table = createTableConstructor(this);\n            this.Transaction = createTransactionConstructor(this);\n            this.Version = createVersionConstructor(this);\n            this.WhereClause = createWhereClauseConstructor(this);\n            this.on(\"versionchange\", function (ev) {\n                if (ev.newVersion > 0)\n                    console.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n                else\n                    console.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n                _this.close();\n            });\n            this.on(\"blocked\", function (ev) {\n                if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                    console.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n                else\n                    console.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n            });\n            this._maxKey = getMaxKey(options.IDBKeyRange);\n            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n            this._fireOnBlocked = function (ev) {\n                _this.on(\"blocked\").fire(ev);\n                connections\n                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                    .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n            };\n            this.use(virtualIndexMiddleware);\n            this.use(hooksMiddleware);\n            this.use(observabilityMiddleware);\n            this.use(cacheExistingValuesMiddleware);\n            this.vip = Object.create(this, { _vip: { value: true } });\n            addons.forEach(function (addon) { return addon(_this); });\n        }\n        Dexie.prototype.version = function (versionNumber) {\n            if (isNaN(versionNumber) || versionNumber < 0.1)\n                throw new exceptions.Type(\"Given version is not a positive number\");\n            versionNumber = Math.round(versionNumber * 10) / 10;\n            if (this.idbdb || this._state.isBeingOpened)\n                throw new exceptions.Schema(\"Cannot add version when database is open\");\n            this.verno = Math.max(this.verno, versionNumber);\n            var versions = this._versions;\n            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n            if (versionInstance)\n                return versionInstance;\n            versionInstance = new this.Version(versionNumber);\n            versions.push(versionInstance);\n            versions.sort(lowerVersionFirst);\n            versionInstance.stores({});\n            this._state.autoSchema = false;\n            return versionInstance;\n        };\n        Dexie.prototype._whenReady = function (fn) {\n            var _this = this;\n            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n                if (_this._state.openComplete) {\n                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n                }\n                if (!_this._state.isBeingOpened) {\n                    if (!_this._options.autoOpen) {\n                        reject(new exceptions.DatabaseClosed());\n                        return;\n                    }\n                    _this.open().catch(nop);\n                }\n                _this._state.dbReadyPromise.then(resolve, reject);\n            }).then(fn);\n        };\n        Dexie.prototype.use = function (_a) {\n            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n            if (name)\n                this.unuse({ stack: stack, name: name });\n            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n            middlewares.sort(function (a, b) { return a.level - b.level; });\n            return this;\n        };\n        Dexie.prototype.unuse = function (_a) {\n            var stack = _a.stack, name = _a.name, create = _a.create;\n            if (stack && this._middlewares[stack]) {\n                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                    return create ? mw.create !== create :\n                        name ? mw.name !== name :\n                            false;\n                });\n            }\n            return this;\n        };\n        Dexie.prototype.open = function () {\n            return dexieOpen(this);\n        };\n        Dexie.prototype._close = function () {\n            var state = this._state;\n            var idx = connections.indexOf(this);\n            if (idx >= 0)\n                connections.splice(idx, 1);\n            if (this.idbdb) {\n                try {\n                    this.idbdb.close();\n                }\n                catch (e) { }\n                this._novip.idbdb = null;\n            }\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n        };\n        Dexie.prototype.close = function () {\n            this._close();\n            var state = this._state;\n            this._options.autoOpen = false;\n            state.dbOpenError = new exceptions.DatabaseClosed();\n            if (state.isBeingOpened)\n                state.cancelOpen(state.dbOpenError);\n        };\n        Dexie.prototype.delete = function () {\n            var _this = this;\n            var hasArguments = arguments.length > 0;\n            var state = this._state;\n            return new DexiePromise(function (resolve, reject) {\n                var doDelete = function () {\n                    _this.close();\n                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                    req.onsuccess = wrap(function () {\n                        _onDatabaseDeleted(_this._deps, _this.name);\n                        resolve();\n                    });\n                    req.onerror = eventRejectHandler(reject);\n                    req.onblocked = _this._fireOnBlocked;\n                };\n                if (hasArguments)\n                    throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n                if (state.isBeingOpened) {\n                    state.dbReadyPromise.then(doDelete);\n                }\n                else {\n                    doDelete();\n                }\n            });\n        };\n        Dexie.prototype.backendDB = function () {\n            return this.idbdb;\n        };\n        Dexie.prototype.isOpen = function () {\n            return this.idbdb !== null;\n        };\n        Dexie.prototype.hasBeenClosed = function () {\n            var dbOpenError = this._state.dbOpenError;\n            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n        };\n        Dexie.prototype.hasFailed = function () {\n            return this._state.dbOpenError !== null;\n        };\n        Dexie.prototype.dynamicallyOpened = function () {\n            return this._state.autoSchema;\n        };\n        Object.defineProperty(Dexie.prototype, \"tables\", {\n            get: function () {\n                var _this = this;\n                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Dexie.prototype.transaction = function () {\n            var args = extractTransactionArgs.apply(this, arguments);\n            return this._transaction.apply(this, args);\n        };\n        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n            var _this = this;\n            var parentTransaction = PSD.trans;\n            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n                parentTransaction = null;\n            var onlyIfCompatible = mode.indexOf('?') !== -1;\n            mode = mode.replace('!', '').replace('?', '');\n            var idbMode, storeNames;\n            try {\n                storeNames = tables.map(function (table) {\n                    var storeName = table instanceof _this.Table ? table.name : table;\n                    if (typeof storeName !== 'string')\n                        throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                    return storeName;\n                });\n                if (mode == \"r\" || mode === READONLY)\n                    idbMode = READONLY;\n                else if (mode == \"rw\" || mode == READWRITE)\n                    idbMode = READWRITE;\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n                if (parentTransaction) {\n                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                        if (onlyIfCompatible) {\n                            parentTransaction = null;\n                        }\n                        else\n                            throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                    }\n                    if (parentTransaction) {\n                        storeNames.forEach(function (storeName) {\n                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                                if (onlyIfCompatible) {\n                                    parentTransaction = null;\n                                }\n                                else\n                                    throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                        \" not included in parent transaction.\");\n                            }\n                        });\n                    }\n                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                        parentTransaction = null;\n                    }\n                }\n            }\n            catch (e) {\n                return parentTransaction ?\n                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                    rejection(e);\n            }\n            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n            return (parentTransaction ?\n                parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n                PSD.trans ?\n                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                    this._whenReady(enterTransaction));\n        };\n        Dexie.prototype.table = function (tableName) {\n            if (!hasOwn(this._allTables, tableName)) {\n                throw new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n            }\n            return this._allTables[tableName];\n        };\n        return Dexie;\n    }());\n\n    var symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n        ? Symbol.observable\n        : \"@@observable\";\n    var Observable =  (function () {\n        function Observable(subscribe) {\n            this._subscribe = subscribe;\n        }\n        Observable.prototype.subscribe = function (x, error, complete) {\n            return this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n        };\n        Observable.prototype[symbolObservable] = function () {\n            return this;\n        };\n        return Observable;\n    }());\n\n    function extendObservabilitySet(target, newSet) {\n        keys(newSet).forEach(function (part) {\n            var rangeSet = target[part] || (target[part] = new RangeSet());\n            mergeRanges(rangeSet, newSet[part]);\n        });\n        return target;\n    }\n\n    function liveQuery(querier) {\n        return new Observable(function (observer) {\n            var scopeFuncIsAsync = isAsyncFunction(querier);\n            function execute(subscr) {\n                if (scopeFuncIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                var exec = function () { return newScope(querier, { subscr: subscr, trans: null }); };\n                var rv = PSD.trans\n                    ?\n                        usePSD(PSD.transless, exec)\n                    : exec();\n                if (scopeFuncIsAsync) {\n                    rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n                }\n                return rv;\n            }\n            var closed = false;\n            var accumMuts = {};\n            var currentObs = {};\n            var subscription = {\n                get closed() {\n                    return closed;\n                },\n                unsubscribe: function () {\n                    closed = true;\n                    globalEvents.storagemutated.unsubscribe(mutationListener);\n                },\n            };\n            observer.start && observer.start(subscription);\n            var querying = false, startedListening = false;\n            function shouldNotify() {\n                return keys(currentObs).some(function (key) {\n                    return accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]);\n                });\n            }\n            var mutationListener = function (parts) {\n                extendObservabilitySet(accumMuts, parts);\n                if (shouldNotify()) {\n                    doQuery();\n                }\n            };\n            var doQuery = function () {\n                if (querying || closed)\n                    return;\n                accumMuts = {};\n                var subscr = {};\n                var ret = execute(subscr);\n                if (!startedListening) {\n                    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                    startedListening = true;\n                }\n                querying = true;\n                Promise.resolve(ret).then(function (result) {\n                    querying = false;\n                    if (closed)\n                        return;\n                    if (shouldNotify()) {\n                        doQuery();\n                    }\n                    else {\n                        accumMuts = {};\n                        currentObs = subscr;\n                        observer.next && observer.next(result);\n                    }\n                }, function (err) {\n                    querying = false;\n                    observer.error && observer.error(err);\n                    subscription.unsubscribe();\n                });\n            };\n            doQuery();\n            return subscription;\n        });\n    }\n\n    var domDeps;\n    try {\n        domDeps = {\n            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n        };\n    }\n    catch (e) {\n        domDeps = { indexedDB: null, IDBKeyRange: null };\n    }\n\n    var Dexie = Dexie$1;\n    props(Dexie, __assign(__assign({}, fullNameExceptions), {\n        delete: function (databaseName) {\n            var db = new Dexie(databaseName, { addons: [] });\n            return db.delete();\n        },\n        exists: function (name) {\n            return new Dexie(name, { addons: [] }).open().then(function (db) {\n                db.close();\n                return true;\n            }).catch('NoSuchDatabaseError', function () { return false; });\n        },\n        getDatabaseNames: function (cb) {\n            try {\n                return getDatabaseNames(Dexie.dependencies).then(cb);\n            }\n            catch (_a) {\n                return rejection(new exceptions.MissingAPI());\n            }\n        },\n        defineClass: function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return Class;\n        }, ignoreTransaction: function (scopeFunc) {\n            return PSD.trans ?\n                usePSD(PSD.transless, scopeFunc) :\n                scopeFunc();\n        }, vip: vip, async: function (generatorFn) {\n            return function () {\n                try {\n                    var rv = awaitIterator(generatorFn.apply(this, arguments));\n                    if (!rv || typeof rv.then !== 'function')\n                        return DexiePromise.resolve(rv);\n                    return rv;\n                }\n                catch (e) {\n                    return rejection(e);\n                }\n            };\n        }, spawn: function (generatorFn, args, thiz) {\n            try {\n                var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        },\n        currentTransaction: {\n            get: function () { return PSD.trans || null; }\n        }, waitFor: function (promiseOrFunction, optionalTimeout) {\n            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n                Dexie.ignoreTransaction(promiseOrFunction) :\n                promiseOrFunction)\n                .timeout(optionalTimeout || 60000);\n            return PSD.trans ?\n                PSD.trans.waitFor(promise) :\n                promise;\n        },\n        Promise: DexiePromise,\n        debug: {\n            get: function () { return debug; },\n            set: function (value) {\n                setDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n            }\n        },\n        derive: derive, extend: extend, props: props, override: override,\n        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n        minKey: minKey,\n        addons: [],\n        connections: connections,\n        errnames: errnames,\n        dependencies: domDeps,\n        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n            .map(function (n) { return parseInt(n); })\n            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\n    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\n    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n            if (!propagatingLocally) {\n                var event_1;\n                if (isIEOrEdge) {\n                    event_1 = document.createEvent('CustomEvent');\n                    event_1.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n                }\n                else {\n                    event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                        detail: updatedParts\n                    });\n                }\n                propagatingLocally = true;\n                dispatchEvent(event_1);\n                propagatingLocally = false;\n            }\n        });\n        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n            var detail = _a.detail;\n            if (!propagatingLocally) {\n                propagateLocally(detail);\n            }\n        });\n    }\n    function propagateLocally(updateParts) {\n        var wasMe = propagatingLocally;\n        try {\n            propagatingLocally = true;\n            globalEvents.storagemutated.fire(updateParts);\n        }\n        finally {\n            propagatingLocally = wasMe;\n        }\n    }\n    var propagatingLocally = false;\n\n    if (typeof BroadcastChannel !== 'undefined') {\n        var bc_1 = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            if (!propagatingLocally) {\n                bc_1.postMessage(changedParts);\n            }\n        });\n        bc_1.onmessage = function (ev) {\n            if (ev.data)\n                propagateLocally(ev.data);\n        };\n    }\n    else if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            try {\n                if (!propagatingLocally) {\n                    if (typeof localStorage !== 'undefined') {\n                        localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                            trig: Math.random(),\n                            changedParts: changedParts,\n                        }));\n                    }\n                    if (typeof self['clients'] === 'object') {\n                        __spreadArray([], self['clients'].matchAll({ includeUncontrolled: true }), true).forEach(function (client) {\n                            return client.postMessage({\n                                type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                                changedParts: changedParts,\n                            });\n                        });\n                    }\n                }\n            }\n            catch (_a) { }\n        });\n        if (typeof addEventListener !== 'undefined') {\n            addEventListener('storage', function (ev) {\n                if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n                    var data = JSON.parse(ev.newValue);\n                    if (data)\n                        propagateLocally(data.changedParts);\n                }\n            });\n        }\n        var swContainer = self.document && navigator.serviceWorker;\n        if (swContainer) {\n            swContainer.addEventListener('message', propagateMessageLocally);\n        }\n    }\n    function propagateMessageLocally(_a) {\n        var data = _a.data;\n        if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n            propagateLocally(data.changedParts);\n        }\n    }\n\n    DexiePromise.rejectionMapper = mapError;\n    setDebug(debug, dexieStackFrameFilter);\n\n    var namedExports = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Dexie: Dexie$1,\n        liveQuery: liveQuery,\n        'default': Dexie$1,\n        RangeSet: RangeSet,\n        mergeRanges: mergeRanges,\n        rangesOverlap: rangesOverlap\n    });\n\n    __assign(Dexie$1, namedExports, { default: Dexie$1 });\n\n    return Dexie$1;\n\n}));\n//# sourceMappingURL=dexie.js.map\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n"],"sourceRoot":""}