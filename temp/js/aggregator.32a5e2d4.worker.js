(function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s="6a5d")})({"07f4":function(e,t,i){"use strict";var s=i("be7f"),n=4,a=0,r=1,o=2;function c(e){var t=e.length;while(--t>=0)e[t]=0}var h=0,d=1,l=2,u=3,p=258,f=29,b=256,m=b+1+f,g=30,_=19,w=2*m+1,y=15,v=16,k=7,x=256,S=16,O=17,T=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],N=512,B=new Array(2*(m+2));c(B);var E=new Array(2*g);c(E);var I=new Array(N);c(I);var D=new Array(p-u+1);c(D);var U=new Array(f);c(U);var M,R,L,q=new Array(g);function J(e,t,i,s,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=s,this.max_length=n,this.has_stree=e&&e.length}function Z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function j(e){return e<256?I[e]:I[256+(e>>>7)]}function F(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function K(e,t,i){e.bi_valid>v-i?(e.bi_buf|=t<<e.bi_valid&65535,F(e,e.bi_buf),e.bi_buf=t>>v-e.bi_valid,e.bi_valid+=i-v):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function H(e,t,i){K(e,i[2*t],i[2*t+1])}function W(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function G(e){16===e.bi_valid?(F(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function $(e,t){var i,s,n,a,r,o,c=t.dyn_tree,h=t.max_code,d=t.stat_desc.static_tree,l=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,b=0;for(a=0;a<=y;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<w;i++)s=e.heap[i],a=c[2*c[2*s+1]+1]+1,a>f&&(a=f,b++),c[2*s+1]=a,s>h||(e.bl_count[a]++,r=0,s>=p&&(r=u[s-p]),o=c[2*s],e.opt_len+=o*(a+r),l&&(e.static_len+=o*(d[2*s+1]+r)));if(0!==b){do{a=f-1;while(0===e.bl_count[a])a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[f]--,b-=2}while(b>0);for(a=f;0!==a;a--){s=e.bl_count[a];while(0!==s)n=e.heap[--i],n>h||(c[2*n+1]!==a&&(e.opt_len+=(a-c[2*n+1])*c[2*n],c[2*n+1]=a),s--)}}}function Q(e,t,i){var s,n,a=new Array(y+1),r=0;for(s=1;s<=y;s++)a[s]=r=r+i[s-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=W(a[o]++,o))}}function X(){var e,t,i,s,n,a=new Array(y+1);for(i=0,s=0;s<f-1;s++)for(U[s]=i,e=0;e<1<<A[s];e++)D[i++]=s;for(D[i-1]=s,n=0,s=0;s<16;s++)for(q[s]=n,e=0;e<1<<z[s];e++)I[n++]=s;for(n>>=7;s<g;s++)for(q[s]=n<<7,e=0;e<1<<z[s]-7;e++)I[256+n++]=s;for(t=0;t<=y;t++)a[t]=0;e=0;while(e<=143)B[2*e+1]=8,e++,a[8]++;while(e<=255)B[2*e+1]=9,e++,a[9]++;while(e<=279)B[2*e+1]=7,e++,a[7]++;while(e<=287)B[2*e+1]=8,e++,a[8]++;for(Q(B,m+1,a),e=0;e<g;e++)E[2*e+1]=5,E[2*e]=W(e,5);M=new J(B,A,b+1,m,y),R=new J(E,z,0,g,y),L=new J(new Array(0),P,0,_,k)}function Y(e){var t;for(t=0;t<m;t++)e.dyn_ltree[2*t]=0;for(t=0;t<g;t++)e.dyn_dtree[2*t]=0;for(t=0;t<_;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*x]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function V(e){e.bi_valid>8?F(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function ee(e,t,i,n){V(e),n&&(F(e,i),F(e,~i)),s.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function te(e,t,i,s){var n=2*t,a=2*i;return e[n]<e[a]||e[n]===e[a]&&s[t]<=s[i]}function ie(e,t,i){var s=e.heap[i],n=i<<1;while(n<=e.heap_len){if(n<e.heap_len&&te(t,e.heap[n+1],e.heap[n],e.depth)&&n++,te(t,s,e.heap[n],e.depth))break;e.heap[i]=e.heap[n],i=n,n<<=1}e.heap[i]=s}function se(e,t,i){var s,n,a,r,o=0;if(0!==e.last_lit)do{s=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],n=e.pending_buf[e.l_buf+o],o++,0===s?H(e,n,t):(a=D[n],H(e,a+b+1,t),r=A[a],0!==r&&(n-=U[a],K(e,n,r)),s--,a=j(s),H(e,a,i),r=z[a],0!==r&&(s-=q[a],K(e,s,r)))}while(o<e.last_lit);H(e,x,t)}function ne(e,t){var i,s,n,a=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=w,i=0;i<c;i++)0!==a[2*i]?(e.heap[++e.heap_len]=h=i,e.depth[i]=0):a[2*i+1]=0;while(e.heap_len<2)n=e.heap[++e.heap_len]=h<2?++h:0,a[2*n]=1,e.depth[n]=0,e.opt_len--,o&&(e.static_len-=r[2*n+1]);for(t.max_code=h,i=e.heap_len>>1;i>=1;i--)ie(e,a,i);n=c;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ie(e,a,1),s=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=s,a[2*n]=a[2*i]+a[2*s],e.depth[n]=(e.depth[i]>=e.depth[s]?e.depth[i]:e.depth[s])+1,a[2*i+1]=a[2*s+1]=n,e.heap[1]=n++,ie(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],$(e,t),Q(a,h,e.bl_count)}function ae(e,t,i){var s,n,a=-1,r=t[1],o=0,c=7,h=4;for(0===r&&(c=138,h=3),t[2*(i+1)+1]=65535,s=0;s<=i;s++)n=r,r=t[2*(s+1)+1],++o<c&&n===r||(o<h?e.bl_tree[2*n]+=o:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[2*S]++):o<=10?e.bl_tree[2*O]++:e.bl_tree[2*T]++,o=0,a=n,0===r?(c=138,h=3):n===r?(c=6,h=3):(c=7,h=4))}function re(e,t,i){var s,n,a=-1,r=t[1],o=0,c=7,h=4;for(0===r&&(c=138,h=3),s=0;s<=i;s++)if(n=r,r=t[2*(s+1)+1],!(++o<c&&n===r)){if(o<h)do{H(e,n,e.bl_tree)}while(0!==--o);else 0!==n?(n!==a&&(H(e,n,e.bl_tree),o--),H(e,S,e.bl_tree),K(e,o-3,2)):o<=10?(H(e,O,e.bl_tree),K(e,o-3,3)):(H(e,T,e.bl_tree),K(e,o-11,7));o=0,a=n,0===r?(c=138,h=3):n===r?(c=6,h=3):(c=7,h=4)}}function oe(e){var t;for(ae(e,e.dyn_ltree,e.l_desc.max_code),ae(e,e.dyn_dtree,e.d_desc.max_code),ne(e,e.bl_desc),t=_-1;t>=3;t--)if(0!==e.bl_tree[2*C[t]+1])break;return e.opt_len+=3*(t+1)+5+5+4,t}function ce(e,t,i,s){var n;for(K(e,t-257,5),K(e,i-1,5),K(e,s-4,4),n=0;n<s;n++)K(e,e.bl_tree[2*C[n]+1],3);re(e,e.dyn_ltree,t-1),re(e,e.dyn_dtree,i-1)}function he(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return r;for(t=32;t<b;t++)if(0!==e.dyn_ltree[2*t])return r;return a}c(q);var de=!1;function le(e){de||(X(),de=!0),e.l_desc=new Z(e.dyn_ltree,M),e.d_desc=new Z(e.dyn_dtree,R),e.bl_desc=new Z(e.bl_tree,L),e.bi_buf=0,e.bi_valid=0,Y(e)}function ue(e,t,i,s){K(e,(h<<1)+(s?1:0),3),ee(e,t,i,!0)}function pe(e){K(e,d<<1,3),H(e,x,B),G(e)}function fe(e,t,i,s){var a,r,c=0;e.level>0?(e.strm.data_type===o&&(e.strm.data_type=he(e)),ne(e,e.l_desc),ne(e,e.d_desc),c=oe(e),a=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=a&&(a=r)):a=r=i+5,i+4<=a&&-1!==t?ue(e,t,i,s):e.strategy===n||r===a?(K(e,(d<<1)+(s?1:0),3),se(e,B,E)):(K(e,(l<<1)+(s?1:0),3),ce(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),se(e,e.dyn_ltree,e.dyn_dtree)),Y(e),s&&V(e)}function be(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(D[i]+b+1)]++,e.dyn_dtree[2*j(t)]++),e.last_lit===e.lit_bufsize-1}t._tr_init=le,t._tr_stored_block=ue,t._tr_flush_block=fe,t._tr_tally=be,t._tr_align=pe},"2ceb":function(e,t,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4126:function(e,t,i){"use strict";var s=i("a177"),n=i("be7f"),a=i("7b27"),r=i("4dc6"),o=i("8936"),c=Object.prototype.toString,h=0,d=4,l=0,u=1,p=2,f=-1,b=0,m=8;function g(e){if(!(this instanceof g))return new g(e);this.options=n.assign({level:f,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var i=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==l)throw new Error(r[i]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"===typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=s.deflateSetDictionary(this.strm,h),i!==l)throw new Error(r[i]);this._dict_set=!0}}function _(e,t){var i=new g(t);if(i.push(e,!0),i.err)throw i.msg||r[i.err];return i.result}function w(e,t){return t=t||{},t.raw=!0,_(e,t)}function y(e,t){return t=t||{},t.gzip=!0,_(e,t)}g.prototype.push=function(e,t){var i,r,o=this.strm,f=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?d:h,"string"===typeof e?o.input=a.string2buf(e):"[object ArrayBuffer]"===c.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new n.Buf8(f),o.next_out=0,o.avail_out=f),i=s.deflate(o,r),i!==u&&i!==l)return this.onEnd(i),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||r!==d&&r!==p)||("string"===this.options.to?this.onData(a.buf2binstring(n.shrinkBuf(o.output,o.next_out))):this.onData(n.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&i!==u);return r===d?(i=s.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l):r!==p||(this.onEnd(l),o.avail_out=0,!0)},g.prototype.onData=function(e){this.chunks.push(e)},g.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=g,t.deflate=_,t.deflateRaw=w,t.gzip=y},"4dc6":function(e,t,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},6853:function(e,t,i){"use strict";var s=i("be7f"),n=15,a=852,r=592,o=0,c=1,h=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,i,f,b,m,g,_){var w,y,v,k,x,S,O,T,A,z=_.bits,P=0,C=0,N=0,B=0,E=0,I=0,D=0,U=0,M=0,R=0,L=null,q=0,J=new s.Buf16(n+1),Z=new s.Buf16(n+1),j=null,F=0;for(P=0;P<=n;P++)J[P]=0;for(C=0;C<f;C++)J[t[i+C]]++;for(E=z,B=n;B>=1;B--)if(0!==J[B])break;if(E>B&&(E=B),0===B)return b[m++]=20971520,b[m++]=20971520,_.bits=1,0;for(N=1;N<B;N++)if(0!==J[N])break;for(E<N&&(E=N),U=1,P=1;P<=n;P++)if(U<<=1,U-=J[P],U<0)return-1;if(U>0&&(e===o||1!==B))return-1;for(Z[1]=0,P=1;P<n;P++)Z[P+1]=Z[P]+J[P];for(C=0;C<f;C++)0!==t[i+C]&&(g[Z[t[i+C]]++]=C);if(e===o?(L=j=g,S=19):e===c?(L=d,q-=257,j=l,F-=257,S=256):(L=u,j=p,S=-1),R=0,C=0,P=N,x=m,I=E,D=0,v=-1,M=1<<E,k=M-1,e===c&&M>a||e===h&&M>r)return 1;for(;;){O=P-D,g[C]<S?(T=0,A=g[C]):g[C]>S?(T=j[F+g[C]],A=L[q+g[C]]):(T=96,A=0),w=1<<P-D,y=1<<I,N=y;do{y-=w,b[x+(R>>D)+y]=O<<24|T<<16|A|0}while(0!==y);w=1<<P-1;while(R&w)w>>=1;if(0!==w?(R&=w-1,R+=w):R=0,C++,0===--J[P]){if(P===B)break;P=t[i+g[C]]}if(P>E&&(R&k)!==v){0===D&&(D=E),x+=N,I=P-D,U=1<<I;while(I+D<B){if(U-=J[I+D],U<=0)break;I++,U<<=1}if(M+=1<<I,e===c&&M>a||e===h&&M>r)return 1;v=R&k,b[v]=E<<24|I<<16|x-m|0}}return 0!==R&&(b[x+R]=P-D<<24|64<<16|0),_.bits=E,0}},"6a5d":function(e,t,i){"use strict";i.r(t);var s=i("ba10");function n(e=16,t="abcdefghijklmnopqrstuvwxyz0123456789"){let i="";const s=t.length;for(let n=0;n<e;n++)i+=t.charAt(Math.floor(Math.random()*s));return i}function a(e){return e.match(/([^:]*):(.*)/).slice(1,3)}function r(e=1e3){return new Promise(t=>{setTimeout(()=>t(),e)})}function o(e){const t=n(8);return new Promise(i=>{const s=({data:t})=>{t.trackingId===e.trackingId&&(self.removeEventListener("message",s),i(t.data))};self.addEventListener("message",s),e.trackingId=t,self.postMessage(e)})}class c extends s["EventEmitter"]{constructor(){super(),this.pairs=[],this.products=null,this.keepAliveIntervals={},this.apis=[],this.connecting={},this.disconnecting={},this.scheduledOperations={},this.scheduledOperationsDelays={},this.clearReconnectionDelayTimeout={},this.count=0}get requiresProducts(){return!this.products&&this.endpoints.PRODUCTS}isMatching(e){return!(!this.products||!this.products.length)&&-1!==this.products.indexOf(e)}getUrl(e){throw new Error("Not implemented")}async link(e){if(e=e.replace(/[^:]*:/,""),!this.isMatching(e))return Promise.reject(`${this.id} couldn't match with ${e}`);this.resolveApi(e)}resolveApi(e){let t=this.getActiveApiByUrl(this.getUrl(e));if(t||(t=this.createWs(e)),-1===t._pending.indexOf(e)&&-1===t._connected.indexOf(e))return t._pending.push(e),t.readyState===WebSocket.OPEN&&this.schedule(()=>{this.subscribePendingPairs(t)},"subscribe-"+t.url,1e3),t}createWs(e){const t=this.getUrl(e),i=new WebSocket(t);return i._id=n(),i.binaryType="arraybuffer",i._connected=[],i._pending=[],this.apis.push(i),i.onmessage=e=>{this.count++,!0===this.onMessage(e,i)&&(i._timestamp=Date.now())},i.onopen=e=>{"undefined"!==typeof this.scheduledOperationsDelays[t]&&(this.clearReconnectionDelayTimeout[t]=setTimeout(()=>{delete this.clearReconnectionDelayTimeout[t],delete this.scheduledOperationsDelays[t],i._reconnecting=!1},1e4)),this.markLoadingAsCompleted(this.connecting,i._id,!0),this.subscribePendingPairs(i),this.onOpen(e,i._connected)},i.onclose=async e=>{this.clearReconnectionDelayTimeout[t]&&(clearTimeout(this.clearReconnectionDelayTimeout[t]),delete this.clearReconnectionDelayTimeout[t]),this.markLoadingAsCompleted(this.connecting,i._id,!1),this.onClose(e,i._connected),this.markLoadingAsCompleted(this.disconnecting,i._id,!0);const s=[...i._pending,...i._connected];if(s.length){const e=i._connected.slice();if(e.length)for(const t of e)await this.unlink(this.id+":"+t);i._reconnecting=!0,this.scheduledOperationsDelays[i.url]=this.schedule(()=>{this.reconnectPairs(s)},i.url,500,1.5,6e4)}},i.onerror=e=>{this.onError(e,i._connected)},this.connecting[i._id]={},this.connecting[i._id].promise=new Promise((e,t)=>{this.connecting[i._id].resolver=s=>{s?(this.onApiCreated(i),e(i)):t()}}),i}async subscribePendingPairs(e){const t=e._pending.slice();for(const i of t)await this.subscribe(e,i)}async unlink(e){e=e.replace(/[^:]*:/,"");const t=this.getActiveApiByPair(e);if(t&&-1!==t._connected.indexOf(e))return await this.unsubscribe(t,e),t._connected.length?void 0:this.removeWs(t)}getActiveApiByPair(e){for(let t=0;t<this.apis.length;t++)if(-1!==this.apis[t]._connected.indexOf(e))return this.apis[t]}getActiveApiByUrl(e){for(let t=0;t<this.apis.length;t++)if(this.apis[t].url===e&&(!this.maxConnectionsPerApi||this.apis[t]._connected.length+this.apis[t]._pending.length<this.maxConnectionsPerApi))return this.apis[t]}removeWs(e){let t;if(e.readyState!==WebSocket.CLOSED){if(e._connected.length)throw new Error("Cannot unbind api that still has pairs linked to it");this.disconnecting[e._id]={},this.disconnecting[e._id].promise=new Promise((t,i)=>{e.readyState<WebSocket.CLOSING&&e.close(),this.disconnecting[e._id].resolver=e=>e?t():i()}),t=this.disconnecting[e._id].promise}else t=Promise.resolve();return t.then(()=>{this.onApiRemoved(e),this.apis.splice(this.apis.indexOf(e),1)})}reconnectApi(e){const t=[...e._pending,...e._connected];this.reconnectPairs(t)}async reconnectPairs(e){const t=e.slice(0,e.length);for(const i of t)await this.unlink(this.id+":"+i);await new Promise(e=>setTimeout(e,500));for(const i of t)await this.link(this.id+":"+i)}setProducts(e){if(!e)return this.products=null,null;if(!this.validateProducts(e))return this.products=null,!1;if("object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"products"))for(const t in e)this[t]=e[t];else Array.isArray(e)&&(this.products=e);return!0}async getProducts(e){const t=await o({op:"getExchangeProducts",data:{exchangeId:this.id,endpoints:this.endpoints.PRODUCTS,forceFetch:e}});return!1===this.setProducts(t.data)?this.getProducts(!0):t.data}onOpen(e,t){this.emit("open",e)}onApiCreated(e){}onApiRemoved(e){}onMessage(e,t){throw new Error("Not implemented")}onError(e,t){this.emit("error",e)}onClose(e,t){this.emit("close",e)}formatProducts(e){return e}validateProducts(e){return!0}async subscribe(e,t){return!!this.markPairAsConnected(e,t)&&(this.emit("subscribed",t,e._reconnecting),e.readyState===WebSocket.OPEN&&(this.delayBetweenMessages&&await r(this.delayBetweenMessages),!0))}async unsubscribe(e,t){return!!this.markPairAsDisconnected(e,t)&&(this.emit("unsubscribed",t,e._id),e.readyState===WebSocket.OPEN&&(this.delayBetweenMessages&&await r(this.delayBetweenMessages),e.readyState===WebSocket.OPEN))}emitTrades(e,t){if(t&&t.length)return this.emit("trades",t),!0}emitLiquidations(e,t){if(t&&t.length)return this.emit("liquidations",t),!0}startKeepAlive(e,t={event:"ping"},i=3e4){this.keepAliveIntervals[e.url]&&this.stopKeepAlive(e),this.keepAliveIntervals[e.url]=setInterval(()=>{e.readyState===WebSocket.OPEN&&e.send(JSON.stringify(t))},i)}stopKeepAlive(e){this.keepAliveIntervals[e.url]&&(clearInterval(this.keepAliveIntervals[e.url]),delete this.keepAliveIntervals[e.url])}markLoadingAsCompleted(e,t,i){e[t]&&(e[t].resolver(i),delete e[t])}schedule(e,t,i,s,n,a){return this.scheduledOperations[t]&&clearTimeout(this.scheduledOperations[t]),"undefined"===typeof a&&(a=this.scheduledOperationsDelays[t]),a=Math.max(i,a||0),this.scheduledOperations[t]=setTimeout(()=>{delete this.scheduledOperations[t],e()},a),a*=s||1,"number"===typeof n&&i>0&&(a=Math.min(n,a)),a}markPairAsConnected(e,t){const i=e._pending.indexOf(t);if(-1===i)return!1;e._pending.splice(i,1);const s=e._connected.indexOf(t);return-1===s&&(e._connected.push(t),!0)}markPairAsDisconnected(e,t){const i=e._pending.indexOf(t);if(-1!==i)return e._pending.splice(i,1),!1;const s=e._connected.indexOf(t);return-1!==s&&(e._connected.splice(s,1),!0)}getEstimatedTimeToConnect(e){if(!this.delayBetweenMessages)return e;const t=e*this.delayBetweenMessages;return this.maxConnectionsPerApi&&e>this.maxConnectionsPerApi?t/Math.ceil(e/this.maxConnectionsPerApi):t}}var h=c,d=class extends h{constructor(){super(...arguments),this.id="BITMEX",this.xbtPrice=48e3,this.endpoints={PRODUCTS:"https://www.bitmex.com/api/v1/instrument/active"}}getUrl(){return"wss://www.bitmex.com/realtime"}formatProducts(e){const t=[],i={},s={},n={};for(const a of e)i[a.symbol]=a.isInverse?"inverse":a.isQuanto?"quanto":"linear",s[a.symbol]=a.multiplier,"linear"===i[a.symbol]&&(n[a.symbol]=a.underlyingToPositionMultiplier),t.push(a.symbol);return{products:t,types:i,multipliers:s,underlyingToPositionMultipliers:n}}validateProducts(e){return!!(e&&e.multipliers&&e.underlyingToPositionMultipliers&&e.types)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({op:"subscribe",args:["trade:"+t,"liquidation:"+t]})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({op:"unsubscribe",args:["trade:"+t,"liquidation:"+t]})),!0}onApiCreated(e){e.send(JSON.stringify({op:"subscribe",args:["instrument:XBTUSD"]}))}onMessage(e,t){const i=JSON.parse(e.data);if(i&&i.data&&i.data.length){if("liquidation"===i.table&&"insert"===i.action)return this.emitLiquidations(t.id,i.data.map(e=>{let t;return t="quanto"===this.types[e.symbol]?this.multipliers[e.symbol]/1e8*e.leavesQty*this.xbtPrice:"inverse"===this.types[e.symbol]?e.leavesQty/e.price:1/this.underlyingToPositionMultipliers[e.symbol]*e.leavesQty,{exchange:this.id,pair:e.symbol,timestamp:Date.now(),price:e.price,size:t,side:"Buy"===e.side?"buy":"sell",liquidation:!0}}));if("trade"===i.table&&"insert"===i.action)return this.emitTrades(t.id,i.data.map(e=>({exchange:this.id,pair:e.symbol,timestamp:+new Date(e.timestamp),price:e.price,size:e.homeNotional,side:"Buy"===e.side?"buy":"sell"})));"instrument"===i.table&&i.data[0].lastPrice&&(this.xbtPrice=i.data[0].lastPrice)}}},l=class extends h{constructor(){super(...arguments),this.id="BINANCE_FUTURES",this.lastSubscriptionId=0,this.subscriptions={},this.maxConnectionsPerApi=100,this.delayBetweenMessages=100,this.endpoints={PRODUCTS:["https://fapi.binance.com/fapi/v1/exchangeInfo","https://dapi.binance.com/dapi/v1/exchangeInfo"]}}getUrl(e){return this.dapi[e]?"wss://dstream.binance.com/ws":"wss://fstream.binance.com/ws"}formatProducts(e){const t=[],i={},s={};for(const n of e){const a=["fapi","dapi"][e.indexOf(n)];for(const e of n.symbols){if(e.contractStatus&&"TRADING"!==e.contractStatus||e.status&&"TRADING"!==e.status)continue;const n=e.symbol.toLowerCase();"dapi"===a&&(s[n]=!0),e.contractSize&&(i[n]=e.contractSize),t.push(n)}}return{products:t,specs:i,dapi:s}}async subscribe(e,t){if(!await super.subscribe(e,t))return;this.subscriptions[t]=++this.lastSubscriptionId;const i=[t+"@aggTrade",t+"@forceOrder"];return e.send(JSON.stringify({method:"SUBSCRIBE",params:i,id:this.subscriptions[t]})),!0}async unsubscribe(e,t){if(!await super.unsubscribe(e,t))return;const i=[t+"@aggTrade",t+"@forceOrder"];return e.send(JSON.stringify({method:"UNSUBSCRIBE",params:i,id:this.subscriptions[t]})),delete this.subscriptions[t],!0}onMessage(e,t){const i=JSON.parse(e.data);if(i){if("aggTrade"===i.e&&"INSURANCE_FUND"!==i.X){let e=+i.q;const s=i.s.toLowerCase();return"number"===typeof this.specs[s]&&(e=e*this.specs[s]/i.p),this.emitTrades(t.id,[{exchange:this.id,pair:s,timestamp:i.T,price:+i.p,size:e,side:i.m?"sell":"buy",count:i.l-i.f+1}])}if("forceOrder"===i.e){let e=+i.o.q;const s=i.o.s.toLowerCase();return"number"===typeof this.specs[s]&&(e=e*this.specs[s]/i.o.p),this.emitLiquidations(t.id,[{exchange:this.id,pair:s,timestamp:i.o.T,price:+i.o.p,size:e,side:"BUY"===i.o.S?"buy":"sell",liquidation:!0}])}}}},u=class extends h{constructor(){super(...arguments),this.id="BINANCE_US",this.lastSubscriptionId=0,this.subscriptions={},this.endpoints={PRODUCTS:"https://api.binance.us/api/v3/exchangeInfo"}}getUrl(){return"wss://stream.binance.us:9443/ws"}formatProducts(e){return e.symbols.filter(e=>"TRADING"===e.status).map(e=>e.symbol.toLowerCase())}async subscribe(e,t){if(!await super.subscribe(e,t))return;this.subscriptions[t]=++this.lastSubscriptionId;const i=[t+"@trade"];return e.send(JSON.stringify({method:"SUBSCRIBE",params:i,id:this.subscriptions[t]})),await r(250),!0}async unsubscribe(e,t){if(!await super.unsubscribe(e,t))return;const i=[t+"@trade"];return e.send(JSON.stringify({method:"UNSUBSCRIBE",params:i,id:this.subscriptions[t]})),delete this.subscriptions[t],new Promise(e=>setTimeout(e,250))}onMessage(e,t){const i=JSON.parse(e.data);if(i.E)return this.emitTrades(t.id,[{exchange:this.id,pair:i.s.toLowerCase(),timestamp:i.E,price:+i.p,size:+i.q,side:i.m?"sell":"buy"}])}},p=class extends h{constructor(){super(...arguments),this.id="KRAKEN",this.endpoints={PRODUCTS:["https://api.kraken.com/0/public/AssetPairs","https://futures.kraken.com/derivatives/api/v3/instruments"]}}getUrl(e){return"undefined"!==typeof this.specs[e]?"wss://futures.kraken.com/ws/v1":"wss://ws.kraken.com/"}formatProducts(e){const t=[],i={};for(const s of e)if(s.instruments)for(const e of s.instruments){if(!e.tradeable)continue;const s=e.symbol.toUpperCase();i[s]=e.contractSize,t.push(s)}else if(s.result)for(const e in s.result)s.result[e].wsname&&t.push(s.result[e].wsname);return{products:t,specs:i}}async subscribe(e,t){if(!await super.subscribe(e,t))return;const i={event:"subscribe"};return"undefined"!==typeof this.specs[t]?(i.product_ids=[t],i.feed="trade"):(i.pair=[t],i.subscription={name:"trade"}),e.send(JSON.stringify(i)),!0}async unsubscribe(e,t){if(!await super.unsubscribe(e,t))return;const i={event:"unsubscribe"};return"undefined"!==typeof this.specs[t]?(i.product_ids=[t],i.feed="trade"):(i.pair=[t],i.subscription={name:"trade"}),e.send(JSON.stringify(i)),!0}onMessage(e,t){const i=JSON.parse(e.data);if(i&&"heartbeat"!==i.event)return"trade"===i.feed&&i.qty?this.emitTrades(t.id,[{exchange:this.id,pair:i.product_id,timestamp:i.time,price:i.price,size:i.qty/i.price,side:i.side}]):!(!i[1]||!i[1].length)&&this.emitTrades(t.id,i[1].map(e=>({exchange:this.id,pair:i[3],timestamp:1e3*e[2],price:+e[0],size:+e[1],side:"b"===e[3]?"buy":"sell"})))}onApiCreated(e){/futures/.test(e.url)&&this.startKeepAlive(e)}onApiRemoved(e){/futures/.test(e.url)&&this.stopKeepAlive(e)}},f=i("d7ac"),b=i.n(f),m=class extends h{constructor(){super(...arguments),this.id="HUOBI",this.liquidationOrdersSubscriptions={},this.endpoints={PRODUCTS:["https://api.huobi.pro/v1/common/symbols","https://api.hbdm.com/api/v1/contract_contract_info","https://api.hbdm.com/swap-api/v1/swap_contract_info","https://api.hbdm.com/linear-swap-api/v1/swap_contract_info"]},this.contractTypesAliases={this_week:"CW",next_week:"NW",quarter:"CQ",next_quarter:"NQ"},this.types={},this.specs={},this.prices={}}getUrl(e){return"futures"===this.types[e]?"wss://www.hbdm.com/ws":"swap"===this.types[e]?"wss://api.hbdm.com/swap-ws":"linear"===this.types[e]?"wss://api.hbdm.com/linear-swap-ws":"wss://api.huobi.pro/ws"}formatProducts(e){const t=[],i={},s={};for(const n of e){const a=["spot","futures","swap","linear"][e.indexOf(n)];for(const e of n.data){let n;switch(a){case"spot":n=(e["base-currency"]+e["quote-currency"]).toLowerCase();break;case"futures":n=e.symbol+"_"+this.contractTypesAliases[e.contract_type],i[n]=e.contract_size;break;case"swap":case"linear":n=e.contract_code,i[n]=e.contract_size;break}if(t.find(e=>e.toLowerCase()===n.toLowerCase()))throw new Error("Duplicate pair detected on huobi exchange ("+n+")");s[n]=a,t.push(n)}}return{products:t,specs:i,types:s}}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({sub:`market.${t}.trade.detail`,id:t})),this.subscribeLiquidations(e,t),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({unsub:"market."+t+".trade.detail",id:t})),!0}onMessage(e,t){const i=JSON.parse(b.a.inflate(e.data,{to:"string"}));if(i)if(i.ping)t.send(JSON.stringify({pong:i.ping}));else if(i.tick&&i.tick.data&&i.tick.data.length){const e=i.ch.replace(/market.(.*).trade.detail/,"$1");return this.emitTrades(t.id,i.tick.data.map(t=>this.formatTrade(t,e))),!0}}formatTrade(e,t){let i=+e.amount;return"number"===typeof this.specs[t]&&(i=i*this.specs[t]/("linear"===this.types[t]?1:e.price)),this.prices[t]=+e.price,{exchange:this.id,pair:t,timestamp:e.ts,price:+e.price,size:i,side:e.direction}}formatLiquidation(e,t){return{exchange:this.id,pair:t,timestamp:+new Date,price:this.prices[t]||e.price,size:e.amount,side:e.direction,liquidation:!0}}subscribeLiquidations(e,t,i=!1){if(e._marketDataApi&&e._marketDataApi.readyState===WebSocket.OPEN&&("futures"===this.types[t]||"swap"===this.types[t]||"linear"===this.types[t])){const s="futures"===this.types[t]?t.replace(/\d+/,"").replace(/(-|_).*/,""):t;e._marketDataApi.send(JSON.stringify({op:i?"unsub":"sub",topic:"public."+s+".liquidation_orders"}))}}onApiRemoved(e){e._marketDataApi&&e._marketDataApi.readyState===WebSocket.OPEN&&e._marketDataApi.close()}onApiCreated(e){this.liquidationOrdersSubscriptions[e.id]=[],this.openMarketDataApi(e)}openMarketDataApi(e){"wss://api.hbdm.com/swap-ws"===e.url?e._marketDataApi=new WebSocket("wss://api.hbdm.com/swap-notification"):"wss://api.hbdm.com/linear-swap-ws"===e.url&&(e._marketDataApi=new WebSocket("wss://api.hbdm.com/linear-swap-notification")),e._marketDataApi&&(e._marketDataApi.binaryType="arraybuffer",e._marketDataApi.onmessage=t=>{const i=JSON.parse(b.a.inflate(t.data,{to:"string"}));if("ping"===i.op)e._marketDataApi.send(JSON.stringify({op:"pong",ts:i.ts}));else if(i.data){const t=i.topic.replace(/public.(.*).liquidation_orders/,"$1");this.emitTrades(e.id,i.data.map(e=>this.formatLiquidation(e,t)))}},e._marketDataApi.onopen=()=>{for(const t of e._connected)this.subscribeLiquidations(e,t)},e._marketDataApi.onerror=e=>{},e._marketDataApi.onclose=t=>{e._marketDataApi=null,setTimeout(()=>{e.readyState===WebSocket.OPEN&&this.openMarketDataApi(e)},1e3)})}},g=class extends h{constructor(){super(...arguments),this.id="BINANCE",this.lastSubscriptionId=0,this.subscriptions={},this.endpoints={PRODUCTS:"https://api.binance.com/api/v3/exchangeInfo"},this.maxConnectionsPerApi=100,this.delayBetweenMessages=250}getUrl(){return"wss://stream.binance.com:9443/ws"}formatProducts(e){return e.symbols.filter(e=>"TRADING"===e.status).map(e=>e.symbol.toLowerCase())}async subscribe(e,t){if(!await super.subscribe(e,t))return;this.subscriptions[t]=++this.lastSubscriptionId;const i=[t+"@aggTrade"];return e.send(JSON.stringify({method:"SUBSCRIBE",params:i,id:this.subscriptions[t]})),!0}async unsubscribe(e,t){if(!await super.unsubscribe(e,t))return;const i=[t+"@aggTrade"];return e.send(JSON.stringify({method:"UNSUBSCRIBE",params:i,id:this.subscriptions[t]})),delete this.subscriptions[t],new Promise(e=>setTimeout(e,250))}onMessage(e,t){const i=JSON.parse(e.data);if(i.E)return this.emitTrades(t.id,[{exchange:this.id,pair:i.s.toLowerCase(),timestamp:i.T,price:+i.p,size:+i.q,count:i.l-i.f+1,side:i.m?"sell":"buy"}])}},_=class extends h{constructor(){super(...arguments),this.id="BITFINEX",this.maxConnectionsPerApi=24,this.channels={},this.prices={},this.endpoints={PRODUCTS:"https://api.bitfinex.com/v1/symbols"}}getUrl(){return"wss://api-pub.bitfinex.com/ws/2/"}formatProducts(e){return e.map(e=>e.toUpperCase())}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({event:"subscribe",channel:"trades",symbol:"t"+t})),1===e._connected.length&&e.send(JSON.stringify({event:"subscribe",channel:"status",key:"liq:global"})),!0}async unsubscribe(e,t){if(!await super.unsubscribe(e,t))return;if(0===e._connected.length){const t=Object.keys(this.channels).find(e=>"status"===this.channels[e].name);return t&&(e.send(JSON.stringify({event:"unsubscribe",chanId:t})),delete this.channels[t]),!0}const i=Object.keys(this.channels).filter(e=>this.channels[e].pair===t);if(i.length)for(const s of i)e.send(JSON.stringify({event:"unsubscribe",chanId:s})),delete this.channels[s]}onMessage(e,t){const i=JSON.parse(e.data);if("subscribed"===i.event&&i.chanId)return void(this.channels[i.chanId]={name:i.channel,pair:i.pair});if(!this.channels[i[0]]||"hb"===i[1])return void("hb"!==i[1]&&i.event);const s=this.channels[i[0]];if(s.hasSentInitialMessage)return"trades"===s.name&&"te"===i[1]?(this.prices[t.id+s.pair]=+i[2][3],this.emitTrades(t.id,[{exchange:this.id,pair:s.pair,timestamp:+new Date(i[2][1]),price:+i[2][3],size:Math.abs(i[2][2]),side:i[2][2]<0?"sell":"buy"}])):"status"===s.name&&i[1]?this.emitLiquidations(t.id,i[1].filter(e=>!e[8]&&!e[10]&&!e[11]&&-1!==t._connected.indexOf(e[4].substring(1))).map(e=>{const i=e[4].substring(1);return{exchange:this.id,pair:e[4].substring(1),timestamp:parseInt(e[2]),price:this.prices[t.id+i],size:Math.abs(e[5]),side:e[5]>1?"sell":"buy",liquidation:!0}})):void 0;s.hasSentInitialMessage=!0}},w=class extends h{constructor(){super(...arguments),this.id="BITSTAMP",this.endpoints={PRODUCTS:"https://www.bitstamp.net/api/v2/trading-pairs-info/"}}getUrl(){return"wss://ws.bitstamp.net/"}formatProducts(e){return e.map(e=>e.url_symbol)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({event:"bts:subscribe",data:{channel:"live_trades_"+t}})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({event:"bts:unsubscribe",data:{channel:"live_trades_"+t}})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(!i||!i.data||!i.data.amount)return;const s=i.data;return this.emitTrades(t.id,[{exchange:this.id,pair:i.channel.split("_").pop(),timestamp:+new Date(s.microtimestamp/1e3),price:s.price,size:s.amount,side:0===s.type?"buy":"sell"}])}},y=class extends h{constructor(){super(...arguments),this.id="COINBASE",this.endpoints={PRODUCTS:"https://api.pro.coinbase.com/products"}}getUrl(){return"wss://ws-feed.pro.coinbase.com/"}formatProducts(e){return e.map(e=>e.id)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({type:"subscribe",channels:[{name:"matches",product_ids:[t]}]})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({type:"unsubscribe",channels:[{name:"matches",product_ids:[t]}]})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(i&&i.size>0)return this.emitTrades(t.id,[{exchange:this.id,pair:i.product_id,timestamp:+new Date(i.time),price:+i.price,size:+i.size,side:"buy"===i.side?"sell":"buy"}])}},v=class extends h{constructor(){super(...arguments),this.id="HITBTC",this.endpoints={PRODUCTS:"https://api.hitbtc.com/api/2/public/symbol"}}getUrl(){return"wss://api.hitbtc.com/api/2/ws"}formatProducts(e){return e.map(e=>e.id)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({method:"subscribeTrades",params:{symbol:t}})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({method:"unsubscribeTrades",params:{symbol:t}})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(i&&"updateTrades"===i.method&&i.params&&i.params.data&&i.params.data.length)return this.emitTrades(t.id,i.params.data.map(e=>({exchange:this.id,pair:i.params.symbol,timestamp:+new Date(e.timestamp),price:+e.price,size:+e.quantity,side:e.side})))}},k=class extends h{constructor(){super(...arguments),this.id="OKEX",this.endpoints={PRODUCTS:["https://www.okex.com/api/v5/public/instruments?instType=SPOT","https://www.okex.com/api/v5/public/instruments?instType=FUTURES","https://www.okex.com/api/v5/public/instruments?instType=SWAP"]}}getUrl(){return"wss://ws.okex.com:8443/ws/v5/public"}formatProducts(e){const t=[],i={},s={},n={};for(const a of e)for(const e of a.data){const a=e.instType,r=e.instId;"FUTURES"===a?(i[r]=+e.ctVal,s[r]=e.alias,"inverse"===e.ctType&&(n[r]=!0)):"SWAP"===a&&(i[r]=+e.ctVal,"inverse"===e.ctType&&(n[r]=!0)),t.push(r)}return{products:t,specs:i,aliases:s,inversed:n}}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({op:"subscribe",args:[{channel:"trades",instId:t}]})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({op:"unsubscribe",args:[{channel:"trades",instId:t}]})),!0}formatTrade(e){let t;return t="undefined"!==typeof this.specs[e.instId]?e.sz*this.specs[e.instId]/(this.inversed[e.instId]?e.px:1):e.sz,{exchange:this.id,pair:e.instId,timestamp:+e.ts,price:+e.px,size:+t,side:e.side}}onMessage(e,t){const i=JSON.parse(e.data);if(i&&i.data)return this.emitTrades(t.id,i.data.map(e=>this.formatTrade(e)))}},x=class extends h{constructor(){super(...arguments),this.id="POLONIEX",this.endpoints={PRODUCTS:"https://www.poloniex.com/public?command=returnTicker"},this.channels={}}getUrl(){return"wss://api2.poloniex.com/"}formatProducts(e){return Object.keys(e)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({command:"subscribe",channel:t})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({command:"unsubscribe",channel:t})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(i&&3===i.length&&i[2]&&i[2].length){if("i"!==i[2][0][0])return this.emitTrades(t.id,i[2].filter(e=>"t"===e[0]).map(e=>({exchange:this.id,pair:this.channels[i[0]],timestamp:+new Date(1e3*e[5]),price:+e[3],size:+e[4],side:e[2]?"buy":"sell"})));this.channels[i[0]]=i[2][0][1].currencyPair}}},S=class extends h{constructor(){super(...arguments),this.id="DERIBIT",this.endpoints={PRODUCTS:["https://www.deribit.com/api/v2/public/get_instruments?currency=BTC&kind=future","https://www.deribit.com/api/v2/public/get_instruments?currency=ETH&kind=future","https://www.deribit.com/api/v2/public/get_instruments?currency=USDC&kind=future"]}}getUrl(){return"wss://www.deribit.com/ws/api/v2"}formatProducts(e){const t=[],i={};for(const s of e)for(const e of s.result)e.is_active&&(i[e.instrument_name]=e.future_type,t.push(e.instrument_name));return{products:t,types:i}}validateProducts(e){return!(!e||!e.types)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({method:"public/subscribe",params:{channels:["trades."+t+".100ms"]}})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({method:"public/unsubscribe",params:{channels:["trades."+t+".raw"]}})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(!i||!i.params||!i.params.data||!i.params.data.length)return;const s=[],n=[];for(let a=0;a<i.params.data.length;a++){const e=i.params.data[a];let t=e.amount;"reversed"===this.types[e.instrument_name]&&(t/=e.price);const r={exchange:this.id,pair:e.instrument_name,timestamp:+e.timestamp,price:+e.price,size:t,side:e.direction};e.liquidation?(r.liquidation=!0,n.push(r)):s.push(r)}return s.length&&this.emitTrades(t.id,s),n.length&&this.emitLiquidations(t.id,n),!0}onApiCreated(e){this.startKeepAlive(e,{method:"public/ping"},45e3)}onApiRemoved(e){this.stopKeepAlive(e)}},O=class extends h{constructor(){super(...arguments),this.id="BYBIT",this.endpoints={PRODUCTS:["https://api.bybit.com/spot/v1/symbols","https://api.bybit.com/v2/public/symbols"]}}getUrl(e){return/-SPOT$/.test(e)?"wss://stream.bybit.com/spot/quote/ws/v2":-1!==e.indexOf("USDT")?"wss://stream.bybit.com/realtime_public":"wss://stream.bybit.com/realtime"}formatProducts(e){const t=[];for(const i of e){const s=["spot","futures"][e.indexOf(i)];for(const e of i.result)if("spot"===s)t.push(e.name+"-SPOT");else{if("Trading"!==e.status)continue;t.push(e.name)}}return{products:t}}async subscribe(e,t){if(await super.subscribe(e,t))return/-SPOT$/.test(t)?e.send(JSON.stringify({topic:"trade",event:"sub",params:{binary:!1,symbol:t.replace(/-SPOT$/,"")}})):e.send(JSON.stringify({op:"subscribe",args:["trade."+t,"liquidation."+t]})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return/-SPOT$/.test(t)?e.send(JSON.stringify({topic:"trade",event:"cancel",params:{binary:!1,symbol:t.replace(/-SPOT$/,"")}})):e.send(JSON.stringify({op:"unsubscribe",args:["trade."+t,"liquidation."+t]})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(i.data&&i.topic){if(i.data.length)return this.emitTrades(t.id,i.data.map(e=>{const t=/USDT$/.test(e.symbol)?e.size:e.size/e.price;return{exchange:this.id,pair:e.symbol,timestamp:+new Date(e.timestamp),price:+e.price,size:t,side:"Buy"===e.side?"buy":"sell"}}));if(i.data.symbol){const e=/USDT$/.test(i.data.symbol)?+i.data.qty:i.data.qty/i.data.price;return this.emitLiquidations(t.id,[{exchange:this.id,pair:i.data.symbol,timestamp:+i.data.time,price:+i.data.price,size:e,side:"Buy"===i.data.side?"sell":"buy",liquidation:!0}])}return this.emitTrades(t.id,[{exchange:this.id,pair:i.params.symbol+"-SPOT",timestamp:+i.data.t,price:+i.data.p,size:+i.data.q,side:i.data.m?"buy":"sell"}])}}onApiCreated(e){this.startKeepAlive(e,{op:"ping"},45e3)}onApiRemoved(e){this.stopKeepAlive(e)}},T=class extends h{constructor(){super(...arguments),this.id="FTX",this.endpoints={PRODUCTS:"https://ftx.com/api/markets"}}getUrl(){return"wss://ftx.com/ws/"}formatProducts(e){return e.result.map(e=>e.name)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({op:"subscribe",channel:"trades",market:t})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({op:"unsubscribe",channel:"trades",market:t})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(!i||!i.data||!i.data.length)return;const s=[],n=[];for(let a=0;a<i.data.length;a++){const e={exchange:this.id,pair:i.market,timestamp:+new Date(i.data[a].time),price:+i.data[a].price,size:i.data[a].size,side:i.data[a].side};i.data[a].liquidation?(e.liquidation=!0,n.push(e)):s.push(e)}return s.length&&this.emitTrades(t.id,s),n.length&&this.emitLiquidations(t.id,n),!0}onApiCreated(e){this.startKeepAlive(e,{op:"ping"},15e3)}onApiRemoved(e){this.stopKeepAlive(e)}},A=class extends h{constructor(){super(...arguments),this.id="PHEMEX",this.leverages=[],this.currencies=[],this.riskLimits=[],this.specs={},this.endpoints={PRODUCTS:"https://api.phemex.com/exchange/public/cfg/v2/products"},this.channels={}}getUrl(){return"wss://phemex.com/ws"}formatProducts(e){const t={},i=[],s=e.data.leverages,n=e.data.currencies,a=e.data.riskLimits;for(const r of e.data.products){if("Perpetual"===r.type){const i=n.find(e=>e.currency===r.quoteCurrency),s=n.find(e=>e.currency===r.settleCurrency);t[r.symbol]={type:r.type,contractSize:r.contractSize,settleCurrency:r.settleCurrency,quoteCurrency:r.quoteCurrency,valueScale:s?s.valueScale:1,priceScale:i?i.valueScale:1,ratioScale:e.data.ratioScale,riskLimits:a.filter(e=>e.symbol===r.symbol).map(e=>({steps:e.steps,riskLimits:e.riskLimits})),minPriceEp:r.minPricEp,maxPriceEp:r.maxPriceEp,lotSize:r.lotSize,pricePrecision:r.pricePrecision,maxOrderQty:r.maxOrderQty}}else if("Spot"===r.type){const i=n.find(e=>e.currency===r.quoteCurrency),s=n.find(e=>e.currency===r.baseCurrency);t[r.symbol]={type:r.type,maxBaseOrderSizeEv:r.maxBaseOrderSizeEv,minOrderValueEv:r.minOrderValueEv,valueScale:i?i.valueScale:1,priceScale:s?s.valueScale:1,ratioScale:e.data.ratioScale}}i.push(r.symbol)}return{specs:t,products:i,leverages:s,currencies:n,riskLimits:a}}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({id:1234,method:"trade.subscribe",params:[t]})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({id:1234,method:"trade.unsubscribe",params:[t]})),!0}onMessage(e,t){const i=JSON.parse(e.data);if(void 0!==i.trades&&"incremental"===i.type){const e=this.specs[i.symbol].type,s=i.trades.map(t=>{const s={exchange:this.id,pair:i.symbol,timestamp:t[0]/1e6,side:"Buy"===t[1]?"buy":"sell",price:0,size:0};return"Perpetual"===e?(s.price=+t[2]/Math.pow(10,this.specs[i.symbol].priceScale),s.size=+t[3]*this.specs[i.symbol].contractSize,this.specs[i.symbol].settleCurrency!==this.specs[i.symbol].quoteCurrency&&(s.size/=s.price)):"Spot"===e&&(s.price=+t[2]/Math.pow(10,this.specs[i.symbol].priceScale),s.size=+t[3]/Math.pow(10,this.specs[i.symbol].valueScale)),s});return this.emitTrades(t.id,s)}}onApiCreated(e){this.startKeepAlive(e,{method:"server.ping",id:9e3,params:[]},5e3)}onApiRemoved(e){this.stopKeepAlive(e)}},z=class extends h{constructor(){super(...arguments),this.id="DYDX",this.endpoints={PRODUCTS:"https://api.dydx.exchange/v3/markets"}}getUrl(){return"wss://api.dydx.exchange/v3/ws"}formatProducts(e){return Object.keys(e.markets)}async subscribe(e,t){if(await super.subscribe(e,t))return e.send(JSON.stringify({type:"subscribe",channel:"v3_trades",id:t})),!0}async unsubscribe(e,t){if(await super.unsubscribe(e,t))return e.send(JSON.stringify({type:"unsubscribe",channel:"v3_trades",id:t})),!0}formatTrade(e,t){return{exchange:this.id,pair:t,timestamp:+new Date(e.createdAt),price:+e.price,size:+e.size,side:"BUY"===e.side?"buy":"sell"}}onMessage(e,t){const i=JSON.parse(e.data);if("v3_trades"===i.channel){if("subscribed"===i.type)return;return this.emitTrades(t.id,i.contents.trades.map(e=>this.formatTrade(e,i.id)))}}};const P=[new d,new l,new u,new p,new m,new g,new _,new w,new y,new v,new k,new x,new S,new O,new T,new A,new z];function C(e){for(const t of P)if(t.id.toLowerCase()===e.toLowerCase())return t}const N=self;class B{constructor(){this.settings={calculateSlippage:null,aggregationLength:null,preferQuoteCurrencySize:null,buckets:{}},this.connections={},this.activeBuckets=[],this.buckets={},this.connectionsCount=0,this.connectionChange=0,this.baseAggregationTimeout=50,this.onGoingAggregations={},this.aggregationTimeouts={},this.pendingTrades=[],this.marketsStats={},this.bindExchanges(),this.startPriceInterval(),N.postMessage({op:"hello"})}bindExchanges(){for(const e of P)e.on("subscribed",this.onSubscribed.bind(this,e.id)),e.on("unsubscribed",this.onUnsubscribed.bind(this,e.id)),e.on("error",this.onError.bind(this,e.id))}bindTradesEvent(){for(const e of P)e.off("trades"),this.settings.aggregationLength>0?(e.on("trades",this.aggregateTrades.bind(this)),e.on("liquidations",this.aggregateLiquidations.bind(this))):(e.on("trades",this.emitTrades.bind(this)),e.on("liquidations",this.emitLiquidations.bind(this)));this.settings.aggregationLength>0?this.startAggrInterval():(this.clearInterval("aggr"),this.timeoutExpiredAggregations(),this.emitPendingTrades())}updateBuckets(e){const t=[],i=[];e.length;for(const s in e){-1===t.indexOf(s)&&t.push(s),this.buckets[s]||(this.buckets[s]=this.createBucket());for(const t of e[s])-1===i.indexOf(t)&&i.push(t),this.connections[t]&&(this.connections[t].bucket||(this.connections[t].bucket=this.createBucket()))}for(const s in this.connections)this.connections[s].bucket&&-1===i.indexOf(s)&&(this.connections[s].bucket=null);for(const s in this.buckets)-1===t.indexOf(s)&&delete this.buckets[s];t.length,t.length&&!this.activeBuckets.length?this.startStatsInterval():this.activeBuckets.length&&!t.length&&this["_statsInterval"]&&(this.clearInterval("stats"),this["_statsInterval"]=null),this.activeBuckets=t,this.settings.buckets=e}emitTrades(e){for(let t=0;t<e.length;t++){const i=e[t],s=i.exchange+":"+i.pair;this.connections[s]&&(this.settings.calculateSlippage&&(i.originalPrice=this.marketsStats[s].price||i.price),i.count=i.count||1,this.processTrade(i))}N.postMessage({op:"trades",data:e})}aggregateTrades(e){const t=Date.now();for(let i=0;i<e.length;i++){const s=e[i],n=s.exchange+":"+s.pair;if(this.connections[n]){if(this.onGoingAggregations[n]){const e=this.onGoingAggregations[n];if(e.timestamp+this.settings.aggregationLength>s.timestamp&&e.side===s.side){e.size+=s.size,e.price=s.price,e.count+=s.count||1;continue}this.pendingTrades.push(this.processTrade(e))}s.originalPrice=this.marketsStats[n].price||s.price,s.count=s.count||1,this.aggregationTimeouts[n]=t+this.baseAggregationTimeout,this.onGoingAggregations[n]=s}}}emitLiquidations(e){for(let t=0;t<e.length;t++){const i=e[t],s=i.exchange+":"+i.pair;this.connections[s]&&this.processLiquidation(i)}N.postMessage({op:"trades",data:e})}aggregateLiquidations(e){const t=Date.now();for(let i=0;i<e.length;i++){const s=e[i],n=s.exchange+":"+s.pair,a="liq_"+n;if(this.connections[n]){if(this.onGoingAggregations[a]){const e=this.onGoingAggregations[a];if(e.timestamp+this.settings.aggregationLength>s.timestamp&&e.side===s.side){e.size+=s.size,e.count++;continue}this.pendingTrades.push(this.processLiquidation(e))}s.count=1,this.aggregationTimeouts[a]=t+50,this.onGoingAggregations[a]=s}}}processTrade(e){const t=e.exchange+":"+e.pair;return this.settings.calculateSlippage&&("price"===this.settings.calculateSlippage?(e.slippage=Math.round(10*(e.price-e.originalPrice+Number.EPSILON))/10,Math.abs(e.slippage)/e.price<25e-5&&(e.slippage=null)):"bps"===this.settings.calculateSlippage&&("buy"===e.side?e.slippage=Math.floor((e.price-e.originalPrice)/e.originalPrice*1e4):e.slippage=Math.floor((e.originalPrice-e.price)/e.price*1e4))),e.amount=(this.settings.preferQuoteCurrencySize?e.price:1)*e.size,this.marketsStats[t].volume+=e.amount,this.marketsStats[t].volumeDelta+=e.amount*("buy"===e.side?1:-1),this.marketsStats[t].price=e.price,null===this.marketsStats[t].initialPrice&&this.emitInitialPrice(t,e.price),this.settings.aggregationLength>0&&(e.price=Math.max(e.price,e.originalPrice)),this.connections[t].bucket&&(this.connections[t].bucket["c"+e.side]+=e.count,this.connections[t].bucket["v"+e.side]+=e.amount),e}processLiquidation(e){const t=e.exchange+":"+e.pair;return e.amount=(this.settings.preferQuoteCurrencySize?e.price:1)*e.size,this.connections[t].bucket&&(this.connections[t].bucket["l"+e.side]+=e.amount),e}timeoutExpiredAggregations(){const e=Date.now(),t=Object.keys(this.onGoingAggregations);for(let i=0;i<t.length;i++){const s=this.onGoingAggregations[t[i]];e>this.aggregationTimeouts[t[i]]&&(s.liquidation?this.pendingTrades.push(this.processLiquidation(s)):this.pendingTrades.push(this.processTrade(s)),delete this.onGoingAggregations[t[i]])}}emitInitialPrice(e,t){this.marketsStats[e].initialPrice=t,N.postMessage({op:"price",data:{market:e,price:t}})}emitPendingTrades(){this.settings.aggregationLength>0&&this.timeoutExpiredAggregations(),this.pendingTrades.length&&(N.postMessage({op:"trades",data:this.pendingTrades}),this.pendingTrades.splice(0,this.pendingTrades.length))}emitStats(){const e=Date.now();for(const t in this.settings.buckets){for(const e of this.settings.buckets[t])this.connections[e]&&(this.buckets[t].vbuy+=this.connections[e].bucket.vbuy,this.buckets[t].vsell+=this.connections[e].bucket.vsell,this.buckets[t].cbuy+=this.connections[e].bucket.cbuy,this.buckets[t].csell+=this.connections[e].bucket.csell,this.buckets[t].lbuy+=this.connections[e].bucket.lbuy,this.buckets[t].lsell+=this.connections[e].bucket.lsell);this.buckets[t].timestamp=e,N.postMessage({op:"bucket-"+t,data:this.buckets[t]}),this.clearBucket(this.buckets[t])}for(const t in this.connections)this.connections[t].bucket&&this.clearBucket(this.connections[t].bucket)}emitPrices(){this.connectionsCount&&N.postMessage({op:"prices",data:this.marketsStats})}onSubscribed(e,t){const i=e+":"+t;if(!this.connections[i]){this.connections[i]={exchange:e,pair:t,hit:0,timestamp:null},this.marketsStats[i]={volume:0,volumeDelta:0,initialPrice:null,price:null},this.connectionsCount=Object.keys(this.connections).length;for(const e in this.settings.buckets)if(-1!==this.settings.buckets[e].indexOf(i)){this.connections[i].bucket=this.createBucket();break}N.postMessage({op:"connection",data:{pair:t,exchangeId:e}}),this.noticeConnectionChange(1)}}onUnsubscribed(e,t){const i=e+":"+t;this.onGoingAggregations[i]&&delete this.onGoingAggregations[i],this.connections[i]&&(delete this.connections[i],delete this.marketsStats[i],this.connectionsCount=Object.keys(this.connections).length,N.postMessage({op:"disconnection",data:{pair:t,exchangeId:e}}),this.noticeConnectionChange(-1))}noticeConnectionChange(e){this.connectionChange+=e,this._connectionChangeNoticeTimeout&&clearTimeout(this._connectionChangeNoticeTimeout),this._connectionChangeNoticeTimeout=setTimeout(()=>{this._connectionChangeNoticeTimeout=null,this.connectionChange&&N.postMessage({op:"notice",data:{id:"connections",type:"success",title:this.connectionsCount+" connections ("+(this.connectionChange>0?"+":"")+this.connectionChange+")"}}),this.connectionChange=0},3e3)}createBucket(){return{timestamp:null,vbuy:0,vsell:0,cbuy:0,csell:0,lbuy:0,lsell:0}}clearBucket(e){e.cbuy=e.csell=e.vbuy=e.vsell=e.lbuy=e.lsell=0}onError(e,t){let i;"string"===typeof t?i=t:t.message&&(i=t.message),i&&N.postMessage({op:"notice",data:{id:e+"-error",type:"error",title:`${e} disconnected unexpectedly (${i})`}})}async connect(e,t){const i=e.reduce((e,t)=>{const[i,s]=a(t);return i&&s?(e[i]||(e[i]=[]),-1===e[i].indexOf(t)&&e[i].push(t),e):{}},{}),s=[];for(const n in i){const e=C(n);if(e){e.requiresProducts&&await e.getProducts();const t=e.getEstimatedTimeToConnect(i[n].length);t>2e4&&N.postMessage({op:"notice",data:{id:n+"-connection-delay",type:"warning",timeout:t,title:`Connecting to ${i[n].length} markets on ${n}\nThis could take some time (about ${Math.round(t/1e3)}s)`}}),s.push((async()=>{for(const s of i[n])try{await e.link(s)}catch(t){}})())}}await Promise.all(s),t&&N.postMessage({op:"connect",trackingId:t})}async disconnect(e,t){const i=e.reduce((e,t)=>{const[i,s]=a(t);return i&&s?(e[i]||(e[i]=[]),-1===e[i].indexOf(t)&&e[i].push(t),e):{}},{}),s=[];for(const n in i){const e=C(n);e&&s.push((async()=>{for(const t of i[n])await e.unlink(t)})())}await Promise.all(s),t&&N.postMessage({op:"connect",trackingId:t})}startPriceInterval(){this["_priceInterval"]||(this["_priceInterval"]=self.setInterval(this.emitPrices.bind(this),1e3))}startAggrInterval(){this["_aggrInterval"]||(this["_aggrInterval"]=self.setInterval(this.emitPendingTrades.bind(this),50))}startStatsInterval(){this["_statsInterval"]||(this["_statsInterval"]=self.setInterval(this.emitStats.bind(this),500))}clearInterval(e){this["_"+e+"Interval"]&&(clearInterval(this["_"+e+"Interval"]),this["_"+e+"Interval"]=null)}async fetchExchangeProducts({exchangeId:e,forceFetch:t},i){const s=await C(e).getProducts(t);N.postMessage({op:"fetchExchangeProducts",data:s,trackingId:i})}formatExchangeProducts({exchangeId:e,response:t},i){let s=null;try{s=C(e).formatProducts(t)}catch(n){N.postMessage({op:"notice",data:{id:e+"-products",type:"error",title:`Failed to format ${e}'s products`}})}N.postMessage({op:"formatExchangeProducts",data:s,trackingId:i})}configureAggregator({key:e,value:t}){this.settings[e]!==t&&(this.settings[e]=t,"aggregationLength"===e&&(this.baseAggregationTimeout=Math.max(50,t),this.bindTradesEvent()))}getHits(e,t){N.postMessage({op:"getHits",trackingId:t,data:P.reduce((e,t)=>e+t.count,0)})}}const E=new B;self.addEventListener("message",e=>{const t=e.data;"function"===typeof E[t.op]&&E[t.op](t.data,t.trackingId)});t["default"]=null},"717e":function(e,t,i){"use strict";var s=i("9e6e"),n=i("be7f"),a=i("7b27"),r=i("2ceb"),o=i("4dc6"),c=i("8936"),h=i("8013"),d=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=s.inflateInit2(this.strm,t.windowBits);if(i!==r.Z_OK)throw new Error(o[i]);if(this.header=new h,s.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=a.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=s.inflateSetDictionary(this.strm,t.dictionary),i!==r.Z_OK)))throw new Error(o[i])}function u(e,t){var i=new l(t);if(i.push(e,!0),i.err)throw i.msg||o[i.err];return i.result}function p(e,t){return t=t||{},t.raw=!0,u(e,t)}l.prototype.push=function(e,t){var i,o,c,h,l,u=this.strm,p=this.options.chunkSize,f=this.options.dictionary,b=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?r.Z_FINISH:r.Z_NO_FLUSH,"string"===typeof e?u.input=a.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new n.Buf8(p),u.next_out=0,u.avail_out=p),i=s.inflate(u,r.Z_NO_FLUSH),i===r.Z_NEED_DICT&&f&&(i=s.inflateSetDictionary(this.strm,f)),i===r.Z_BUF_ERROR&&!0===b&&(i=r.Z_OK,b=!1),i!==r.Z_STREAM_END&&i!==r.Z_OK)return this.onEnd(i),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&i!==r.Z_STREAM_END&&(0!==u.avail_in||o!==r.Z_FINISH&&o!==r.Z_SYNC_FLUSH)||("string"===this.options.to?(c=a.utf8border(u.output,u.next_out),h=u.next_out-c,l=a.buf2string(u.output,c),u.next_out=h,u.avail_out=p-h,h&&n.arraySet(u.output,u.output,c,h,0),this.onData(l)):this.onData(n.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(b=!0)}while((u.avail_in>0||0===u.avail_out)&&i!==r.Z_STREAM_END);return i===r.Z_STREAM_END&&(o=r.Z_FINISH),o===r.Z_FINISH?(i=s.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===r.Z_OK):o!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),u.avail_out=0,!0)},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){e===r.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=l,t.inflate=u,t.inflateRaw=p,t.ungzip=u},"7b27":function(e,t,i){"use strict";var s=i("be7f"),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(h){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){a=!1}for(var r=new s.Buf8(256),o=0;o<256;o++)r[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function c(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&n))return String.fromCharCode.apply(null,s.shrinkBuf(e,t));for(var i="",r=0;r<t;r++)i+=String.fromCharCode(e[r]);return i}r[254]=r[254]=1,t.string2buf=function(e){var t,i,n,a,r,o=e.length,c=0;for(a=0;a<o;a++)i=e.charCodeAt(a),55296===(64512&i)&&a+1<o&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),a++)),c+=i<128?1:i<2048?2:i<65536?3:4;for(t=new s.Buf8(c),r=0,a=0;r<c;a++)i=e.charCodeAt(a),55296===(64512&i)&&a+1<o&&(n=e.charCodeAt(a+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),a++)),i<128?t[r++]=i:i<2048?(t[r++]=192|i>>>6,t[r++]=128|63&i):i<65536?(t[r++]=224|i>>>12,t[r++]=128|i>>>6&63,t[r++]=128|63&i):(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63,t[r++]=128|i>>>6&63,t[r++]=128|63&i);return t},t.buf2binstring=function(e){return c(e,e.length)},t.binstring2buf=function(e){for(var t=new s.Buf8(e.length),i=0,n=t.length;i<n;i++)t[i]=e.charCodeAt(i);return t},t.buf2string=function(e,t){var i,s,n,a,o=t||e.length,h=new Array(2*o);for(s=0,i=0;i<o;)if(n=e[i++],n<128)h[s++]=n;else if(a=r[n],a>4)h[s++]=65533,i+=a-1;else{n&=2===a?31:3===a?15:7;while(a>1&&i<o)n=n<<6|63&e[i++],a--;a>1?h[s++]=65533:n<65536?h[s++]=n:(n-=65536,h[s++]=55296|n>>10&1023,h[s++]=56320|1023&n)}return c(h,s)},t.utf8border=function(e,t){var i;t=t||e.length,t>e.length&&(t=e.length),i=t-1;while(i>=0&&128===(192&e[i]))i--;return i<0||0===i?t:i+r[e[i]]>t?i:t}},"7eb1":function(e,t,i){"use strict";var s=30,n=12;e.exports=function(e,t){var i,a,r,o,c,h,d,l,u,p,f,b,m,g,_,w,y,v,k,x,S,O,T,A,z;i=e.state,a=e.next_in,A=e.input,r=a+(e.avail_in-5),o=e.next_out,z=e.output,c=o-(t-e.avail_out),h=o+(e.avail_out-257),d=i.dmax,l=i.wsize,u=i.whave,p=i.wnext,f=i.window,b=i.hold,m=i.bits,g=i.lencode,_=i.distcode,w=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;e:do{m<15&&(b+=A[a++]<<m,m+=8,b+=A[a++]<<m,m+=8),v=g[b&w];t:for(;;){if(k=v>>>24,b>>>=k,m-=k,k=v>>>16&255,0===k)z[o++]=65535&v;else{if(!(16&k)){if(0===(64&k)){v=g[(65535&v)+(b&(1<<k)-1)];continue t}if(32&k){i.mode=n;break e}e.msg="invalid literal/length code",i.mode=s;break e}x=65535&v,k&=15,k&&(m<k&&(b+=A[a++]<<m,m+=8),x+=b&(1<<k)-1,b>>>=k,m-=k),m<15&&(b+=A[a++]<<m,m+=8,b+=A[a++]<<m,m+=8),v=_[b&y];i:for(;;){if(k=v>>>24,b>>>=k,m-=k,k=v>>>16&255,!(16&k)){if(0===(64&k)){v=_[(65535&v)+(b&(1<<k)-1)];continue i}e.msg="invalid distance code",i.mode=s;break e}if(S=65535&v,k&=15,m<k&&(b+=A[a++]<<m,m+=8,m<k&&(b+=A[a++]<<m,m+=8)),S+=b&(1<<k)-1,S>d){e.msg="invalid distance too far back",i.mode=s;break e}if(b>>>=k,m-=k,k=o-c,S>k){if(k=S-k,k>u&&i.sane){e.msg="invalid distance too far back",i.mode=s;break e}if(O=0,T=f,0===p){if(O+=l-k,k<x){x-=k;do{z[o++]=f[O++]}while(--k);O=o-S,T=z}}else if(p<k){if(O+=l+p-k,k-=p,k<x){x-=k;do{z[o++]=f[O++]}while(--k);if(O=0,p<x){k=p,x-=k;do{z[o++]=f[O++]}while(--k);O=o-S,T=z}}}else if(O+=p-k,k<x){x-=k;do{z[o++]=f[O++]}while(--k);O=o-S,T=z}while(x>2)z[o++]=T[O++],z[o++]=T[O++],z[o++]=T[O++],x-=3;x&&(z[o++]=T[O++],x>1&&(z[o++]=T[O++]))}else{O=o-S;do{z[o++]=z[O++],z[o++]=z[O++],z[o++]=z[O++],x-=3}while(x>2);x&&(z[o++]=z[O++],x>1&&(z[o++]=z[O++]))}break}}break}}while(a<r&&o<h);x=m>>3,a-=x,m-=x<<3,b&=(1<<m)-1,e.next_in=a,e.next_out=o,e.avail_in=a<r?r-a+5:5-(a-r),e.avail_out=o<h?h-o+257:257-(o-h),i.hold=b,i.bits=m}},8013:function(e,t,i){"use strict";function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=s},8936:function(e,t,i){"use strict";function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=s},"9e6e":function(e,t,i){"use strict";var s=i("be7f"),n=i("c834"),a=i("eeda"),r=i("7eb1"),o=i("6853"),c=0,h=1,d=2,l=4,u=5,p=6,f=0,b=1,m=2,g=-2,_=-3,w=-4,y=-5,v=8,k=1,x=2,S=3,O=4,T=5,A=6,z=7,P=8,C=9,N=10,B=11,E=12,I=13,D=14,U=15,M=16,R=17,L=18,q=19,J=20,Z=21,j=22,F=23,K=24,H=25,W=26,G=27,$=28,Q=29,X=30,Y=31,V=32,ee=852,te=592,ie=15,se=ie;function ne(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ae(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function re(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=k,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new s.Buf32(ee),t.distcode=t.distdyn=new s.Buf32(te),t.sane=1,t.back=-1,f):g}function oe(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,re(e)):g}function ce(e,t){var i,s;return e&&e.state?(s=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=i,s.wbits=t,oe(e))):g}function he(e,t){var i,s;return e?(s=new ae,e.state=s,s.window=null,i=ce(e,t),i!==f&&(e.state=null),i):g}function de(e){return he(e,se)}var le,ue,pe=!0;function fe(e){if(pe){var t;le=new s.Buf32(512),ue=new s.Buf32(32),t=0;while(t<144)e.lens[t++]=8;while(t<256)e.lens[t++]=9;while(t<280)e.lens[t++]=7;while(t<288)e.lens[t++]=8;o(h,e.lens,0,288,le,0,e.work,{bits:9}),t=0;while(t<32)e.lens[t++]=5;o(d,e.lens,0,32,ue,0,e.work,{bits:5}),pe=!1}e.lencode=le,e.lenbits=9,e.distcode=ue,e.distbits=5}function be(e,t,i,n){var a,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new s.Buf8(r.wsize)),n>=r.wsize?(s.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>n&&(a=n),s.arraySet(r.window,t,i-n,a,r.wnext),n-=a,n?(s.arraySet(r.window,t,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0}function me(e,t){var i,ee,te,ie,se,ae,re,oe,ce,he,de,le,ue,pe,me,ge,_e,we,ye,ve,ke,xe,Se,Oe,Te=0,Ae=new s.Buf8(4),ze=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return g;i=e.state,i.mode===E&&(i.mode=I),se=e.next_out,te=e.output,re=e.avail_out,ie=e.next_in,ee=e.input,ae=e.avail_in,oe=i.hold,ce=i.bits,he=ae,de=re,xe=f;e:for(;;)switch(i.mode){case k:if(0===i.wrap){i.mode=I;break}while(ce<16){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(2&i.wrap&&35615===oe){i.check=0,Ae[0]=255&oe,Ae[1]=oe>>>8&255,i.check=a(i.check,Ae,2,0),oe=0,ce=0,i.mode=x;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&oe)<<8)+(oe>>8))%31){e.msg="incorrect header check",i.mode=X;break}if((15&oe)!==v){e.msg="unknown compression method",i.mode=X;break}if(oe>>>=4,ce-=4,ke=8+(15&oe),0===i.wbits)i.wbits=ke;else if(ke>i.wbits){e.msg="invalid window size",i.mode=X;break}i.dmax=1<<ke,e.adler=i.check=1,i.mode=512&oe?N:E,oe=0,ce=0;break;case x:while(ce<16){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(i.flags=oe,(255&i.flags)!==v){e.msg="unknown compression method",i.mode=X;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=X;break}i.head&&(i.head.text=oe>>8&1),512&i.flags&&(Ae[0]=255&oe,Ae[1]=oe>>>8&255,i.check=a(i.check,Ae,2,0)),oe=0,ce=0,i.mode=S;case S:while(ce<32){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}i.head&&(i.head.time=oe),512&i.flags&&(Ae[0]=255&oe,Ae[1]=oe>>>8&255,Ae[2]=oe>>>16&255,Ae[3]=oe>>>24&255,i.check=a(i.check,Ae,4,0)),oe=0,ce=0,i.mode=O;case O:while(ce<16){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}i.head&&(i.head.xflags=255&oe,i.head.os=oe>>8),512&i.flags&&(Ae[0]=255&oe,Ae[1]=oe>>>8&255,i.check=a(i.check,Ae,2,0)),oe=0,ce=0,i.mode=T;case T:if(1024&i.flags){while(ce<16){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}i.length=oe,i.head&&(i.head.extra_len=oe),512&i.flags&&(Ae[0]=255&oe,Ae[1]=oe>>>8&255,i.check=a(i.check,Ae,2,0)),oe=0,ce=0}else i.head&&(i.head.extra=null);i.mode=A;case A:if(1024&i.flags&&(le=i.length,le>ae&&(le=ae),le&&(i.head&&(ke=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),s.arraySet(i.head.extra,ee,ie,le,ke)),512&i.flags&&(i.check=a(i.check,ee,le,ie)),ae-=le,ie+=le,i.length-=le),i.length))break e;i.length=0,i.mode=z;case z:if(2048&i.flags){if(0===ae)break e;le=0;do{ke=ee[ie+le++],i.head&&ke&&i.length<65536&&(i.head.name+=String.fromCharCode(ke))}while(ke&&le<ae);if(512&i.flags&&(i.check=a(i.check,ee,le,ie)),ae-=le,ie+=le,ke)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=P;case P:if(4096&i.flags){if(0===ae)break e;le=0;do{ke=ee[ie+le++],i.head&&ke&&i.length<65536&&(i.head.comment+=String.fromCharCode(ke))}while(ke&&le<ae);if(512&i.flags&&(i.check=a(i.check,ee,le,ie)),ae-=le,ie+=le,ke)break e}else i.head&&(i.head.comment=null);i.mode=C;case C:if(512&i.flags){while(ce<16){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(oe!==(65535&i.check)){e.msg="header crc mismatch",i.mode=X;break}oe=0,ce=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=E;break;case N:while(ce<32){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}e.adler=i.check=ne(oe),oe=0,ce=0,i.mode=B;case B:if(0===i.havedict)return e.next_out=se,e.avail_out=re,e.next_in=ie,e.avail_in=ae,i.hold=oe,i.bits=ce,m;e.adler=i.check=1,i.mode=E;case E:if(t===u||t===p)break e;case I:if(i.last){oe>>>=7&ce,ce-=7&ce,i.mode=G;break}while(ce<3){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}switch(i.last=1&oe,oe>>>=1,ce-=1,3&oe){case 0:i.mode=D;break;case 1:if(fe(i),i.mode=J,t===p){oe>>>=2,ce-=2;break e}break;case 2:i.mode=R;break;case 3:e.msg="invalid block type",i.mode=X}oe>>>=2,ce-=2;break;case D:oe>>>=7&ce,ce-=7&ce;while(ce<32){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if((65535&oe)!==(oe>>>16^65535)){e.msg="invalid stored block lengths",i.mode=X;break}if(i.length=65535&oe,oe=0,ce=0,i.mode=U,t===p)break e;case U:i.mode=M;case M:if(le=i.length,le){if(le>ae&&(le=ae),le>re&&(le=re),0===le)break e;s.arraySet(te,ee,ie,le,se),ae-=le,ie+=le,re-=le,se+=le,i.length-=le;break}i.mode=E;break;case R:while(ce<14){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(i.nlen=257+(31&oe),oe>>>=5,ce-=5,i.ndist=1+(31&oe),oe>>>=5,ce-=5,i.ncode=4+(15&oe),oe>>>=4,ce-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=X;break}i.have=0,i.mode=L;case L:while(i.have<i.ncode){while(ce<3){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}i.lens[ze[i.have++]]=7&oe,oe>>>=3,ce-=3}while(i.have<19)i.lens[ze[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Se={bits:i.lenbits},xe=o(c,i.lens,0,19,i.lencode,0,i.work,Se),i.lenbits=Se.bits,xe){e.msg="invalid code lengths set",i.mode=X;break}i.have=0,i.mode=q;case q:while(i.have<i.nlen+i.ndist){for(;;){if(Te=i.lencode[oe&(1<<i.lenbits)-1],me=Te>>>24,ge=Te>>>16&255,_e=65535&Te,me<=ce)break;if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(_e<16)oe>>>=me,ce-=me,i.lens[i.have++]=_e;else{if(16===_e){Oe=me+2;while(ce<Oe){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(oe>>>=me,ce-=me,0===i.have){e.msg="invalid bit length repeat",i.mode=X;break}ke=i.lens[i.have-1],le=3+(3&oe),oe>>>=2,ce-=2}else if(17===_e){Oe=me+3;while(ce<Oe){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}oe>>>=me,ce-=me,ke=0,le=3+(7&oe),oe>>>=3,ce-=3}else{Oe=me+7;while(ce<Oe){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}oe>>>=me,ce-=me,ke=0,le=11+(127&oe),oe>>>=7,ce-=7}if(i.have+le>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=X;break}while(le--)i.lens[i.have++]=ke}}if(i.mode===X)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=X;break}if(i.lenbits=9,Se={bits:i.lenbits},xe=o(h,i.lens,0,i.nlen,i.lencode,0,i.work,Se),i.lenbits=Se.bits,xe){e.msg="invalid literal/lengths set",i.mode=X;break}if(i.distbits=6,i.distcode=i.distdyn,Se={bits:i.distbits},xe=o(d,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Se),i.distbits=Se.bits,xe){e.msg="invalid distances set",i.mode=X;break}if(i.mode=J,t===p)break e;case J:i.mode=Z;case Z:if(ae>=6&&re>=258){e.next_out=se,e.avail_out=re,e.next_in=ie,e.avail_in=ae,i.hold=oe,i.bits=ce,r(e,de),se=e.next_out,te=e.output,re=e.avail_out,ie=e.next_in,ee=e.input,ae=e.avail_in,oe=i.hold,ce=i.bits,i.mode===E&&(i.back=-1);break}for(i.back=0;;){if(Te=i.lencode[oe&(1<<i.lenbits)-1],me=Te>>>24,ge=Te>>>16&255,_e=65535&Te,me<=ce)break;if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(ge&&0===(240&ge)){for(we=me,ye=ge,ve=_e;;){if(Te=i.lencode[ve+((oe&(1<<we+ye)-1)>>we)],me=Te>>>24,ge=Te>>>16&255,_e=65535&Te,we+me<=ce)break;if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}oe>>>=we,ce-=we,i.back+=we}if(oe>>>=me,ce-=me,i.back+=me,i.length=_e,0===ge){i.mode=W;break}if(32&ge){i.back=-1,i.mode=E;break}if(64&ge){e.msg="invalid literal/length code",i.mode=X;break}i.extra=15&ge,i.mode=j;case j:if(i.extra){Oe=i.extra;while(ce<Oe){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}i.length+=oe&(1<<i.extra)-1,oe>>>=i.extra,ce-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=F;case F:for(;;){if(Te=i.distcode[oe&(1<<i.distbits)-1],me=Te>>>24,ge=Te>>>16&255,_e=65535&Te,me<=ce)break;if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(0===(240&ge)){for(we=me,ye=ge,ve=_e;;){if(Te=i.distcode[ve+((oe&(1<<we+ye)-1)>>we)],me=Te>>>24,ge=Te>>>16&255,_e=65535&Te,we+me<=ce)break;if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}oe>>>=we,ce-=we,i.back+=we}if(oe>>>=me,ce-=me,i.back+=me,64&ge){e.msg="invalid distance code",i.mode=X;break}i.offset=_e,i.extra=15&ge,i.mode=K;case K:if(i.extra){Oe=i.extra;while(ce<Oe){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}i.offset+=oe&(1<<i.extra)-1,oe>>>=i.extra,ce-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=X;break}i.mode=H;case H:if(0===re)break e;if(le=de-re,i.offset>le){if(le=i.offset-le,le>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=X;break}le>i.wnext?(le-=i.wnext,ue=i.wsize-le):ue=i.wnext-le,le>i.length&&(le=i.length),pe=i.window}else pe=te,ue=se-i.offset,le=i.length;le>re&&(le=re),re-=le,i.length-=le;do{te[se++]=pe[ue++]}while(--le);0===i.length&&(i.mode=Z);break;case W:if(0===re)break e;te[se++]=i.length,re--,i.mode=Z;break;case G:if(i.wrap){while(ce<32){if(0===ae)break e;ae--,oe|=ee[ie++]<<ce,ce+=8}if(de-=re,e.total_out+=de,i.total+=de,de&&(e.adler=i.check=i.flags?a(i.check,te,de,se-de):n(i.check,te,de,se-de)),de=re,(i.flags?oe:ne(oe))!==i.check){e.msg="incorrect data check",i.mode=X;break}oe=0,ce=0}i.mode=$;case $:if(i.wrap&&i.flags){while(ce<32){if(0===ae)break e;ae--,oe+=ee[ie++]<<ce,ce+=8}if(oe!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=X;break}oe=0,ce=0}i.mode=Q;case Q:xe=b;break e;case X:xe=_;break e;case Y:return w;case V:default:return g}return e.next_out=se,e.avail_out=re,e.next_in=ie,e.avail_in=ae,i.hold=oe,i.bits=ce,(i.wsize||de!==e.avail_out&&i.mode<X&&(i.mode<G||t!==l))&&be(e,e.output,e.next_out,de-e.avail_out)?(i.mode=Y,w):(he-=e.avail_in,de-=e.avail_out,e.total_in+=he,e.total_out+=de,i.total+=de,i.wrap&&de&&(e.adler=i.check=i.flags?a(i.check,te,de,e.next_out-de):n(i.check,te,de,e.next_out-de)),e.data_type=i.bits+(i.last?64:0)+(i.mode===E?128:0)+(i.mode===J||i.mode===U?256:0),(0===he&&0===de||t===l)&&xe===f&&(xe=y),xe)}function ge(e){if(!e||!e.state)return g;var t=e.state;return t.window&&(t.window=null),e.state=null,f}function _e(e,t){var i;return e&&e.state?(i=e.state,0===(2&i.wrap)?g:(i.head=t,t.done=!1,f)):g}function we(e,t){var i,s,a,r=t.length;return e&&e.state?(i=e.state,0!==i.wrap&&i.mode!==B?g:i.mode===B&&(s=1,s=n(s,t,r,0),s!==i.check)?_:(a=be(e,t,r,r),a?(i.mode=Y,w):(i.havedict=1,f))):g}t.inflateReset=oe,t.inflateReset2=ce,t.inflateResetKeep=re,t.inflateInit=de,t.inflateInit2=he,t.inflate=me,t.inflateEnd=ge,t.inflateGetHeader=_e,t.inflateSetDictionary=we,t.inflateInfo="pako inflate (from Nodeca project)"},a177:function(e,t,i){"use strict";var s,n=i("be7f"),a=i("07f4"),r=i("c834"),o=i("eeda"),c=i("4dc6"),h=0,d=1,l=3,u=4,p=5,f=0,b=1,m=-2,g=-3,_=-5,w=-1,y=1,v=2,k=3,x=4,S=0,O=2,T=8,A=9,z=15,P=8,C=29,N=256,B=N+1+C,E=30,I=19,D=2*B+1,U=15,M=3,R=258,L=R+M+1,q=32,J=42,Z=69,j=73,F=91,K=103,H=113,W=666,G=1,$=2,Q=3,X=4,Y=3;function V(e,t){return e.msg=c[t],t}function ee(e){return(e<<1)-(e>4?9:0)}function te(e){var t=e.length;while(--t>=0)e[t]=0}function ie(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(n.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function se(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ie(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function ae(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function re(e,t,i,s){var a=e.avail_in;return a>s&&(a=s),0===a?0:(e.avail_in-=a,n.arraySet(t,e.input,e.next_in,a,i),1===e.state.wrap?e.adler=r(e.adler,t,a,i):2===e.state.wrap&&(e.adler=o(e.adler,t,a,i)),e.next_in+=a,e.total_in+=a,a)}function oe(e,t){var i,s,n=e.max_chain_length,a=e.strstart,r=e.prev_length,o=e.nice_match,c=e.strstart>e.w_size-L?e.strstart-(e.w_size-L):0,h=e.window,d=e.w_mask,l=e.prev,u=e.strstart+R,p=h[a+r-1],f=h[a+r];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{if(i=t,h[i+r]===f&&h[i+r-1]===p&&h[i]===h[a]&&h[++i]===h[a+1]){a+=2,i++;do{}while(h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&a<u);if(s=R-(u-a),a=u-R,s>r){if(e.match_start=t,r=s,s>=o)break;p=h[a+r-1],f=h[a+r]}}}while((t=l[t&d])>c&&0!==--n);return r<=e.lookahead?r:e.lookahead}function ce(e){var t,i,s,a,r,o=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-L)){n.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,i=e.hash_size,t=i;do{s=e.head[--t],e.head[t]=s>=o?s-o:0}while(--i);i=o,t=i;do{s=e.prev[--t],e.prev[t]=s>=o?s-o:0}while(--i);a+=o}if(0===e.strm.avail_in)break;if(i=re(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=M){r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;while(e.insert)if(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+M-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,e.lookahead+e.insert<M)break}}while(e.lookahead<L&&0!==e.strm.avail_in)}function he(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ce(e),0===e.lookahead&&t===h)return G;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+i;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,se(e,!1),0===e.strm.avail_out))return G;if(e.strstart-e.block_start>=e.w_size-L&&(se(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===u?(se(e,!0),0===e.strm.avail_out?Q:X):(e.strstart>e.block_start&&(se(e,!1),e.strm.avail_out),G)}function de(e,t){for(var i,s;;){if(e.lookahead<L){if(ce(e),e.lookahead<L&&t===h)return G;if(0===e.lookahead)break}if(i=0,e.lookahead>=M&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-L&&(e.match_length=oe(e,i)),e.match_length>=M)if(s=a._tr_tally(e,e.strstart-e.match_start,e.match_length-M),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=M){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else s=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(se(e,!1),0===e.strm.avail_out))return G}return e.insert=e.strstart<M-1?e.strstart:M-1,t===u?(se(e,!0),0===e.strm.avail_out?Q:X):e.last_lit&&(se(e,!1),0===e.strm.avail_out)?G:$}function le(e,t){for(var i,s,n;;){if(e.lookahead<L){if(ce(e),e.lookahead<L&&t===h)return G;if(0===e.lookahead)break}if(i=0,e.lookahead>=M&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=M-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-L&&(e.match_length=oe(e,i),e.match_length<=5&&(e.strategy===y||e.match_length===M&&e.strstart-e.match_start>4096)&&(e.match_length=M-1)),e.prev_length>=M&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-M,s=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-M),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+M-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=M-1,e.strstart++,s&&(se(e,!1),0===e.strm.avail_out))return G}else if(e.match_available){if(s=a._tr_tally(e,0,e.window[e.strstart-1]),s&&se(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return G}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<M-1?e.strstart:M-1,t===u?(se(e,!0),0===e.strm.avail_out?Q:X):e.last_lit&&(se(e,!1),0===e.strm.avail_out)?G:$}function ue(e,t){for(var i,s,n,r,o=e.window;;){if(e.lookahead<=R){if(ce(e),e.lookahead<=R&&t===h)return G;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=M&&e.strstart>0&&(n=e.strstart-1,s=o[n],s===o[++n]&&s===o[++n]&&s===o[++n])){r=e.strstart+R;do{}while(s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&n<r);e.match_length=R-(r-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=M?(i=a._tr_tally(e,1,e.match_length-M),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(se(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===u?(se(e,!0),0===e.strm.avail_out?Q:X):e.last_lit&&(se(e,!1),0===e.strm.avail_out)?G:$}function pe(e,t){for(var i;;){if(0===e.lookahead&&(ce(e),0===e.lookahead)){if(t===h)return G;break}if(e.match_length=0,i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(se(e,!1),0===e.strm.avail_out))return G}return e.insert=0,t===u?(se(e,!0),0===e.strm.avail_out?Q:X):e.last_lit&&(se(e,!1),0===e.strm.avail_out)?G:$}function fe(e,t,i,s,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=s,this.func=n}function be(e){e.window_size=2*e.w_size,te(e.head),e.max_lazy_match=s[e.level].max_lazy,e.good_match=s[e.level].good_length,e.nice_match=s[e.level].nice_length,e.max_chain_length=s[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=M-1,e.match_available=0,e.ins_h=0}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*D),this.dyn_dtree=new n.Buf16(2*(2*E+1)),this.bl_tree=new n.Buf16(2*(2*I+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(U+1),this.heap=new n.Buf16(2*B+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*B+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=O,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?J:H,e.adler=2===t.wrap?0:1,t.last_flush=h,a._tr_init(t),f):V(e,m)}function _e(e){var t=ge(e);return t===f&&be(e.state),t}function we(e,t){return e&&e.state?2!==e.state.wrap?m:(e.state.gzhead=t,f):m}function ye(e,t,i,s,a,r){if(!e)return m;var o=1;if(t===w&&(t=6),s<0?(o=0,s=-s):s>15&&(o=2,s-=16),a<1||a>A||i!==T||s<8||s>15||t<0||t>9||r<0||r>x)return V(e,m);8===s&&(s=9);var c=new me;return e.state=c,c.strm=e,c.wrap=o,c.gzhead=null,c.w_bits=s,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+M-1)/M),c.window=new n.Buf8(2*c.w_size),c.head=new n.Buf16(c.hash_size),c.prev=new n.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new n.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=r,c.method=i,_e(e)}function ve(e,t){return ye(e,t,T,z,P,S)}function ke(e,t){var i,n,r,c;if(!e||!e.state||t>p||t<0)return e?V(e,m):m;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===W&&t!==u)return V(e,0===e.avail_out?_:m);if(n.strm=e,i=n.last_flush,n.last_flush=t,n.status===J)if(2===n.wrap)e.adler=0,ne(n,31),ne(n,139),ne(n,8),n.gzhead?(ne(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ne(n,255&n.gzhead.time),ne(n,n.gzhead.time>>8&255),ne(n,n.gzhead.time>>16&255),ne(n,n.gzhead.time>>24&255),ne(n,9===n.level?2:n.strategy>=v||n.level<2?4:0),ne(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ne(n,255&n.gzhead.extra.length),ne(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=o(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Z):(ne(n,0),ne(n,0),ne(n,0),ne(n,0),ne(n,0),ne(n,9===n.level?2:n.strategy>=v||n.level<2?4:0),ne(n,Y),n.status=H);else{var g=T+(n.w_bits-8<<4)<<8,w=-1;w=n.strategy>=v||n.level<2?0:n.level<6?1:6===n.level?2:3,g|=w<<6,0!==n.strstart&&(g|=q),g+=31-g%31,n.status=H,ae(n,g),0!==n.strstart&&(ae(n,e.adler>>>16),ae(n,65535&e.adler)),e.adler=1}if(n.status===Z)if(n.gzhead.extra){r=n.pending;while(n.gzindex<(65535&n.gzhead.extra.length)){if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=o(e.adler,n.pending_buf,n.pending-r,r)),ie(e),r=n.pending,n.pending===n.pending_buf_size))break;ne(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++}n.gzhead.hcrc&&n.pending>r&&(e.adler=o(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=j)}else n.status=j;if(n.status===j)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=o(e.adler,n.pending_buf,n.pending-r,r)),ie(e),r=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ne(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>r&&(e.adler=o(e.adler,n.pending_buf,n.pending-r,r)),0===c&&(n.gzindex=0,n.status=F)}else n.status=F;if(n.status===F)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=o(e.adler,n.pending_buf,n.pending-r,r)),ie(e),r=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ne(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>r&&(e.adler=o(e.adler,n.pending_buf,n.pending-r,r)),0===c&&(n.status=K)}else n.status=K;if(n.status===K&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&ie(e),n.pending+2<=n.pending_buf_size&&(ne(n,255&e.adler),ne(n,e.adler>>8&255),e.adler=0,n.status=H)):n.status=H),0!==n.pending){if(ie(e),0===e.avail_out)return n.last_flush=-1,f}else if(0===e.avail_in&&ee(t)<=ee(i)&&t!==u)return V(e,_);if(n.status===W&&0!==e.avail_in)return V(e,_);if(0!==e.avail_in||0!==n.lookahead||t!==h&&n.status!==W){var y=n.strategy===v?pe(n,t):n.strategy===k?ue(n,t):s[n.level].func(n,t);if(y!==Q&&y!==X||(n.status=W),y===G||y===Q)return 0===e.avail_out&&(n.last_flush=-1),f;if(y===$&&(t===d?a._tr_align(n):t!==p&&(a._tr_stored_block(n,0,0,!1),t===l&&(te(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ie(e),0===e.avail_out))return n.last_flush=-1,f}return t!==u?f:n.wrap<=0?b:(2===n.wrap?(ne(n,255&e.adler),ne(n,e.adler>>8&255),ne(n,e.adler>>16&255),ne(n,e.adler>>24&255),ne(n,255&e.total_in),ne(n,e.total_in>>8&255),ne(n,e.total_in>>16&255),ne(n,e.total_in>>24&255)):(ae(n,e.adler>>>16),ae(n,65535&e.adler)),ie(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?f:b)}function xe(e){var t;return e&&e.state?(t=e.state.status,t!==J&&t!==Z&&t!==j&&t!==F&&t!==K&&t!==H&&t!==W?V(e,m):(e.state=null,t===H?V(e,g):f)):m}function Se(e,t){var i,s,a,o,c,h,d,l,u=t.length;if(!e||!e.state)return m;if(i=e.state,o=i.wrap,2===o||1===o&&i.status!==J||i.lookahead)return m;1===o&&(e.adler=r(e.adler,t,u,0)),i.wrap=0,u>=i.w_size&&(0===o&&(te(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new n.Buf8(i.w_size),n.arraySet(l,t,u-i.w_size,i.w_size,0),t=l,u=i.w_size),c=e.avail_in,h=e.next_in,d=e.input,e.avail_in=u,e.next_in=0,e.input=t,ce(i);while(i.lookahead>=M){s=i.strstart,a=i.lookahead-(M-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+M-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++}while(--a);i.strstart=s,i.lookahead=M-1,ce(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=M-1,i.match_available=0,e.next_in=h,e.input=d,e.avail_in=c,i.wrap=o,f}s=[new fe(0,0,0,0,he),new fe(4,4,8,4,de),new fe(4,5,16,8,de),new fe(4,6,32,32,de),new fe(4,4,16,16,le),new fe(8,16,32,32,le),new fe(8,16,128,128,le),new fe(8,32,128,256,le),new fe(32,128,258,1024,le),new fe(32,258,258,4096,le)],t.deflateInit=ve,t.deflateInit2=ye,t.deflateReset=_e,t.deflateResetKeep=ge,t.deflateSetHeader=we,t.deflate=ke,t.deflateEnd=xe,t.deflateSetDictionary=Se,t.deflateInfo="pako deflate (from Nodeca project)"},ba10:function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,n="~";function a(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,i,s,a){if("function"!==typeof i)throw new TypeError("The listener must be a function");var o=new r(i,s||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function c(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function h(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),h.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)s.call(e,t)&&i.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},h.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,a=i.length,r=new Array(a);s<a;s++)r[s]=i[s].fn;return r},h.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},h.prototype.emit=function(e,t,i,s,a,r){var o=n?n+e:e;if(!this._events[o])return!1;var c,h,d=this._events[o],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,s),!0;case 5:return d.fn.call(d.context,t,i,s,a),!0;case 6:return d.fn.call(d.context,t,i,s,a,r),!0}for(h=1,c=new Array(l-1);h<l;h++)c[h-1]=arguments[h];d.fn.apply(d.context,c)}else{var u,p=d.length;for(h=0;h<p;h++)switch(d[h].once&&this.removeListener(e,d[h].fn,void 0,!0),l){case 1:d[h].fn.call(d[h].context);break;case 2:d[h].fn.call(d[h].context,t);break;case 3:d[h].fn.call(d[h].context,t,i);break;case 4:d[h].fn.call(d[h].context,t,i,s);break;default:if(!c)for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d[h].fn.apply(d[h].context,c)}}return!0},h.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},h.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},h.prototype.removeListener=function(e,t,i,s){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return c(this,a),this;var r=this._events[a];if(r.fn)r.fn!==t||s&&!r.once||i&&r.context!==i||c(this,a);else{for(var o=0,h=[],d=r.length;o<d;o++)(r[o].fn!==t||s&&!r[o].once||i&&r[o].context!==i)&&h.push(r[o]);h.length?this._events[a]=1===h.length?h[0]:h:c(this,a)}return this},h.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,e.exports=h},be7f:function(e,t,i){"use strict";var s="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);while(t.length){var i=t.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var s in i)n(i,s)&&(e[s]=i[s])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,s,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+s),n);else for(var a=0;a<s;a++)e[n+a]=t[i+a]},flattenChunks:function(e){var t,i,s,n,a,r;for(s=0,t=0,i=e.length;t<i;t++)s+=e[t].length;for(r=new Uint8Array(s),n=0,t=0,i=e.length;t<i;t++)a=e[t],r.set(a,n),n+=a.length;return r}},r={arraySet:function(e,t,i,s,n){for(var a=0;a<s;a++)e[n+a]=t[i+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(s)},c834:function(e,t,i){"use strict";function s(e,t,i,s){var n=65535&e|0,a=e>>>16&65535|0,r=0;while(0!==i){r=i>2e3?2e3:i,i-=r;do{n=n+t[s++]|0,a=a+n|0}while(--r);n%=65521,a%=65521}return n|a<<16|0}e.exports=s},d7ac:function(e,t,i){"use strict";var s=i("be7f").assign,n=i("4126"),a=i("717e"),r=i("2ceb"),o={};s(o,n,a,r),e.exports=o},eeda:function(e,t,i){"use strict";function s(){for(var e,t=[],i=0;i<256;i++){e=i;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}var n=s();function a(e,t,i,s){var a=n,r=s+i;e^=-1;for(var o=s;o<r;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}e.exports=a}});
//# sourceMappingURL=aggregator.32a5e2d4.worker.js.map