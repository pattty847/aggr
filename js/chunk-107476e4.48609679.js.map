{"version":3,"sources":["webpack:///./src/mixins/paneMixin.ts","webpack:///./src/components/website/Website.vue?15a4","webpack:///./src/components/panes/PaneHeader.vue?8308","webpack:///./src/components/panes/PaneHeader.vue","webpack:///./src/components/panes/PaneHeader.vue?260b","webpack:///./src/components/panes/PaneHeader.vue?7137","webpack:///./src/components/website/Website.vue?ff45","webpack:///./src/components/website/Website.vue","webpack:///./src/components/website/Website.vue?3e6d","webpack:///./src/components/website/Website.vue?4c23"],"names":["PaneMixin","this","$store","state","panes","paneId","$el","id","refreshZoom","$nextTick","width","clientWidth","onResize","clientHeight","addEventListener","focusPane","removeEventListener","_onStoreMutation","dispatch","commit","props","required","type","String","render","_vm","_h","$createElement","_c","_self","staticClass","class","loading","attrs","on","renamePane","_v","_s","name","maximizePane","_t","openSearch","openSettings","_e","toggleDropdown","model","value","callback","$$v","paneDropdownTrigger","expression","$event","stopPropagation","changeZoom","resetZoom","apply","arguments","zoom","toFixed","settings","duplicatePane","removePane","staticRenderFns","market","marketsListeners","markets","local","event","direction","shiftKey","$emit","async","dialogService","confirm","parentElement","classList","currentTarget","target","className","el","isMaximized","toggle","siblings","sibling","getAttribute","remove","style","display","cls","Event","window","dispatchEvent","prompt","action","input","open","default","Function","Boolean","component","ref","scopedSlots","_u","key","fn","domProps","interactive","reload","proxy","directives","rawName","trimmedUrl","url","customId","locked","reloadTimer","size","transform","height","pointerEvents","length","slice","substr","setupReloadTimer","$refs","paneHeader","_reloadTimeout","clearTimeout","interval","trim","test","parseFloat","now","Date","delay","Math","ceil","setTimeout","focus","iframe","src","onload","components","PaneHeader"],"mappings":"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","file":"js/chunk-107476e4.48609679.js","sourcesContent":["import { Pane } from '@/store/panes'\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\n@Component({\n  props: {\n    paneId: {\n      required: true,\n      type: String\n    }\n  }\n})\nexport default class PaneMixin extends Vue {\n  paneId: string\n  protected _onStoreMutation: () => void\n\n  get pane(): Pane {\n    return this.$store.state.panes.panes[this.paneId]\n  }\n\n  mounted() {\n    this.$el.id = this.paneId\n\n    this.refreshZoom()\n\n    this.$nextTick(() => {\n      const width = this.$el.clientWidth\n\n      if (typeof this.onResize === 'function') {\n        this.onResize(width, this.$el.clientHeight, true)\n      }\n    })\n\n    this.$el.addEventListener('mousedown', this.focusPane)\n  }\n\n  beforeDestroy() {\n    this.$el.removeEventListener('mousedown', this.focusPane)\n\n    if (this._onStoreMutation) {\n      this._onStoreMutation()\n    }\n  }\n\n  refreshZoom() {\n    this.$store.dispatch('panes/refreshZoom', this.paneId)\n  }\n\n  focusPane() {\n    this.$store.commit('app/SET_FOCUSED_PANE', this.paneId)\n  }\n\n  onResize?(newWidth: number, newHeight: number, isMounting?: boolean)\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Website.vue?vue&type=style&index=0&id=1a416e95&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pane-header hide-scrollbar pane-overlay d-flex\",class:{ '-loading': _vm.loading }},[_c('div',{staticClass:\"pane-header__loader\"}),_c('span',{staticClass:\"pane-header__name ml4 mrauto\",attrs:{\"data-hide-header\":\"\"},on:{\"dblclick\":_vm.renamePane}},[_vm._v(_vm._s(_vm.name))]),_c('div',{staticClass:\"toolbar flex-grow-1\",on:{\"dblclick\":_vm.maximizePane}},[_vm._t(\"default\"),_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSearch}},[_c('i',{staticClass:\"icon-search\"})]),(_vm.settings)?_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"})]):_vm._e(),_c('button',{staticClass:\"toolbar__label\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.toggleDropdown}},[_c('i',{staticClass:\"icon-more\"})]),_c('dropdown',{model:{value:(_vm.paneDropdownTrigger),callback:function ($$v) {_vm.paneDropdownTrigger=$$v},expression:\"paneDropdownTrigger\"}},[_c('div',{staticClass:\"d-flex btn-group\"},[_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, -1)}}},[_c('i',{staticClass:\"icon-minus\"})]),_c('button',{staticClass:\"btn -green text-monospace flex-grow-1 text-center\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.resetZoom.apply(null, arguments)}}},[_vm._v(\" × \"+_vm._s(_vm.zoom.toFixed(2))+\" \")]),_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, 1)}}},[_c('i',{staticClass:\"icon-plus\"})])]),_vm._t(\"menu\"),(_vm.settings !== null)?_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"}),_c('span',[_vm._v(\"Settings\")])]):_vm._e(),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$store.dispatch('app/showSearch', _vm.paneId)}}},[_c('i',{staticClass:\"icon-search\"}),_c('span',[_vm._v(\"Sources\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.maximizePane}},[_c('i',{staticClass:\"icon-enlarge\"}),_c('span',[_vm._v(\"Maximize\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.duplicatePane}},[_c('i',{staticClass:\"icon-copy-paste\"}),_c('span',[_vm._v(\"Duplicate\")])]),_c('div',{staticClass:\"dropdown--divider\"}),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.removePane}},[_c('i',{staticClass:\"icon-trash\"}),_c('span',[_vm._v(\"Remove\")])])],2)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\nimport { getSiblings } from '@/utils/helpers'\nimport dialogService from '@/services/dialogService'\n\n@Component({\n  name: 'PaneHeader',\n  props: {\n    paneId: {\n      type: String\n    },\n    settings: {\n      type: Function,\n      default: null\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  }\n})\nexport default class extends Vue {\n  private settings?: () => Promise<any>\n  paneId: string\n  paneDropdownTrigger = null\n\n  get zoom() {\n    return this.$store.state.panes.panes[this.paneId].zoom || 1\n  }\n\n  get type() {\n    return this.$store.state.panes.panes[this.paneId].type\n  }\n\n  get name() {\n    const name = this.$store.state.panes.panes[this.paneId].name\n    const market = this.$store.state.panes.marketsListeners[\n      this.$store.state.panes.panes[this.paneId].markets[0]\n    ]\n\n    if (name) {\n      return name\n    } else if (market) {\n      return market.local\n    } else {\n      return this.type\n    }\n  }\n\n  openSearch() {\n    this.$store.dispatch('app/showSearch', this.paneId)\n  }\n\n  changeZoom(event, direction) {\n    const zoom = this.zoom + (event.shiftKey ? 0.0625 : 0.125) * direction\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: zoom })\n\n    this.$emit('zoom', zoom)\n  }\n\n  resetZoom() {\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: 1 })\n\n    this.$emit('zoom', 1)\n  }\n\n  async removePane() {\n    if (await dialogService.confirm(`Delete pane \"${this.paneId}\" ?`)) {\n      this.$store.dispatch('panes/removePane', this.paneId)\n    }\n  }\n\n  duplicatePane() {\n    this.$store.dispatch('panes/duplicatePane', this.paneId)\n  }\n\n  highlightPane(value: boolean) {\n    this.$el.parentElement.parentElement.classList[value ? 'add' : 'remove'](\n      '-highlight'\n    )\n  }\n\n  maximizePane(event) {\n    if (\n      event.type === 'dblclick' &&\n      event.currentTarget !== event.target &&\n      event.target.className !== 'toolbar__spacer'\n    ) {\n      return\n    }\n\n    const el = this.$el.parentElement.parentElement\n    const isMaximized = el.classList.toggle('-maximized')\n\n    const siblings = getSiblings(el)\n\n    for (const sibling of siblings) {\n      if (!sibling.getAttribute('type')) {\n        continue\n      }\n      sibling.classList.remove('-maximized')\n      sibling.style.display = isMaximized ? 'none' : 'block'\n    }\n\n    const cls = Event as any\n\n    window.dispatchEvent(new cls('resize'))\n  }\n\n  async renamePane() {\n    const name = await dialogService.prompt({\n      action: 'Rename',\n      input: this.name\n    })\n\n    if (name !== this.name) {\n      this.$store.commit('panes/SET_PANE_NAME', { id: this.paneId, name: name })\n    }\n  }\n\n  toggleDropdown(event) {\n    if (this.paneDropdownTrigger) {\n      this.paneDropdownTrigger = null\n    } else {\n      this.paneDropdownTrigger = event.currentTarget\n    }\n  }\n\n  async openSettings() {\n    if (!this.settings) {\n      return\n    }\n\n    dialogService.open((await this.settings()).default, {\n      paneId: this.paneId\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PaneHeader.vue?vue&type=template&id=219eac84&\"\nimport script from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pane-website\"},[_c('pane-header',{ref:\"paneHeader\",attrs:{\"paneId\":_vm.paneId,\"settings\":function () { return import('@/components/website/WebsiteDialog.vue'); }},scopedSlots:_vm._u([{key:\"menu\",fn:function(){return [_c('div',{staticClass:\"dropdown-item\"},[_c('label',{staticClass:\"checkbox-control -small\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.interactive},on:{\"change\":function($event){return _vm.$store.commit(_vm.paneId + '/TOGGLE_INTERACTIVE')}}}),_c('div'),_c('span',[_vm._v(\"Interactive\")])])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.reload(true)}}},[_c('i',{staticClass:\"icon-refresh\"}),_c('span',[_vm._v(\"Reload\")])]),_c('div',{staticClass:\"dropdown-divider\"})]},proxy:true}])}),(_vm.locked)?_c('div',{staticClass:\"iframe__lock\"},[_c('div',{staticClass:\"ml8 mr8\"},[_c('p',[_vm._v(\" Load \"),_c('span',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"condensed\",attrs:{\"title\":\"url\"},domProps:{\"textContent\":_vm._s(_vm.trimmedUrl)}}),_vm._v(\" ? \")]),_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$store.commit(_vm.paneId + '/UNLOCK_URL')}}},[_vm._v(\" Yes, authorize \")])])])]):_c('div',{staticClass:\"iframe__wrapper\"},[_c('iframe',{ref:\"iframe\",style:(_vm.style),attrs:{\"src\":_vm.url,\"frameborder\":\"0\",\"width\":\"100%\",\"height\":\"100%\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins, Watch } from 'vue-property-decorator'\n\nimport PaneMixin from '@/mixins/paneMixin'\nimport PaneHeader from '../panes/PaneHeader.vue'\n\n@Component({\n  components: { PaneHeader },\n  name: 'Website'\n})\nexport default class extends Mixins(PaneMixin) {\n  customId = ''\n  private _reloadTimeout: number\n\n  $refs!: {\n    iframe: HTMLIFrameElement\n    paneHeader: PaneHeader\n  }\n\n  get locked() {\n    return this.$store.state[this.paneId].locked\n  }\n\n  get url() {\n    return this.$store.state[this.paneId].url || 'https://chat.aggr.trade'\n  }\n\n  get interactive() {\n    return this.$store.state[this.paneId].interactive\n  }\n\n  get reloadTimer() {\n    return this.$store.state[this.paneId].reloadTimer\n  }\n\n  get zoom() {\n    return this.$store.state.panes.panes[this.paneId].zoom\n  }\n\n  get style() {\n    const size = (1 / this.zoom) * 100\n\n    return {\n      transform: `scale(${this.zoom})`,\n      width: size + '%',\n      height: size + '%',\n      pointerEvents: this.interactive ? 'all' : 'none'\n    }\n  }\n\n  get trimmedUrl() {\n    if (this.url.length <= 33) {\n      return this.url\n    } else {\n      return this.url.slice(0, 15) + '[...]' + this.url.substr(-15)\n    }\n  }\n\n  @Watch('reloadTimer')\n  onReloadTimerChange() {\n    this.setupReloadTimer()\n  }\n\n  created() {\n    this.setupReloadTimer()\n  }\n\n  mounted() {\n    if (!this.$store.state[this.paneId].url) {\n      this.$refs.paneHeader.openSettings()\n    }\n  }\n\n  getSettingsDialog() {\n    return import('@/components/website/WebsiteDialog.vue')\n  }\n\n  beforeDestroy() {\n    if (this._reloadTimeout) {\n      clearTimeout(this._reloadTimeout)\n    }\n  }\n\n  setupReloadTimer() {\n    if (this._reloadTimeout) {\n      clearTimeout(this._reloadTimeout)\n    }\n\n    if (!this.reloadTimer) {\n      return\n    }\n\n    let interval = this.reloadTimer.trim()\n\n    if (/[\\d.]+s/.test(interval)) {\n      interval = parseFloat(interval) * 1000\n    } else if (/[\\d.]+h/.test(interval)) {\n      interval = parseFloat(interval) * 1000 * 60 * 60\n    } else {\n      interval = parseFloat(interval) * 1000 * 60\n    }\n\n    if (!interval) {\n      return\n    }\n\n    const now = Date.now()\n    let delay = Math.ceil(now / interval) * interval - now - 20\n\n    if (delay < 1000) {\n      delay += interval\n    }\n\n    this._reloadTimeout = setTimeout(() => {\n      this._reloadTimeout = null\n\n      this.reload()\n\n      this.setupReloadTimer()\n    }, delay)\n  }\n\n  async reload(focus?: boolean) {\n    this.$refs.iframe.src += ''\n\n    if (focus) {\n      this.$refs.iframe.onload = () => {\n        this.$refs.iframe.onload = null\n\n        this.$refs.iframe.focus()\n      }\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Website.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Website.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Website.vue?vue&type=template&id=1a416e95&scoped=true&\"\nimport script from \"./Website.vue?vue&type=script&lang=ts&\"\nexport * from \"./Website.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Website.vue?vue&type=style&index=0&id=1a416e95&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a416e95\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}