(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1456abbc"],{3271:function(t,e,i){},"42ec":function(t,e,i){},"4aaa":function(t,e,i){"use strict";i("42ec")},"4e65":function(t,e,i){"use strict";i("3271")},"5b40":function(t,e,i){},"809d":function(t,e,i){"use strict";i("b9f4")},"851d":function(t,e,i){"use strict";i("5b40")},b9f4:function(t,e,i){},bb45:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Dialog",{staticClass:"indicator-dialog -auto -sticky-footer -mobile-fs",attrs:{mask:!1},on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",[i("div",{staticClass:"title"},[i("div",{on:{dblclick:t.renameIndicator}},[t._v(t._s(t.name))])]),t.description?i("div",{staticClass:"subtitle pl0",domProps:{textContent:t._s(t.description)},on:{dblclick:t.editDescription}}):i("code",{staticClass:"subtitle -filled",domProps:{textContent:t._s(t.indicatorId)},on:{click:t.copyIndicatorId,dblclick:t.editDescription}})]),i("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text -white mlauto -center -no-grab",attrs:{href:"https://github.com/Tucsky/aggr/wiki/introduction-to-scripting",target:"_blank",title:"Scripting documentation"}},[i("i",{staticClass:"icon-info"}),i("span",{staticClass:"ml8"},[t._v("Wiki")])]),t.unsavedChanges?i("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml8 -text -no-grab",attrs:{title:"Rollback changes"},on:{click:t.undoIndicator}},[i("i",{staticClass:"icon-trash"}),i("span",{staticClass:"ml8"},[t._v("Discard")])]):t._e(),i("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml8 -no-grab",class:[!t.unsavedChanges&&"-text",t.unsavedChanges&&"-green"],attrs:{title:"Save changes"},on:{click:t.saveIndicator}},[i("i",{staticClass:"icon-save"}),i("span",{staticClass:"ml8"},[t._v("Save")])])]},proxy:!0}])},[t.error?i("p",{staticClass:"form-feedback ml16"},[i("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.error)+" ")]):t._e(),i("div",{ref:"containerElement",staticClass:"d-flex indicator-dialog__wrapper"},[i("tabs",{ref:"tabsComponent",staticClass:"indicator-tabs",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("tab",{staticClass:"d-flex p-relative editor",style:{fontSize:t.fontSize+"em"},attrs:{name:"Script"}},[i("prism-editor",{ref:"editor",staticClass:"editor__prism hide-scrollbar",attrs:{value:t.code,highlight:t.highlighter},on:{blur:function(e){return t.updateScript(e.target.value)}}}),i("code-minimap",{ref:"editorMinimap",staticClass:"editor__minimap"}),i("div",{staticClass:"editor__zoom"},[i("div",{staticClass:"btn -text -small",on:{click:function(e){return t.scaleEditor(1.1)}}},[i("i",{staticClass:"icon-plus"})]),i("div",{staticClass:"btn -text -small",on:{click:function(e){return t.scaleEditor(.9)}}},[i("i",{staticClass:"icon-minus"})])]),i("i",{staticClass:"icon-up-thin editor__resize",on:{mousedown:t.handleResize,touchstart:t.handleResize}})],1),i("tab",{staticClass:"indicator-options indicator-options--tab hide-scrollbar",attrs:{name:"Options"}},[t.scriptOptionsKeys.length?i("section",{staticClass:"section"},[t.sections.indexOf("scriptOptions")>-1?i("div",{staticClass:"section__content"},t._l(t.scriptOptionsKeys,(function(e){return i("indicator-option",{key:e,staticClass:"indicator-options__option",attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("scriptOptions",e)}}},[t._v(" Script options "),i("i",{staticClass:"icon-up-thin"})])]):t._e(),t.colorOptionsKeys.length?i("section",{staticClass:"section"},[t.sections.indexOf("colors")>-1?i("div",{staticClass:"section__content"},t._l(t.colorOptionsKeys,(function(e){return i("indicator-option",{key:e,staticClass:"indicator-options__option",attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("colors",e)}}},[t._v(" Colors "),i("i",{staticClass:"icon-up-thin"})])]):t._e(),i("section",{staticClass:"section"},[t.sections.indexOf("defaultOptions")>-1?i("div",{staticClass:"section__content"},t._l(t.defaultOptionsKeys,(function(e){return i("indicator-option",{key:e,staticClass:"indicator-options__option",attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("defaultOptions",e)}}},[t._v(" Other options "),i("i",{staticClass:"icon-up-thin"})])])])],1),i("hr",{staticClass:"-vertical"}),i("div",{staticClass:"indicator-options"},[i("section",{staticClass:"indicator-options__search section"},[i("div",[i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.optionsQuery,expression:"optionsQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:"search..."},domProps:{value:t.optionsQuery},on:{input:function(e){e.target.composing||(t.optionsQuery=e.target.value)}}}),i("button",{staticClass:"btn -text -small",attrs:{type:"button"},on:{click:function(e){t.optionsQuery=""}}},[i("i",{staticClass:"icon-cross"})])]),t._l(t.queryOptionsKeys,(function(e){return i("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})}))],2)]),t.optionsQuery.length?t._e():i("div",{staticClass:"indicator-options__options-scroller hide-scrollbar"},[t.colorOptionsKeys.length?i("section",{staticClass:"section"},[t.sections.indexOf("colors")>-1?i("div",{staticClass:"section__content"},t._l(t.colorOptionsKeys,(function(e){return i("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("colors",e)}}},[t._v(" Colors "),i("i",{staticClass:"icon-up-thin"})])]):t._e(),t.scriptOptionsKeys.length?i("section",{staticClass:"section"},[t.sections.indexOf("scriptOptions")>-1?i("div",{staticClass:"section__content"},t._l(t.scriptOptionsKeys,(function(e){return i("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("scriptOptions",e)}}},[t._v(" Script "),i("i",{staticClass:"icon-up-thin"})])]):t._e(),i("section",{staticClass:"section"},[t.sections.indexOf("defaultOptions")>-1?i("div",{staticClass:"section__content"},t._l(t.defaultOptionsKeys,(function(e){return i("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("defaultOptions",e)}}},[t._v(" Other "),i("i",{staticClass:"icon-up-thin"})])]),i("section",{staticClass:"section"},[t.sections.indexOf("position")>-1?i("div",{staticClass:"section__content"},[i("div",{staticClass:"form-group"},[i("label",[t._v("Scale with "),i("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.helps.priceScaleId}})]),i("dropdown-button",{staticClass:"-outline form-control -arrow w-100",attrs:{options:t.availableScales,placeholder:"Default scale"},on:{input:function(e){return t.setPriceScale(e)}},model:{value:t.indicator.options.priceScaleId,callback:function(e){t.$set(t.indicator.options,"priceScaleId",e)},expression:"indicator.options.priceScaleId"}})],1)]):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("position",e)}}},[t._v(" Position in chart "),i("i",{staticClass:"icon-up-thin"})])]),i("section",{staticClass:"section"},[t.sections.indexOf("format")>-1?i("div",{staticClass:"section__content"},[i("div",{staticClass:"d-flex mb4"},[i("small",{staticClass:"mrauto"},[t._v("Format")]),i("small",[t._v("Precision")])]),i("div",{staticClass:"d-flex"},[i("dropdown-button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"mr8 -outline form-control -arrow",attrs:{value:t.priceFormat,options:["price","volume"],title:"Volume uses abbreviation for Million and Thousand"},on:{input:function(e){return t.setPriceFormat(e,t.precision)}}}),i("editable",{staticClass:"form-control mlauto",attrs:{value:t.precision},on:{input:function(e){return t.setPriceFormat(t.priceFormat,e)}}})],1)]):t._e(),i("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("format",e)}}},[t._v(" Price format "),i("i",{staticClass:"icon-up-thin"})])])])])],1),i("footer",[i("presets",{staticClass:"mr8 -left",attrs:{type:"indicator:"+t.indicatorId,adapter:t.getIndicatorPreset,label:"Presets"},on:{apply:function(e){return t.applyIndicatorPreset(e)}}}),i("button",{staticClass:"btn -text -arrow",on:{click:t.toggleIndicatorDropdown}},[t._v(" Options ")]),i("dropdown",{model:{value:t.dropdownIndicatorTrigger,callback:function(e){t.dropdownIndicatorTrigger=e},expression:"dropdownIndicatorTrigger"}},[i("div",{staticClass:"dropdown-item"},[i("label",{staticClass:"checkbox-control -small",on:{mousedown:function(t){t.preventDefault()}}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.indicator.enabled},on:{change:t.toggleIndicatorAsDefault}}),i("div"),i("span",[t._v("Use as default")])])]),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.resizeIndicator}},[i("i",{staticClass:"icon-resize-height"}),t._v(" Resize ")]),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.downloadIndicator}},[i("i",{staticClass:"icon-download"}),t._v(" Download ")]),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.duplicateIndicator}},[i("i",{staticClass:"icon-copy-paste"}),t._v(" Duplicate ")]),i("div",{staticClass:"dropdown-divider"}),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.removeIndicator}},[i("i",{staticClass:"icon-cross"}),t._v(" Unload ")])])],1)])},o=[],r=i("e57a"),s=i("1ea0"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabs"},[i("div",{staticClass:"tabs__header",attrs:{role:"tablist"}},t._l(t.tabs,(function(e,n){return i(t.useUrlFragment?"a":"button",{key:n,tag:"component",staticClass:"tabs__item tab btn",class:[e.isActive&&"tab--active",e.isDisabled&&"tab--disabled"],attrs:{type:t.useUrlFragment?null:"button",href:t.useUrlFragment?e.hash:null,role:"tab","aria-controls":e.hash,"aria-selected":e.isActive},on:{click:function(i){return t.selectTab(e.hash,i)}}},[i("span",{staticClass:"tab__name"},[t._v(t._s(e.name))]),e.badge?i("span",{staticClass:"badge -compact ml8"},[t._v(t._s(e.badge))]):t._e()])})),1),t._t("default")],2)},c=[],l=i("9ab4"),u=i("60a3");function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),t}function v(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}function m(t){var e=_();return function(){var i,n=C(t);if(e){var o=C(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return b(this,i)}}function b(t,e){if(e&&("object"===d(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var O=function(t){v(i,t);var e=m(i);function i(){var t;return p(this,i),t=e.apply(this,arguments),t.tabs=[],t}return h(i,[{key:"onTabChange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t){var i=this.findTab(t);i&&(i.isDisabled||(i.isActive=!0))}if(null!==e){var n=this.findTab(e);n&&(n.isActive=!1)}}},{key:"created",value:function(){this.tabs=this.$children}},{key:"mounted",value:function(){this.selectDefaultTab()}},{key:"beforeDestroy",value:function(){this.unbindHashChange()}},{key:"bindHashChange",value:function(){var t=this;this.hashChangeHandler||(this.hashChangeHandler=function(){return t.selectTab(window.location.hash)},window.addEventListener("hashchange",this.hashChangeHandler))}},{key:"unbindHashChange",value:function(){this.hashChangeHandler&&window.addEventListener("hashchange",this.hashChangeHandler)}},{key:"findTab",value:function(t){return"number"===typeof t?this.tabs[t]:this.tabs.find((function(e){return e.hash===t}))}},{key:"selectDefaultTab",value:function(){var t=null;this.useUrlFragment&&(this.bindHashChange(),this.findTab(window.location.hash)&&(t=window.location.hash)),null===t&&null!==this.value&&(t=this.value),null===t&&this.tabs.length&&(t=this.tabs[0].hash),null!==t&&this.onTabChange(t)}},{key:"selectTab",value:function(t,e){e&&!this.useUrlFragment&&e.preventDefault(),this.$emit("input",t)}}]),i}(u["c"]);Object(l["a"])([Object(u["d"])("value")],O.prototype,"onTabChange",null),O=Object(l["a"])([Object(u["a"])({name:"Tabs",props:{value:{default:null},useUrlFragment:{type:Boolean,default:!1}}})],O);var I=O,w=I,S=(i("809d"),i("2877")),k=Object(S["a"])(w,a,c,!1,null,"ab0d3f84",null),T=k.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isActive?i("div",{staticClass:"tab__content"},[t._t("default")],2):t._e()},E=[],j=i("28f3");function $(t){return $="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e,i){return e&&D(t.prototype,e),i&&D(t,i),t}function R(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}function V(t,e){return V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},V(t,e)}function z(t){var e=L();return function(){var i,n=H(t);if(e){var o=H(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return N(this,i)}}function N(t,e){if(e&&("object"===$(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return K(t)}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}var F=function(t){R(i,t);var e=z(i);function i(){var t;return P(this,i),t=e.apply(this,arguments),t.isActive=!1,t}return A(i,[{key:"hash",get:function(){return this.isDisabled?"#":this.id?"#"+this.id:this.name?"#"+Object(j["x"])(this.name):"#"+this._uid}}]),i}(u["c"]);F=Object(l["a"])([Object(u["a"])({props:{id:{default:null},name:{required:!0},badge:{type:Number,required:!1,default:null},isDisabled:{default:!1}}})],F);var M=F,U=M,Q=Object(S["a"])(U,x,E,!1,null,null,null),B=Q.exports,q=i("ecab"),G=i("0c01"),W=i("da81"),J=i.n(W),Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"title"},[t._v("Configure preset")])]},proxy:!0}])},[i("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[i("div",{staticClass:"form-group mb8"},[i("label",[t._v("Choose what to include in preset")]),i("label",{staticClass:"checkbox-control mt16"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.includeColors,expression:"includeColors"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeColors)?t._i(t.includeColors,null)>-1:t.includeColors},on:{change:function(e){var i=t.includeColors,n=e.target,o=!!n.checked;if(Array.isArray(i)){var r=null,s=t._i(i,r);n.checked?s<0&&(t.includeColors=i.concat([r])):s>-1&&(t.includeColors=i.slice(0,s).concat(i.slice(s+1)))}else t.includeColors=o}}}),i("div"),i("span",[t._v("Colors")])])]),i("div",{staticClass:"form-group mb8"},[i("label",{staticClass:"checkbox-control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.includeValues,expression:"includeValues"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeValues)?t._i(t.includeValues,null)>-1:t.includeValues},on:{change:function(e){var i=t.includeValues,n=e.target,o=!!n.checked;if(Array.isArray(i)){var r=null,s=t._i(i,r);n.checked?s<0&&(t.includeValues=i.concat([r])):s>-1&&(t.includeValues=i.slice(0,s).concat(i.slice(s+1)))}else t.includeValues=o}}}),i("div"),i("span",[t._v("Options")])])]),i("div",{staticClass:"form-group mb8"},[i("label",{staticClass:"checkbox-control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.includeScript,expression:"includeScript"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeScript)?t._i(t.includeScript,null)>-1:t.includeScript},on:{change:function(e){var i=t.includeScript,n=e.target,o=!!n.checked;if(Array.isArray(i)){var r=null,s=t._i(i,r);n.checked?s<0&&(t.includeScript=i.concat([r])):s>-1&&(t.includeScript=i.slice(0,s).concat(i.slice(s+1)))}else t.includeScript=o}}}),i("div"),i("span",[t._v("Script")])])]),i("footer",[i("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),i("button",{staticClass:"btn -large -green",attrs:{type:"submit"}},[i("i",{staticClass:"icon-check mr8"}),t._v(" Submit ")])])])])},Z=[],X={mixins:[s["a"]],data:function(){return{includeColors:!0,includeValues:!1,includeScript:!1}},methods:{submit:function(){this.close({colors:this.includeColors,values:this.includeValues,script:this.includeScript})}}},tt=X,et=Object(S["a"])(tt,Y,Z,!1,null,null,null),it=et.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.totalHeight>t.visibleHeight?i("div",{staticClass:"code-minimap"},[i("canvas",{ref:"canvas",staticClass:"code-minimap"}),null!==t.visibleHeight?i("div",{staticClass:"code-minimap__bounds",style:{top:t.top+"%",bottom:t.bottom+"%"},on:{mousedown:t.handleMove,touchstart:t.handleMove}}):t._e()]):t._e()},ot=[];function rt(t){return rt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ct(t,e,i){return e&&at(t.prototype,e),i&&at(t,i),t}function lt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}function ut(t,e){return ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ut(t,e)}function dt(t){var e=ht();return function(){var i,n=vt(t);if(e){var o=vt(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return pt(this,i)}}function pt(t,e){if(e&&("object"===rt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ft(t)}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function vt(t){return vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vt(t)}var yt=function(t){lt(i,t);var e=dt(i);function i(){var t;return st(this,i),t=e.apply(this,arguments),t.totalHeight=null,t.offsetTop=null,t.visibleHeight=null,t}return ct(i,[{key:"top",get:function(){return this.offsetTop/this.totalHeight*100}},{key:"bottom",get:function(){return(this.totalHeight-(this.offsetTop+this.visibleHeight))/this.totalHeight*100}},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.bindEditor(),t.updateContent()}))}},{key:"beforeDestroy",value:function(){this.editorElement.removeEventListener("scroll",this.handleScroll),this.textareaElement.removeEventListener("blur",this.updateContent)}},{key:"bindEditor",value:function(){this.editorElement=this.$el.previousElementSibling,this.textareaElement=this.editorElement.querySelector("textarea"),this.editorElement.addEventListener("scroll",this.handleScroll),this.textareaElement.addEventListener("blur",this.updateContent)}},{key:"handleScroll",value:function(t){this.offsetTop=t.currentTarget.scrollTop}},{key:"updateContent",value:function(){this.content=this.textareaElement.value.split("\n"),this.updateSize()}},{key:"updateSize",value:function(){var t=this;this.totalHeight=this.editorElement.scrollHeight,this.visibleHeight=this.editorElement.clientHeight,this.offsetTop=this.editorElement.scrollTop,this.totalHeight<=this.visibleHeight||this.$nextTick((function(){var e=t.$refs.canvas;e.width=t.$el.clientWidth,e.height=t.$el.parentElement.clientHeight;var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),t.renderMinimap()}))}},{key:"renderMinimap",value:function(){var t=this.$refs.canvas,e=t.getContext("2d");e.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--theme-color-200"),e.font="monospace";for(var i=4,n=8,o=t.height/this.content.length,r=0;r<this.content.length;r++)e.fillText(this.content[r].replace(/\b\w+\b/g,String.fromCharCode(8210)).replace(/[^\u2012\s]/g,""),i,n+r*o)}},{key:"handleMove",value:function(t){this.y=Object(j["m"])(t).y,document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.release),document.addEventListener("touchmove",this.move),document.addEventListener("touchend",this.release),document.body.classList.add("-unselectable")}},{key:"move",value:function(t){var e=Object(j["m"])(t).y,i=this.y-Object(j["m"])(t).y,n=i/this.$refs.canvas.height;this.editorElement.scrollTop-=n*this.totalHeight,this.y=e}},{key:"release",value:function(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.release),document.removeEventListener("touchmove",this.move),document.removeEventListener("touchend",this.release),document.body.classList.remove("-unselectable"),this.$emit("move",{top:this.top,bottom:this.bottom})}}]),i}(u["c"]);yt=Object(l["a"])([Object(u["a"])({name:"CodeMinimap"})],yt);var mt=yt,bt=mt,gt=(i("851d"),Object(S["a"])(bt,nt,ot,!1,null,"3f72af57",null)),_t=gt.exports,Ct=i("8c7a"),Ot=(i("cb55"),i("416b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"indicator-option form-group",class:["-"+t.type]},[i("label",[t._v(" "+t._s(t.label)+" ")]),"lineType"===t.name?i("dropdown-button",{staticClass:"-outline form-control -arrow",attrs:{options:{0:"Simple",1:"with steps"},placeholder:"lineType"},on:{input:function(e){return t.setValue(e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):/linestyle$/i.test(t.name)?i("dropdown-button",{staticClass:"-outline form-control -arrow",attrs:{options:{0:"Solid",1:"Dotted",2:"Dashed",3:"LargeDashed",4:"SparseDotted"},placeholder:"lineStyle"},on:{input:function(e){return t.setValue(e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):"color"===t.type?i("color-picker-control",{attrs:{label:t.label,model:"rgb","allow-null":"",value:t.value},on:{input:function(e){return t.setValue(e)},close:t.reloadIndicator}}):"string"===t.type||"number"===t.type?i("editable",{staticClass:"form-control",attrs:{value:t.value},on:{input:function(e){return t.setValue(e)}}}):"boolean"===t.type?i("label",{staticClass:"checkbox-control"},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.setValue(e.target.checked)}}}),i("span",[t._v(t._s(t.label))]),i("div")]):t._e()],1)}),It=[],wt=i("3918"),St=i("81a6");function kt(t){return kt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Et(t,e,i){return e&&xt(t.prototype,e),i&&xt(t,i),t}function jt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$t(t,e)}function $t(t,e){return $t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$t(t,e)}function Pt(t){var e=Rt();return function(){var i,n=Vt(t);if(e){var o=Vt(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Dt(this,i)}}function Dt(t,e){if(e&&("object"===kt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return At(t)}function At(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}var zt=function(t){jt(i,t);var e=Pt(i);function i(){var t;return Tt(this,i),t=e.apply(this,arguments),t.value=null,t}return Et(i,[{key:"currentIndicatorValue",get:function(){return this.$store.state[this.paneId].indicators[this.indicatorId].options[this.name]}},{key:"label",get:function(){return this.name}},{key:"type",get:function(){var t,e="string";try{t=JSON.parse(this.value)}catch(i){t=this.value}return"boolean"===typeof t||/^(show|toggle|set|use)[A-Z]/.test(this.name)?e="boolean":/color/i.test(this.name)||/^rgba?/.test(t)||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t)?e="color":"number"===typeof t&&(e="number"),e}},{key:"onIndicatorValueChange",value:function(){var t=this.getValue();(+this.value!==+t||isNaN(+this.value)&&t!==this.value)&&(this.value=t)}},{key:"created",value:function(){this.value=this.getValue()}},{key:"getValue",value:function(){var t;"undefined"!==typeof this.currentIndicatorValue&&(t=this.currentIndicatorValue);var e=Object(q["g"])(this.name,this.plotTypes);return"undefined"!==typeof t?t&&"object"===kt(t)&&e&&"object"===kt(e)?Object.assign({},e,t):t:"undefined"!==typeof e?e:null}},{key:"setValue",value:function(t){this.$store.dispatch(this.paneId+"/setIndicatorOption",{id:this.indicatorId,key:this.name,value:t}),this.value=t}},{key:"reloadIndicator",value:function(){this.$store.commit(this.paneId+"/SET_INDICATOR_SCRIPT",{id:this.indicatorId,value:this.$store.state[this.paneId].indicators[this.indicatorId].script})}}]),i}(u["c"]);Object(l["a"])([Object(u["d"])("currentIndicatorValue")],zt.prototype,"onIndicatorValueChange",null),zt=Object(l["a"])([Object(u["a"])({name:"IndicatorOption",components:{DropdownButton:wt["a"],ColorPickerControl:St["a"]},props:{indicatorId:{type:String,required:!0},paneId:{type:String,required:!0},plotTypes:{required:!0},name:{type:String,required:!0}}})],zt);var Nt=zt,Kt=Nt,Lt=(i("4aaa"),Object(S["a"])(Kt,Ot,It,!1,null,null,null)),Ht=Lt.exports;function Ft(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Qt(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function Mt(t){return qt(t)||Bt(t)||Qt(t)||Ut()}function Ut(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qt(t,e){if(t){if("string"===typeof t)return Gt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Gt(t,e):void 0}}function Bt(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function qt(t){if(Array.isArray(t))return Gt(t)}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Wt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Jt=["crosshairMarkerVisible","minLength","visible","priceScaleId","priceFormat"],Yt={components:{CodeMinimap:_t,PrismEditor:r["a"],IndicatorOption:Ht,Tabs:T,Tab:B,DropdownButton:wt["a"]},props:["paneId","indicatorId"],mixins:[s["a"]],data:function(){return{code:"",plotTypes:[],sections:["position","colors"],optionsQuery:"",fontSize:1,tab:0,defaultOptionsKeys:[],scriptOptionsKeys:[],colorOptionsKeys:[],dropdownIndicatorTrigger:null,helps:{priceScaleId:"Use <u>right</u> for binding indicator to main price scale. Otherwise use it as an id to align multiple indicator on same scale (as overlay)",lastValueVisible:"Show last value on right axis",priceLineVisible:"Show horizontal line at current value",borderVisible:"Only for candlestick series, enable borders of candles",lineWidth:"Only for line and area series",lineStyle:"Only for line and area series",lineType:"Only for line and area series"}}},computed:{indicator:function(){return this.$store.state[this.paneId].indicators[this.indicatorId]},displayName:function(){return this.indicator.displayName},description:function(){return this.indicator.description},unsavedChanges:function(){return this.indicator.unsavedChanges},error:function(){return this.$store.state[this.paneId].indicatorsErrors[this.indicatorId]},name:function(){return this.indicator.displayName||this.indicator.name},script:function(){return this.indicator.script},precision:function(){return!this.indicator.options.priceFormat||this.indicator.options.priceFormat.auto?"auto":"number"===typeof this.indicator.options.priceFormat.precision?this.indicator.options.priceFormat.precision:2},priceFormat:function(){return this.indicator.options.priceFormat?this.indicator.options.priceFormat.type:"price"},availableScales:function(){var t,e=this;return Object.values(this.$store.state[this.paneId].indicators).reduce((function(t,i){return i.id!==e.indicatorId&&i.options&&i.options.priceScaleId&&!t[i.options.priceScaleId]&&(t[i.options.priceScaleId]=i.name||i.id),t}),(t={},Wt(t,this.indicatorId,"Own scale"),Wt(t,"right","Right scale (main)"),t))},queryOptionsKeys:function(){if(!this.optionsQuery.length)return[];var t=new RegExp(this.optionsQuery,"i");return[].concat(Mt(this.scriptOptionsKeys),Mt(this.defaultOptionsKeys),Mt(this.colorOptionsKeys)).filter((function(e){return t.test(e)}))}},watch:{script:{handler:function(t){this.code=t},immediate:!0}},created:function(){var t=this;this.restoreNavigationState(),this.$nextTick((function(){t.getPlotTypes(),t.getOptionsKeys()}))},beforeDestroy:function(){this.saveNavigationState()},methods:{restoreNavigationState:function(){this.indicator.navigationState&&(this.sections=this.indicator.navigationState.sections.slice(),this.tab=this.indicator.navigationState.tab,this.optionsQuery=this.indicator.navigationState.optionsQuery,this.fontSize=this.indicator.navigationState.fontSize)},saveNavigationState:function(){this.$store.dispatch(this.paneId+"/setIndicatorNavigationState",{id:this.indicatorId,navigationState:{sections:this.sections,tab:this.tab,optionsQuery:this.optionsQuery,fontSize:this.fontSize}})},setPriceScale:function(t){this.$store.dispatch(this.paneId+"/setIndicatorOption",{id:this.indicatorId,key:"priceScaleId",value:t})},updateScript:function(t){t=t.trim(),this.$store.commit(this.paneId+"/SET_INDICATOR_SCRIPT",{id:this.indicatorId,value:t}),this.getPlotTypes(),this.getOptionsKeys()},getScriptOptions:function(t){var e,i=[],n=/options\.([a-zA-Z0-9_]+)/g;do{(e=n.exec(t))&&i.push(e[1])}while(e);return i},getPlotTypes:function(){var t=Object.keys(q["b"]).map((function(t){return t.replace(/[^\w]/g,"")}));this.plotTypes=(this.script.match(new RegExp("(?:\\n|\\s|^)(?:plot)?(".concat(t.join("|"),")\\("),"g"))||[]).map((function(t){var e=t.replace(/[^\w]/g,"").replace(/^plot/,"");return q["i"][e]||e})).filter((function(t,e,i){return i.indexOf(t)===e&&q["b"][t]}))},removeIndicator:async function(){await this.close(),this.$store.dispatch(this.paneId+"/removeIndicator",{id:this.indicatorId})},resizeIndicator:async function(){await this.close(),this.$store.commit(this.paneId+"/TOGGLE_LAYOUTING",this.indicatorId)},renameIndicator:async function(){var t=await G["a"].prompt({action:"Rename",input:this.$store.state[this.paneId].indicators[this.indicatorId].name});t&&t!==this.name&&(await this.close(),await this.$store.dispatch(this.paneId+"/renameIndicator",{id:this.indicatorId,name:t}))},editDescription:async function(){var t=await G["a"].prompt({action:"Description",input:this.description});null!==t&&t!==this.description&&await this.$store.commit(this.paneId+"/UPDATE_DESCRIPTION",{id:this.indicatorId,description:t})},downloadIndicator:async function(){this.$store.dispatch(this.paneId+"/downloadIndicator",this.indicatorId)},duplicateIndicator:async function(){this.$store.dispatch(this.paneId+"/duplicateIndicator",this.indicatorId),await this.close(),G["a"].openIndicator(this.paneId,this.indicatorId)},saveIndicator:async function(){this.$store.dispatch(this.paneId+"/saveIndicator",this.indicatorId)},undoIndicator:async function(){await G["a"].confirm("Undo changes ?")&&(this.$store.dispatch(this.paneId+"/undoIndicator",this.indicatorId),this.$refs.editorMinimap.updateSize())},toggleSection:function(t,e){var i=this.sections.indexOf(t);-1===i?this.sections.push(t):this.sections.splice(i,1),this.$nextTick((function(){var t=e.target.parentElement;t&&t.scrollIntoView&&t.scrollIntoView()}))},getIndicatorPreset:async function(){var t=await G["a"].openAsPromise(it);if(t){if(!t.colors&&!t.script&&!t.values)return void this.$store.dispatch("app/showNotice",{title:"You did not select anything to save in the preset !",type:"error"});var e={options:{}};if(t.values){var i,n=Ft(this.scriptOptionsKeys);try{for(n.s();!(i=n.n()).done;){var o=i.value;e.options[o]=Object(q["h"])(this.paneId,this.indicatorId,o,this.plotTypes)}}catch(d){n.e(d)}finally{n.f()}var r,s=Ft(this.defaultOptionsKeys);try{for(s.s();!(r=s.n()).done;){var a=r.value;e.options[a]=Object(q["h"])(this.paneId,this.indicatorId,a,this.plotTypes)}}catch(d){s.e(d)}finally{s.f()}}if(t.colors){var c,l=Ft(this.colorOptionsKeys);try{for(l.s();!(c=l.n()).done;){var u=c.value;e.options[u]=Object(q["h"])(this.paneId,this.indicatorId,u,this.plotTypes)}}catch(d){l.e(d)}finally{l.f()}}return t.script&&(e.script=this.script),e}},getOptionsKeys:function(){var t=Object.keys(q["c"]),e=this.plotTypes.reduce((function(t,e){return[].concat(Mt(t),Mt(Object.keys(q["b"][e]||{})))}),[]),i=this.getScriptOptions(this.script),n=[].concat(Mt(t),Mt(e),Mt(i)).filter((function(t,e,i){return-1===Jt.indexOf(t)&&i.indexOf(t)==e}));this.scriptOptionsKeys=n.filter((function(t){return!/color/i.test(t)&&-1!==i.indexOf(t)})).sort((function(t,e){return t>e?1:t<e?-1:0})),this.defaultOptionsKeys=n.filter((function(t){return!/color/i.test(t)&&-1===i.indexOf(t)})).sort((function(t,e){return t>e?1:t<e?-1:0})),this.colorOptionsKeys=n.filter((function(t){return/color/i.test(t)}))},applyIndicatorPreset:function(t){var e=this,i=this.$store.state[this.paneId].indicators[this.indicatorId];if(t)J()(i,t);else{var n,o=this.scriptOptionsKeys.concat(this.defaultOptionsKeys,this.colorOptionsKeys),r=Ft(o);try{for(r.s();!(n=r.n()).done;){var s=n.value,a=this.getDefaultValue(s);"undefined"!==typeof a&&(i.options[s]=a)}}catch(c){r.e(c)}finally{r.f()}}this.otherOptionsKeys=this.colorOptionsKeys=[],this.$nextTick((function(){e.$store.commit(e.paneId+"/SET_INDICATOR_SCRIPT",{id:e.indicatorId}),e.getPlotTypes(),e.getOptionsKeys(),e.$store.commit(e.paneId+"/FLAG_INDICATOR_AS_UNSAVED",e.indicatorId)}))},toggleIndicatorAsDefault:async function(){if(!this.unsavedChanges||await G["a"].confirm("Indicator has unsaved changes, save it and turn "+(this.indicator.enabled?"off":"on")+" default ?"))return this.indicator.enabled=!this.indicator.enabled,this.saveIndicator()},highlighter:function(t){return Object(Ct["highlight"])(t,Ct["languages"].js,"js")},handleResize:function(t){this._resizeOrigin=Object(j["m"])(t),this.$refs.tabsComponent.$el.style.width=this.$refs.tabsComponent.$el.clientWidth+"px",this.$refs.containerElement.style.height=this.$refs.containerElement.clientHeight+"px",document.addEventListener("mousemove",this.resize),document.addEventListener("mouseup",this.release),document.addEventListener("touchmove",this.resize),document.addEventListener("touchend",this.release),document.body.classList.add("-unselectable")},resize:function(t){var e=Object(j["m"])(t),i=parseInt(this.$refs.tabsComponent.$el.style.width)+2*(e.x-this._resizeOrigin.x),n=parseInt(this.$refs.containerElement.style.height)+2*(e.y-this._resizeOrigin.y);this.$refs.tabsComponent.$el.style.width=i+"px",this.$refs.containerElement.style.height=n+"px",this._resizeOrigin=e},release:function(){var t=this;document.removeEventListener("mousemove",this.resize),document.removeEventListener("mouseup",this.release),document.removeEventListener("touchmove",this.resize),document.removeEventListener("touchend",this.release),document.body.classList.remove("-unselectable"),this.$refs.editor.setLineNumbersHeight(),setTimeout((function(){t.$refs.editorMinimap.updateSize()}))},scaleEditor:function(t){var e=this;isNaN(this.fontSize)&&(this.fontSize=1),this.fontSize*=t,setTimeout((function(){e.$refs.editorMinimap.updateSize()}))},setPriceFormat:function(t,e){var i=!1,n=Math.round(e);(""===e||isNaN(n))&&(i=!0,n=2),this.$store.dispatch(this.paneId+"/setIndicatorOption",{id:this.indicatorId,key:"priceFormat",value:{type:t,precision:n,minMove:1/Math.pow(10,n),auto:i}})},copyIndicatorId:function(){Object(j["d"])(this.indicatorId),this.$store.dispatch("app/showNotice",{title:"Copied indicator id to clipboard"})},toggleIndicatorDropdown:function(t){this.dropdownIndicatorTrigger?this.dropdownIndicatorTrigger=null:this.dropdownIndicatorTrigger=t.currentTarget}}},Zt=Yt,Xt=(i("4e65"),Object(S["a"])(Zt,n,o,!1,null,"5533d3f2",null));e["default"]=Xt.exports}}]);
//# sourceMappingURL=chunk-1456abbc.b5f0dd0a.js.map