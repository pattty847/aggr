{"version":3,"sources":["webpack:///./node_modules/dexie-export-import/dist/dexie-export-import.mjs","webpack:///./node_modules/dexie/dist/dexie.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","getSchemaString","table","primKeyAndIndexes","schema","primKey","concat","indexes","map","index","src","join","extractDbSchema","exportedDb","_i","_a","tables","name","readBlobAsync","blob","type","reader","FileReader","onabort","ev","Error","onerror","target","error","onload","readAsArrayBuffer","readAsText","readBlobSync","FileReaderSync","data","commonjsGlobal","globalThis","window","global","self","createCommonjsModule","fn","module","exports","typeson","constructor","prototype","Array","isArray","Object","r","i","o","s","c","return","from","keys","toString","getPrototypeOf","hasOwnProperty","a","u","isThenable","Typeson","isObject","catch","toStringTag","slice","hasConstructorOf","isPlainObject","types","p","stringify","assign","stringification","l","JSON","stringifySync","throwOnBadSyncType","sync","stringifyAsync","parse","h","parseSync","parseAsync","specialTypeNames","arguments","returnTypeNames","encapsulate","rootTypeName","iterateNone","d","b","O","cyclic","m","encapsulateObserver","T","_encapsulate","finish","values","getJSONType","Set","$types","$","checkPromises","all","splice","TypesonPromise","_adaptBuiltinStateObjectProperties","forEach","keypath","stateObj","promisesData","resolvingTypesonPromise","awaitingTypesonPromise","string","boolean","number","undefined","isNaN","replace","replaced","iterateIn","iterateUnsetNumeric","indexOf","cyclicKeypath","j","S","clone","w","ownKeys","escapeKeyPathComponent","A","endIterateIn","end","endIterateOwn","C","N","B","endIterateUnsetNumeric","test","replaceAsync","replacing","typeDetected","encapsulateSync","encapsulateAsync","revive","_revive","Undefined","getByKeyPath","substr","reduce","reviveAsync","reviveSync","register","R","JSON_TYPES","includes","testPlainObjects","filter","create","bind","fallback","unescapeKeyPathComponent","isUserObject","structuredCloning","userObject","sparseArrays","sparseUndefined","undef","StringObject","String","BooleanObject","Boolean","NumberObject","Number","nan","NaN","infinity","negativeInfinity","date","getTime","Date","regexp","source","flags","ignoreCase","multiline","sticky","unicode","RegExp","entries","Map","set","Uint8Array","charCodeAt","substring","ArrayBuffer","arraybuffer","buffers","toLowerCase","buffer","byteOffset","encoded","dataview","byteLength","DataView","IntlCollator","Intl","Collator","resolvedOptions","locale","IntlDateTimeFormat","DateTimeFormat","IntlNumberFormat","NumberFormat","string2arraybuffer","Uint16Array","file","XMLHttpRequest","open","URL","createObjectURL","TextEncoder","overrideMimeType","status","send","stringContents","responseText","lastModified","File","isClosed","addEventListener","imagedata","array","width","height","ImageData","Uint8ClampedArray","imagebitmap","dataset","document","createElement","getContext","drawImage","toDataURL","createImageBitmap","filelist","item","FileList","_files","Blob","chars","lookup","encode","bytes","len","base64","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","_i2","_global","exportObj","typeName","arrType","TypedArray","x","b64Obj","arrayBuffer","b64","TSON","readBlobsSynchronously","blobsToAwait","blobsToAwaitPos","blob2","start","size","finalize","ba","mustFinalize","items","allChunks","items_1","arrayType","keyPath","typeSpec","DEFAULT_ROWS_PER_CHUNK","exportDB","db","options","exportAll","tablesRowCounts","emptyExportJson","posEndDataArray","firstJsonSlice","_loop_1","tables_1","tableName","count","rowCount","progress","totalRows","emptyExport","prettyJson","lastIndexOf","slices","inbound","LIMIT","emptyTableExport","emptyTableExportJson","posEndRowsArray","lastKey","lastNumRows","mayHaveMoreRows","_loop_2","state_1","_b","numRowsPerChunk","rows","split","chunkedCollection","filteredValues","tsonValues","keyvals","tsonTuples","json","_c","progressCallback","ignoreTransaction","limit","where","above","toArray","waitFor","primaryKeys","key","tuple","completedRows","completedTables","totalTables","formatName","formatVersion","databaseName","databaseVersion","verno","noTransaction","transaction","VERSION","fakeStream","Stream","clarinet_1","clarinet","env","process","parser","opt","CParser","CStream","createStream","MAX_BUFFER_LENGTH","DEBUG","CDEBUG","INFO","EVENTS","textNode","numberNode","streamWraps","s_","STATE","BEGIN","VALUE","OPEN_OBJECT","CLOSE_OBJECT","OPEN_ARRAY","CLOSE_ARRAY","TEXT_ESCAPE","STRING","BACKSLASH","END","OPEN_KEY","CLOSE_KEY","TRUE","TRUE2","TRUE3","FALSE","FALSE2","FALSE3","FALSE4","NULL","NULL2","NULL3","NUMBER_DECIMAL_POINT","NUMBER_DIGIT","Char","tab","lineFeed","carriageReturn","space","doubleQuote","plus","comma","minus","period","_0","_9","colon","E","openBracket","backslash","closeBracket","openBrace","closeBrace","checkBufferLength","maxAllowed","Math","max","maxActual","closeText","bufferCheckPosition","position","clearBuffers","stringTokenPattern","q","closed","closedRoot","sawRoot","tag","state","stack","column","line","slashed","unicodeI","unicodeS","depth","emit","write","resume","close","ex","_parser","writable","readable","bytes_remaining","bytes_in_sequence","temp_buffs","Buffer","me","onend","er","defineProperty","get","removeAllListeners","on","enumerable","configurable","event","emitNode","closeValue","textopts","closeNumber","parseFloat","text","trim","normalize","isWhitespace","chunk","fromCharCode","starti","STRING_BIGLOOP","parseInt","lastIndex","reResult","exec","k","handler","args","destroy","JsonStream","pos","JsonParser","rv","pullAsync","numBytes","slize","jsonPart","pullSync","eof","allowPartial","obj","level","onopenobject","newKey","newObj","onkey","onvalue","oncloseobject","incomplete","completedObj","onopenarray","onclosearray","DEFAULT_KILOBYTES_PER_CHUNK","importDB","exportedData","CHUNK_SIZE","stream","dbExport","chunkSizeBytes","loadUntilWeGotEnoughData","version","stores","importInto","peakImportFile","importAll","tableExport","tableSchemaStr","sourceRows","filteredRows","_d","acceptMissingTables","acceptChangedPrimaryKey","row","overwriteValues","bulkPut","bulkAdd","jsonStream","dbExportFile","acceptNameDiff","acceptVersionDiff","clearTablesBeforeImport","clear","export","import","dexieExportImport","factory","__assign","__spreadArray","to","pack","ar","extend","extension","getProto","_hasOwn","hasOwn","prop","props","proto","Reflect","setProp","functionOrGetSet","derive","Child","Parent","getOwnPropertyDescriptor","getPropertyDescriptor","pd","_slice","override","origFunc","overridedFactory","assert","asap$1","setImmediate","setTimeout","arrayToObject","extractor","nameAndValue","tryCatch","val","innerObj","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","delByKeyPath","kp","shallowClone","flatten","intrinsicTypeNames","num","intrinsicTypes","circularRefs","deepClone","any","WeakMap","innerDeepClone","iteratorSymbol","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","isAsyncFunction","debug","location","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","getErrorWithStack","prettyStack","exception","numIgnoredFrames","message","frame","dexieErrorNames","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","_e","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","failuresByPos","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","Range","RangeError","exceptionMap","mapError","domError","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","LONG_STACKS_CLIP_LIMIT","MAX_LONG_STACKS","ZONE_ECHO_LIMIT","_a$1","globalP","crypto","subtle","nativeP","digest","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","observe","attributes","setAttribute","asap","callback","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","id","ref","unhandleds","onunhandled","globalError","pgp","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","reason","_promise","origProp","addPossiblyUnhandledError","listeners","finalizePhysicalTick","listener","cb","callListener","ret","markErrorAsHandled","getStack","stacks","errorName","failure","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","run_at_end_of_this_or_next_physical_tick","finalizer","some","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","err","finally","onFinally","timeout","ms","Infinity","handle","Timeout","clearTimeout","snapShot","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","allSettled","possiblePromises","results","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise_1","targetEnv","GlobalPromise","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","tempTransaction","mode","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","_completion","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","DEXIE_VERSION","maxString","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","checkTableInTransaction","NotFound","idbtrans","transless","keyOrCrit","first","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","ix","compound","every","_maxKey","idxByName","idb","_deps","indexedDB","cmp","prevIndex","prevFilterFn","multi","idx","filterFunction","toCollection","and","thenShortcut","offset","numRows","each","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","unsubscribe","defineClass","Class","content","add","auto","objToAdd","mutate","numFailures","lastResult","update","keyOrObject","modify","InvalidArgument","put","delete","range","bulkGet","getMany","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","makeClassConstructor","createTableConstructor","tableSchema","_allTables","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","isLimitFilter","curr","addMatchFilter","isMatch","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","set_1","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","mappedFn","wrappedFn","continue","advancer","ta","tb","compareUint8Arrays","getUint8Array","compareArrays","al","bl","isView","tsTag","_read","_ctx","_write","_addAlgorithm","raw","min","sortBy","parts","lastPart","getval","order","sorter","aVal","bVal","sort","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","uniqueKeys","firstKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","nextChunk","cache","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","criteria","deleteCallback","changeSpec","coreRange","createCollectionConstructor","whereClause","keyRangeGenerator","keyRange","whereCtx","readingHook","simpleCompare","simpleCompareReverse","collectionOrWhereClause","collection","emptyCollection","rangeEqual","upperFactory","toUpperCase","lowerFactory","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","between","includeLower","includeUpper","_cmp","aboveOrEqual","below","belowOrEqual","startsWith","str","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","_max","addRange","newRange","sortDirection","rangeSorter","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","keyWithinCurrentRange","checkKey","startsWithAnyOf","createWhereClauseConstructor","orCollection","_IDBKeyRange","IDBKeyRange","eventRejectHandler","preventDefault","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","OpenFailed","active","durability","chromeTransactionDurability","_reject","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","transactionBoundTable","createTransactionConstructor","dbschema","complete","wasActive","createIndexSpec","nameFromKeyPath","createTableSchema","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","extractSchema","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","makeIDBKeyRange","idbRange","upperBound","lowerBound","bound","createDbCoreTable","isAddOrPut","req","reqs","errorHandler","args1","args2","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsNotStarted","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","request","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","count_1","req_1","result_1","keyCount","callbackCount","successHandler","_pos","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStack","stackImpl","middlewares","down","createMiddlewareStacks","dbcore","generateMiddlewareStacks","_novip","_middlewares","tbl","setApiOnPlace","objs","tableNames","propDesc","removeTablesApi","lowerVersionFirst","_cfg","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","updateTablesAndIndexes","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","versToRun","runQueue","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","change","recreate","Upgrade","store_1","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema_1","returnValue_1","contentUpgradeIsAsync_1","promiseFollowed","decrementor","deleteRemovedTables","createMissingTables","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","contains","storeName","deleteObjectStore","createIndex","dbStoreNames","idbindex","readGlobalSchema","verifyInstalledSchema","installedSchema","ch","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","parseIndexSyntax","indexNum","Version","_parseStoresSpec","outSchema","storesSource","storesSpec","upgrade","upgradeFunction","createVersionConstructor","versionNumber","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","getDatabaseNames","infos","info","_onDatabaseCreated","_onDatabaseDeleted","vip","idbReady","intervalId","isSafari","userAgentData","tryIdb","setInterval","clearInterval","dexieOpen","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","round","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","onversionchange","vcFired","onclose","onReadyBeingFired","ready","fireRemainders","remainders_1","awaitIterator","callNext","doThrow","throw","onSuccess","onError","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","returnValue","scopeFuncIsAsync","PrematureCommit","pad","createVirtualIndexMiddleware","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","virtualKeyPath","findBestIndex","translateRange","translateRequest","createVirtualCursor","_continue","virtualCursor","virtualIndexMiddleware","getObjectDiff","prfx","ap","bp","apTypeName","bpTypeName","getEffectiveKeys","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteRange","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deleteNextChunk","effectiveKeys","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","node","RangeSet","fromOrTree","left","right","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","getRangeSetIterator","nextResult1","i2","nextResult2","keyProvided","up","rootClone","oldRootRight","computeDepth","rangeSet","addKey","addKeys","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","part","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","trackAffectedIndexes","getRange","readSubscribers","method","subscr","pkRangeSet_1","delsRangeSet_1","queriedIndex","queriedRanges","keysPromise_1","resultingKeys","pKeys","cursor_1","wantValues_1","pkey","addAffectedIndex","addKeyOrKeys","oldKey","domDeps","Dexie","deps","dependencies","cancelOpen","bSticky","db_1","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","idbMode","onlyIfCompatible","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","observer","execute","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","propagateLocally","updateParts","wasMe","propagatingLocally","exists","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","semVer","maxKey","updatedParts","event_1","initCustomEvent","BroadcastChannel","bc_1","changedParts","postMessage","onmessage","localStorage","setItem","trig","random","matchAll","includeUncontrolled","client","newValue","swContainer","serviceWorker","propagateMessageLocally","namedExports","freeze","__proto__","default"],"mappings":"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","file":"js/chunk-85145916.eacab412.js","sourcesContent":["/* ========================================================================== \n *                           dexie-export-import.js\n * ==========================================================================\n *\n * Dexie addon for exporting and importing databases to / from Blobs.\n *\n * By David Fahlander, david.fahlander@gmail.com,\n *\n * ==========================================================================\n *\n * Version 1.0.3, Fri Jul 02 2021\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n * \n */\n\nimport Dexie from 'dexie';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nfunction getSchemaString(table) {\n    var primKeyAndIndexes = [table.schema.primKey].concat(table.schema.indexes);\n    return primKeyAndIndexes.map(function (index) { return index.src; }).join(',');\n}\nfunction extractDbSchema(exportedDb) {\n    var schema = {};\n    for (var _i = 0, _a = exportedDb.tables; _i < _a.length; _i++) {\n        var table = _a[_i];\n        schema[table.name] = table.schema;\n    }\n    return schema;\n}\nfunction readBlobAsync(blob, type) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onabort = function (ev) { return reject(new Error(\"file read aborted\")); };\n        reader.onerror = function (ev) { return reject(ev.target.error); };\n        reader.onload = function (ev) { return resolve(ev.target.result); };\n        if (type === 'binary')\n            reader.readAsArrayBuffer(blob);\n        else\n            reader.readAsText(blob);\n    });\n}\nfunction readBlobSync(blob, type) {\n    if (typeof FileReaderSync === 'undefined') {\n        throw new Error('FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.');\n    }\n    var reader = new FileReaderSync(); // Requires worker environment\n    var data = type === 'binary' ?\n        reader.readAsArrayBuffer(blob) :\n        reader.readAsText(blob);\n    return data;\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar typeson = createCommonjsModule(function (module, exports) {\n!function(e,n){module.exports=n();}(commonjsGlobal,function(){var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(t.push(s.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e;}finally{try{!r&&c.return&&c.return();}finally{if(i)throw o}}return t}(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),t=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,s=Object.getPrototypeOf,c={}.hasOwnProperty,a=c.toString,u=[\"type\",\"replaced\",\"iterateIn\",\"iterateUnsetNumeric\"];function isThenable(e,n){return Typeson.isObject(e)&&\"function\"==typeof e.then&&(!n||\"function\"==typeof e.catch)}function toStringTag(e){return o.call(e).slice(8,-1)}function hasConstructorOf(n,t){if(!n||\"object\"!==(void 0===n?\"undefined\":e(n)))return !1;var r=s(n);if(!r)return !1;var i=c.call(r,\"constructor\")&&r.constructor;return \"function\"!=typeof i?null===t:\"function\"==typeof i&&null!==t&&a.call(i)===a.call(t)}function isPlainObject(e){return !(!e||\"Object\"!==toStringTag(e))&&(!s(e)||hasConstructorOf(e,Object))}function isObject(n){return n&&\"object\"===(void 0===n?\"undefined\":e(n))}function Typeson(o){var s=[],c=[],a={},y=this.types={},p=this.stringify=function(e,n,t,r){r=Object.assign({},o,r,{stringification:!0});var s=l(e,null,r);return i(s)?JSON.stringify(s[0],n,t):s.then(function(e){return JSON.stringify(e,n,t)})};this.stringifySync=function(e,n,t,r){return p(e,n,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,n,t,r){return p(e,n,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var f=this.parse=function(e,n,t){return t=Object.assign({},o,t,{parse:!0}),h(JSON.parse(e,n),t)};this.parseSync=function(e,n,t){return f(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.parseAsync=function(e,n,t){return f(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.specialTypeNames=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.returnTypeNames=!0,this.encapsulate(e,n,t)},this.rootTypeName=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.iterateNone=!0,this.encapsulate(e,n,t)};var l=this.encapsulate=function(y,p,f){var l=(f=Object.assign({sync:!0},o,f)).sync,h={},v=[],d=[],b=[],O=!(f&&\"cyclic\"in f)||f.cyclic,m=f.encapsulateObserver,T=_encapsulate(\"\",y,O,p||{},b);function finish(e){var n=Object.values(h);if(f.iterateNone)return n.length?n[0]:Typeson.getJSONType(e);if(n.length){if(f.returnTypeNames)return [].concat(t(new Set(n)));e&&isPlainObject(e)&&!e.hasOwnProperty(\"$types\")?e.$types=h:e={$:e,$types:{$:h}};}else isObject(e)&&e.hasOwnProperty(\"$types\")&&(e={$:e,$types:!0});return !f.returnTypeNames&&e}return b.length?l&&f.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():Promise.resolve(function checkPromises(e,t){return Promise.all(t.map(function(e){return e[1].p})).then(function(r){return Promise.all(r.map(function(r){var i=[],o=t.splice(0,1)[0],s=n(o,7),c=s[0],a=s[2],u=s[3],y=s[4],p=s[5],f=s[6],l=_encapsulate(c,r,a,u,i,!0,f),h=hasConstructorOf(l,TypesonPromise);return c&&h?l.p.then(function(n){return y[p]=n,checkPromises(e,i)}):(c?y[p]=l:e=h?l.p:l,checkPromises(e,i))}))}).then(function(){return e})}(T,b)).then(finish):!l&&f.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():f.stringification&&l?[finish(T)]:l?finish(T):Promise.resolve(finish(T));function _adaptBuiltinStateObjectProperties(e,n,t){Object.assign(e,n);var r=u.map(function(n){var t=e[n];return delete e[n],t});t(),u.forEach(function(n,t){e[n]=r[t];});}function _encapsulate(n,t,o,c,a,u,y){var p=void 0,l={},b=void 0===t?\"undefined\":e(t),O=m?function(e){var r=y||c.type||Typeson.getJSONType(t);m(Object.assign(e||l,{keypath:n,value:t,cyclic:o,stateObj:c,promisesData:a,resolvingTypesonPromise:u,awaitingTypesonPromise:hasConstructorOf(t,TypesonPromise)},void 0!==r?{type:r}:{}));}:null;if(b in{string:1,boolean:1,number:1,undefined:1})return void 0===t||\"number\"===b&&(isNaN(t)||t===-1/0||t===1/0)?(p=replace(n,t,c,a,!1,u,O))!==t&&(l={replaced:p}):p=t,O&&O(),p;if(null===t)return O&&O(),t;if(o&&!c.iterateIn&&!c.iterateUnsetNumeric){var T=v.indexOf(t);if(!(T<0))return h[n]=\"#\",O&&O({cyclicKeypath:d[T]}),\"#\"+d[T];!0===o&&(v.push(t),d.push(n));}var g=isPlainObject(t),P=i(t),j=(g||P)&&(!s.length||c.replaced)||c.iterateIn?t:replace(n,t,c,a,g||P,null,O),S=void 0;if(j!==t?(p=j,l={replaced:j}):P||\"array\"===c.iterateIn?(S=new Array(t.length),l={clone:S}):g||\"object\"===c.iterateIn?l={clone:S={}}:\"\"===n&&hasConstructorOf(t,TypesonPromise)?(a.push([n,t,o,c,void 0,void 0,c.type]),p=t):p=t,O&&O(),f.iterateNone)return S||p;if(!S)return p;if(c.iterateIn){var w=function _loop(e){var r={ownKeys:t.hasOwnProperty(e)};_adaptBuiltinStateObjectProperties(c,r,function(){var r=n+(n?\".\":\"\")+escapeKeyPathComponent(e),i=_encapsulate(r,t[e],!!o,c,a,u);hasConstructorOf(i,TypesonPromise)?a.push([r,i,!!o,c,S,e,c.type]):void 0!==i&&(S[e]=i);});};for(var A in t)w(A);O&&O({endIterateIn:!0,end:!0});}else r(t).forEach(function(e){var r=n+(n?\".\":\"\")+escapeKeyPathComponent(e);_adaptBuiltinStateObjectProperties(c,{ownKeys:!0},function(){var n=_encapsulate(r,t[e],!!o,c,a,u);hasConstructorOf(n,TypesonPromise)?a.push([r,n,!!o,c,S,e,c.type]):void 0!==n&&(S[e]=n);});}),O&&O({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var C=t.length,N=function _loop2(e){if(!(e in t)){var r=n+(n?\".\":\"\")+e;_adaptBuiltinStateObjectProperties(c,{ownKeys:!1},function(){var n=_encapsulate(r,void 0,!!o,c,a,u);hasConstructorOf(n,TypesonPromise)?a.push([r,n,!!o,c,S,e,c.type]):void 0!==n&&(S[e]=n);});}},B=0;B<C;B++)N(B);O&&O({endIterateUnsetNumeric:!0,end:!0});}return S}function replace(e,n,t,r,i,o,u){for(var y=i?s:c,p=y.length;p--;){var f=y[p];if(f.test(n,t)){var v=f.type;if(a[v]){var d=h[e];h[e]=d?[v].concat(d):v;}return Object.assign(t,{type:v,replaced:!0}),!l&&f.replaceAsync||f.replace?(u&&u({replacing:!0}),_encapsulate(e,f[l||!f.replaceAsync?\"replace\":\"replaceAsync\"](n,t),O&&\"readonly\",t,r,o,v)):(u&&u({typeDetected:!0}),_encapsulate(e,n,O&&\"readonly\",t,r,o,v))}}return n}};this.encapsulateSync=function(e,n,t){return l(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.encapsulateAsync=function(e,n,t){return l(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))};var h=this.revive=function(e,t){var s=(t=Object.assign({sync:!0},o,t)).sync,c=e&&e.$types,u=!0;if(!c)return e;if(!0===c)return e.$;c.$&&isPlainObject(c.$)&&(e=e.$,c=c.$,u=!1);var y=[],p={},f=function _revive(e,t,o,s,f,l){if(u&&\"$types\"===e)return;var h=c[e];if(i(t)||isPlainObject(t)){var v=i(t)?new Array(t.length):{};for(r(t).forEach(function(n){var r=_revive(e+(e?\".\":\"\")+escapeKeyPathComponent(n),t[n],o||v,s,v,n);hasConstructorOf(r,Undefined)?v[n]=void 0:void 0!==r&&(v[n]=r);}),t=v;y.length;){var d=n(y[0],4),b=d[0],O=d[1],m=d[2],T=d[3],g=getByKeyPath(b,O);if(hasConstructorOf(g,Undefined))m[T]=void 0;else {if(void 0===g)break;m[T]=g;}y.splice(0,1);}}if(!h)return t;if(\"#\"===h){var P=getByKeyPath(o,t.substr(1));return void 0===P&&y.push([o,t.substr(1),f,l]),P}var j=s.sync;return [].concat(h).reduce(function(e,n){var t=a[n];if(!t)throw new Error(\"Unregistered type: \"+n);return t[j&&t.revive?\"revive\":!j&&t.reviveAsync?\"reviveAsync\":\"revive\"](e,p)},t)}(\"\",e,null,t);return isThenable(f=hasConstructorOf(f,Undefined)?void 0:f)?s&&t.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():f:!s&&t.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():s?f:Promise.resolve(f)};this.reviveSync=function(e,n){return h(e,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.reviveAsync=function(e,n){return h(e,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.register=function(e,n){return n=n||{},[].concat(e).forEach(function R(e){if(i(e))return e.map(R);e&&r(e).forEach(function(t){if(\"#\"===t)throw new TypeError(\"# cannot be used as a type name as it is reserved for cyclic objects\");if(Typeson.JSON_TYPES.includes(t))throw new TypeError(\"Plain JSON object types are reserved as type names\");var r=e[t],o=r.testPlainObjects?s:c,u=o.filter(function(e){return e.type===t});if(u.length&&(o.splice(o.indexOf(u[0]),1),delete a[t],delete y[t]),r){if(\"function\"==typeof r){var p=r;r={test:function test(e){return e&&e.constructor===p},replace:function replace(e){return assign({},e)},revive:function revive(e){return assign(Object.create(p.prototype),e)}};}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var f={type:t,test:r.test.bind(r)};r.replace&&(f.replace=r.replace.bind(r)),r.replaceAsync&&(f.replaceAsync=r.replaceAsync.bind(r));var l=\"number\"==typeof n.fallback?n.fallback:n.fallback?0:1/0;if(r.testPlainObjects?s.splice(l,0,f):c.splice(l,0,f),r.revive||r.reviveAsync){var h={};r.revive&&(h.revive=r.revive.bind(r)),r.reviveAsync&&(h.reviveAsync=r.reviveAsync.bind(r)),a[t]=h;}y[t]=r;}});}),this};}function assign(e,n){return r(n).map(function(t){e[t]=n[t];}),e}function escapeKeyPathComponent(e){return e.replace(/~/g,\"~0\").replace(/\\./g,\"~1\")}function unescapeKeyPathComponent(e){return e.replace(/~1/g,\".\").replace(/~0/g,\"~\")}function getByKeyPath(e,n){if(\"\"===n)return e;var t=n.indexOf(\".\");if(t>-1){var r=e[unescapeKeyPathComponent(n.substr(0,t))];return void 0===r?void 0:getByKeyPath(r,n.substr(t+1))}return e[unescapeKeyPathComponent(n)]}function Undefined(){}function TypesonPromise(e){this.p=new Promise(e);}return TypesonPromise.prototype.then=function(e,n){var t=this;return new TypesonPromise(function(r,i){t.p.then(function(n){r(e?e(n):n);},function(e){t.p.catch(function(e){return n?n(e):Promise.reject(e)}).then(r,i);});})},TypesonPromise.prototype.catch=function(e){return this.then(null,e)},TypesonPromise.resolve=function(e){return new TypesonPromise(function(n){n(e);})},TypesonPromise.reject=function(e){return new TypesonPromise(function(n,t){t(e);})},[\"all\",\"race\"].map(function(e){TypesonPromise[e]=function(n){return new TypesonPromise(function(t,r){Promise[e](n.map(function(e){return e.p})).then(t,r);})};}),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(e){if(!e||\"Object\"!==toStringTag(e))return !1;var n=s(e);return !n||hasConstructorOf(e,Object)||isUserObject(n)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(n){return null===n?\"null\":i(n)?\"array\":void 0===n?\"undefined\":e(n)},Typeson.JSON_TYPES=[\"null\",\"boolean\",\"number\",\"string\",\"array\",\"object\"],Typeson});\n});\n\nvar structuredCloning = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function(){var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e;}finally{try{!r&&a.return&&a.return();}finally{if(i)throw o}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,s=Object.getPrototypeOf,a={}.hasOwnProperty,c=a.toString,u=[\"type\",\"replaced\",\"iterateIn\",\"iterateUnsetNumeric\"];function isThenable(e,t){return Typeson.isObject(e)&&\"function\"==typeof e.then&&(!t||\"function\"==typeof e.catch)}function toStringTag(e){return o.call(e).slice(8,-1)}function hasConstructorOf(t,n){if(!t||\"object\"!==(void 0===t?\"undefined\":e(t)))return !1;var r=s(t);if(!r)return !1;var i=a.call(r,\"constructor\")&&r.constructor;return \"function\"!=typeof i?null===n:\"function\"==typeof i&&null!==n&&c.call(i)===c.call(n)}function isPlainObject(e){return !(!e||\"Object\"!==toStringTag(e))&&(!s(e)||hasConstructorOf(e,Object))}function isObject(t){return t&&\"object\"===(void 0===t?\"undefined\":e(t))}function Typeson(o){var s=[],a=[],c={},f=this.types={},p=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var s=y(e,null,r);return i(s)?JSON.stringify(s[0],t,n):s.then(function(e){return JSON.stringify(e,t,n)})};this.stringifySync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var l=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),v(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var y=this.encapsulate=function(f,p,l){var y=(l=Object.assign({sync:!0},o,l)).sync,v={},d=[],h=[],g=[],b=!(l&&\"cyclic\"in l)||l.cyclic,m=l.encapsulateObserver,T=_encapsulate(\"\",f,b,p||{},g);function finish(e){var t=Object.values(v);if(l.iterateNone)return t.length?t[0]:Typeson.getJSONType(e);if(t.length){if(l.returnTypeNames)return [].concat(n(new Set(t)));e&&isPlainObject(e)&&!e.hasOwnProperty(\"$types\")?e.$types=v:e={$:e,$types:{$:v}};}else isObject(e)&&e.hasOwnProperty(\"$types\")&&(e={$:e,$types:!0});return !l.returnTypeNames&&e}return g.length?y&&l.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():Promise.resolve(function checkPromises(e,n){return Promise.all(n.map(function(e){return e[1].p})).then(function(r){return Promise.all(r.map(function(r){var i=[],o=n.splice(0,1)[0],s=t(o,7),a=s[0],c=s[2],u=s[3],f=s[4],p=s[5],l=s[6],y=_encapsulate(a,r,c,u,i,!0,l),v=hasConstructorOf(y,TypesonPromise);return a&&v?y.p.then(function(t){return f[p]=t,checkPromises(e,i)}):(a?f[p]=y:e=v?y.p:y,checkPromises(e,i))}))}).then(function(){return e})}(T,g)).then(finish):!y&&l.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():l.stringification&&y?[finish(T)]:y?finish(T):Promise.resolve(finish(T));function _adaptBuiltinStateObjectProperties(e,t,n){Object.assign(e,t);var r=u.map(function(t){var n=e[t];return delete e[t],n});n(),u.forEach(function(t,n){e[t]=r[n];});}function _encapsulate(t,n,o,a,c,u,f){var p=void 0,y={},g=void 0===n?\"undefined\":e(n),b=m?function(e){var r=f||a.type||Typeson.getJSONType(n);m(Object.assign(e||y,{keypath:t,value:n,cyclic:o,stateObj:a,promisesData:c,resolvingTypesonPromise:u,awaitingTypesonPromise:hasConstructorOf(n,TypesonPromise)},void 0!==r?{type:r}:{}));}:null;if(g in{string:1,boolean:1,number:1,undefined:1})return void 0===n||\"number\"===g&&(isNaN(n)||n===-1/0||n===1/0)?(p=replace(t,n,a,c,!1,u,b))!==n&&(y={replaced:p}):p=n,b&&b(),p;if(null===n)return b&&b(),n;if(o&&!a.iterateIn&&!a.iterateUnsetNumeric){var T=d.indexOf(n);if(!(T<0))return v[t]=\"#\",b&&b({cyclicKeypath:h[T]}),\"#\"+h[T];!0===o&&(d.push(n),h.push(t));}var O=isPlainObject(n),w=i(n),S=(O||w)&&(!s.length||a.replaced)||a.iterateIn?n:replace(t,n,a,c,O||w,null,b),P=void 0;if(S!==n?(p=S,y={replaced:S}):w||\"array\"===a.iterateIn?(P=new Array(n.length),y={clone:P}):O||\"object\"===a.iterateIn?y={clone:P={}}:\"\"===t&&hasConstructorOf(n,TypesonPromise)?(c.push([t,n,o,a,void 0,void 0,a.type]),p=n):p=n,b&&b(),l.iterateNone)return P||p;if(!P)return p;if(a.iterateIn){var j=function _loop(e){var r={ownKeys:n.hasOwnProperty(e)};_adaptBuiltinStateObjectProperties(a,r,function(){var r=t+(t?\".\":\"\")+escapeKeyPathComponent(e),i=_encapsulate(r,n[e],!!o,a,c,u);hasConstructorOf(i,TypesonPromise)?c.push([r,i,!!o,a,P,e,a.type]):void 0!==i&&(P[e]=i);});};for(var A in n)j(A);b&&b({endIterateIn:!0,end:!0});}else r(n).forEach(function(e){var r=t+(t?\".\":\"\")+escapeKeyPathComponent(e);_adaptBuiltinStateObjectProperties(a,{ownKeys:!0},function(){var t=_encapsulate(r,n[e],!!o,a,c,u);hasConstructorOf(t,TypesonPromise)?c.push([r,t,!!o,a,P,e,a.type]):void 0!==t&&(P[e]=t);});}),b&&b({endIterateOwn:!0,end:!0});if(a.iterateUnsetNumeric){for(var C=n.length,N=function _loop2(e){if(!(e in n)){var r=t+(t?\".\":\"\")+e;_adaptBuiltinStateObjectProperties(a,{ownKeys:!1},function(){var t=_encapsulate(r,void 0,!!o,a,c,u);hasConstructorOf(t,TypesonPromise)?c.push([r,t,!!o,a,P,e,a.type]):void 0!==t&&(P[e]=t);});}},B=0;B<C;B++)N(B);b&&b({endIterateUnsetNumeric:!0,end:!0});}return P}function replace(e,t,n,r,i,o,u){for(var f=i?s:a,p=f.length;p--;){var l=f[p];if(l.test(t,n)){var d=l.type;if(c[d]){var h=v[e];v[e]=h?[d].concat(h):d;}return Object.assign(n,{type:d,replaced:!0}),!y&&l.replaceAsync||l.replace?(u&&u({replacing:!0}),_encapsulate(e,l[y||!l.replaceAsync?\"replace\":\"replaceAsync\"](t,n),b&&\"readonly\",n,r,o,d)):(u&&u({typeDetected:!0}),_encapsulate(e,t,b&&\"readonly\",n,r,o,d))}}return t}};this.encapsulateSync=function(e,t,n){return y(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return y(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var v=this.revive=function(e,n){var s=(n=Object.assign({sync:!0},o,n)).sync,a=e&&e.$types,u=!0;if(!a)return e;if(!0===a)return e.$;a.$&&isPlainObject(a.$)&&(e=e.$,a=a.$,u=!1);var f=[],p={},l=function _revive(e,n,o,s,l,y){if(u&&\"$types\"===e)return;var v=a[e];if(i(n)||isPlainObject(n)){var d=i(n)?new Array(n.length):{};for(r(n).forEach(function(t){var r=_revive(e+(e?\".\":\"\")+escapeKeyPathComponent(t),n[t],o||d,s,d,t);hasConstructorOf(r,Undefined)?d[t]=void 0:void 0!==r&&(d[t]=r);}),n=d;f.length;){var h=t(f[0],4),g=h[0],b=h[1],m=h[2],T=h[3],O=getByKeyPath(g,b);if(hasConstructorOf(O,Undefined))m[T]=void 0;else {if(void 0===O)break;m[T]=O;}f.splice(0,1);}}if(!v)return n;if(\"#\"===v){var w=getByKeyPath(o,n.substr(1));return void 0===w&&f.push([o,n.substr(1),l,y]),w}var S=s.sync;return [].concat(v).reduce(function(e,t){var n=c[t];if(!n)throw new Error(\"Unregistered type: \"+t);return n[S&&n.revive?\"revive\":!S&&n.reviveAsync?\"reviveAsync\":\"revive\"](e,p)},n)}(\"\",e,null,n);return isThenable(l=hasConstructorOf(l,Undefined)?void 0:l)?s&&n.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():l:!s&&n.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():s?l:Promise.resolve(l)};this.reviveSync=function(e,t){return v(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return v(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach(function R(e){if(i(e))return e.map(R);e&&r(e).forEach(function(n){if(\"#\"===n)throw new TypeError(\"# cannot be used as a type name as it is reserved for cyclic objects\");if(Typeson.JSON_TYPES.includes(n))throw new TypeError(\"Plain JSON object types are reserved as type names\");var r=e[n],o=r.testPlainObjects?s:a,u=o.filter(function(e){return e.type===n});if(u.length&&(o.splice(o.indexOf(u[0]),1),delete c[n],delete f[n]),r){if(\"function\"==typeof r){var p=r;r={test:function test(e){return e&&e.constructor===p},replace:function replace(e){return assign({},e)},revive:function revive(e){return assign(Object.create(p.prototype),e)}};}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var l={type:n,test:r.test.bind(r)};r.replace&&(l.replace=r.replace.bind(r)),r.replaceAsync&&(l.replaceAsync=r.replaceAsync.bind(r));var y=\"number\"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?s.splice(y,0,l):a.splice(y,0,l),r.revive||r.reviveAsync){var v={};r.revive&&(v.revive=r.revive.bind(r)),r.reviveAsync&&(v.reviveAsync=r.reviveAsync.bind(r)),c[n]=v;}f[n]=r;}});}),this};}function assign(e,t){return r(t).map(function(n){e[n]=t[n];}),e}function escapeKeyPathComponent(e){return e.replace(/~/g,\"~0\").replace(/\\./g,\"~1\")}function unescapeKeyPathComponent(e){return e.replace(/~1/g,\".\").replace(/~0/g,\"~\")}function getByKeyPath(e,t){if(\"\"===t)return e;var n=t.indexOf(\".\");if(n>-1){var r=e[unescapeKeyPathComponent(t.substr(0,n))];return void 0===r?void 0:getByKeyPath(r,t.substr(n+1))}return e[unescapeKeyPathComponent(t)]}function Undefined(){}function TypesonPromise(e){this.p=new Promise(e);}TypesonPromise.prototype.then=function(e,t){var n=this;return new TypesonPromise(function(r,i){n.p.then(function(t){r(e?e(t):t);},function(e){n.p.catch(function(e){return t?t(e):Promise.reject(e)}).then(r,i);});})},TypesonPromise.prototype.catch=function(e){return this.then(null,e)},TypesonPromise.resolve=function(e){return new TypesonPromise(function(t){t(e);})},TypesonPromise.reject=function(e){return new TypesonPromise(function(t,n){n(e);})},[\"all\",\"race\"].map(function(e){TypesonPromise[e]=function(t){return new TypesonPromise(function(n,r){Promise[e](t.map(function(e){return e.p})).then(n,r);})};}),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(e){if(!e||\"Object\"!==toStringTag(e))return !1;var t=s(e);return !t||hasConstructorOf(e,Object)||isUserObject(t)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(t){return null===t?\"null\":i(t)?\"array\":void 0===t?\"undefined\":e(t)},Typeson.JSON_TYPES=[\"null\",\"boolean\",\"number\",\"string\",\"array\",\"object\"];for(var f={userObject:{test:function test(e,t){return Typeson.isUserObject(e)},replace:function replace(e){return Object.assign({},e)},revive:function revive(e){return e}}},p=[[{sparseArrays:{testPlainObjects:!0,test:function test(e){return Array.isArray(e)},replace:function replace(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function test(e,t){return void 0===e&&!1===t.ownKeys},replace:function replace(e){return null},revive:function revive(e){}}}],{undef:{test:function test(e,t){return void 0===e&&(t.ownKeys||!(\"ownKeys\"in t))},replace:function replace(e){return null},revive:function revive(e){return new Typeson.Undefined}}}],l={StringObject:{test:function test(t){return \"String\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return String(e)},revive:function revive(e){return new String(e)}},BooleanObject:{test:function test(t){return \"Boolean\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return Boolean(e)},revive:function revive(e){return new Boolean(e)}},NumberObject:{test:function test(t){return \"Number\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return Number(e)},revive:function revive(e){return new Number(e)}}},y=[{nan:{test:function test(e){return \"number\"==typeof e&&isNaN(e)},replace:function replace(e){return \"NaN\"},revive:function revive(e){return NaN}}},{infinity:{test:function test(e){return e===1/0},replace:function replace(e){return \"Infinity\"},revive:function revive(e){return 1/0}}},{negativeInfinity:{test:function test(e){return e===-1/0},replace:function replace(e){return \"-Infinity\"},revive:function revive(e){return -1/0}}}],v={date:{test:function test(e){return \"Date\"===Typeson.toStringTag(e)},replace:function replace(e){var t=e.getTime();return isNaN(t)?\"NaN\":t},revive:function revive(e){return \"NaN\"===e?new Date(NaN):new Date(e)}}},d={regexp:{test:function test(e){return \"RegExp\"===Typeson.toStringTag(e)},replace:function replace(e){return {source:e.source,flags:(e.global?\"g\":\"\")+(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.sticky?\"y\":\"\")+(e.unicode?\"u\":\"\")}},revive:function revive(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},h={map:{test:function test(e){return \"Map\"===Typeson.toStringTag(e)},replace:function replace(e){return Array.from(e.entries())},revive:function revive(e){return new Map(e)}}},g={set:{test:function test(e){return \"Set\"===Typeson.toStringTag(e)},replace:function replace(e){return Array.from(e.values())},revive:function revive(e){return new Set(e)}}},b=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",m=new Uint8Array(256),T=0;T<b.length;T++)m[b.charCodeAt(T)]=T;var O=function encode(e,t,n){for(var r=new Uint8Array(e,t,n),i=r.length,o=\"\",s=0;s<i;s+=3)o+=b[r[s]>>2],o+=b[(3&r[s])<<4|r[s+1]>>4],o+=b[(15&r[s+1])<<2|r[s+2]>>6],o+=b[63&r[s+2]];return i%3==2?o=o.substring(0,o.length-1)+\"=\":i%3==1&&(o=o.substring(0,o.length-2)+\"==\"),o},w=function decode(e){var t=e.length,n=.75*e.length,r=0,i=void 0,o=void 0,s=void 0,a=void 0;\"=\"===e[e.length-1]&&(n--,\"=\"===e[e.length-2]&&n--);for(var c=new ArrayBuffer(n),u=new Uint8Array(c),f=0;f<t;f+=4)i=m[e.charCodeAt(f)],o=m[e.charCodeAt(f+1)],s=m[e.charCodeAt(f+2)],a=m[e.charCodeAt(f+3)],u[r++]=i<<2|o>>4,u[r++]=(15&o)<<4|s>>2,u[r++]=(3&s)<<6|63&a;return c},S={arraybuffer:{test:function test(e){return \"ArrayBuffer\"===Typeson.toStringTag(e)},replace:function replace(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),O(e))},revive:function revive(t,n){if(n.buffers||(n.buffers=[]),\"object\"===(void 0===t?\"undefined\":e(t)))return n.buffers[t.index];var r=w(t);return n.buffers.push(r),r}}},P=\"undefined\"==typeof self?commonjsGlobal:self,j={};[\"Int8Array\",\"Uint8Array\",\"Uint8ClampedArray\",\"Int16Array\",\"Uint16Array\",\"Int32Array\",\"Uint32Array\",\"Float32Array\",\"Float64Array\"].forEach(function(e){var t=e,n=P[t];n&&(j[e.toLowerCase()]={test:function test(e){return Typeson.toStringTag(e)===t},replace:function replace(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:O(n),byteOffset:r,length:i})},revive:function revive(e,t){t.buffers||(t.buffers=[]);var r=e.byteOffset,i=e.length,o=e.encoded,s=e.index,a=void 0;return \"index\"in e?a=t.buffers[s]:(a=w(o),t.buffers.push(a)),new n(a,r,i)}});});var A={dataview:{test:function test(e){return \"DataView\"===Typeson.toStringTag(e)},replace:function replace(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:O(n),byteOffset:r,byteLength:i})},revive:function revive(e,t){t.buffers||(t.buffers=[]);var n=e.byteOffset,r=e.byteLength,i=e.encoded,o=e.index,s=void 0;return \"index\"in e?s=t.buffers[o]:(s=w(i),t.buffers.push(s)),new DataView(s,n,r)}}},C={IntlCollator:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.Collator)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.NumberFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.NumberFormat(e.locale,e)}}};function string2arraybuffer(e){for(var t=new Uint16Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var N={file:{test:function test(e){return \"File\"===Typeson.toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.open(\"GET\",URL.createObjectURL(e),!1),\"undefined\"!=typeof TextEncoder&&t.overrideMimeType(\"text/plain; charset=utf-16le\"),200!==t.status&&0!==t.status)throw new Error(\"Bad Blob access: \"+t.status);return t.send(),{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function revive(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified,o=string2arraybuffer(r);return new File([o],t,{type:n,lastModified:i})},replaceAsync:function replaceAsync(e){return new Typeson.Promise(function(t,n){if(e.isClosed)n(new Error(\"The File is closed\"));else {var r=new FileReader;r.addEventListener(\"load\",function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified});}),r.addEventListener(\"error\",function(){n(r.error);}),r.readAsText(e,\"UTF-16\");}})}}};return [f,p,l,y,v,d,{imagedata:{test:function test(e){return \"ImageData\"===Typeson.toStringTag(e)},replace:function replace(e){return {array:Array.from(e.data),width:e.width,height:e.height}},revive:function revive(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function test(e){return \"ImageBitmap\"===Typeson.toStringTag(e)||e&&e.dataset&&\"ImageBitmap\"===e.dataset.toStringTag},replace:function replace(e){var t=document.createElement(\"canvas\");return t.getContext(\"2d\").drawImage(e,0,0),t.toDataURL()},revive:function revive(e){var t=document.createElement(\"canvas\"),n=t.getContext(\"2d\"),r=document.createElement(\"img\");return r.onload=function(){n.drawImage(r,0,0);},r.src=e,t},reviveAsync:function reviveAsync(e){var t=document.createElement(\"canvas\"),n=t.getContext(\"2d\"),r=document.createElement(\"img\");return r.onload=function(){n.drawImage(r,0,0);},r.src=e,createImageBitmap(t)}}},N,{file:N.file,filelist:{test:function test(e){return \"FileList\"===Typeson.toStringTag(e)},replace:function replace(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function revive(e){function FileList(){this._files=arguments[0],this.length=this._files.length;}return FileList.prototype.item=function(e){return this._files[e]},FileList.prototype[Symbol.toStringTag]=\"FileList\",new FileList(e)}}},{blob:{test:function test(e){return \"Blob\"===Typeson.toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.open(\"GET\",URL.createObjectURL(e),!1),\"undefined\"!=typeof TextEncoder&&t.overrideMimeType(\"text/plain; charset=utf-16le\"),200!==t.status&&0!==t.status)throw new Error(\"Bad Blob access: \"+t.status);return t.send(),{type:e.type,stringContents:t.responseText}},revive:function revive(e){var t=e.type,n=e.stringContents;return new Blob([string2arraybuffer(n)],{type:t})},replaceAsync:function replaceAsync(e){return new Typeson.Promise(function(t,n){if(e.isClosed)n(new Error(\"The Blob is closed\"));else {var r=new FileReader;r.addEventListener(\"load\",function(){t({type:e.type,stringContents:r.result});}),r.addEventListener(\"error\",function(){n(r.error);}),r.readAsText(e,\"UTF-16\");}})}}}].concat(\"function\"==typeof Map?h:[],\"function\"==typeof Set?g:[],\"function\"==typeof ArrayBuffer?S:[],\"function\"==typeof Uint8Array?j:[],\"function\"==typeof DataView?A:[],\"undefined\"!=typeof Intl?C:[])});\n\n});\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2017 Brett Zamir, 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; // Use a lookup table to find the index.\n\nvar lookup = new Uint8Array(256);\n\nfor (var i = 0; i < chars.length; i++) {\n  lookup[chars.charCodeAt(i)] = i;\n}\n\nvar encode = function encode(arraybuffer, byteOffset, length) {\n  if (length === null || length === undefined) {\n    length = arraybuffer.byteLength; // Needed for Safari\n  }\n\n  var bytes = new Uint8Array(arraybuffer, byteOffset || 0, // Default needed for Safari\n  length);\n  var len = bytes.length;\n  var base64 = '';\n\n  for (var _i = 0; _i < len; _i += 3) {\n    base64 += chars[bytes[_i] >> 2];\n    base64 += chars[(bytes[_i] & 3) << 4 | bytes[_i + 1] >> 4];\n    base64 += chars[(bytes[_i + 1] & 15) << 2 | bytes[_i + 2] >> 6];\n    base64 += chars[bytes[_i + 2] & 63];\n  }\n\n  if (len % 3 === 2) {\n    base64 = base64.substring(0, base64.length - 1) + '=';\n  } else if (len % 3 === 1) {\n    base64 = base64.substring(0, base64.length - 2) + '==';\n  }\n\n  return base64;\n};\nvar decode = function decode(base64) {\n  var len = base64.length;\n  var bufferLength = base64.length * 0.75;\n  var p = 0;\n  var encoded1, encoded2, encoded3, encoded4;\n\n  if (base64[base64.length - 1] === '=') {\n    bufferLength--;\n\n    if (base64[base64.length - 2] === '=') {\n      bufferLength--;\n    }\n  }\n\n  var arraybuffer = new ArrayBuffer(bufferLength),\n      bytes = new Uint8Array(arraybuffer);\n\n  for (var _i2 = 0; _i2 < len; _i2 += 4) {\n    encoded1 = lookup[base64.charCodeAt(_i2)];\n    encoded2 = lookup[base64.charCodeAt(_i2 + 1)];\n    encoded3 = lookup[base64.charCodeAt(_i2 + 2)];\n    encoded4 = lookup[base64.charCodeAt(_i2 + 3)];\n    bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n    bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n    bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n  }\n\n  return arraybuffer;\n};\n\n/* eslint-env browser, node */\nvar _global = typeof self === 'undefined' ? global : self;\nvar exportObj = {};\n[\n    'Int8Array',\n    'Uint8Array',\n    'Uint8ClampedArray',\n    'Int16Array',\n    'Uint16Array',\n    'Int32Array',\n    'Uint32Array',\n    'Float32Array',\n    'Float64Array'\n].forEach(function (typeName) {\n    var arrType = typeName;\n    var TypedArray = _global[arrType];\n    if (TypedArray) {\n        exportObj[typeName.toLowerCase() + \"2\"] = {\n            test: function (x) { return typeson.toStringTag(x) === arrType; },\n            replace: function (_a) {\n                var buffer = _a.buffer, byteOffset = _a.byteOffset, length = _a.length;\n                return {\n                    buffer: buffer,\n                    byteOffset: byteOffset,\n                    length: length\n                };\n            },\n            revive: function (b64Obj) {\n                var buffer = b64Obj.buffer, byteOffset = b64Obj.byteOffset, length = b64Obj.length;\n                return new TypedArray(buffer, byteOffset, length);\n            }\n        };\n    }\n});\n\nvar arrayBuffer = {\n    arraybuffer: {\n        test: function (x) { return typeson.toStringTag(x) === 'ArrayBuffer'; },\n        replace: function (b) {\n            return encode(b, 0, b.byteLength);\n        },\n        revive: function (b64) {\n            var buffer = decode(b64);\n            return buffer;\n        }\n    }\n};\n// See also typed-arrays!\n\nvar TSON = new typeson().register(structuredCloning);\nvar readBlobsSynchronously = 'FileReaderSync' in self; // true in workers only.\nvar blobsToAwait = [];\nvar blobsToAwaitPos = 0;\n// Need to patch encapsulateAsync as it does not work as of typeson 5.8.2\n// Also, current version of typespn-registry-1.0.0-alpha.21 does not\n// encapsulate/revive Blobs correctly (fails one of the unit tests in\n// this library (test 'export-format'))\nTSON.register([\n    arrayBuffer,\n    exportObj, {\n        blob2: {\n            test: function (x) { return typeson.toStringTag(x) === 'Blob'; },\n            replace: function (b) {\n                if (b.isClosed) { // On MDN, but not in https://w3c.github.io/FileAPI/#dfn-Blob\n                    throw new Error('The Blob is closed');\n                }\n                if (readBlobsSynchronously) {\n                    var data = readBlobSync(b, 'binary');\n                    var base64 = encode(data, 0, data.byteLength);\n                    return {\n                        type: b.type,\n                        data: base64\n                    };\n                }\n                else {\n                    blobsToAwait.push(b); // This will also make TSON.mustFinalize() return true.\n                    var result = {\n                        type: b.type,\n                        data: { start: blobsToAwaitPos, end: blobsToAwaitPos + b.size }\n                    };\n                    console.log(\"b.size: \" + b.size);\n                    blobsToAwaitPos += b.size;\n                    return result;\n                }\n            },\n            finalize: function (b, ba) {\n                b.data = encode(ba, 0, ba.byteLength);\n            },\n            revive: function (_a) {\n                var type = _a.type, data = _a.data;\n                return new Blob([decode(data)], { type: type });\n            }\n        }\n    }\n]);\nTSON.mustFinalize = function () { return blobsToAwait.length > 0; };\nTSON.finalize = function (items) { return __awaiter(void 0, void 0, void 0, function () {\n    var allChunks, _i, items_1, item, types, arrayType, keyPath, typeName, typeSpec, b;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, readBlobAsync(new Blob(blobsToAwait), 'binary')];\n            case 1:\n                allChunks = _a.sent();\n                if (items) {\n                    for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\n                        item = items_1[_i];\n                        // Manually go through all \"blob\" types in the result\n                        // and lookup the data slice they point at.\n                        if (item.$types) {\n                            types = item.$types;\n                            arrayType = types.$;\n                            if (arrayType)\n                                types = types.$;\n                            for (keyPath in types) {\n                                typeName = types[keyPath];\n                                typeSpec = TSON.types[typeName];\n                                if (typeSpec && typeSpec.finalize) {\n                                    b = Dexie.getByKeyPath(item, arrayType ? \"$.\" + keyPath : keyPath);\n                                    typeSpec.finalize(b, allChunks.slice(b.start, b.end));\n                                }\n                            }\n                        }\n                    }\n                }\n                // Free up memory\n                blobsToAwait = [];\n                return [2 /*return*/];\n        }\n    });\n}); };\n\nvar DEFAULT_ROWS_PER_CHUNK = 2000;\nfunction exportDB(db, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        function exportAll() {\n            return __awaiter(this, void 0, void 0, function () {\n                var tablesRowCounts, emptyExportJson, posEndDataArray, firstJsonSlice, filter, _loop_1, _i, tables_1, tableName;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, Promise.all(db.tables.map(function (table) { return table.count(); }))];\n                        case 1:\n                            tablesRowCounts = _a.sent();\n                            tablesRowCounts.forEach(function (rowCount, i) { return tables[i].rowCount = rowCount; });\n                            progress.totalRows = tablesRowCounts.reduce(function (p, c) { return p + c; });\n                            emptyExportJson = JSON.stringify(emptyExport, undefined, prettyJson ? 2 : undefined);\n                            posEndDataArray = emptyExportJson.lastIndexOf(']');\n                            firstJsonSlice = emptyExportJson.substring(0, posEndDataArray);\n                            slices.push(firstJsonSlice);\n                            filter = options.filter;\n                            _loop_1 = function (tableName) {\n                                var table, primKey, inbound, LIMIT, emptyTableExport, emptyTableExportJson, posEndRowsArray, lastKey, lastNumRows, mayHaveMoreRows, _loop_2, state_1;\n                                return __generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0:\n                                            table = db.table(tableName);\n                                            primKey = table.schema.primKey;\n                                            inbound = !!primKey.keyPath;\n                                            LIMIT = options.numRowsPerChunk || DEFAULT_ROWS_PER_CHUNK;\n                                            emptyTableExport = inbound ? {\n                                                tableName: table.name,\n                                                inbound: true,\n                                                rows: []\n                                            } : {\n                                                tableName: table.name,\n                                                inbound: false,\n                                                rows: []\n                                            };\n                                            emptyTableExportJson = JSON.stringify(emptyTableExport, undefined, prettyJson ? 2 : undefined);\n                                            if (prettyJson) {\n                                                // Increase indentation according to this:\n                                                // {\n                                                //   ...\n                                                //   data: [\n                                                //     ...\n                                                //     data: [\n                                                // 123456<---- here\n                                                //     ] \n                                                //   ]\n                                                // }\n                                                emptyTableExportJson = emptyTableExportJson.split('\\n').join('\\n    ');\n                                            }\n                                            posEndRowsArray = emptyTableExportJson.lastIndexOf(']');\n                                            slices.push(emptyTableExportJson.substring(0, posEndRowsArray));\n                                            lastKey = null;\n                                            lastNumRows = 0;\n                                            mayHaveMoreRows = true;\n                                            _loop_2 = function () {\n                                                var chunkedCollection, values, filteredValues, tsonValues, json, keys, keyvals, tsonTuples, json;\n                                                return __generator(this, function (_c) {\n                                                    switch (_c.label) {\n                                                        case 0:\n                                                            if (progressCallback) {\n                                                                // Keep ongoing transaction private\n                                                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                                                            }\n                                                            chunkedCollection = lastKey == null ?\n                                                                table.limit(LIMIT) :\n                                                                table.where(':id').above(lastKey).limit(LIMIT);\n                                                            return [4 /*yield*/, chunkedCollection.toArray()];\n                                                        case 1:\n                                                            values = _c.sent();\n                                                            if (values.length === 0)\n                                                                return [2 /*return*/, \"break\"];\n                                                            if (lastKey != null && lastNumRows > 0) {\n                                                                // Not initial chunk. Must add a comma:\n                                                                slices.push(\",\");\n                                                                if (prettyJson) {\n                                                                    slices.push(\"\\n      \");\n                                                                }\n                                                            }\n                                                            mayHaveMoreRows = values.length === LIMIT;\n                                                            if (!inbound) return [3 /*break*/, 4];\n                                                            filteredValues = filter ?\n                                                                values.filter(function (value) { return filter(tableName, value); }) :\n                                                                values;\n                                                            tsonValues = filteredValues.map(function (value) { return TSON.encapsulate(value); });\n                                                            if (!TSON.mustFinalize()) return [3 /*break*/, 3];\n                                                            return [4 /*yield*/, Dexie.waitFor(TSON.finalize(tsonValues))];\n                                                        case 2:\n                                                            _c.sent();\n                                                            _c.label = 3;\n                                                        case 3:\n                                                            json = JSON.stringify(tsonValues, undefined, prettyJson ? 2 : undefined);\n                                                            if (prettyJson)\n                                                                json = json.split('\\n').join('\\n      ');\n                                                            // By generating a blob here, we give web platform the opportunity to store the contents\n                                                            // on disk and release RAM.\n                                                            slices.push(new Blob([json.substring(1, json.length - 1)]));\n                                                            lastNumRows = filteredValues.length;\n                                                            lastKey = values.length > 0 ?\n                                                                Dexie.getByKeyPath(values[values.length - 1], primKey.keyPath) :\n                                                                null;\n                                                            return [3 /*break*/, 8];\n                                                        case 4: return [4 /*yield*/, chunkedCollection.primaryKeys()];\n                                                        case 5:\n                                                            keys = _c.sent();\n                                                            keyvals = keys.map(function (key, i) { return [key, values[i]]; });\n                                                            if (filter)\n                                                                keyvals = keyvals.filter(function (_a) {\n                                                                    var key = _a[0], value = _a[1];\n                                                                    return filter(tableName, value, key);\n                                                                });\n                                                            tsonTuples = keyvals.map(function (tuple) { return TSON.encapsulate(tuple); });\n                                                            if (!TSON.mustFinalize()) return [3 /*break*/, 7];\n                                                            return [4 /*yield*/, Dexie.waitFor(TSON.finalize(tsonTuples))];\n                                                        case 6:\n                                                            _c.sent();\n                                                            _c.label = 7;\n                                                        case 7:\n                                                            json = JSON.stringify(tsonTuples, undefined, prettyJson ? 2 : undefined);\n                                                            if (prettyJson)\n                                                                json = json.split('\\n').join('\\n      ');\n                                                            // By generating a blob here, we give web platform the opportunity to store the contents\n                                                            // on disk and release RAM.\n                                                            slices.push(new Blob([json.substring(1, json.length - 1)]));\n                                                            lastNumRows = keyvals.length;\n                                                            lastKey = keys.length > 0 ?\n                                                                keys[keys.length - 1] :\n                                                                null;\n                                                            _c.label = 8;\n                                                        case 8:\n                                                            progress.completedRows += values.length;\n                                                            return [2 /*return*/];\n                                                    }\n                                                });\n                                            };\n                                            _b.label = 1;\n                                        case 1:\n                                            if (!mayHaveMoreRows) return [3 /*break*/, 3];\n                                            return [5 /*yield**/, _loop_2()];\n                                        case 2:\n                                            state_1 = _b.sent();\n                                            if (state_1 === \"break\")\n                                                return [3 /*break*/, 3];\n                                            return [3 /*break*/, 1];\n                                        case 3:\n                                            slices.push(emptyTableExportJson.substr(posEndRowsArray)); // \"]}\"\n                                            progress.completedTables += 1;\n                                            if (progress.completedTables < progress.totalTables) {\n                                                slices.push(\",\");\n                                            }\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            };\n                            _i = 0, tables_1 = tables;\n                            _a.label = 2;\n                        case 2:\n                            if (!(_i < tables_1.length)) return [3 /*break*/, 5];\n                            tableName = tables_1[_i].name;\n                            return [5 /*yield**/, _loop_1(tableName)];\n                        case 3:\n                            _a.sent();\n                            _a.label = 4;\n                        case 4:\n                            _i++;\n                            return [3 /*break*/, 2];\n                        case 5:\n                            slices.push(emptyExportJson.substr(posEndDataArray));\n                            progress.done = true;\n                            if (progressCallback) {\n                                // Keep ongoing transaction private\n                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        }\n        var slices, tables, prettyJson, emptyExport, progressCallback, progress;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {};\n                    slices = [];\n                    tables = db.tables.map(function (table) { return ({\n                        name: table.name,\n                        schema: getSchemaString(table),\n                        rowCount: 0\n                    }); });\n                    prettyJson = options.prettyJson;\n                    emptyExport = {\n                        formatName: \"dexie\",\n                        formatVersion: 1,\n                        data: {\n                            databaseName: db.name,\n                            databaseVersion: db.verno,\n                            tables: tables,\n                            data: []\n                        }\n                    };\n                    progressCallback = options.progressCallback;\n                    progress = {\n                        done: false,\n                        completedRows: 0,\n                        completedTables: 0,\n                        totalRows: NaN,\n                        totalTables: db.tables.length\n                    };\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, , 6, 7]);\n                    if (!options.noTransaction) return [3 /*break*/, 3];\n                    return [4 /*yield*/, exportAll()];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3: return [4 /*yield*/, db.transaction('r', db.tables, exportAll)];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [3 /*break*/, 7];\n                case 6:\n                    TSON.finalize(); // Free up mem if error has occurred\n                    return [7 /*endfinally*/];\n                case 7:\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    return [2 /*return*/, new Blob(slices, { type: \"text/json\" })];\n            }\n        });\n    });\n}\n\nvar VERSION = 1;\n\nvar fakeStream = {Stream: function(){}};\n\nvar clarinet_1 = createCommonjsModule(function (module, exports) {\n(function (clarinet) {\n\n  // non node-js needs to set clarinet debug on root\n  var env =(typeof process === 'object' && process.env)\n    ? process.env\n    : self;\n\n  clarinet.parser            = function (opt) { return new CParser(opt);};\n  clarinet.CParser           = CParser;\n  clarinet.CStream           = CStream;\n  clarinet.createStream      = createStream;\n  clarinet.MAX_BUFFER_LENGTH = 10 * 1024 * 1024;\n  clarinet.DEBUG             = (env.CDEBUG==='debug');\n  clarinet.INFO              = (env.CDEBUG==='debug' || env.CDEBUG==='info');\n  clarinet.EVENTS            =\n    [ \"value\"\n    , \"string\"\n    , \"key\"\n    , \"openobject\"\n    , \"closeobject\"\n    , \"openarray\"\n    , \"closearray\"\n    , \"error\"\n    , \"end\"\n    , \"ready\"\n    ];\n\n  var buffers     = {\n        textNode: undefined,\n        numberNode: \"\"\n    }\n    , streamWraps = clarinet.EVENTS.filter(function (ev) {\n          return ev !== \"error\" && ev !== \"end\";\n        })\n    , S           = 0\n    , Stream\n    ;\n\n  clarinet.STATE =\n    { BEGIN                             : S++\n    , VALUE                             : S++ // general stuff\n    , OPEN_OBJECT                       : S++ // {\n    , CLOSE_OBJECT                      : S++ // }\n    , OPEN_ARRAY                        : S++ // [\n    , CLOSE_ARRAY                       : S++ // ]\n    , TEXT_ESCAPE                       : S++ // \\ stuff\n    , STRING                            : S++ // \"\"\n    , BACKSLASH                         : S++\n    , END                               : S++ // No more stack\n    , OPEN_KEY                          : S++ // , \"a\"\n    , CLOSE_KEY                         : S++ // :\n    , TRUE                              : S++ // r\n    , TRUE2                             : S++ // u\n    , TRUE3                             : S++ // e\n    , FALSE                             : S++ // a\n    , FALSE2                            : S++ // l\n    , FALSE3                            : S++ // s\n    , FALSE4                            : S++ // e\n    , NULL                              : S++ // u\n    , NULL2                             : S++ // l\n    , NULL3                             : S++ // l\n    , NUMBER_DECIMAL_POINT              : S++ // .\n    , NUMBER_DIGIT                      : S++ // [0-9]\n    };\n\n  for (var s_ in clarinet.STATE) clarinet.STATE[clarinet.STATE[s_]] = s_;\n\n  // switcharoo\n  S = clarinet.STATE;\n\n  const Char = {\n    tab                 : 0x09,     // \\t\n    lineFeed            : 0x0A,     // \\n\n    carriageReturn      : 0x0D,     // \\r\n    space               : 0x20,     // \" \"\n\n    doubleQuote         : 0x22,     // \"\n    plus                : 0x2B,     // +\n    comma               : 0x2C,     // ,\n    minus               : 0x2D,     // -\n    period              : 0x2E,     // .\n\n    _0                  : 0x30,     // 0\n    _9                  : 0x39,     // 9\n\n    colon               : 0x3A,     // :\n\n    E                   : 0x45,     // E\n\n    openBracket         : 0x5B,     // [\n    backslash           : 0x5C,     // \\\n    closeBracket        : 0x5D,     // ]\n\n    a                   : 0x61,     // a\n    b                   : 0x62,     // b\n    e                   : 0x65,     // e \n    f                   : 0x66,     // f\n    l                   : 0x6C,     // l\n    n                   : 0x6E,     // n\n    r                   : 0x72,     // r\n    s                   : 0x73,     // s\n    t                   : 0x74,     // t\n    u                   : 0x75,     // u\n\n    openBrace           : 0x7B,     // {\n    closeBrace          : 0x7D,     // }\n  };\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function f () { this[\"__proto__\"] = o; }\n      f.prototype = o;\n      return new f;\n    };\n  }\n\n  if (!Object.getPrototypeOf) {\n    Object.getPrototypeOf = function (o) {\n      return o[\"__proto__\"];\n    };\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = [];\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i);\n      return a;\n    };\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(clarinet.MAX_BUFFER_LENGTH, 10)\n      , maxActual = 0\n      ;\n    for (var buffer in buffers) {\n      var len = parser[buffer] === undefined ? 0 : parser[buffer].length;\n      if (len > maxAllowed) {\n        switch (buffer) {\n          case \"text\":\n            closeText(parser);\n          break;\n\n          default:\n            error(parser, \"Max buffer length exceeded: \"+ buffer);\n        }\n      }\n      maxActual = Math.max(maxActual, len);\n    }\n    parser.bufferCheckPosition = (clarinet.MAX_BUFFER_LENGTH - maxActual)\n                               + parser.position;\n  }\n\n  function clearBuffers (parser) {\n    for (var buffer in buffers) {\n      parser[buffer] = buffers[buffer];\n    }\n  }\n\n  var stringTokenPattern = /[\\\\\"\\n]/g;\n\n  function CParser (opt) {\n    if (!(this instanceof CParser)) return new CParser (opt);\n\n    var parser = this;\n    clearBuffers(parser);\n    parser.bufferCheckPosition = clarinet.MAX_BUFFER_LENGTH;\n    parser.q        = parser.c = parser.p = \"\";\n    parser.opt      = opt || {};\n    parser.closed   = parser.closedRoot = parser.sawRoot = false;\n    parser.tag      = parser.error = null;\n    parser.state    = S.BEGIN;\n    parser.stack    = new Array();\n    // mostly just for error reporting\n    parser.position = parser.column = 0;\n    parser.line     = 1;\n    parser.slashed  = false;\n    parser.unicodeI = 0;\n    parser.unicodeS = null;\n    parser.depth    = 0;\n    emit(parser, \"onready\");\n  }\n\n  CParser.prototype =\n    { end    : function () { end(this); }\n    , write  : write\n    , resume : function () { this.error = null; return this; }\n    , close  : function () { return this.write(null); }\n    };\n\n  try        { Stream = fakeStream.Stream; }\n  catch (ex) { Stream = function () {}; }\n\n  function createStream (opt) { return new CStream(opt); }\n\n  function CStream (opt) {\n    if (!(this instanceof CStream)) return new CStream(opt);\n\n    this._parser = new CParser(opt);\n    this.writable = true;\n    this.readable = true;\n\n    //var Buffer = this.Buffer || function Buffer () {}; // if we don't have Buffers, fake it so we can do `var instanceof Buffer` and not throw an error\n    this.bytes_remaining = 0; // number of bytes remaining in multi byte utf8 char to read after split boundary\n    this.bytes_in_sequence = 0; // bytes in multi byte utf8 char to read\n    this.temp_buffs = { \"2\": new Buffer(2), \"3\": new Buffer(3), \"4\": new Buffer(4) }; // for rebuilding chars split before boundary is reached\n    this.string = '';\n\n    var me = this;\n    Stream.apply(me);\n\n    this._parser.onend = function () { me.emit(\"end\"); };\n    this._parser.onerror = function (er) {\n      me.emit(\"error\", er);\n      me._parser.error = null;\n    };\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, \"on\" + ev,\n        { get          : function () { return me._parser[\"on\" + ev]; }\n        , set          : function (h) {\n            if (!h) {\n              me.removeAllListeners(ev);\n              me._parser[\"on\"+ev] = h;\n              return h;\n            }\n            me.on(ev, h);\n          }\n        , enumerable   : true\n        , configurable : false\n        });\n    });\n  }\n\n  CStream.prototype = Object.create(Stream.prototype,\n    { constructor: { value: CStream } });\n\n  CStream.prototype.write = function (data) {\n    data = new Buffer(data);\n    for (var i = 0; i < data.length; i++) {\n      var n = data[i];\n\n      // check for carry over of a multi byte char split between data chunks\n      // & fill temp buffer it with start of this data chunk up to the boundary limit set in the last iteration\n      if (this.bytes_remaining > 0) {\n        for (var j = 0; j < this.bytes_remaining; j++) {\n          this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence - this.bytes_remaining + j] = data[j];\n        }\n        this.string = this.temp_buffs[this.bytes_in_sequence].toString();\n        this.bytes_in_sequence = this.bytes_remaining = 0;\n\n        // move iterator forward by number of byte read during sequencing\n        i = i + j - 1;\n\n        // pass data to parser and move forward to parse rest of data\n        this._parser.write(this.string);\n        this.emit(\"data\", this.string);\n        continue;\n      }\n\n      // if no remainder bytes carried over, parse multi byte (>=128) chars one at a time\n      if (this.bytes_remaining === 0 && n >= 128) {\n        if ((n >= 194) && (n <= 223)) this.bytes_in_sequence = 2;\n        if ((n >= 224) && (n <= 239)) this.bytes_in_sequence = 3;\n        if ((n >= 240) && (n <= 244)) this.bytes_in_sequence = 4;\n        if ((this.bytes_in_sequence + i) > data.length) { // if bytes needed to complete char fall outside data length, we have a boundary split\n\n          for (var k = 0; k <= (data.length - 1 - i); k++) {\n            this.temp_buffs[this.bytes_in_sequence][k] = data[i + k]; // fill temp data of correct size with bytes available in this chunk\n          }\n          this.bytes_remaining = (i + this.bytes_in_sequence) - data.length;\n\n          // immediately return as we need another chunk to sequence the character\n          return true;\n        } else {\n          this.string = data.slice(i, (i + this.bytes_in_sequence)).toString();\n          i = i + this.bytes_in_sequence - 1;\n\n          this._parser.write(this.string);\n          this.emit(\"data\", this.string);\n          continue;\n        }\n      }\n\n      // is there a range of characters that are immediately parsable?\n      for (var p = i; p < data.length; p++) {\n        if (data[p] >= 128) break;\n      }\n      this.string = data.slice(i, p).toString();\n      this._parser.write(this.string);\n      this.emit(\"data\", this.string);\n      i = p - 1;\n\n      // handle any remaining characters using multibyte logic\n      continue;\n    }\n  };\n\n  CStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) this._parser.write(chunk.toString());\n    this._parser.end();\n    return true;\n  };\n\n  CStream.prototype.on = function (ev, handler) {\n    var me = this;\n    if (!me._parser[\"on\"+ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser[\"on\"+ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]]\n                 : Array.apply(null, arguments);\n        args.splice(0, 0, ev);\n        me.emit.apply(me, args);\n      };\n    }\n    return Stream.prototype.on.call(me, ev, handler);\n  };\n\n  CStream.prototype.destroy = function () {\n    clearBuffers(this._parser);\n    this.emit(\"close\");\n  };\n\n  function emit(parser, event, data) {\n    if(clarinet.INFO) console.log('-- emit', event, data);\n    if (parser[event]) parser[event](data);\n  }\n\n  function emitNode(parser, event, data) {\n    closeValue(parser);\n    emit(parser, event, data);\n  }\n\n  function closeValue(parser, event) {\n    parser.textNode = textopts(parser.opt, parser.textNode);\n    if (parser.textNode !== undefined) {\n      emit(parser, (event ? event : \"onvalue\"), parser.textNode);\n    }\n    parser.textNode = undefined;\n  }\n\n  function closeNumber(parser) {\n    if (parser.numberNode)\n      emit(parser, \"onvalue\", parseFloat(parser.numberNode));\n    parser.numberNode = \"\";\n  }\n\n  function textopts (opt, text) {\n    if (text === undefined) {\n      return text;\n    }\n    if (opt.trim) text = text.trim();\n    if (opt.normalize) text = text.replace(/\\s+/g, \" \");\n    return text;\n  }\n\n  function error (parser, er) {\n    closeValue(parser);\n    er += \"\\nLine: \"+parser.line+\n          \"\\nColumn: \"+parser.column+\n          \"\\nChar: \"+parser.c;\n    er = new Error(er);\n    parser.error = er;\n    emit(parser, \"onerror\", er);\n    return parser;\n  }\n\n  function end(parser) {\n    if (parser.state !== S.VALUE || parser.depth !== 0)\n      error(parser, \"Unexpected end\");\n\n    closeValue(parser);\n    parser.c      = \"\";\n    parser.closed = true;\n    emit(parser, \"onend\");\n    CParser.call(parser, parser.opt);\n    return parser;\n  }\n\n  function isWhitespace(c) {\n    return c === Char.carriageReturn || c === Char.lineFeed || c === Char.space || c === Char.tab;\n  }\n\n  function write (chunk) {\n    var parser = this;\n    if (this.error) throw this.error;\n    if (parser.closed) return error(parser,\n      \"Cannot write after close. Assign an onready handler.\");\n    if (chunk === null) return end(parser);\n    var i = 0, c = chunk.charCodeAt(0), p = parser.p;\n    if (clarinet.DEBUG) console.log('write -> [' + chunk + ']');\n    while (c) {\n      p = c;\n      parser.c = c = chunk.charCodeAt(i++);\n      // if chunk doesnt have next, like streaming char by char\n      // this way we need to check if previous is really previous\n      // if not we need to reset to what the parser says is the previous\n      // from buffer\n      if(p !== c ) parser.p = p;\n      else p = parser.p;\n\n      if(!c) break;\n\n      if (clarinet.DEBUG) console.log(i,c,clarinet.STATE[parser.state]);\n      parser.position ++;\n      if (c === Char.lineFeed) {\n        parser.line ++;\n        parser.column = 0;\n      } else parser.column ++;\n      switch (parser.state) {\n\n        case S.BEGIN:\n          if (c === Char.openBrace) parser.state = S.OPEN_OBJECT;\n          else if (c === Char.openBracket) parser.state = S.OPEN_ARRAY;\n          else if (!isWhitespace(c))\n            error(parser, \"Non-whitespace before {[.\");\n        continue;\n\n        case S.OPEN_KEY:\n        case S.OPEN_OBJECT:\n          if (isWhitespace(c)) continue;\n          if(parser.state === S.OPEN_KEY) parser.stack.push(S.CLOSE_KEY);\n          else {\n            if(c === Char.closeBrace) {\n              emit(parser, 'onopenobject');\n              this.depth++;\n              emit(parser, 'oncloseobject');\n              this.depth--;\n              parser.state = parser.stack.pop() || S.VALUE;\n              continue;\n            } else  parser.stack.push(S.CLOSE_OBJECT);\n          }\n          if(c === Char.doubleQuote) parser.state = S.STRING;\n          else error(parser, \"Malformed object key should start with \\\"\");\n        continue;\n\n        case S.CLOSE_KEY:\n        case S.CLOSE_OBJECT:\n          if (isWhitespace(c)) continue;\n          (parser.state === S.CLOSE_KEY) ? 'key' : 'object';\n          if(c === Char.colon) {\n            if(parser.state === S.CLOSE_OBJECT) {\n              parser.stack.push(S.CLOSE_OBJECT);\n              closeValue(parser, 'onopenobject');\n               this.depth++;\n            } else closeValue(parser, 'onkey');\n            parser.state  = S.VALUE;\n          } else if (c === Char.closeBrace) {\n            emitNode(parser, 'oncloseobject');\n            this.depth--;\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else if(c === Char.comma) {\n            if(parser.state === S.CLOSE_OBJECT)\n              parser.stack.push(S.CLOSE_OBJECT);\n            closeValue(parser);\n            parser.state  = S.OPEN_KEY;\n          } else error(parser, 'Bad object');\n        continue;\n\n        case S.OPEN_ARRAY: // after an array there always a value\n        case S.VALUE:\n          if (isWhitespace(c)) continue;\n          if(parser.state===S.OPEN_ARRAY) {\n            emit(parser, 'onopenarray');\n            this.depth++;\n            parser.state = S.VALUE;\n            if(c === Char.closeBracket) {\n              emit(parser, 'onclosearray');\n              this.depth--;\n              parser.state = parser.stack.pop() || S.VALUE;\n              continue;\n            } else {\n              parser.stack.push(S.CLOSE_ARRAY);\n            }\n          }\n               if(c === Char.doubleQuote) parser.state = S.STRING;\n          else if(c === Char.openBrace) parser.state = S.OPEN_OBJECT;\n          else if(c === Char.openBracket) parser.state = S.OPEN_ARRAY;\n          else if(c === Char.t) parser.state = S.TRUE;\n          else if(c === Char.f) parser.state = S.FALSE;\n          else if(c === Char.n) parser.state = S.NULL;\n          else if(c === Char.minus) { // keep and continue\n            parser.numberNode += \"-\";\n          } else if(Char._0 <= c && c <= Char._9) {\n            parser.numberNode += String.fromCharCode(c);\n            parser.state = S.NUMBER_DIGIT;\n          } else               error(parser, \"Bad value\");\n        continue;\n\n        case S.CLOSE_ARRAY:\n          if(c === Char.comma) {\n            parser.stack.push(S.CLOSE_ARRAY);\n            closeValue(parser, 'onvalue');\n            parser.state  = S.VALUE;\n          } else if (c === Char.closeBracket) {\n            emitNode(parser, 'onclosearray');\n            this.depth--;\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else if (isWhitespace(c))\n              continue;\n          else error(parser, 'Bad array');\n        continue;\n\n        case S.STRING:\n          if (parser.textNode === undefined) {\n            parser.textNode = \"\";\n          }\n\n          // thanks thejh, this is an about 50% performance improvement.\n          var starti              = i-1\n            , slashed = parser.slashed\n            , unicodeI = parser.unicodeI\n            ;\n          STRING_BIGLOOP: while (true) {\n            if (clarinet.DEBUG)\n              console.log(i,c,clarinet.STATE[parser.state]\n                         ,slashed);\n            // zero means \"no unicode active\". 1-4 mean \"parse some more\". end after 4.\n            while (unicodeI > 0) {\n              parser.unicodeS += String.fromCharCode(c);\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              if (unicodeI === 4) {\n                // TODO this might be slow? well, probably not used too often anyway\n                parser.textNode += String.fromCharCode(parseInt(parser.unicodeS, 16));\n                unicodeI = 0;\n                starti = i-1;\n              } else {\n                unicodeI++;\n              }\n              // we can just break here: no stuff we skipped that still has to be sliced out or so\n              if (!c) break STRING_BIGLOOP;\n            }\n            if (c === Char.doubleQuote && !slashed) {\n              parser.state = parser.stack.pop() || S.VALUE;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n            if (c === Char.backslash && !slashed) {\n              slashed = true;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              if (!c) break;\n            }\n            if (slashed) {\n              slashed = false;\n                   if (c === Char.n) { parser.textNode += '\\n'; }\n              else if (c === Char.r) { parser.textNode += '\\r'; }\n              else if (c === Char.t) { parser.textNode += '\\t'; }\n              else if (c === Char.f) { parser.textNode += '\\f'; }\n              else if (c === Char.b) { parser.textNode += '\\b'; }\n              else if (c === Char.u) {\n                // \\uxxxx. meh!\n                unicodeI = 1;\n                parser.unicodeS = '';\n              } else {\n                parser.textNode += String.fromCharCode(c);\n              }\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              starti = i-1;\n              if (!c) break;\n              else continue;\n            }\n\n            stringTokenPattern.lastIndex = i;\n            var reResult = stringTokenPattern.exec(chunk);\n            if (reResult === null) {\n              i = chunk.length+1;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n            i = reResult.index+1;\n            c = chunk.charCodeAt(reResult.index);\n            if (!c) {\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n          }\n          parser.slashed = slashed;\n          parser.unicodeI = unicodeI;\n        continue;\n\n        case S.TRUE:\n          if (c === Char.r) parser.state = S.TRUE2;\n          else error(parser, 'Invalid true started with t'+ c);\n        continue;\n\n        case S.TRUE2:\n          if (c === Char.u) parser.state = S.TRUE3;\n          else error(parser, 'Invalid true started with tr'+ c);\n        continue;\n\n        case S.TRUE3:\n          if(c === Char.e) {\n            emit(parser, \"onvalue\", true);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid true started with tru'+ c);\n        continue;\n\n        case S.FALSE:\n          if (c === Char.a) parser.state = S.FALSE2;\n          else error(parser, 'Invalid false started with f'+ c);\n        continue;\n\n        case S.FALSE2:\n          if (c === Char.l) parser.state = S.FALSE3;\n          else error(parser, 'Invalid false started with fa'+ c);\n        continue;\n\n        case S.FALSE3:\n          if (c === Char.s) parser.state = S.FALSE4;\n          else error(parser, 'Invalid false started with fal'+ c);\n        continue;\n\n        case S.FALSE4:\n          if (c === Char.e) {\n            emit(parser, \"onvalue\", false);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid false started with fals'+ c);\n        continue;\n\n        case S.NULL:\n          if (c === Char.u) parser.state = S.NULL2;\n          else error(parser, 'Invalid null started with n'+ c);\n        continue;\n\n        case S.NULL2:\n          if (c === Char.l) parser.state = S.NULL3;\n          else error(parser, 'Invalid null started with nu'+ c);\n        continue;\n\n        case S.NULL3:\n          if(c === Char.l) {\n            emit(parser, \"onvalue\", null);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid null started with nul'+ c);\n        continue;\n\n        case S.NUMBER_DECIMAL_POINT:\n          if(c === Char.period) {\n            parser.numberNode += \".\";\n            parser.state       = S.NUMBER_DIGIT;\n          } else error(parser, 'Leading zero not followed by .');\n        continue;\n\n        case S.NUMBER_DIGIT:\n          if(Char._0 <= c && c <= Char._9) parser.numberNode += String.fromCharCode(c);\n          else if (c === Char.period) {\n            if(parser.numberNode.indexOf('.')!==-1)\n              error(parser, 'Invalid number has two dots');\n            parser.numberNode += \".\";\n          } else if (c === Char.e || c === Char.E) {\n            if(parser.numberNode.indexOf('e')!==-1 ||\n               parser.numberNode.indexOf('E')!==-1 )\n               error(parser, 'Invalid number has two exponential');\n            parser.numberNode += \"e\";\n          } else if (c === Char.plus || c === Char.minus) {\n            if(!(p === Char.e || p === Char.E))\n              error(parser, 'Invalid symbol in number');\n            parser.numberNode += String.fromCharCode(c);\n          } else {\n            closeNumber(parser);\n            i--; // go back one\n            parser.state = parser.stack.pop() || S.VALUE;\n          }\n        continue;\n\n        default:\n          error(parser, \"Unknown state: \" + parser.state);\n      }\n    }\n    if (parser.position >= parser.bufferCheckPosition)\n      checkBufferLength(parser);\n    return parser;\n  }\n\n})(exports);\n});\n\nfunction JsonStream(blob) {\n    var pos = 0;\n    var parser = JsonParser(true);\n    var rv = {\n        pullAsync: function (numBytes) {\n            return __awaiter(this, void 0, void 0, function () {\n                var slize, jsonPart, result;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            slize = blob.slice(pos, pos + numBytes);\n                            pos += numBytes;\n                            return [4 /*yield*/, readBlobAsync(slize, 'text')];\n                        case 1:\n                            jsonPart = _a.sent();\n                            result = parser.write(jsonPart);\n                            rv.result = result || {};\n                            return [2 /*return*/, result];\n                    }\n                });\n            });\n        },\n        pullSync: function (numBytes) {\n            var slize = blob.slice(pos, pos + numBytes);\n            pos += numBytes;\n            var jsonPart = readBlobSync(slize, 'text');\n            var result = parser.write(jsonPart);\n            rv.result = result || {};\n            return result;\n        },\n        done: function () {\n            return parser.done();\n        },\n        eof: function () {\n            return pos >= blob.size;\n        },\n        result: {}\n    };\n    return rv;\n}\nfunction JsonParser(allowPartial) {\n    var parser = clarinet_1.parser();\n    var level = 0;\n    var result;\n    var stack = [];\n    var obj;\n    var key;\n    var done = false;\n    var array = false;\n    parser.onopenobject = function (newKey) {\n        var newObj = {};\n        newObj.incomplete = true;\n        if (!result)\n            result = newObj;\n        if (obj) {\n            stack.push([key, obj, array]);\n            if (allowPartial) {\n                if (array) {\n                    obj.push(newObj);\n                }\n                else {\n                    obj[key] = newObj;\n                }\n            }\n        }\n        obj = newObj;\n        key = newKey;\n        array = false;\n        ++level;\n    };\n    parser.onkey = function (newKey) { return key = newKey; };\n    parser.onvalue = function (value) { return array ? obj.push(value) : obj[key] = value; };\n    parser.oncloseobject = function () {\n        var _a;\n        delete obj.incomplete;\n        key = null;\n        if (--level === 0) {\n            done = true;\n        }\n        else {\n            var completedObj = obj;\n            _a = stack.pop(), key = _a[0], obj = _a[1], array = _a[2];\n            if (!allowPartial) {\n                if (array) {\n                    obj.push(completedObj);\n                }\n                else {\n                    obj[key] = completedObj;\n                }\n            }\n        }\n    };\n    parser.onopenarray = function () {\n        var newObj = [];\n        newObj.incomplete = true;\n        if (!result)\n            result = newObj;\n        if (obj) {\n            stack.push([key, obj, array]);\n            if (allowPartial) {\n                if (array) {\n                    obj.push(newObj);\n                }\n                else {\n                    obj[key] = newObj;\n                }\n            }\n        }\n        obj = newObj;\n        array = true;\n        key = null;\n        ++level;\n    };\n    parser.onclosearray = function () {\n        var _a;\n        delete obj.incomplete;\n        key = null;\n        if (--level === 0) {\n            done = true;\n        }\n        else {\n            var completedObj = obj;\n            _a = stack.pop(), key = _a[0], obj = _a[1], array = _a[2];\n            if (!allowPartial) {\n                if (array) {\n                    obj.push(completedObj);\n                }\n                else {\n                    obj[key] = completedObj;\n                }\n            }\n        }\n    };\n    return {\n        write: function (jsonPart) {\n            parser.write(jsonPart);\n            return result;\n        },\n        done: function () {\n            return done;\n        }\n    };\n}\n\nvar DEFAULT_KILOBYTES_PER_CHUNK = 1024;\nfunction importDB(exportedData, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var CHUNK_SIZE, stream, dbExport, db;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {}; // All booleans defaults to false.\n                    CHUNK_SIZE = options.chunkSizeBytes || (DEFAULT_KILOBYTES_PER_CHUNK * 1024);\n                    return [4 /*yield*/, loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE)];\n                case 1:\n                    stream = _a.sent();\n                    dbExport = stream.result.data;\n                    db = new Dexie(dbExport.databaseName);\n                    db.version(dbExport.databaseVersion).stores(extractDbSchema(dbExport));\n                    return [4 /*yield*/, importInto(db, stream, options)];\n                case 2:\n                    _a.sent();\n                    return [2 /*return*/, db];\n            }\n        });\n    });\n}\nfunction peakImportFile(exportedData) {\n    return __awaiter(this, void 0, void 0, function () {\n        var stream;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    stream = JsonStream(exportedData);\n                    _a.label = 1;\n                case 1:\n                    if (!!stream.eof()) return [3 /*break*/, 3];\n                    return [4 /*yield*/, stream.pullAsync(5 * 1024)];\n                case 2:\n                    _a.sent(); // 5 k is normally enough for the headers. If not, it will just do another go.\n                    if (stream.result.data && stream.result.data.data) {\n                        // @ts-ignore - TS won't allow us to delete a required property - but we are going to cast it.\n                        delete stream.result.data.data; // Don't return half-baked data array.\n                        return [3 /*break*/, 3];\n                    }\n                    return [3 /*break*/, 1];\n                case 3: return [2 /*return*/, stream.result];\n            }\n        });\n    });\n}\nfunction importInto(db, exportedData, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        function importAll() {\n            return __awaiter(this, void 0, void 0, function () {\n                var _loop_1, _i, _a, tableExport, state_1;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _loop_1 = function (tableExport) {\n                                var tableName, table, tableSchemaStr, sourceRows, rows, i, obj, filter, filteredRows, _c, keys, values;\n                                return __generator(this, function (_d) {\n                                    switch (_d.label) {\n                                        case 0:\n                                            if (!tableExport.rows)\n                                                return [2 /*return*/, \"break\"]; // Need to pull more!\n                                            if (!tableExport.rows.incomplete && tableExport.rows.length === 0)\n                                                return [2 /*return*/, \"continue\"];\n                                            if (progressCallback) {\n                                                // Keep ongoing transaction private\n                                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                                            }\n                                            tableName = tableExport.tableName;\n                                            table = db.table(tableName);\n                                            tableSchemaStr = dbExport.tables.filter(function (t) { return t.name === tableName; })[0].schema;\n                                            if (!table) {\n                                                if (!options.acceptMissingTables)\n                                                    throw new Error(\"Exported table \" + tableExport.tableName + \" is missing in installed database\");\n                                                else\n                                                    return [2 /*return*/, \"continue\"];\n                                            }\n                                            if (!options.acceptChangedPrimaryKey &&\n                                                tableSchemaStr.split(',')[0] != table.schema.primKey.src) {\n                                                throw new Error(\"Primary key differs for table \" + tableExport.tableName + \". \");\n                                            }\n                                            sourceRows = tableExport.rows;\n                                            rows = [];\n                                            for (i = 0; i < sourceRows.length; i++) {\n                                                obj = sourceRows[i];\n                                                if (!obj.incomplete) {\n                                                    rows.push(TSON.revive(obj));\n                                                }\n                                                else {\n                                                    break;\n                                                }\n                                            }\n                                            filter = options.filter;\n                                            filteredRows = filter ?\n                                                tableExport.inbound ?\n                                                    rows.filter(function (value) { return filter(tableName, value); }) :\n                                                    rows.filter(function (_a) {\n                                                        var key = _a[0], value = _a[1];\n                                                        return filter(tableName, value, key);\n                                                    }) :\n                                                rows;\n                                            _c = tableExport.inbound ?\n                                                [undefined, filteredRows] :\n                                                [filteredRows.map(function (row) { return row[0]; }), rows.map(function (row) { return row[1]; })], keys = _c[0], values = _c[1];\n                                            if (!options.overwriteValues) return [3 /*break*/, 2];\n                                            return [4 /*yield*/, table.bulkPut(values, keys)];\n                                        case 1:\n                                            _d.sent();\n                                            return [3 /*break*/, 4];\n                                        case 2: return [4 /*yield*/, table.bulkAdd(values, keys)];\n                                        case 3:\n                                            _d.sent();\n                                            _d.label = 4;\n                                        case 4:\n                                            progress.completedRows += rows.length;\n                                            if (!rows.incomplete) {\n                                                progress.completedTables += 1;\n                                            }\n                                            sourceRows.splice(0, rows.length); // Free up RAM, keep existing array instance.\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            };\n                            _i = 0, _a = dbExport.data;\n                            _b.label = 1;\n                        case 1:\n                            if (!(_i < _a.length)) return [3 /*break*/, 4];\n                            tableExport = _a[_i];\n                            return [5 /*yield**/, _loop_1(tableExport)];\n                        case 2:\n                            state_1 = _b.sent();\n                            if (state_1 === \"break\")\n                                return [3 /*break*/, 4];\n                            _b.label = 3;\n                        case 3:\n                            _i++;\n                            return [3 /*break*/, 1];\n                        case 4:\n                            // Avoid unnescessary loops in \"for (const tableExport of dbExport.data)\" \n                            while (dbExport.data.length > 0 && dbExport.data[0].rows && !dbExport.data[0].rows.incomplete) {\n                                // We've already imported all rows from the first table. Delete its occurrence\n                                dbExport.data.splice(0, 1);\n                            }\n                            if (!(!jsonStream.done() && !jsonStream.eof())) return [3 /*break*/, 8];\n                            if (!readBlobsSynchronously) return [3 /*break*/, 5];\n                            // If we can pull from blob synchronically, we don't have to\n                            // keep transaction alive using Dexie.waitFor().\n                            // This will only be possible in workers.\n                            jsonStream.pullSync(CHUNK_SIZE);\n                            return [3 /*break*/, 7];\n                        case 5: return [4 /*yield*/, Dexie.waitFor(jsonStream.pullAsync(CHUNK_SIZE))];\n                        case 6:\n                            _b.sent();\n                            _b.label = 7;\n                        case 7: return [3 /*break*/, 9];\n                        case 8: return [3 /*break*/, 10];\n                        case 9:\n                            return [3 /*break*/, 0];\n                        case 10: return [2 /*return*/];\n                    }\n                });\n            });\n        }\n        var CHUNK_SIZE, jsonStream, dbExportFile, readBlobsSynchronously, dbExport, progressCallback, progress, _i, _a, table;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    options = options || {}; // All booleans defaults to false.\n                    CHUNK_SIZE = options.chunkSizeBytes || (DEFAULT_KILOBYTES_PER_CHUNK * 1024);\n                    return [4 /*yield*/, loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE)];\n                case 1:\n                    jsonStream = _b.sent();\n                    dbExportFile = jsonStream.result;\n                    readBlobsSynchronously = 'FileReaderSync' in self;\n                    dbExport = dbExportFile.data;\n                    if (!options.acceptNameDiff && db.name !== dbExport.databaseName)\n                        throw new Error(\"Name differs. Current database name is \" + db.name + \" but export is \" + dbExport.databaseName);\n                    if (!options.acceptVersionDiff && db.verno !== dbExport.databaseVersion) {\n                        // Possible feature: Call upgraders in some isolated way if this happens... ?\n                        throw new Error(\"Database version differs. Current database is in version \" + db.verno + \" but export is \" + dbExport.databaseVersion);\n                    }\n                    progressCallback = options.progressCallback;\n                    progress = {\n                        done: false,\n                        completedRows: 0,\n                        completedTables: 0,\n                        totalRows: dbExport.tables.reduce(function (p, c) { return p + c.rowCount; }, 0),\n                        totalTables: dbExport.tables.length\n                    };\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    if (!options.clearTablesBeforeImport) return [3 /*break*/, 5];\n                    _i = 0, _a = db.tables;\n                    _b.label = 2;\n                case 2:\n                    if (!(_i < _a.length)) return [3 /*break*/, 5];\n                    table = _a[_i];\n                    return [4 /*yield*/, table.clear()];\n                case 3:\n                    _b.sent();\n                    _b.label = 4;\n                case 4:\n                    _i++;\n                    return [3 /*break*/, 2];\n                case 5:\n                    if (!options.noTransaction) return [3 /*break*/, 7];\n                    return [4 /*yield*/, importAll()];\n                case 6:\n                    _b.sent();\n                    return [3 /*break*/, 9];\n                case 7: return [4 /*yield*/, db.transaction('rw', db.tables, importAll)];\n                case 8:\n                    _b.sent();\n                    _b.label = 9;\n                case 9:\n                    progress.done = true;\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE) {\n    return __awaiter(this, void 0, void 0, function () {\n        var stream, dbExportFile;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    stream = ('slice' in exportedData ?\n                        JsonStream(exportedData) :\n                        exportedData);\n                    _a.label = 1;\n                case 1:\n                    if (!!stream.eof()) return [3 /*break*/, 3];\n                    return [4 /*yield*/, stream.pullAsync(CHUNK_SIZE)];\n                case 2:\n                    _a.sent();\n                    if (stream.result.data && stream.result.data.data)\n                        return [3 /*break*/, 3];\n                    return [3 /*break*/, 1];\n                case 3:\n                    dbExportFile = stream.result;\n                    if (!dbExportFile || dbExportFile.formatName != \"dexie\")\n                        throw new Error(\"Given file is not a dexie export\");\n                    if (dbExportFile.formatVersion > VERSION) {\n                        throw new Error(\"Format version \" + dbExportFile.formatVersion + \" not supported\");\n                    }\n                    if (!dbExportFile.data) {\n                        throw new Error(\"No data in export file\");\n                    }\n                    if (!dbExportFile.data.databaseName) {\n                        throw new Error(\"Missing databaseName in export file\");\n                    }\n                    if (!dbExportFile.data.databaseVersion) {\n                        throw new Error(\"Missing databaseVersion in export file\");\n                    }\n                    if (!dbExportFile.data.tables) {\n                        throw new Error(\"Missing tables in export file\");\n                    }\n                    return [2 /*return*/, stream];\n            }\n        });\n    });\n}\n\n//\n// Extend Dexie interface (runtime wise)\n//\nDexie.prototype.export = function (options) {\n    return exportDB(this, options);\n};\nDexie.prototype.import = function (blob, options) {\n    return importInto(this, blob, options);\n};\nDexie.import = function (blob, options) { return importDB(blob, options); };\nvar dexieExportImport = (function () {\n    throw new Error(\"This addon extends Dexie.prototype globally and does not have be included in Dexie constructor's addons options.\");\n});\n\nexport default dexieExportImport;\nexport { exportDB, importDB, importInto, peakImportFile };\n//# sourceMappingURL=dexie-export-import.mjs.map\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.1, Wed Feb 16 2022\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Dexie = factory());\n})(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var _global = typeof globalThis !== 'undefined' ? globalThis :\n        typeof self !== 'undefined' ? self :\n            typeof window !== 'undefined' ? window :\n                global;\n\n    var keys = Object.keys;\n    var isArray = Array.isArray;\n    if (typeof Promise !== 'undefined' && !_global.Promise) {\n        _global.Promise = Promise;\n    }\n    function extend(obj, extension) {\n        if (typeof extension !== 'object')\n            return obj;\n        keys(extension).forEach(function (key) {\n            obj[key] = extension[key];\n        });\n        return obj;\n    }\n    var getProto = Object.getPrototypeOf;\n    var _hasOwn = {}.hasOwnProperty;\n    function hasOwn(obj, prop) {\n        return _hasOwn.call(obj, prop);\n    }\n    function props(proto, extension) {\n        if (typeof extension === 'function')\n            extension = extension(getProto(proto));\n        (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n            setProp(proto, key, extension[key]);\n        });\n    }\n    var defineProperty = Object.defineProperty;\n    function setProp(obj, prop, functionOrGetSet, options) {\n        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n            { value: functionOrGetSet, configurable: true, writable: true }, options));\n    }\n    function derive(Child) {\n        return {\n            from: function (Parent) {\n                Child.prototype = Object.create(Parent.prototype);\n                setProp(Child.prototype, \"constructor\", Child);\n                return {\n                    extend: props.bind(null, Child.prototype)\n                };\n            }\n        };\n    }\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    function getPropertyDescriptor(obj, prop) {\n        var pd = getOwnPropertyDescriptor(obj, prop);\n        var proto;\n        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n    }\n    var _slice = [].slice;\n    function slice(args, start, end) {\n        return _slice.call(args, start, end);\n    }\n    function override(origFunc, overridedFactory) {\n        return overridedFactory(origFunc);\n    }\n    function assert(b) {\n        if (!b)\n            throw new Error(\"Assertion Failed\");\n    }\n    function asap$1(fn) {\n        if (_global.setImmediate)\n            setImmediate(fn);\n        else\n            setTimeout(fn, 0);\n    }\n    function arrayToObject(array, extractor) {\n        return array.reduce(function (result, item, i) {\n            var nameAndValue = extractor(item, i);\n            if (nameAndValue)\n                result[nameAndValue[0]] = nameAndValue[1];\n            return result;\n        }, {});\n    }\n    function tryCatch(fn, onerror, args) {\n        try {\n            fn.apply(null, args);\n        }\n        catch (ex) {\n            onerror && onerror(ex);\n        }\n    }\n    function getByKeyPath(obj, keyPath) {\n        if (hasOwn(obj, keyPath))\n            return obj[keyPath];\n        if (!keyPath)\n            return obj;\n        if (typeof keyPath !== 'string') {\n            var rv = [];\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                var val = getByKeyPath(obj, keyPath[i]);\n                rv.push(val);\n            }\n            return rv;\n        }\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var innerObj = obj[keyPath.substr(0, period)];\n            return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n        }\n        return undefined;\n    }\n    function setByKeyPath(obj, keyPath, value) {\n        if (!obj || keyPath === undefined)\n            return;\n        if ('isFrozen' in Object && Object.isFrozen(obj))\n            return;\n        if (typeof keyPath !== 'string' && 'length' in keyPath) {\n            assert(typeof value !== 'string' && 'length' in value);\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                setByKeyPath(obj, keyPath[i], value[i]);\n            }\n        }\n        else {\n            var period = keyPath.indexOf('.');\n            if (period !== -1) {\n                var currentKeyPath = keyPath.substr(0, period);\n                var remainingKeyPath = keyPath.substr(period + 1);\n                if (remainingKeyPath === \"\")\n                    if (value === undefined) {\n                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                            obj.splice(currentKeyPath, 1);\n                        else\n                            delete obj[currentKeyPath];\n                    }\n                    else\n                        obj[currentKeyPath] = value;\n                else {\n                    var innerObj = obj[currentKeyPath];\n                    if (!innerObj)\n                        innerObj = (obj[currentKeyPath] = {});\n                    setByKeyPath(innerObj, remainingKeyPath, value);\n                }\n            }\n            else {\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                        obj.splice(keyPath, 1);\n                    else\n                        delete obj[keyPath];\n                }\n                else\n                    obj[keyPath] = value;\n            }\n        }\n    }\n    function delByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string')\n            setByKeyPath(obj, keyPath, undefined);\n        else if ('length' in keyPath)\n            [].map.call(keyPath, function (kp) {\n                setByKeyPath(obj, kp, undefined);\n            });\n    }\n    function shallowClone(obj) {\n        var rv = {};\n        for (var m in obj) {\n            if (hasOwn(obj, m))\n                rv[m] = obj[m];\n        }\n        return rv;\n    }\n    var concat = [].concat;\n    function flatten(a) {\n        return concat.apply([], a);\n    }\n    var intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\n    var intrinsicTypes = intrinsicTypeNames.map(function (t) { return _global[t]; });\n    arrayToObject(intrinsicTypeNames, function (x) { return [x, true]; });\n    var circularRefs = null;\n    function deepClone(any) {\n        circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n        var rv = innerDeepClone(any);\n        circularRefs = null;\n        return rv;\n    }\n    function innerDeepClone(any) {\n        if (!any || typeof any !== 'object')\n            return any;\n        var rv = circularRefs && circularRefs.get(any);\n        if (rv)\n            return rv;\n        if (isArray(any)) {\n            rv = [];\n            circularRefs && circularRefs.set(any, rv);\n            for (var i = 0, l = any.length; i < l; ++i) {\n                rv.push(innerDeepClone(any[i]));\n            }\n        }\n        else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n            rv = any;\n        }\n        else {\n            var proto = getProto(any);\n            rv = proto === Object.prototype ? {} : Object.create(proto);\n            circularRefs && circularRefs.set(any, rv);\n            for (var prop in any) {\n                if (hasOwn(any, prop)) {\n                    rv[prop] = innerDeepClone(any[prop]);\n                }\n            }\n        }\n        return rv;\n    }\n    var toString = {}.toString;\n    function toStringTag(o) {\n        return toString.call(o).slice(8, -1);\n    }\n    var iteratorSymbol = typeof Symbol !== 'undefined' ?\n        Symbol.iterator :\n        '@@iterator';\n    var getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n        var i;\n        return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n    } : function () { return null; };\n    var NO_CHAR_ARRAY = {};\n    function getArrayOf(arrayLike) {\n        var i, a, x, it;\n        if (arguments.length === 1) {\n            if (isArray(arrayLike))\n                return arrayLike.slice();\n            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n                return [arrayLike];\n            if ((it = getIteratorOf(arrayLike))) {\n                a = [];\n                while ((x = it.next()), !x.done)\n                    a.push(x.value);\n                return a;\n            }\n            if (arrayLike == null)\n                return [arrayLike];\n            i = arrayLike.length;\n            if (typeof i === 'number') {\n                a = new Array(i);\n                while (i--)\n                    a[i] = arrayLike[i];\n                return a;\n            }\n            return [arrayLike];\n        }\n        i = arguments.length;\n        a = new Array(i);\n        while (i--)\n            a[i] = arguments[i];\n        return a;\n    }\n    var isAsyncFunction = typeof Symbol !== 'undefined'\n        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n        : function () { return false; };\n\n    var debug = typeof location !== 'undefined' &&\n        /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n    function setDebug(value, filter) {\n        debug = value;\n        libraryFilter = filter;\n    }\n    var libraryFilter = function () { return true; };\n    var NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\n    function getErrorWithStack() {\n        if (NEEDS_THROW_FOR_STACK)\n            try {\n                getErrorWithStack.arguments;\n                throw new Error();\n            }\n            catch (e) {\n                return e;\n            }\n        return new Error();\n    }\n    function prettyStack(exception, numIgnoredFrames) {\n        var stack = exception.stack;\n        if (!stack)\n            return \"\";\n        numIgnoredFrames = (numIgnoredFrames || 0);\n        if (stack.indexOf(exception.name) === 0)\n            numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n        return stack.split('\\n')\n            .slice(numIgnoredFrames)\n            .filter(libraryFilter)\n            .map(function (frame) { return \"\\n\" + frame; })\n            .join('');\n    }\n\n    var dexieErrorNames = [\n        'Modify',\n        'Bulk',\n        'OpenFailed',\n        'VersionChange',\n        'Schema',\n        'Upgrade',\n        'InvalidTable',\n        'MissingAPI',\n        'NoSuchDatabase',\n        'InvalidArgument',\n        'SubTransaction',\n        'Unsupported',\n        'Internal',\n        'DatabaseClosed',\n        'PrematureCommit',\n        'ForeignAwait'\n    ];\n    var idbDomErrorNames = [\n        'Unknown',\n        'Constraint',\n        'Data',\n        'TransactionInactive',\n        'ReadOnly',\n        'Version',\n        'NotFound',\n        'InvalidState',\n        'InvalidAccess',\n        'Abort',\n        'Timeout',\n        'QuotaExceeded',\n        'Syntax',\n        'DataClone'\n    ];\n    var errorList = dexieErrorNames.concat(idbDomErrorNames);\n    var defaultTexts = {\n        VersionChanged: \"Database version changed by other database connection\",\n        DatabaseClosed: \"Database has been closed\",\n        Abort: \"Transaction aborted\",\n        TransactionInactive: \"Transaction has already completed or failed\",\n        MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n    function DexieError(name, msg) {\n        this._e = getErrorWithStack();\n        this.name = name;\n        this.message = msg;\n    }\n    derive(DexieError).from(Error).extend({\n        stack: {\n            get: function () {\n                return this._stack ||\n                    (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n            }\n        },\n        toString: function () { return this.name + \": \" + this.message; }\n    });\n    function getMultiErrorMessage(msg, failures) {\n        return msg + \". Errors: \" + Object.keys(failures)\n            .map(function (key) { return failures[key].toString(); })\n            .filter(function (v, i, s) { return s.indexOf(v) === i; })\n            .join('\\n');\n    }\n    function ModifyError(msg, failures, successCount, failedKeys) {\n        this._e = getErrorWithStack();\n        this.failures = failures;\n        this.failedKeys = failedKeys;\n        this.successCount = successCount;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(ModifyError).from(DexieError);\n    function BulkError(msg, failures) {\n        this._e = getErrorWithStack();\n        this.name = \"BulkError\";\n        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n        this.failuresByPos = failures;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(BulkError).from(DexieError);\n    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\n    var BaseException = DexieError;\n    var exceptions = errorList.reduce(function (obj, name) {\n        var fullName = name + \"Error\";\n        function DexieError(msgOrInner, inner) {\n            this._e = getErrorWithStack();\n            this.name = fullName;\n            if (!msgOrInner) {\n                this.message = defaultTexts[name] || fullName;\n                this.inner = null;\n            }\n            else if (typeof msgOrInner === 'string') {\n                this.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n                this.inner = inner || null;\n            }\n            else if (typeof msgOrInner === 'object') {\n                this.message = msgOrInner.name + \" \" + msgOrInner.message;\n                this.inner = msgOrInner;\n            }\n        }\n        derive(DexieError).from(BaseException);\n        obj[name] = DexieError;\n        return obj;\n    }, {});\n    exceptions.Syntax = SyntaxError;\n    exceptions.Type = TypeError;\n    exceptions.Range = RangeError;\n    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n        obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    function mapError(domError, message) {\n        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n            return domError;\n        var rv = new exceptionMap[domError.name](message || domError.message, domError);\n        if (\"stack\" in domError) {\n            setProp(rv, \"stack\", { get: function () {\n                    return this.inner.stack;\n                } });\n        }\n        return rv;\n    }\n    var fullNameExceptions = errorList.reduce(function (obj, name) {\n        if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n            obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    fullNameExceptions.ModifyError = ModifyError;\n    fullNameExceptions.DexieError = DexieError;\n    fullNameExceptions.BulkError = BulkError;\n\n    function nop() { }\n    function mirror(val) { return val; }\n    function pureFunctionChain(f1, f2) {\n        if (f1 == null || f1 === mirror)\n            return f2;\n        return function (val) {\n            return f2(f1(val));\n        };\n    }\n    function callBoth(on1, on2) {\n        return function () {\n            on1.apply(this, arguments);\n            on2.apply(this, arguments);\n        };\n    }\n    function hookCreatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res !== undefined)\n                arguments[0] = res;\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res2 !== undefined ? res2 : res;\n        };\n    }\n    function hookDeletingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            f1.apply(this, arguments);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = this.onerror = null;\n            f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        };\n    }\n    function hookUpdatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function (modifications) {\n            var res = f1.apply(this, arguments);\n            extend(modifications, res);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res === undefined ?\n                (res2 === undefined ? undefined : res2) :\n                (extend(res, res2));\n        };\n    }\n    function reverseStoppableEventChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            if (f2.apply(this, arguments) === false)\n                return false;\n            return f1.apply(this, arguments);\n        };\n    }\n    function promisableChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res && typeof res.then === 'function') {\n                var thiz = this, i = arguments.length, args = new Array(i);\n                while (i--)\n                    args[i] = arguments[i];\n                return res.then(function () {\n                    return f2.apply(thiz, args);\n                });\n            }\n            return f2.apply(this, arguments);\n        };\n    }\n\n    var INTERNAL = {};\n    var LONG_STACKS_CLIP_LIMIT = 100,\n    MAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n        [] :\n        (function () {\n            var globalP = Promise.resolve();\n            if (typeof crypto === 'undefined' || !crypto.subtle)\n                return [globalP, getProto(globalP), globalP];\n            var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n            return [\n                nativeP,\n                getProto(nativeP),\n                globalP\n            ];\n        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\n    var patchGlobalPromise = !!resolvedGlobalPromise;\n    var stack_being_generated = false;\n    var schedulePhysicalTick = resolvedGlobalPromise ?\n        function () { resolvedGlobalPromise.then(physicalTick); }\n        :\n            _global.setImmediate ?\n                setImmediate.bind(null, physicalTick) :\n                _global.MutationObserver ?\n                    function () {\n                        var hiddenDiv = document.createElement(\"div\");\n                        (new MutationObserver(function () {\n                            physicalTick();\n                            hiddenDiv = null;\n                        })).observe(hiddenDiv, { attributes: true });\n                        hiddenDiv.setAttribute('i', '1');\n                    } :\n                    function () { setTimeout(physicalTick, 0); };\n    var asap = function (callback, args) {\n        microtickQueue.push([callback, args]);\n        if (needsNewPhysicalTick) {\n            schedulePhysicalTick();\n            needsNewPhysicalTick = false;\n        }\n    };\n    var isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    currentFulfiller = null, rejectionMapper = mirror;\n    var globalPSD = {\n        id: 'global',\n        global: true,\n        ref: 0,\n        unhandleds: [],\n        onunhandled: globalError,\n        pgp: false,\n        env: {},\n        finalize: function () {\n            this.unhandleds.forEach(function (uh) {\n                try {\n                    globalError(uh[0], uh[1]);\n                }\n                catch (e) { }\n            });\n        }\n    };\n    var PSD = globalPSD;\n    var microtickQueue = [];\n    var numScheduledCalls = 0;\n    var tickFinalizers = [];\n    function DexiePromise(fn) {\n        if (typeof this !== 'object')\n            throw new TypeError('Promises must be constructed via new');\n        this._listeners = [];\n        this.onuncatched = nop;\n        this._lib = false;\n        var psd = (this._PSD = PSD);\n        if (debug) {\n            this._stackHolder = getErrorWithStack();\n            this._prev = null;\n            this._numPrev = 0;\n        }\n        if (typeof fn !== 'function') {\n            if (fn !== INTERNAL)\n                throw new TypeError('Not a function');\n            this._state = arguments[1];\n            this._value = arguments[2];\n            if (this._state === false)\n                handleRejection(this, this._value);\n            return;\n        }\n        this._state = null;\n        this._value = null;\n        ++psd.ref;\n        executePromiseTask(this, fn);\n    }\n    var thenProp = {\n        get: function () {\n            var psd = PSD, microTaskId = totalEchoes;\n            function then(onFulfilled, onRejected) {\n                var _this = this;\n                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n                var cleanup = possibleAwait && !decrementExpectedAwaits();\n                var rv = new DexiePromise(function (resolve, reject) {\n                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n                });\n                debug && linkToPreviousPromise(rv, this);\n                return rv;\n            }\n            then.prototype = INTERNAL;\n            return then;\n        },\n        set: function (value) {\n            setProp(this, 'then', value && value.prototype === INTERNAL ?\n                thenProp :\n                {\n                    get: function () {\n                        return value;\n                    },\n                    set: thenProp.set\n                });\n        }\n    };\n    props(DexiePromise.prototype, {\n        then: thenProp,\n        _then: function (onFulfilled, onRejected) {\n            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n        },\n        catch: function (onRejected) {\n            if (arguments.length === 1)\n                return this.then(null, onRejected);\n            var type = arguments[0], handler = arguments[1];\n            return typeof type === 'function' ? this.then(null, function (err) {\n                return err instanceof type ? handler(err) : PromiseReject(err);\n            })\n                : this.then(null, function (err) {\n                    return err && err.name === type ? handler(err) : PromiseReject(err);\n                });\n        },\n        finally: function (onFinally) {\n            return this.then(function (value) {\n                onFinally();\n                return value;\n            }, function (err) {\n                onFinally();\n                return PromiseReject(err);\n            });\n        },\n        stack: {\n            get: function () {\n                if (this._stack)\n                    return this._stack;\n                try {\n                    stack_being_generated = true;\n                    var stacks = getStack(this, [], MAX_LONG_STACKS);\n                    var stack = stacks.join(\"\\nFrom previous: \");\n                    if (this._state !== null)\n                        this._stack = stack;\n                    return stack;\n                }\n                finally {\n                    stack_being_generated = false;\n                }\n            }\n        },\n        timeout: function (ms, msg) {\n            var _this = this;\n            return ms < Infinity ?\n                new DexiePromise(function (resolve, reject) {\n                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n                }) : this;\n        }\n    });\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\n    globalPSD.env = snapShot();\n    function Listener(onFulfilled, onRejected, resolve, reject, zone) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.psd = zone;\n    }\n    props(DexiePromise, {\n        all: function () {\n            var values = getArrayOf.apply(null, arguments)\n                .map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (values.length === 0)\n                    resolve([]);\n                var remaining = values.length;\n                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (!--remaining)\n                        resolve(values);\n                }, reject); });\n            });\n        },\n        resolve: function (value) {\n            if (value instanceof DexiePromise)\n                return value;\n            if (value && typeof value.then === 'function')\n                return new DexiePromise(function (resolve, reject) {\n                    value.then(resolve, reject);\n                });\n            var rv = new DexiePromise(INTERNAL, true, value);\n            linkToPreviousPromise(rv, currentFulfiller);\n            return rv;\n        },\n        reject: PromiseReject,\n        race: function () {\n            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n            });\n        },\n        PSD: {\n            get: function () { return PSD; },\n            set: function (value) { return PSD = value; }\n        },\n        totalEchoes: { get: function () { return totalEchoes; } },\n        newPSD: newScope,\n        usePSD: usePSD,\n        scheduler: {\n            get: function () { return asap; },\n            set: function (value) { asap = value; }\n        },\n        rejectionMapper: {\n            get: function () { return rejectionMapper; },\n            set: function (value) { rejectionMapper = value; }\n        },\n        follow: function (fn, zoneProps) {\n            return new DexiePromise(function (resolve, reject) {\n                return newScope(function (resolve, reject) {\n                    var psd = PSD;\n                    psd.unhandleds = [];\n                    psd.onunhandled = reject;\n                    psd.finalize = callBoth(function () {\n                        var _this = this;\n                        run_at_end_of_this_or_next_physical_tick(function () {\n                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                        });\n                    }, psd.finalize);\n                    fn();\n                }, zoneProps, resolve, reject);\n            });\n        }\n    });\n    if (NativePromise) {\n        if (NativePromise.allSettled)\n            setProp(DexiePromise, \"allSettled\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve) {\n                    if (possiblePromises.length === 0)\n                        resolve([]);\n                    var remaining = possiblePromises.length;\n                    var results = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                        .then(function () { return --remaining || resolve(results); }); });\n                });\n            });\n        if (NativePromise.any && typeof AggregateError !== 'undefined')\n            setProp(DexiePromise, \"any\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve, reject) {\n                    if (possiblePromises.length === 0)\n                        reject(new AggregateError([]));\n                    var remaining = possiblePromises.length;\n                    var failures = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                        failures[i] = failure;\n                        if (!--remaining)\n                            reject(new AggregateError(failures));\n                    }); });\n                });\n            });\n    }\n    function executePromiseTask(promise, fn) {\n        try {\n            fn(function (value) {\n                if (promise._state !== null)\n                    return;\n                if (value === promise)\n                    throw new TypeError('A promise cannot be resolved with itself.');\n                var shouldExecuteTick = promise._lib && beginMicroTickScope();\n                if (value && typeof value.then === 'function') {\n                    executePromiseTask(promise, function (resolve, reject) {\n                        value instanceof DexiePromise ?\n                            value._then(resolve, reject) :\n                            value.then(resolve, reject);\n                    });\n                }\n                else {\n                    promise._state = true;\n                    promise._value = value;\n                    propagateAllListeners(promise);\n                }\n                if (shouldExecuteTick)\n                    endMicroTickScope();\n            }, handleRejection.bind(null, promise));\n        }\n        catch (ex) {\n            handleRejection(promise, ex);\n        }\n    }\n    function handleRejection(promise, reason) {\n        rejectingErrors.push(reason);\n        if (promise._state !== null)\n            return;\n        var shouldExecuteTick = promise._lib && beginMicroTickScope();\n        reason = rejectionMapper(reason);\n        promise._state = false;\n        promise._value = reason;\n        debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n            var origProp = getPropertyDescriptor(reason, \"stack\");\n            reason._promise = promise;\n            setProp(reason, \"stack\", {\n                get: function () {\n                    return stack_being_generated ?\n                        origProp && (origProp.get ?\n                            origProp.get.apply(reason) :\n                            origProp.value) :\n                        promise.stack;\n                }\n            });\n        });\n        addPossiblyUnhandledError(promise);\n        propagateAllListeners(promise);\n        if (shouldExecuteTick)\n            endMicroTickScope();\n    }\n    function propagateAllListeners(promise) {\n        var listeners = promise._listeners;\n        promise._listeners = [];\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            propagateToListener(promise, listeners[i]);\n        }\n        var psd = promise._PSD;\n        --psd.ref || psd.finalize();\n        if (numScheduledCalls === 0) {\n            ++numScheduledCalls;\n            asap(function () {\n                if (--numScheduledCalls === 0)\n                    finalizePhysicalTick();\n            }, []);\n        }\n    }\n    function propagateToListener(promise, listener) {\n        if (promise._state === null) {\n            promise._listeners.push(listener);\n            return;\n        }\n        var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n        if (cb === null) {\n            return (promise._state ? listener.resolve : listener.reject)(promise._value);\n        }\n        ++listener.psd.ref;\n        ++numScheduledCalls;\n        asap(callListener, [cb, promise, listener]);\n    }\n    function callListener(cb, promise, listener) {\n        try {\n            currentFulfiller = promise;\n            var ret, value = promise._value;\n            if (promise._state) {\n                ret = cb(value);\n            }\n            else {\n                if (rejectingErrors.length)\n                    rejectingErrors = [];\n                ret = cb(value);\n                if (rejectingErrors.indexOf(value) === -1)\n                    markErrorAsHandled(promise);\n            }\n            listener.resolve(ret);\n        }\n        catch (e) {\n            listener.reject(e);\n        }\n        finally {\n            currentFulfiller = null;\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n            --listener.psd.ref || listener.psd.finalize();\n        }\n    }\n    function getStack(promise, stacks, limit) {\n        if (stacks.length === limit)\n            return stacks;\n        var stack = \"\";\n        if (promise._state === false) {\n            var failure = promise._value, errorName, message;\n            if (failure != null) {\n                errorName = failure.name || \"Error\";\n                message = failure.message || failure;\n                stack = prettyStack(failure, 0);\n            }\n            else {\n                errorName = failure;\n                message = \"\";\n            }\n            stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n        }\n        if (debug) {\n            stack = prettyStack(promise._stackHolder, 2);\n            if (stack && stacks.indexOf(stack) === -1)\n                stacks.push(stack);\n            if (promise._prev)\n                getStack(promise._prev, stacks, limit);\n        }\n        return stacks;\n    }\n    function linkToPreviousPromise(promise, prev) {\n        var numPrev = prev ? prev._numPrev + 1 : 0;\n        if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n            promise._prev = prev;\n            promise._numPrev = numPrev;\n        }\n    }\n    function physicalTick() {\n        beginMicroTickScope() && endMicroTickScope();\n    }\n    function beginMicroTickScope() {\n        var wasRootExec = isOutsideMicroTick;\n        isOutsideMicroTick = false;\n        needsNewPhysicalTick = false;\n        return wasRootExec;\n    }\n    function endMicroTickScope() {\n        var callbacks, i, l;\n        do {\n            while (microtickQueue.length > 0) {\n                callbacks = microtickQueue;\n                microtickQueue = [];\n                l = callbacks.length;\n                for (i = 0; i < l; ++i) {\n                    var item = callbacks[i];\n                    item[0].apply(null, item[1]);\n                }\n            }\n        } while (microtickQueue.length > 0);\n        isOutsideMicroTick = true;\n        needsNewPhysicalTick = true;\n    }\n    function finalizePhysicalTick() {\n        var unhandledErrs = unhandledErrors;\n        unhandledErrors = [];\n        unhandledErrs.forEach(function (p) {\n            p._PSD.onunhandled.call(null, p._value, p);\n        });\n        var finalizers = tickFinalizers.slice(0);\n        var i = finalizers.length;\n        while (i)\n            finalizers[--i]();\n    }\n    function run_at_end_of_this_or_next_physical_tick(fn) {\n        function finalizer() {\n            fn();\n            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n        }\n        tickFinalizers.push(finalizer);\n        ++numScheduledCalls;\n        asap(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n    function addPossiblyUnhandledError(promise) {\n        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n            unhandledErrors.push(promise);\n    }\n    function markErrorAsHandled(promise) {\n        var i = unhandledErrors.length;\n        while (i)\n            if (unhandledErrors[--i]._value === promise._value) {\n                unhandledErrors.splice(i, 1);\n                return;\n            }\n    }\n    function PromiseReject(reason) {\n        return new DexiePromise(INTERNAL, false, reason);\n    }\n    function wrap(fn, errorCatcher) {\n        var psd = PSD;\n        return function () {\n            var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n            try {\n                switchToZone(psd, true);\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                errorCatcher && errorCatcher(e);\n            }\n            finally {\n                switchToZone(outerScope, false);\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n    }\n    var task = { awaits: 0, echoes: 0, id: 0 };\n    var taskCounter = 0;\n    var zoneStack = [];\n    var zoneEchoes = 0;\n    var totalEchoes = 0;\n    var zone_id_counter = 0;\n    function newScope(fn, props, a1, a2) {\n        var parent = PSD, psd = Object.create(parent);\n        psd.parent = parent;\n        psd.ref = 0;\n        psd.global = false;\n        psd.id = ++zone_id_counter;\n        var globalEnv = globalPSD.env;\n        psd.env = patchGlobalPromise ? {\n            Promise: DexiePromise,\n            PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n            all: DexiePromise.all,\n            race: DexiePromise.race,\n            allSettled: DexiePromise.allSettled,\n            any: DexiePromise.any,\n            resolve: DexiePromise.resolve,\n            reject: DexiePromise.reject,\n            nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n            gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n        } : {};\n        if (props)\n            extend(psd, props);\n        ++parent.ref;\n        psd.finalize = function () {\n            --this.parent.ref || this.parent.finalize();\n        };\n        var rv = usePSD(psd, fn, a1, a2);\n        if (psd.ref === 0)\n            psd.finalize();\n        return rv;\n    }\n    function incrementExpectedAwaits() {\n        if (!task.id)\n            task.id = ++taskCounter;\n        ++task.awaits;\n        task.echoes += ZONE_ECHO_LIMIT;\n        return task.id;\n    }\n    function decrementExpectedAwaits() {\n        if (!task.awaits)\n            return false;\n        if (--task.awaits === 0)\n            task.id = 0;\n        task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n        return true;\n    }\n    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n        incrementExpectedAwaits = decrementExpectedAwaits = nop;\n    }\n    function onPossibleParallellAsync(possiblePromise) {\n        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n            incrementExpectedAwaits();\n            return possiblePromise.then(function (x) {\n                decrementExpectedAwaits();\n                return x;\n            }, function (e) {\n                decrementExpectedAwaits();\n                return rejection(e);\n            });\n        }\n        return possiblePromise;\n    }\n    function zoneEnterEcho(targetZone) {\n        ++totalEchoes;\n        if (!task.echoes || --task.echoes === 0) {\n            task.echoes = task.id = 0;\n        }\n        zoneStack.push(PSD);\n        switchToZone(targetZone, true);\n    }\n    function zoneLeaveEcho() {\n        var zone = zoneStack[zoneStack.length - 1];\n        zoneStack.pop();\n        switchToZone(zone, false);\n    }\n    function switchToZone(targetZone, bEnteringZone) {\n        var currentZone = PSD;\n        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n            enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n        }\n        if (targetZone === PSD)\n            return;\n        PSD = targetZone;\n        if (currentZone === globalPSD)\n            globalPSD.env = snapShot();\n        if (patchGlobalPromise) {\n            var GlobalPromise_1 = globalPSD.env.Promise;\n            var targetEnv = targetZone.env;\n            nativePromiseProto.then = targetEnv.nthen;\n            GlobalPromise_1.prototype.then = targetEnv.gthen;\n            if (currentZone.global || targetZone.global) {\n                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n                GlobalPromise_1.all = targetEnv.all;\n                GlobalPromise_1.race = targetEnv.race;\n                GlobalPromise_1.resolve = targetEnv.resolve;\n                GlobalPromise_1.reject = targetEnv.reject;\n                if (targetEnv.allSettled)\n                    GlobalPromise_1.allSettled = targetEnv.allSettled;\n                if (targetEnv.any)\n                    GlobalPromise_1.any = targetEnv.any;\n            }\n        }\n    }\n    function snapShot() {\n        var GlobalPromise = _global.Promise;\n        return patchGlobalPromise ? {\n            Promise: GlobalPromise,\n            PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n            all: GlobalPromise.all,\n            race: GlobalPromise.race,\n            allSettled: GlobalPromise.allSettled,\n            any: GlobalPromise.any,\n            resolve: GlobalPromise.resolve,\n            reject: GlobalPromise.reject,\n            nthen: nativePromiseProto.then,\n            gthen: GlobalPromise.prototype.then\n        } : {};\n    }\n    function usePSD(psd, fn, a1, a2, a3) {\n        var outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn(a1, a2, a3);\n        }\n        finally {\n            switchToZone(outerScope, false);\n        }\n    }\n    function enqueueNativeMicroTask(job) {\n        nativePromiseThen.call(resolvedNativePromise, job);\n    }\n    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n        return typeof fn !== 'function' ? fn : function () {\n            var outerZone = PSD;\n            if (possibleAwait)\n                incrementExpectedAwaits();\n            switchToZone(zone, true);\n            try {\n                return fn.apply(this, arguments);\n            }\n            finally {\n                switchToZone(outerZone, false);\n                if (cleanup)\n                    enqueueNativeMicroTask(decrementExpectedAwaits);\n            }\n        };\n    }\n    function getPatchedPromiseThen(origThen, zone) {\n        return function (onResolved, onRejected) {\n            return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n        };\n    }\n    var UNHANDLEDREJECTION = \"unhandledrejection\";\n    function globalError(err, promise) {\n        var rv;\n        try {\n            rv = promise.onuncatched(err);\n        }\n        catch (e) { }\n        if (rv !== false)\n            try {\n                var event, eventData = { promise: promise, reason: err };\n                if (_global.document && document.createEvent) {\n                    event = document.createEvent('Event');\n                    event.initEvent(UNHANDLEDREJECTION, true, true);\n                    extend(event, eventData);\n                }\n                else if (_global.CustomEvent) {\n                    event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                    extend(event, eventData);\n                }\n                if (event && _global.dispatchEvent) {\n                    dispatchEvent(event);\n                    if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                        try {\n                            _global.onunhandledrejection(event);\n                        }\n                        catch (_) { }\n                }\n                if (debug && event && !event.defaultPrevented) {\n                    console.warn(\"Unhandled rejection: \" + (err.stack || err));\n                }\n            }\n            catch (e) { }\n    }\n    var rejection = DexiePromise.reject;\n\n    function tempTransaction(db, mode, storeNames, fn) {\n        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n            if (db._state.openComplete) {\n                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n            }\n            if (!db._state.isBeingOpened) {\n                if (!db._options.autoOpen)\n                    return rejection(new exceptions.DatabaseClosed());\n                db.open().catch(nop);\n            }\n            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n        }\n        else {\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db._close();\n                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n                }\n                return rejection(ex);\n            }\n            return trans._promise(mode, function (resolve, reject) {\n                return newScope(function () {\n                    PSD.trans = trans;\n                    return fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                return trans._completion.then(function () { return result; });\n            });\n        }\n    }\n\n    var DEXIE_VERSION = '3.2.1';\n    var maxString = String.fromCharCode(65535);\n    var minKey = -Infinity;\n    var INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\n    var STRING_EXPECTED = \"String expected.\";\n    var connections = [];\n    var isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\n    var hasIEDeleteObjectStoreBug = isIEOrEdge;\n    var hangsOnDeleteLargeKeyRange = isIEOrEdge;\n    var dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\n    var DBNAMES_DB = '__dbnames';\n    var READONLY = 'readonly';\n    var READWRITE = 'readwrite';\n\n    function combine(filter1, filter2) {\n        return filter1 ?\n            filter2 ?\n                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n                filter1 :\n            filter2;\n    }\n\n    var AnyRange = {\n        type: 3 ,\n        lower: -Infinity,\n        lowerOpen: false,\n        upper: [[]],\n        upperOpen: false\n    };\n\n    function workaroundForUndefinedPrimKey(keyPath) {\n        return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n            ? function (obj) {\n                if (obj[keyPath] === undefined && (keyPath in obj)) {\n                    obj = deepClone(obj);\n                    delete obj[keyPath];\n                }\n                return obj;\n            }\n            : function (obj) { return obj; };\n    }\n\n    var Table =  (function () {\n        function Table() {\n        }\n        Table.prototype._trans = function (mode, fn, writeLocked) {\n            var trans = this._tx || PSD.trans;\n            var tableName = this.name;\n            function checkTableInTransaction(resolve, reject, trans) {\n                if (!trans.schema[tableName])\n                    throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n                return fn(trans.idbtrans, trans);\n            }\n            var wasRootExec = beginMicroTickScope();\n            try {\n                return trans && trans.db === this.db ?\n                    trans === PSD.trans ?\n                        trans._promise(mode, checkTableInTransaction, writeLocked) :\n                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n            }\n            finally {\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n        Table.prototype.get = function (keyOrCrit, cb) {\n            var _this = this;\n            if (keyOrCrit && keyOrCrit.constructor === Object)\n                return this.where(keyOrCrit).first(cb);\n            return this._trans('readonly', function (trans) {\n                return _this.core.get({ trans: trans, key: keyOrCrit })\n                    .then(function (res) { return _this.hook.reading.fire(res); });\n            }).then(cb);\n        };\n        Table.prototype.where = function (indexOrCrit) {\n            if (typeof indexOrCrit === 'string')\n                return new this.db.WhereClause(this, indexOrCrit);\n            if (isArray(indexOrCrit))\n                return new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n            var keyPaths = keys(indexOrCrit);\n            if (keyPaths.length === 1)\n                return this\n                    .where(keyPaths[0])\n                    .equals(indexOrCrit[keyPaths[0]]);\n            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n                return ix.compound &&\n                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n                    ix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n            })[0];\n            if (compoundIndex && this.db._maxKey !== maxString)\n                return this\n                    .where(compoundIndex.name)\n                    .equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n            if (!compoundIndex && debug)\n                console.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n                    (\"compound index [\" + keyPaths.join('+') + \"]\"));\n            var idxByName = this.schema.idxByName;\n            var idb = this.db._deps.indexedDB;\n            function equals(a, b) {\n                try {\n                    return idb.cmp(a, b) === 0;\n                }\n                catch (e) {\n                    return false;\n                }\n            }\n            var _a = keyPaths.reduce(function (_a, keyPath) {\n                var prevIndex = _a[0], prevFilterFn = _a[1];\n                var index = idxByName[keyPath];\n                var value = indexOrCrit[keyPath];\n                return [\n                    prevIndex || index,\n                    prevIndex || !index ?\n                        combine(prevFilterFn, index && index.multi ?\n                            function (x) {\n                                var prop = getByKeyPath(x, keyPath);\n                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                        : prevFilterFn\n                ];\n            }, [null, null]), idx = _a[0], filterFunction = _a[1];\n            return idx ?\n                this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                    .filter(filterFunction) :\n                compoundIndex ?\n                    this.filter(filterFunction) :\n                    this.where(keyPaths).equals('');\n        };\n        Table.prototype.filter = function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        };\n        Table.prototype.count = function (thenShortcut) {\n            return this.toCollection().count(thenShortcut);\n        };\n        Table.prototype.offset = function (offset) {\n            return this.toCollection().offset(offset);\n        };\n        Table.prototype.limit = function (numRows) {\n            return this.toCollection().limit(numRows);\n        };\n        Table.prototype.each = function (callback) {\n            return this.toCollection().each(callback);\n        };\n        Table.prototype.toArray = function (thenShortcut) {\n            return this.toCollection().toArray(thenShortcut);\n        };\n        Table.prototype.toCollection = function () {\n            return new this.db.Collection(new this.db.WhereClause(this));\n        };\n        Table.prototype.orderBy = function (index) {\n            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n                \"[\" + index.join('+') + \"]\" :\n                index));\n        };\n        Table.prototype.reverse = function () {\n            return this.toCollection().reverse();\n        };\n        Table.prototype.mapToClass = function (constructor) {\n            this.schema.mappedClass = constructor;\n            var readHook = function (obj) {\n                if (!obj)\n                    return obj;\n                var res = Object.create(constructor.prototype);\n                for (var m in obj)\n                    if (hasOwn(obj, m))\n                        try {\n                            res[m] = obj[m];\n                        }\n                        catch (_) { }\n                return res;\n            };\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        };\n        Table.prototype.defineClass = function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return this.mapToClass(Class);\n        };\n        Table.prototype.add = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.update = function (keyOrObject, modifications) {\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined)\n                    return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n                try {\n                    if (typeof modifications !== \"function\") {\n                        keys(modifications).forEach(function (keyPath) {\n                            setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                        });\n                    }\n                    else {\n                        modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                    }\n                }\n                catch (_a) {\n                }\n                return this.where(\":id\").equals(key).modify(modifications);\n            }\n            else {\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        };\n        Table.prototype.put = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.delete = function (key) {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.clear = function () {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.bulkGet = function (keys) {\n            var _this = this;\n            return this._trans('readonly', function (trans) {\n                return _this.core.getMany({\n                    keys: keys,\n                    trans: trans\n                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n            });\n        };\n        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToAdd = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToPut = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkDelete = function (keys) {\n            var _this = this;\n            var numKeys = keys.length;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys });\n            }).then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + numKeys + \" operations failed\", failures);\n            });\n        };\n        return Table;\n    }());\n\n    function Events(ctx) {\n        var evs = {};\n        var rv = function (eventName, subscriber) {\n            if (subscriber) {\n                var i = arguments.length, args = new Array(i - 1);\n                while (--i)\n                    args[i - 1] = arguments[i];\n                evs[eventName].subscribe.apply(null, args);\n                return ctx;\n            }\n            else if (typeof (eventName) === 'string') {\n                return evs[eventName];\n            }\n        };\n        rv.addEventType = add;\n        for (var i = 1, l = arguments.length; i < l; ++i) {\n            add(arguments[i]);\n        }\n        return rv;\n        function add(eventName, chainFunction, defaultFunction) {\n            if (typeof eventName === 'object')\n                return addConfiguredEvents(eventName);\n            if (!chainFunction)\n                chainFunction = reverseStoppableEventChain;\n            if (!defaultFunction)\n                defaultFunction = nop;\n            var context = {\n                subscribers: [],\n                fire: defaultFunction,\n                subscribe: function (cb) {\n                    if (context.subscribers.indexOf(cb) === -1) {\n                        context.subscribers.push(cb);\n                        context.fire = chainFunction(context.fire, cb);\n                    }\n                },\n                unsubscribe: function (cb) {\n                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n                }\n            };\n            evs[eventName] = rv[eventName] = context;\n            return context;\n        }\n        function addConfiguredEvents(cfg) {\n            keys(cfg).forEach(function (eventName) {\n                var args = cfg[eventName];\n                if (isArray(args)) {\n                    add(eventName, cfg[eventName][0], cfg[eventName][1]);\n                }\n                else if (args === 'asap') {\n                    var context = add(eventName, mirror, function fire() {\n                        var i = arguments.length, args = new Array(i);\n                        while (i--)\n                            args[i] = arguments[i];\n                        context.subscribers.forEach(function (fn) {\n                            asap$1(function fireEvent() {\n                                fn.apply(null, args);\n                            });\n                        });\n                    });\n                }\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid event config\");\n            });\n        }\n    }\n\n    function makeClassConstructor(prototype, constructor) {\n        derive(constructor).from({ prototype: prototype });\n        return constructor;\n    }\n\n    function createTableConstructor(db) {\n        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n            this.db = db;\n            this._tx = trans;\n            this.name = name;\n            this.schema = tableSchema;\n            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n                \"creating\": [hookCreatingChain, nop],\n                \"reading\": [pureFunctionChain, mirror],\n                \"updating\": [hookUpdatingChain, nop],\n                \"deleting\": [hookDeletingChain, nop]\n            });\n        });\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) &&\n            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n    function addFilter(ctx, fn) {\n        ctx.filter = combine(ctx.filter, fn);\n    }\n    function addReplayFilter(ctx, factory, isLimitFilter) {\n        var curr = ctx.replayFilter;\n        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n        ctx.justLimit = isLimitFilter && !curr;\n    }\n    function addMatchFilter(ctx, fn) {\n        ctx.isMatch = combine(ctx.isMatch, fn);\n    }\n    function getIndexOrStore(ctx, coreSchema) {\n        if (ctx.isPrimKey)\n            return coreSchema.primaryKey;\n        var index = coreSchema.getIndexByKeyPath(ctx.index);\n        if (!index)\n            throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n        return index;\n    }\n    function openCursor(ctx, coreTable, trans) {\n        var index = getIndexOrStore(ctx, coreTable.schema);\n        return coreTable.openCursor({\n            trans: trans,\n            values: !ctx.keysOnly,\n            reverse: ctx.dir === 'prev',\n            unique: !!ctx.unique,\n            query: {\n                index: index,\n                range: ctx.range\n            }\n        });\n    }\n    function iter(ctx, fn, coreTrans, coreTable) {\n        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n        if (!ctx.or) {\n            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n        }\n        else {\n            var set_1 = {};\n            var union = function (item, cursor, advance) {\n                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                    var primaryKey = cursor.primaryKey;\n                    var key = '' + primaryKey;\n                    if (key === '[object ArrayBuffer]')\n                        key = '' + new Uint8Array(primaryKey);\n                    if (!hasOwn(set_1, key)) {\n                        set_1[key] = true;\n                        fn(item, cursor, advance);\n                    }\n                }\n            };\n            return Promise.all([\n                ctx.or._iterate(union, coreTrans),\n                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n            ]);\n        }\n    }\n    function iterate(cursorPromise, filter, fn, valueMapper) {\n        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n        var wrappedFn = wrap(mappedFn);\n        return cursorPromise.then(function (cursor) {\n            if (cursor) {\n                return cursor.start(function () {\n                    var c = function () { return cursor.continue(); };\n                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                    c();\n                });\n            }\n        });\n    }\n\n    function cmp(a, b) {\n        try {\n            var ta = type(a);\n            var tb = type(b);\n            if (ta !== tb) {\n                if (ta === 'Array')\n                    return 1;\n                if (tb === 'Array')\n                    return -1;\n                if (ta === 'binary')\n                    return 1;\n                if (tb === 'binary')\n                    return -1;\n                if (ta === 'string')\n                    return 1;\n                if (tb === 'string')\n                    return -1;\n                if (ta === 'Date')\n                    return 1;\n                if (tb !== 'Date')\n                    return NaN;\n                return -1;\n            }\n            switch (ta) {\n                case 'number':\n                case 'Date':\n                case 'string':\n                    return a > b ? 1 : a < b ? -1 : 0;\n                case 'binary': {\n                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n                }\n                case 'Array':\n                    return compareArrays(a, b);\n            }\n        }\n        catch (_a) { }\n        return NaN;\n    }\n    function compareArrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            var res = cmp(a[i], b[i]);\n            if (res !== 0)\n                return res;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function compareUint8Arrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            if (a[i] !== b[i])\n                return a[i] < b[i] ? -1 : 1;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function type(x) {\n        var t = typeof x;\n        if (t !== 'object')\n            return t;\n        if (ArrayBuffer.isView(x))\n            return 'binary';\n        var tsTag = toStringTag(x);\n        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n    }\n    function getUint8Array(a) {\n        if (a instanceof Uint8Array)\n            return a;\n        if (ArrayBuffer.isView(a))\n            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n        return new Uint8Array(a);\n    }\n\n    var Collection =  (function () {\n        function Collection() {\n        }\n        Collection.prototype._read = function (fn, cb) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readonly', fn).then(cb);\n        };\n        Collection.prototype._write = function (fn) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readwrite', fn, \"locked\");\n        };\n        Collection.prototype._addAlgorithm = function (fn) {\n            var ctx = this._ctx;\n            ctx.algorithm = combine(ctx.algorithm, fn);\n        };\n        Collection.prototype._iterate = function (fn, coreTrans) {\n            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n        };\n        Collection.prototype.clone = function (props) {\n            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n            if (props)\n                extend(ctx, props);\n            rv._ctx = ctx;\n            return rv;\n        };\n        Collection.prototype.raw = function () {\n            this._ctx.valueMapper = null;\n            return this;\n        };\n        Collection.prototype.each = function (fn) {\n            var ctx = this._ctx;\n            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n        };\n        Collection.prototype.count = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                var coreTable = ctx.table.core;\n                if (isPlainKeyRange(ctx, true)) {\n                    return coreTable.count({\n                        trans: trans,\n                        query: {\n                            index: getIndexOrStore(ctx, coreTable.schema),\n                            range: ctx.range\n                        }\n                    }).then(function (count) { return Math.min(count, ctx.limit); });\n                }\n                else {\n                    var count = 0;\n                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                        .then(function () { return count; });\n                }\n            }).then(cb);\n        };\n        Collection.prototype.sortBy = function (keyPath, cb) {\n            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n            function getval(obj, i) {\n                if (i)\n                    return getval(obj[parts[i]], i - 1);\n                return obj[lastPart];\n            }\n            var order = this._ctx.dir === \"next\" ? 1 : -1;\n            function sorter(a, b) {\n                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n                return aVal < bVal ? -order : aVal > bVal ? order : 0;\n            }\n            return this.toArray(function (a) {\n                return a.sort(sorter);\n            }).then(cb);\n        };\n        Collection.prototype.toArray = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    var valueMapper_1 = ctx.valueMapper;\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        limit: ctx.limit,\n                        values: true,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    }).then(function (_a) {\n                        var result = _a.result;\n                        return valueMapper_1 ? result.map(valueMapper_1) : result;\n                    });\n                }\n                else {\n                    var a_1 = [];\n                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n                }\n            }, cb);\n        };\n        Collection.prototype.offset = function (offset) {\n            var ctx = this._ctx;\n            if (offset <= 0)\n                return this;\n            ctx.offset += offset;\n            if (isPlainKeyRange(ctx)) {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function (cursor, advance) {\n                        if (offsetLeft === 0)\n                            return true;\n                        if (offsetLeft === 1) {\n                            --offsetLeft;\n                            return false;\n                        }\n                        advance(function () {\n                            cursor.advance(offsetLeft);\n                            offsetLeft = 0;\n                        });\n                        return false;\n                    };\n                });\n            }\n            else {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function () { return (--offsetLeft < 0); };\n                });\n            }\n            return this;\n        };\n        Collection.prototype.limit = function (numRows) {\n            this._ctx.limit = Math.min(this._ctx.limit, numRows);\n            addReplayFilter(this._ctx, function () {\n                var rowsLeft = numRows;\n                return function (cursor, advance, resolve) {\n                    if (--rowsLeft <= 0)\n                        advance(resolve);\n                    return rowsLeft >= 0;\n                };\n            }, true);\n            return this;\n        };\n        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n            addFilter(this._ctx, function (cursor, advance, resolve) {\n                if (filterFunction(cursor.value)) {\n                    advance(resolve);\n                    return bIncludeStopEntry;\n                }\n                else {\n                    return true;\n                }\n            });\n            return this;\n        };\n        Collection.prototype.first = function (cb) {\n            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.last = function (cb) {\n            return this.reverse().first(cb);\n        };\n        Collection.prototype.filter = function (filterFunction) {\n            addFilter(this._ctx, function (cursor) {\n                return filterFunction(cursor.value);\n            });\n            addMatchFilter(this._ctx, filterFunction);\n            return this;\n        };\n        Collection.prototype.and = function (filter) {\n            return this.filter(filter);\n        };\n        Collection.prototype.or = function (indexName) {\n            return new this.db.WhereClause(this._ctx.table, indexName, this);\n        };\n        Collection.prototype.reverse = function () {\n            this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n            if (this._ondirectionchange)\n                this._ondirectionchange(this._ctx.dir);\n            return this;\n        };\n        Collection.prototype.desc = function () {\n            return this.reverse();\n        };\n        Collection.prototype.eachKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n        };\n        Collection.prototype.eachUniqueKey = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.eachKey(cb);\n        };\n        Collection.prototype.eachPrimaryKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n        };\n        Collection.prototype.keys = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.key);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.primaryKeys = function (cb) {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                return this._read(function (trans) {\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        values: false,\n                        limit: ctx.limit,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    });\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return result;\n                }).then(cb);\n            }\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.primaryKey);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.uniqueKeys = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.keys(cb);\n        };\n        Collection.prototype.firstKey = function (cb) {\n            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.lastKey = function (cb) {\n            return this.reverse().firstKey(cb);\n        };\n        Collection.prototype.distinct = function () {\n            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n            if (!idx || !idx.multi)\n                return this;\n            var set = {};\n            addFilter(this._ctx, function (cursor) {\n                var strKey = cursor.primaryKey.toString();\n                var found = hasOwn(set, strKey);\n                set[strKey] = true;\n                return !found;\n            });\n            return this;\n        };\n        Collection.prototype.modify = function (changes) {\n            var _this = this;\n            var ctx = this._ctx;\n            return this._write(function (trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    modifyer = changes;\n                }\n                else {\n                    var keyPaths = keys(changes);\n                    var numKeys = keyPaths.length;\n                    modifyer = function (item) {\n                        var anythingModified = false;\n                        for (var i = 0; i < numKeys; ++i) {\n                            var keyPath = keyPaths[i], val = changes[keyPath];\n                            if (getByKeyPath(item, keyPath) !== val) {\n                                setByKeyPath(item, keyPath, val);\n                                anythingModified = true;\n                            }\n                        }\n                        return anythingModified;\n                    };\n                }\n                var coreTable = ctx.table.core;\n                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n                var limit = _this.db._options.modifyChunkSize || 200;\n                var totalFailures = [];\n                var successCount = 0;\n                var failedKeys = [];\n                var applyMutateResult = function (expectedCount, res) {\n                    var failures = res.failures, numFailures = res.numFailures;\n                    successCount += expectedCount - numFailures;\n                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                        var pos = _a[_i];\n                        totalFailures.push(failures[pos]);\n                    }\n                };\n                return _this.clone().primaryKeys().then(function (keys) {\n                    var nextChunk = function (offset) {\n                        var count = Math.min(limit, keys.length - offset);\n                        return coreTable.getMany({\n                            trans: trans,\n                            keys: keys.slice(offset, offset + count),\n                            cache: \"immutable\"\n                        }).then(function (values) {\n                            var addValues = [];\n                            var putValues = [];\n                            var putKeys = outbound ? [] : null;\n                            var deleteKeys = [];\n                            for (var i = 0; i < count; ++i) {\n                                var origValue = values[i];\n                                var ctx_1 = {\n                                    value: deepClone(origValue),\n                                    primKey: keys[offset + i]\n                                };\n                                if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                    if (ctx_1.value == null) {\n                                        deleteKeys.push(keys[offset + i]);\n                                    }\n                                    else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                        deleteKeys.push(keys[offset + i]);\n                                        addValues.push(ctx_1.value);\n                                    }\n                                    else {\n                                        putValues.push(ctx_1.value);\n                                        if (outbound)\n                                            putKeys.push(keys[offset + i]);\n                                    }\n                                }\n                            }\n                            var criteria = isPlainKeyRange(ctx) &&\n                                ctx.limit === Infinity &&\n                                (typeof changes !== 'function' || changes === deleteCallback) && {\n                                index: ctx.index,\n                                range: ctx.range\n                            };\n                            return Promise.resolve(addValues.length > 0 &&\n                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                    .then(function (res) {\n                                    for (var pos in res.failures) {\n                                        deleteKeys.splice(parseInt(pos), 1);\n                                    }\n                                    applyMutateResult(addValues.length, res);\n                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'put',\n                                    keys: putKeys,\n                                    values: putValues,\n                                    criteria: criteria,\n                                    changeSpec: typeof changes !== 'function'\n                                        && changes\n                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'delete',\n                                    keys: deleteKeys,\n                                    criteria: criteria\n                                }).then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                                return keys.length > offset + count && nextChunk(offset + limit);\n                            });\n                        });\n                    };\n                    return nextChunk(0).then(function () {\n                        if (totalFailures.length > 0)\n                            throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                        return keys.length;\n                    });\n                });\n            });\n        };\n        Collection.prototype.delete = function () {\n            var ctx = this._ctx, range = ctx.range;\n            if (isPlainKeyRange(ctx) &&\n                ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n             {\n                return this._write(function (trans) {\n                    var primaryKey = ctx.table.core.schema.primaryKey;\n                    var coreRange = range;\n                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                            .then(function (_a) {\n                            var failures = _a.failures; _a.lastResult; _a.results; var numFailures = _a.numFailures;\n                            if (numFailures)\n                                throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                            return count - numFailures;\n                        });\n                    });\n                });\n            }\n            return this.modify(deleteCallback);\n        };\n        return Collection;\n    }());\n    var deleteCallback = function (value, ctx) { return ctx.value = null; };\n\n    function createCollectionConstructor(db) {\n        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n            this.db = db;\n            var keyRange = AnyRange, error = null;\n            if (keyRangeGenerator)\n                try {\n                    keyRange = keyRangeGenerator();\n                }\n                catch (ex) {\n                    error = ex;\n                }\n            var whereCtx = whereClause._ctx;\n            var table = whereCtx.table;\n            var readingHook = table.hook.reading.fire;\n            this._ctx = {\n                table: table,\n                index: whereCtx.index,\n                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n                range: keyRange,\n                keysOnly: false,\n                dir: \"next\",\n                unique: \"\",\n                algorithm: null,\n                filter: null,\n                replayFilter: null,\n                justLimit: true,\n                isMatch: null,\n                offset: 0,\n                limit: Infinity,\n                error: error,\n                or: whereCtx.or,\n                valueMapper: readingHook !== mirror ? readingHook : null\n            };\n        });\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function fail(collectionOrWhereClause, err, T) {\n        var collection = collectionOrWhereClause instanceof WhereClause ?\n            new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n            collectionOrWhereClause;\n        collection._ctx.error = T ? new T(err) : new TypeError(err);\n        return collection;\n    }\n    function emptyCollection(whereClause) {\n        return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n    }\n    function upperFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toUpperCase(); } :\n            function (s) { return s.toLowerCase(); };\n    }\n    function lowerFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toLowerCase(); } :\n            function (s) { return s.toUpperCase(); };\n    }\n    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n        var length = Math.min(key.length, lowerNeedle.length);\n        var llp = -1;\n        for (var i = 0; i < length; ++i) {\n            var lwrKeyChar = lowerKey[i];\n            if (lwrKeyChar !== lowerNeedle[i]) {\n                if (cmp(key[i], upperNeedle[i]) < 0)\n                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                if (cmp(key[i], lowerNeedle[i]) < 0)\n                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                if (llp >= 0)\n                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                return null;\n            }\n            if (cmp(key[i], lwrKeyChar) < 0)\n                llp = i;\n        }\n        if (length < lowerNeedle.length && dir === \"next\")\n            return key + upperNeedle.substr(key.length);\n        if (length < key.length && dir === \"prev\")\n            return key.substr(0, upperNeedle.length);\n        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n    }\n    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n        if (!needles.every(function (s) { return typeof s === 'string'; })) {\n            return fail(whereClause, STRING_EXPECTED);\n        }\n        function initDirection(dir) {\n            upper = upperFactory(dir);\n            lower = lowerFactory(dir);\n            compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n            var needleBounds = needles.map(function (needle) {\n                return { lower: lower(needle), upper: upper(needle) };\n            }).sort(function (a, b) {\n                return compare(a.lower, b.lower);\n            });\n            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n            direction = dir;\n            nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n        }\n        initDirection(\"next\");\n        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n        c._ondirectionchange = function (direction) {\n            initDirection(direction);\n        };\n        var firstPossibleNeedle = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            if (typeof key !== 'string')\n                return false;\n            var lowerKey = lower(key);\n            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                return true;\n            }\n            else {\n                var lowestPossibleCasing = null;\n                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                    if (casing === null && lowestPossibleCasing === null)\n                        firstPossibleNeedle = i + 1;\n                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                        lowestPossibleCasing = casing;\n                    }\n                }\n                if (lowestPossibleCasing !== null) {\n                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n                }\n                else {\n                    advance(resolve);\n                }\n                return false;\n            }\n        });\n        return c;\n    }\n    function createRange(lower, upper, lowerOpen, upperOpen) {\n        return {\n            type: 2 ,\n            lower: lower,\n            upper: upper,\n            lowerOpen: lowerOpen,\n            upperOpen: upperOpen\n        };\n    }\n    function rangeEqual(value) {\n        return {\n            type: 1 ,\n            lower: value,\n            upper: value\n        };\n    }\n\n    var WhereClause =  (function () {\n        function WhereClause() {\n        }\n        Object.defineProperty(WhereClause.prototype, \"Collection\", {\n            get: function () {\n                return this._ctx.table.db.Collection;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n            includeLower = includeLower !== false;\n            includeUpper = includeUpper === true;\n            try {\n                if ((this._cmp(lower, upper) > 0) ||\n                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                    return emptyCollection(this);\n                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n        };\n        WhereClause.prototype.equals = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return rangeEqual(value); });\n        };\n        WhereClause.prototype.above = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, true); });\n        };\n        WhereClause.prototype.aboveOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, false); });\n        };\n        WhereClause.prototype.below = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n        };\n        WhereClause.prototype.belowOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value); });\n        };\n        WhereClause.prototype.startsWith = function (str) {\n            if (typeof str !== 'string')\n                return fail(this, STRING_EXPECTED);\n            return this.between(str, str + maxString, true, true);\n        };\n        WhereClause.prototype.startsWithIgnoreCase = function (str) {\n            if (str === \"\")\n                return this.startsWith(str);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n        };\n        WhereClause.prototype.equalsIgnoreCase = function (str) {\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n        };\n        WhereClause.prototype.anyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n        };\n        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n        };\n        WhereClause.prototype.anyOf = function () {\n            var _this = this;\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            var compare = this._cmp;\n            try {\n                set.sort(compare);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n            c._ondirectionchange = function (direction) {\n                compare = (direction === \"next\" ?\n                    _this._ascending :\n                    _this._descending);\n                set.sort(compare);\n            };\n            var i = 0;\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (compare(key, set[i]) > 0) {\n                    ++i;\n                    if (i === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (compare(key, set[i]) === 0) {\n                    return true;\n                }\n                else {\n                    advance(function () { cursor.continue(set[i]); });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.notEqual = function (value) {\n            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.noneOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return new this.Collection(this);\n            try {\n                set.sort(this._ascending);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var ranges = set.reduce(function (res, val) { return res ?\n                res.concat([[res[res.length - 1][1], val]]) :\n                [[minKey, val]]; }, null);\n            ranges.push([set[set.length - 1], this.db._maxKey]);\n            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.inAnyRange = function (ranges, options) {\n            var _this = this;\n            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n            if (ranges.length === 0)\n                return emptyCollection(this);\n            if (!ranges.every(function (range) {\n                return range[0] !== undefined &&\n                    range[1] !== undefined &&\n                    ascending(range[0], range[1]) <= 0;\n            })) {\n                return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n            }\n            var includeLowers = !options || options.includeLowers !== false;\n            var includeUppers = options && options.includeUppers === true;\n            function addRange(ranges, newRange) {\n                var i = 0, l = ranges.length;\n                for (; i < l; ++i) {\n                    var range = ranges[i];\n                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                        range[0] = min(range[0], newRange[0]);\n                        range[1] = max(range[1], newRange[1]);\n                        break;\n                    }\n                }\n                if (i === l)\n                    ranges.push(newRange);\n                return ranges;\n            }\n            var sortDirection = ascending;\n            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n            var set;\n            try {\n                set = ranges.reduce(addRange, []);\n                set.sort(rangeSorter);\n            }\n            catch (ex) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var rangePos = 0;\n            var keyIsBeyondCurrentEntry = includeUppers ?\n                function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n                function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n            var keyIsBeforeCurrentEntry = includeLowers ?\n                function (key) { return descending(key, set[rangePos][0]) > 0; } :\n                function (key) { return descending(key, set[rangePos][0]) >= 0; };\n            function keyWithinCurrentRange(key) {\n                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n            }\n            var checkKey = keyIsBeyondCurrentEntry;\n            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n            c._ondirectionchange = function (direction) {\n                if (direction === \"next\") {\n                    checkKey = keyIsBeyondCurrentEntry;\n                    sortDirection = ascending;\n                }\n                else {\n                    checkKey = keyIsBeforeCurrentEntry;\n                    sortDirection = descending;\n                }\n                set.sort(rangeSorter);\n            };\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (checkKey(key)) {\n                    ++rangePos;\n                    if (rangePos === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (keyWithinCurrentRange(key)) {\n                    return true;\n                }\n                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                    return false;\n                }\n                else {\n                    advance(function () {\n                        if (sortDirection === ascending)\n                            cursor.continue(set[rangePos][0]);\n                        else\n                            cursor.continue(set[rangePos][1]);\n                    });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.startsWithAnyOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (!set.every(function (s) { return typeof s === 'string'; })) {\n                return fail(this, \"startsWithAnyOf() only works with strings\");\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n        };\n        return WhereClause;\n    }());\n\n    function createWhereClauseConstructor(db) {\n        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n            this.db = db;\n            this._ctx = {\n                table: table,\n                index: index === \":id\" ? null : index,\n                or: orCollection\n            };\n            var indexedDB = db._deps.indexedDB;\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n            this._descending = function (a, b) { return indexedDB.cmp(b, a); };\n            this._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n            this._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n            this._IDBKeyRange = db._deps.IDBKeyRange;\n        });\n    }\n\n    function eventRejectHandler(reject) {\n        return wrap(function (event) {\n            preventDefault(event);\n            reject(event.target.error);\n            return false;\n        });\n    }\n    function preventDefault(event) {\n        if (event.stopPropagation)\n            event.stopPropagation();\n        if (event.preventDefault)\n            event.preventDefault();\n    }\n\n    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\n    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\n    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\n    var Transaction =  (function () {\n        function Transaction() {\n        }\n        Transaction.prototype._lock = function () {\n            assert(!PSD.global);\n            ++this._reculock;\n            if (this._reculock === 1 && !PSD.global)\n                PSD.lockOwnerFor = this;\n            return this;\n        };\n        Transaction.prototype._unlock = function () {\n            assert(!PSD.global);\n            if (--this._reculock === 0) {\n                if (!PSD.global)\n                    PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    }\n                    catch (e) { }\n                }\n            }\n            return this;\n        };\n        Transaction.prototype._locked = function () {\n            return this._reculock && PSD.lockOwnerFor !== this;\n        };\n        Transaction.prototype.create = function (idbtrans) {\n            var _this = this;\n            if (!this.mode)\n                return this;\n            var idbdb = this.db.idbdb;\n            var dbOpenError = this.db._state.dbOpenError;\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active)\n                throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n            idbtrans = this.idbtrans = idbtrans ||\n                (this.db.core\n                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev);\n                _this._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n                _this.active = false;\n                _this.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this.active = false;\n                _this._resolve();\n                if ('mutatedParts' in idbtrans) {\n                    globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n                }\n            });\n            return this;\n        };\n        Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n            var _this = this;\n            if (mode === 'readwrite' && this.mode !== 'readwrite')\n                return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n            if (!this.active)\n                return rejection(new exceptions.TransactionInactive());\n            if (this._locked()) {\n                return new DexiePromise(function (resolve, reject) {\n                    _this._blockedFuncs.push([function () {\n                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                        }, PSD]);\n                });\n            }\n            else if (bWriteLock) {\n                return newScope(function () {\n                    var p = new DexiePromise(function (resolve, reject) {\n                        _this._lock();\n                        var rv = fn(resolve, reject, _this);\n                        if (rv && rv.then)\n                            rv.then(resolve, reject);\n                    });\n                    p.finally(function () { return _this._unlock(); });\n                    p._lib = true;\n                    return p;\n                });\n            }\n            else {\n                var p = new DexiePromise(function (resolve, reject) {\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p._lib = true;\n                return p;\n            }\n        };\n        Transaction.prototype._root = function () {\n            return this.parent ? this.parent._root() : this;\n        };\n        Transaction.prototype.waitFor = function (promiseLike) {\n            var root = this._root();\n            var promise = DexiePromise.resolve(promiseLike);\n            if (root._waitingFor) {\n                root._waitingFor = root._waitingFor.then(function () { return promise; });\n            }\n            else {\n                root._waitingFor = promise;\n                root._waitingQueue = [];\n                var store = root.idbtrans.objectStore(root.storeNames[0]);\n                (function spin() {\n                    ++root._spinCount;\n                    while (root._waitingQueue.length)\n                        (root._waitingQueue.shift())();\n                    if (root._waitingFor)\n                        store.get(-Infinity).onsuccess = spin;\n                }());\n            }\n            var currentWaitPromise = root._waitingFor;\n            return new DexiePromise(function (resolve, reject) {\n                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                    if (root._waitingFor === currentWaitPromise) {\n                        root._waitingFor = null;\n                    }\n                });\n            });\n        };\n        Transaction.prototype.abort = function () {\n            if (this.active) {\n                this.active = false;\n                if (this.idbtrans)\n                    this.idbtrans.abort();\n                this._reject(new exceptions.Abort());\n            }\n        };\n        Transaction.prototype.table = function (tableName) {\n            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n            if (hasOwn(memoizedTables, tableName))\n                return memoizedTables[tableName];\n            var tableSchema = this.schema[tableName];\n            if (!tableSchema) {\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            }\n            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n            transactionBoundTable.core = this.db.core.table(tableName);\n            memoizedTables[tableName] = transactionBoundTable;\n            return transactionBoundTable;\n        };\n        return Transaction;\n    }());\n\n    function createTransactionConstructor(db) {\n        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n            var _this = this;\n            this.db = db;\n            this.mode = mode;\n            this.storeNames = storeNames;\n            this.schema = dbschema;\n            this.chromeTransactionDurability = chromeTransactionDurability;\n            this.idbtrans = null;\n            this.on = Events(this, \"complete\", \"error\", \"abort\");\n            this.parent = parent || null;\n            this.active = true;\n            this._reculock = 0;\n            this._blockedFuncs = [];\n            this._resolve = null;\n            this._reject = null;\n            this._waitingFor = null;\n            this._waitingQueue = null;\n            this._spinCount = 0;\n            this._completion = new DexiePromise(function (resolve, reject) {\n                _this._resolve = resolve;\n                _this._reject = reject;\n            });\n            this._completion.then(function () {\n                _this.active = false;\n                _this.on.complete.fire();\n            }, function (e) {\n                var wasActive = _this.active;\n                _this.active = false;\n                _this.on.error.fire(e);\n                _this.parent ?\n                    _this.parent._reject(e) :\n                    wasActive && _this.idbtrans && _this.idbtrans.abort();\n                return rejection(e);\n            });\n        });\n    }\n\n    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n        return {\n            name: name,\n            keyPath: keyPath,\n            unique: unique,\n            multi: multi,\n            auto: auto,\n            compound: compound,\n            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n        };\n    }\n    function nameFromKeyPath(keyPath) {\n        return typeof keyPath === 'string' ?\n            keyPath :\n            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n    }\n\n    function createTableSchema(name, primKey, indexes) {\n        return {\n            name: name,\n            primKey: primKey,\n            indexes: indexes,\n            mappedClass: null,\n            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n        };\n    }\n\n    function safariMultiStoreFix(storeNames) {\n        return storeNames.length === 1 ? storeNames[0] : storeNames;\n    }\n    var getMaxKey = function (IdbKeyRange) {\n        try {\n            IdbKeyRange.only([[]]);\n            getMaxKey = function () { return [[]]; };\n            return [[]];\n        }\n        catch (e) {\n            getMaxKey = function () { return maxString; };\n            return maxString;\n        }\n    };\n\n    function getKeyExtractor(keyPath) {\n        if (keyPath == null) {\n            return function () { return undefined; };\n        }\n        else if (typeof keyPath === 'string') {\n            return getSinglePathKeyExtractor(keyPath);\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n    function getSinglePathKeyExtractor(keyPath) {\n        var split = keyPath.split('.');\n        if (split.length === 1) {\n            return function (obj) { return obj[keyPath]; };\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n\n    function arrayify(arrayLike) {\n        return [].slice.call(arrayLike);\n    }\n    var _id_counter = 0;\n    function getKeyPathAlias(keyPath) {\n        return keyPath == null ?\n            \":id\" :\n            typeof keyPath === 'string' ?\n                keyPath :\n                \"[\" + keyPath.join('+') + \"]\";\n    }\n    function createDBCore(db, IdbKeyRange, tmpTrans) {\n        function extractSchema(db, trans) {\n            var tables = arrayify(db.objectStoreNames);\n            return {\n                schema: {\n                    name: db.name,\n                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                        var compound = isArray(keyPath);\n                        var outbound = keyPath == null;\n                        var indexByKeyPath = {};\n                        var result = {\n                            name: store.name,\n                            primaryKey: {\n                                name: null,\n                                isPrimaryKey: true,\n                                outbound: outbound,\n                                compound: compound,\n                                keyPath: keyPath,\n                                autoIncrement: autoIncrement,\n                                unique: true,\n                                extractKey: getKeyExtractor(keyPath)\n                            },\n                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                                .map(function (index) {\n                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                                var compound = isArray(keyPath);\n                                var result = {\n                                    name: name,\n                                    compound: compound,\n                                    keyPath: keyPath,\n                                    unique: unique,\n                                    multiEntry: multiEntry,\n                                    extractKey: getKeyExtractor(keyPath)\n                                };\n                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                                return result;\n                            }),\n                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                        };\n                        indexByKeyPath[\":id\"] = result.primaryKey;\n                        if (keyPath != null) {\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                        }\n                        return result;\n                    })\n                },\n                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n            };\n        }\n        function makeIDBKeyRange(range) {\n            if (range.type === 3 )\n                return null;\n            if (range.type === 4 )\n                throw new Error(\"Cannot convert never type to IDBKeyRange\");\n            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n            var idbRange = lower === undefined ?\n                upper === undefined ?\n                    null :\n                    IdbKeyRange.upperBound(upper, !!upperOpen) :\n                upper === undefined ?\n                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n            return idbRange;\n        }\n        function createDbCoreTable(tableSchema) {\n            var tableName = tableSchema.name;\n            function mutate(_a) {\n                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var outbound = store.keyPath == null;\n                    var isAddOrPut = type === \"put\" || type === \"add\";\n                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                        throw new Error(\"Invalid operation type: \" + type);\n                    var length = (keys || values || { length: 1 }).length;\n                    if (keys && values && keys.length !== values.length) {\n                        throw new Error(\"Given keys array must have same length as given values array.\");\n                    }\n                    if (length === 0)\n                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                    var req;\n                    var reqs = [];\n                    var failures = [];\n                    var numFailures = 0;\n                    var errorHandler = function (event) {\n                        ++numFailures;\n                        preventDefault(event);\n                    };\n                    if (type === 'deleteRange') {\n                        if (range.type === 4 )\n                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n                        if (range.type === 3 )\n                            reqs.push(req = store.clear());\n                        else\n                            reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                    }\n                    else {\n                        var _a = isAddOrPut ?\n                            outbound ?\n                                [values, keys] :\n                                [values, null] :\n                            [keys, null], args1 = _a[0], args2 = _a[1];\n                        if (isAddOrPut) {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = (args2 && args2[i] !== undefined ?\n                                    store[type](args1[i], args2[i]) :\n                                    store[type](args1[i])));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = store[type](args1[i]));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                    }\n                    var done = function (event) {\n                        var lastResult = event.target.result;\n                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n                        resolve({\n                            numFailures: numFailures,\n                            failures: failures,\n                            results: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n                            lastResult: lastResult\n                        });\n                    };\n                    req.onerror = function (event) {\n                        errorHandler(event);\n                        done(event);\n                    };\n                    req.onsuccess = done;\n                });\n            }\n            function openCursor(_a) {\n                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ?\n                        store :\n                        store.index(index.name);\n                    var direction = reverse ?\n                        unique ?\n                            \"prevunique\" :\n                            \"prev\" :\n                        unique ?\n                            \"nextunique\" :\n                            \"next\";\n                    var req = values || !('openKeyCursor' in source) ?\n                        source.openCursor(makeIDBKeyRange(range), direction) :\n                        source.openKeyCursor(makeIDBKeyRange(range), direction);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = wrap(function (ev) {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            resolve(null);\n                            return;\n                        }\n                        cursor.___id = ++_id_counter;\n                        cursor.done = false;\n                        var _cursorContinue = cursor.continue.bind(cursor);\n                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                        if (_cursorContinuePrimaryKey)\n                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                        var _cursorAdvance = cursor.advance.bind(cursor);\n                        var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                        var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                        cursor.trans = trans;\n                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                        cursor.fail = wrap(reject);\n                        cursor.next = function () {\n                            var _this = this;\n                            var gotOne = 1;\n                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                        };\n                        cursor.start = function (callback) {\n                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                                resolveIteration = wrap(resolveIteration);\n                                req.onerror = eventRejectHandler(rejectIteration);\n                                cursor.fail = rejectIteration;\n                                cursor.stop = function (value) {\n                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                    resolveIteration(value);\n                                };\n                            });\n                            var guardedCallback = function () {\n                                if (req.result) {\n                                    try {\n                                        callback();\n                                    }\n                                    catch (err) {\n                                        cursor.fail(err);\n                                    }\n                                }\n                                else {\n                                    cursor.done = true;\n                                    cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                    cursor.stop();\n                                }\n                            };\n                            req.onsuccess = wrap(function (ev) {\n                                req.onsuccess = guardedCallback;\n                                guardedCallback();\n                            });\n                            cursor.continue = _cursorContinue;\n                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                            cursor.advance = _cursorAdvance;\n                            guardedCallback();\n                            return iterationPromise;\n                        };\n                        resolve(cursor);\n                    }, reject);\n                });\n            }\n            function query(hasGetAll) {\n                return function (request) {\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                        var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                        var index = query.index, range = query.range;\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        if (limit === 0)\n                            return resolve({ result: [] });\n                        if (hasGetAll) {\n                            var req = values ?\n                                source.getAll(idbKeyRange, nonInfinitLimit) :\n                                source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                            req.onerror = eventRejectHandler(reject);\n                        }\n                        else {\n                            var count_1 = 0;\n                            var req_1 = values || !('openKeyCursor' in source) ?\n                                source.openCursor(idbKeyRange) :\n                                source.openKeyCursor(idbKeyRange);\n                            var result_1 = [];\n                            req_1.onsuccess = function (event) {\n                                var cursor = req_1.result;\n                                if (!cursor)\n                                    return resolve({ result: result_1 });\n                                result_1.push(values ? cursor.value : cursor.primaryKey);\n                                if (++count_1 === limit)\n                                    return resolve({ result: result_1 });\n                                cursor.continue();\n                            };\n                            req_1.onerror = eventRejectHandler(reject);\n                        }\n                    });\n                };\n            }\n            return {\n                name: tableName,\n                schema: tableSchema,\n                mutate: mutate,\n                getMany: function (_a) {\n                    var trans = _a.trans, keys = _a.keys;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var length = keys.length;\n                        var result = new Array(length);\n                        var keyCount = 0;\n                        var callbackCount = 0;\n                        var req;\n                        var successHandler = function (event) {\n                            var req = event.target;\n                            if ((result[req._pos] = req.result) != null)\n                                ;\n                            if (++callbackCount === keyCount)\n                                resolve(result);\n                        };\n                        var errorHandler = eventRejectHandler(reject);\n                        for (var i = 0; i < length; ++i) {\n                            var key = keys[i];\n                            if (key != null) {\n                                req = store.get(keys[i]);\n                                req._pos = i;\n                                req.onsuccess = successHandler;\n                                req.onerror = errorHandler;\n                                ++keyCount;\n                            }\n                        }\n                        if (keyCount === 0)\n                            resolve(result);\n                    });\n                },\n                get: function (_a) {\n                    var trans = _a.trans, key = _a.key;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var req = store.get(key);\n                        req.onsuccess = function (event) { return resolve(event.target.result); };\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                },\n                query: query(hasGetAll),\n                openCursor: openCursor,\n                count: function (_a) {\n                    var query = _a.query, trans = _a.trans;\n                    var index = query.index, range = query.range;\n                    return new Promise(function (resolve, reject) {\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                }\n            };\n        }\n        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n        var tableMap = {};\n        tables.forEach(function (table) { return tableMap[table.name] = table; });\n        return {\n            stack: \"dbcore\",\n            transaction: db.transaction.bind(db),\n            table: function (name) {\n                var result = tableMap[name];\n                if (!result)\n                    throw new Error(\"Table '\" + name + \"' not found\");\n                return tableMap[name];\n            },\n            MIN_KEY: -Infinity,\n            MAX_KEY: getMaxKey(IdbKeyRange),\n            schema: schema\n        };\n    }\n\n    function createMiddlewareStack(stackImpl, middlewares) {\n        return middlewares.reduce(function (down, _a) {\n            var create = _a.create;\n            return (__assign(__assign({}, down), create(down)));\n        }, stackImpl);\n    }\n    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n        return {\n            dbcore: dbcore\n        };\n    }\n    function generateMiddlewareStacks(_a, tmpTrans) {\n        var db = _a._novip;\n        var idbdb = tmpTrans.db;\n        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n        db.core = stacks.dbcore;\n        db.tables.forEach(function (table) {\n            var tableName = table.name;\n            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n                table.core = db.core.table(tableName);\n                if (db[tableName] instanceof db.Table) {\n                    db[tableName].core = table.core;\n                }\n            }\n        });\n    }\n\n    function setApiOnPlace(_a, objs, tableNames, dbschema) {\n        var db = _a._novip;\n        tableNames.forEach(function (tableName) {\n            var schema = dbschema[tableName];\n            objs.forEach(function (obj) {\n                var propDesc = getPropertyDescriptor(obj, tableName);\n                if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                        setProp(obj, tableName, {\n                            get: function () { return this.table(tableName); },\n                            set: function (value) {\n                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                            }\n                        });\n                    }\n                    else {\n                        obj[tableName] = new db.Table(tableName, schema);\n                    }\n                }\n            });\n        });\n    }\n    function removeTablesApi(_a, objs) {\n        var db = _a._novip;\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof db.Table)\n                    delete obj[key];\n            }\n        });\n    }\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n        var globalSchema = db._dbSchema;\n        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n        trans.create(idbUpgradeTrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        var transless = PSD.transless || PSD;\n        newScope(function () {\n            PSD.trans = trans;\n            PSD.transless = transless;\n            if (oldVersion === 0) {\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n            }\n            else\n                updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n        });\n    }\n    function updateTablesAndIndexes(_a, oldVersion, trans, idbUpgradeTrans) {\n        var db = _a._novip;\n        var queue = [];\n        var versions = db._versions;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        var anyContentUpgraderHasRun = false;\n        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n        versToRun.forEach(function (version) {\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                diff.add.forEach(function (tuple) {\n                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    }\n                    else {\n                        var store_1 = idbUpgradeTrans.objectStore(change.name);\n                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                        change.change.forEach(function (idx) {\n                            store_1.deleteIndex(idx.name);\n                            addIndex(store_1, idx);\n                        });\n                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                    }\n                });\n                var contentUpgrade = version._cfg.contentUpgrade;\n                if (contentUpgrade && version._cfg.version > oldVersion) {\n                    generateMiddlewareStacks(db, idbUpgradeTrans);\n                    trans._memoizedTables = {};\n                    anyContentUpgraderHasRun = true;\n                    var upgradeSchema_1 = shallowClone(newSchema);\n                    diff.del.forEach(function (table) {\n                        upgradeSchema_1[table] = oldSchema[table];\n                    });\n                    removeTablesApi(db, [db.Transaction.prototype]);\n                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                    trans.schema = upgradeSchema_1;\n                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                    if (contentUpgradeIsAsync_1) {\n                        incrementExpectedAwaits();\n                    }\n                    var returnValue_1;\n                    var promiseFollowed = DexiePromise.follow(function () {\n                        returnValue_1 = contentUpgrade(trans);\n                        if (returnValue_1) {\n                            if (contentUpgradeIsAsync_1) {\n                                var decrementor = decrementExpectedAwaits.bind(null, null);\n                                returnValue_1.then(decrementor, decrementor);\n                            }\n                        }\n                    });\n                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n                }\n            });\n            queue.push(function (idbtrans) {\n                if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                    var newSchema = version._cfg.dbschema;\n                    deleteRemovedTables(newSchema, idbtrans);\n                }\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n                trans.schema = db._dbSchema;\n            });\n        });\n        function runQueue() {\n            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n                DexiePromise.resolve();\n        }\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbUpgradeTrans);\n        });\n    }\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [],\n            add: [],\n            change: []\n        };\n        var table;\n        for (table in oldSchema) {\n            if (!newSchema[table])\n                diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table], newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            }\n            else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if ((\n                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                    (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n                 {\n                    change.recreate = true;\n                    diff.change.push(change);\n                }\n                else {\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    var idxName = void 0;\n                    for (idxName in oldIndexes) {\n                        if (!newIndexes[idxName])\n                            change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                        if (!oldIdx)\n                            change.add.push(newIdx);\n                        else if (oldIdx.src !== newIdx.src)\n                            change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n            { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) { return addIndex(store, idx); });\n        return store;\n    }\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n    function deleteRemovedTables(newSchema, idbtrans) {\n        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n        });\n    }\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n    function buildGlobalSchema(db, idbdb, tmpTrans) {\n        var globalSchema = {};\n        var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        dbStoreNames.forEach(function (storeName) {\n            var store = tmpTrans.objectStore(storeName);\n            var keyPath = store.keyPath;\n            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n        });\n        return globalSchema;\n    }\n    function readGlobalSchema(_a, idbdb, tmpTrans) {\n        var db = _a._novip;\n        db.verno = idbdb.version / 10;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n        db._storeNames = slice(idbdb.objectStoreNames, 0);\n        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n    }\n    function verifyInstalledSchema(db, tmpTrans) {\n        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n        var diff = getSchemaDiff(installedSchema, db._dbSchema);\n        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n    }\n    function adjustToExistingIndexNames(_a, schema, idbtrans) {\n        var db = _a._novip;\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            db._hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) {\n                        indexSpec.name = indexName;\n                        delete schema[storeName].idxByName[dexieName];\n                        schema[storeName].idxByName[indexName] = indexSpec;\n                    }\n                }\n            }\n        }\n        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n            !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n            [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n            db._hasGetAll = false;\n        }\n    }\n    function parseIndexSyntax(primKeyAndIndexes) {\n        return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n            index = index.trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n            return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n        });\n    }\n\n    var Version =  (function () {\n        function Version() {\n        }\n        Version.prototype._parseStoresSpec = function (stores, outSchema) {\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var indexes = parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (primKey.multi)\n                        throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                    indexes.forEach(function (idx) {\n                        if (idx.auto)\n                            throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                        if (!idx.keyPath)\n                            throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                    });\n                    outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n                }\n            });\n        };\n        Version.prototype.stores = function (stores) {\n            var db = this.db;\n            this._cfg.storesSource = this._cfg.storesSource ?\n                extend(this._cfg.storesSource, stores) :\n                stores;\n            var versions = db._versions;\n            var storesSpec = {};\n            var dbschema = {};\n            versions.forEach(function (version) {\n                extend(storesSpec, version._cfg.storesSource);\n                dbschema = (version._cfg.dbschema = {});\n                version._parseStoresSpec(storesSpec, dbschema);\n            });\n            db._dbSchema = dbschema;\n            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n            db._storeNames = keys(dbschema);\n            return this;\n        };\n        Version.prototype.upgrade = function (upgradeFunction) {\n            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n            return this;\n        };\n        return Version;\n    }());\n\n    function createVersionConstructor(db) {\n        return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n            this.db = db;\n            this._cfg = {\n                version: versionNumber,\n                storesSource: null,\n                dbschema: {},\n                tables: {},\n                contentUpgrade: null\n            };\n        });\n    }\n\n    function getDbNamesTable(indexedDB, IDBKeyRange) {\n        var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n        if (!dbNamesDB) {\n            dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n                addons: [],\n                indexedDB: indexedDB,\n                IDBKeyRange: IDBKeyRange,\n            });\n            dbNamesDB.version(1).stores({ dbnames: \"name\" });\n        }\n        return dbNamesDB.table(\"dbnames\");\n    }\n    function hasDatabasesNative(indexedDB) {\n        return indexedDB && typeof indexedDB.databases === \"function\";\n    }\n    function getDatabaseNames(_a) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        return hasDatabasesNative(indexedDB)\n            ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n                return infos\n                    .map(function (info) { return info.name; })\n                    .filter(function (name) { return name !== DBNAMES_DB; });\n            })\n            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n    }\n    function _onDatabaseCreated(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n    }\n    function _onDatabaseDeleted(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n    }\n\n    function vip(fn) {\n        return newScope(function () {\n            PSD.letThrough = true;\n            return fn();\n        });\n    }\n\n    function idbReady() {\n        var isSafari = !navigator.userAgentData &&\n            /Safari\\//.test(navigator.userAgent) &&\n            !/Chrom(e|ium)\\//.test(navigator.userAgent);\n        if (!isSafari || !indexedDB.databases)\n            return Promise.resolve();\n        var intervalId;\n        return new Promise(function (resolve) {\n            var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n            intervalId = setInterval(tryIdb, 100);\n            tryIdb();\n        }).finally(function () { return clearInterval(intervalId); });\n    }\n\n    function dexieOpen(db) {\n        var state = db._state;\n        var indexedDB = db._deps.indexedDB;\n        if (state.isBeingOpened || db.idbdb)\n            return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n                rejection(state.dbOpenError) :\n                db; });\n        debug && (state.openCanceller._stackHolder = getErrorWithStack());\n        state.isBeingOpened = true;\n        state.dbOpenError = null;\n        state.openComplete = false;\n        var openCanceller = state.openCanceller;\n        function throwIfCancelled() {\n            if (state.openCanceller !== openCanceller)\n                throw new exceptions.DatabaseClosed('db.open() was cancelled');\n        }\n        var resolveDbReady = state.dbReadyResolve,\n        upgradeTransaction = null, wasCreated = false;\n        return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(function () { return new DexiePromise(function (resolve, reject) {\n                throwIfCancelled();\n                if (!indexedDB)\n                    throw new exceptions.MissingAPI();\n                var dbName = db.name;\n                var req = state.autoSchema ?\n                    indexedDB.open(dbName) :\n                    indexedDB.open(dbName, Math.round(db.verno * 10));\n                if (!req)\n                    throw new exceptions.MissingAPI();\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = wrap(db._fireOnBlocked);\n                req.onupgradeneeded = wrap(function (e) {\n                    upgradeTransaction = req.transaction;\n                    if (state.autoSchema && !db._options.allowEmptyDB) {\n                        req.onerror = preventDefault;\n                        upgradeTransaction.abort();\n                        req.result.close();\n                        var delreq = indexedDB.deleteDatabase(dbName);\n                        delreq.onsuccess = delreq.onerror = wrap(function () {\n                            reject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n                        });\n                    }\n                    else {\n                        upgradeTransaction.onerror = eventRejectHandler(reject);\n                        var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                        wasCreated = oldVer < 1;\n                        db._novip.idbdb = req.result;\n                        runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                    }\n                }, reject);\n                req.onsuccess = wrap(function () {\n                    upgradeTransaction = null;\n                    var idbdb = db._novip.idbdb = req.result;\n                    var objectStoreNames = slice(idbdb.objectStoreNames);\n                    if (objectStoreNames.length > 0)\n                        try {\n                            var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                            if (state.autoSchema)\n                                readGlobalSchema(db, idbdb, tmpTrans);\n                            else {\n                                adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                                if (!verifyInstalledSchema(db, tmpTrans)) {\n                                    console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n                                }\n                            }\n                            generateMiddlewareStacks(db, tmpTrans);\n                        }\n                        catch (e) {\n                        }\n                    connections.push(db);\n                    idbdb.onversionchange = wrap(function (ev) {\n                        state.vcFired = true;\n                        db.on(\"versionchange\").fire(ev);\n                    });\n                    idbdb.onclose = wrap(function (ev) {\n                        db.on(\"close\").fire(ev);\n                    });\n                    if (wasCreated)\n                        _onDatabaseCreated(db._deps, dbName);\n                    resolve();\n                }, reject);\n            }); })]).then(function () {\n            throwIfCancelled();\n            state.onReadyBeingFired = [];\n            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n                if (state.onReadyBeingFired.length > 0) {\n                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n                    state.onReadyBeingFired = [];\n                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n                }\n            });\n        }).finally(function () {\n            state.onReadyBeingFired = null;\n            state.isBeingOpened = false;\n        }).then(function () {\n            return db;\n        }).catch(function (err) {\n            state.dbOpenError = err;\n            try {\n                upgradeTransaction && upgradeTransaction.abort();\n            }\n            catch (_a) { }\n            if (openCanceller === state.openCanceller) {\n                db._close();\n            }\n            return rejection(err);\n        }).finally(function () {\n            state.openComplete = true;\n            resolveDbReady();\n        });\n    }\n\n    function awaitIterator(iterator) {\n        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n        function step(getNext) {\n            return function (val) {\n                var next = getNext(val), value = next.value;\n                return next.done ? value :\n                    (!value || typeof value.then !== 'function' ?\n                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                        value.then(onSuccess, onError));\n            };\n        }\n        return step(callNext)();\n    }\n\n    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n        var i = arguments.length;\n        if (i < 2)\n            throw new exceptions.InvalidArgument(\"Too few arguments\");\n        var args = new Array(i - 1);\n        while (--i)\n            args[i - 1] = arguments[i];\n        scopeFunc = args.pop();\n        var tables = flatten(args);\n        return [mode, tables, scopeFunc];\n    }\n    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n        return DexiePromise.resolve().then(function () {\n            var transless = PSD.transless || PSD;\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n            var zoneProps = {\n                trans: trans,\n                transless: transless\n            };\n            if (parentTransaction) {\n                trans.idbtrans = parentTransaction.idbtrans;\n            }\n            else {\n                try {\n                    trans.create();\n                    db._state.PR1398_maxLoop = 3;\n                }\n                catch (ex) {\n                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                        console.warn('Dexie: Need to reopen db');\n                        db._close();\n                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n                    }\n                    return rejection(ex);\n                }\n            }\n            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            var returnValue;\n            var promiseFollowed = DexiePromise.follow(function () {\n                returnValue = scopeFunc.call(trans, trans);\n                if (returnValue) {\n                    if (scopeFuncIsAsync) {\n                        var decrementor = decrementExpectedAwaits.bind(null, null);\n                        returnValue.then(decrementor, decrementor);\n                    }\n                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                        returnValue = awaitIterator(returnValue);\n                    }\n                }\n            }, zoneProps);\n            return (returnValue && typeof returnValue.then === 'function' ?\n                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                    x\n                    : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n                if (parentTransaction)\n                    trans._resolve();\n                return trans._completion.then(function () { return x; });\n            }).catch(function (e) {\n                trans._reject(e);\n                return rejection(e);\n            });\n        });\n    }\n\n    function pad(a, value, count) {\n        var result = isArray(a) ? a.slice() : [a];\n        for (var i = 0; i < count; ++i)\n            result.push(value);\n        return result;\n    }\n    function createVirtualIndexMiddleware(down) {\n        return __assign(__assign({}, down), { table: function (tableName) {\n                var table = down.table(tableName);\n                var schema = table.schema;\n                var indexLookup = {};\n                var allVirtualIndexes = [];\n                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                    var keyPathAlias = getKeyPathAlias(keyPath);\n                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                    var isVirtual = keyTail > 0;\n                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                    indexList.push(virtualIndex);\n                    if (!virtualIndex.isPrimaryKey) {\n                        allVirtualIndexes.push(virtualIndex);\n                    }\n                    if (keyLength > 1) {\n                        var virtualKeyPath = keyLength === 2 ?\n                            keyPath[0] :\n                            keyPath.slice(0, keyLength - 1);\n                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                    }\n                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                    return virtualIndex;\n                }\n                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n                indexLookup[\":id\"] = [primaryKey];\n                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                    var index = _a[_i];\n                    addVirtualIndexes(index.keyPath, 0, index);\n                }\n                function findBestIndex(keyPath) {\n                    var result = indexLookup[getKeyPathAlias(keyPath)];\n                    return result && result[0];\n                }\n                function translateRange(range, keyTail) {\n                    return {\n                        type: range.type === 1  ?\n                            2  :\n                            range.type,\n                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                        lowerOpen: true,\n                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                        upperOpen: true\n                    };\n                }\n                function translateRequest(req) {\n                    var index = req.query.index;\n                    return index.isVirtual ? __assign(__assign({}, req), { query: {\n                            index: index,\n                            range: translateRange(req.query.range, index.keyTail)\n                        } }) : req;\n                }\n                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                        return table.count(translateRequest(req));\n                    }, query: function (req) {\n                        return table.query(translateRequest(req));\n                    }, openCursor: function (req) {\n                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                        if (!isVirtual)\n                            return table.openCursor(req);\n                        function createVirtualCursor(cursor) {\n                            function _continue(key) {\n                                key != null ?\n                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                    req.unique ?\n                                        cursor.continue(cursor.key.slice(0, keyLength)\n                                            .concat(req.reverse\n                                            ? down.MIN_KEY\n                                            : down.MAX_KEY, keyTail)) :\n                                        cursor.continue();\n                            }\n                            var virtualCursor = Object.create(cursor, {\n                                continue: { value: _continue },\n                                continuePrimaryKey: {\n                                    value: function (key, primaryKey) {\n                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                    }\n                                },\n                                primaryKey: {\n                                    get: function () {\n                                        return cursor.primaryKey;\n                                    }\n                                },\n                                key: {\n                                    get: function () {\n                                        var key = cursor.key;\n                                        return keyLength === 1 ?\n                                            key[0] :\n                                            key.slice(0, keyLength);\n                                    }\n                                },\n                                value: {\n                                    get: function () {\n                                        return cursor.value;\n                                    }\n                                }\n                            });\n                            return virtualCursor;\n                        }\n                        return table.openCursor(translateRequest(req))\n                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                    } });\n                return result;\n            } });\n    }\n    var virtualIndexMiddleware = {\n        stack: \"dbcore\",\n        name: \"VirtualIndexMiddleware\",\n        level: 1,\n        create: createVirtualIndexMiddleware\n    };\n\n    function getObjectDiff(a, b, rv, prfx) {\n        rv = rv || {};\n        prfx = prfx || '';\n        keys(a).forEach(function (prop) {\n            if (!hasOwn(b, prop)) {\n                rv[prfx + prop] = undefined;\n            }\n            else {\n                var ap = a[prop], bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                    var apTypeName = toStringTag(ap);\n                    var bpTypeName = toStringTag(bp);\n                    if (apTypeName !== bpTypeName) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                    else if (apTypeName === 'Object') {\n                        getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                    }\n                    else if (ap !== bp) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                }\n                else if (ap !== bp)\n                    rv[prfx + prop] = b[prop];\n            }\n        });\n        keys(b).forEach(function (prop) {\n            if (!hasOwn(a, prop)) {\n                rv[prfx + prop] = b[prop];\n            }\n        });\n        return rv;\n    }\n\n    function getEffectiveKeys(primaryKey, req) {\n        if (req.type === 'delete')\n            return req.keys;\n        return req.keys || req.values.map(primaryKey.extractKey);\n    }\n\n    var hooksMiddleware = {\n        stack: \"dbcore\",\n        name: \"HooksMiddleware\",\n        level: 2,\n        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n                var downTable = downCore.table(tableName);\n                var primaryKey = downTable.schema.primaryKey;\n                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                        var dxTrans = PSD.trans;\n                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                        switch (req.type) {\n                            case 'add':\n                                if (creating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'put':\n                                if (creating.fire === nop && updating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'delete':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'deleteRange':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                        }\n                        return downTable.mutate(req);\n                        function addPutOrDelete(req) {\n                            var dxTrans = PSD.trans;\n                            var keys = req.keys || getEffectiveKeys(primaryKey, req);\n                            if (!keys)\n                                throw new Error(\"Keys missing\");\n                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n                            if (req.type !== 'delete')\n                                req.values = __spreadArray([], req.values, true);\n                            if (req.keys)\n                                req.keys = __spreadArray([], req.keys, true);\n                            return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                                var contexts = keys.map(function (key, i) {\n                                    var existingValue = existingValues[i];\n                                    var ctx = { onerror: null, onsuccess: null };\n                                    if (req.type === 'delete') {\n                                        deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                    }\n                                    else if (req.type === 'add' || existingValue === undefined) {\n                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                        if (key == null && generatedPrimaryKey != null) {\n                                            key = generatedPrimaryKey;\n                                            req.keys[i] = key;\n                                            if (!primaryKey.outbound) {\n                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                        if (additionalChanges_1) {\n                                            var requestedValue_1 = req.values[i];\n                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                                if (hasOwn(requestedValue_1, keyPath)) {\n                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                                }\n                                                else {\n                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    return ctx;\n                                });\n                                return downTable.mutate(req).then(function (_a) {\n                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                    for (var i = 0; i < keys.length; ++i) {\n                                        var primKey = results ? results[i] : keys[i];\n                                        var ctx = contexts[i];\n                                        if (primKey == null) {\n                                            ctx.onerror && ctx.onerror(failures[i]);\n                                        }\n                                        else {\n                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                                req.values[i] :\n                                                primKey\n                                            );\n                                        }\n                                    }\n                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                                }).catch(function (error) {\n                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                    return Promise.reject(error);\n                                });\n                            });\n                        }\n                        function deleteRange(req) {\n                            return deleteNextChunk(req.trans, req.range, 10000);\n                        }\n                        function deleteNextChunk(trans, range, limit) {\n                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                                .then(function (_a) {\n                                var result = _a.result;\n                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                    if (res.numFailures > 0)\n                                        return Promise.reject(res.failures[0]);\n                                    if (result.length < limit) {\n                                        return { failures: [], numFailures: 0, lastResult: undefined };\n                                    }\n                                    else {\n                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                    }\n                                });\n                            });\n                        }\n                    } });\n                return tableMiddleware;\n            } })); }\n    };\n    function getExistingValues(table, req, effectiveKeys) {\n        return req.type === \"add\"\n            ? Promise.resolve([])\n            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n    }\n\n    function getFromTransactionCache(keys, cache, clone) {\n        try {\n            if (!cache)\n                return null;\n            if (cache.keys.length < keys.length)\n                return null;\n            var result = [];\n            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n                if (cmp(cache.keys[i], keys[j]) !== 0)\n                    continue;\n                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n                ++j;\n            }\n            return result.length === keys.length ? result : null;\n        }\n        catch (_a) {\n            return null;\n        }\n    }\n    var cacheExistingValuesMiddleware = {\n        stack: \"dbcore\",\n        level: -1,\n        create: function (core) {\n            return {\n                table: function (tableName) {\n                    var table = core.table(tableName);\n                    return __assign(__assign({}, table), { getMany: function (req) {\n                            if (!req.cache) {\n                                return table.getMany(req);\n                            }\n                            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                            if (cachedResult) {\n                                return DexiePromise.resolve(cachedResult);\n                            }\n                            return table.getMany(req).then(function (res) {\n                                req.trans[\"_cache\"] = {\n                                    keys: req.keys,\n                                    values: req.cache === \"clone\" ? deepClone(res) : res,\n                                };\n                                return res;\n                            });\n                        }, mutate: function (req) {\n                            if (req.type !== \"add\")\n                                req.trans[\"_cache\"] = null;\n                            return table.mutate(req);\n                        } });\n                },\n            };\n        },\n    };\n\n    var _a;\n    function isEmptyRange(node) {\n        return !(\"from\" in node);\n    }\n    var RangeSet = function (fromOrTree, to) {\n        if (this) {\n            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n        }\n        else {\n            var rv = new RangeSet();\n            if (fromOrTree && (\"d\" in fromOrTree)) {\n                extend(rv, fromOrTree);\n            }\n            return rv;\n        }\n    };\n    props(RangeSet.prototype, (_a = {\n            add: function (rangeSet) {\n                mergeRanges(this, rangeSet);\n                return this;\n            },\n            addKey: function (key) {\n                addRange(this, key, key);\n                return this;\n            },\n            addKeys: function (keys) {\n                var _this = this;\n                keys.forEach(function (key) { return addRange(_this, key, key); });\n                return this;\n            }\n        },\n        _a[iteratorSymbol] = function () {\n            return getRangeSetIterator(this);\n        },\n        _a));\n    function addRange(target, from, to) {\n        var diff = cmp(from, to);\n        if (isNaN(diff))\n            return;\n        if (diff > 0)\n            throw RangeError();\n        if (isEmptyRange(target))\n            return extend(target, { from: from, to: to, d: 1 });\n        var left = target.l;\n        var right = target.r;\n        if (cmp(to, target.from) < 0) {\n            left\n                ? addRange(left, from, to)\n                : (target.l = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.to) > 0) {\n            right\n                ? addRange(right, from, to)\n                : (target.r = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.from) < 0) {\n            target.from = from;\n            target.l = null;\n            target.d = right ? right.d + 1 : 1;\n        }\n        if (cmp(to, target.to) > 0) {\n            target.to = to;\n            target.r = null;\n            target.d = target.l ? target.l.d + 1 : 1;\n        }\n        var rightWasCutOff = !target.r;\n        if (left && !target.l) {\n            mergeRanges(target, left);\n        }\n        if (right && rightWasCutOff) {\n            mergeRanges(target, right);\n        }\n    }\n    function mergeRanges(target, newSet) {\n        function _addRangeSet(target, _a) {\n            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n            addRange(target, from, to);\n            if (l)\n                _addRangeSet(target, l);\n            if (r)\n                _addRangeSet(target, r);\n        }\n        if (!isEmptyRange(newSet))\n            _addRangeSet(target, newSet);\n    }\n    function rangesOverlap(rangeSet1, rangeSet2) {\n        var i1 = getRangeSetIterator(rangeSet2);\n        var nextResult1 = i1.next();\n        if (nextResult1.done)\n            return false;\n        var a = nextResult1.value;\n        var i2 = getRangeSetIterator(rangeSet1);\n        var nextResult2 = i2.next(a.from);\n        var b = nextResult2.value;\n        while (!nextResult1.done && !nextResult2.done) {\n            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n                return true;\n            cmp(a.from, b.from) < 0\n                ? (a = (nextResult1 = i1.next(b.from)).value)\n                : (b = (nextResult2 = i2.next(a.from)).value);\n        }\n        return false;\n    }\n    function getRangeSetIterator(node) {\n        var state = isEmptyRange(node) ? null : { s: 0, n: node };\n        return {\n            next: function (key) {\n                var keyProvided = arguments.length > 0;\n                while (state) {\n                    switch (state.s) {\n                        case 0:\n                            state.s = 1;\n                            if (keyProvided) {\n                                while (state.n.l && cmp(key, state.n.from) < 0)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                            else {\n                                while (state.n.l)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                        case 1:\n                            state.s = 2;\n                            if (!keyProvided || cmp(key, state.n.to) <= 0)\n                                return { value: state.n, done: false };\n                        case 2:\n                            if (state.n.r) {\n                                state.s = 3;\n                                state = { up: state, n: state.n.r, s: 0 };\n                                continue;\n                            }\n                        case 3:\n                            state = state.up;\n                    }\n                }\n                return { done: true };\n            },\n        };\n    }\n    function rebalance(target) {\n        var _a, _b;\n        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n        var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n        if (r) {\n            var l = r === \"r\" ? \"l\" : \"r\";\n            var rootClone = __assign({}, target);\n            var oldRootRight = target[r];\n            target.from = oldRootRight.from;\n            target.to = oldRootRight.to;\n            target[r] = oldRootRight[r];\n            rootClone[r] = oldRootRight[l];\n            target[l] = rootClone;\n            rootClone.d = computeDepth(rootClone);\n        }\n        target.d = computeDepth(target);\n    }\n    function computeDepth(_a) {\n        var r = _a.r, l = _a.l;\n        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n    }\n\n    var observabilityMiddleware = {\n        stack: \"dbcore\",\n        level: 0,\n        create: function (core) {\n            var dbName = core.schema.name;\n            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n            return __assign(__assign({}, core), { table: function (tableName) {\n                    var table = core.table(tableName);\n                    var schema = table.schema;\n                    var primaryKey = schema.primaryKey;\n                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {\n                            var trans = req.trans;\n                            var mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                            var getRangeSet = function (indexName) {\n                                var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                return (mutatedParts[part] ||\n                                    (mutatedParts[part] = new RangeSet()));\n                            };\n                            var pkRangeSet = getRangeSet(\"\");\n                            var delsRangeSet = getRangeSet(\":dels\");\n                            var type = req.type;\n                            var _a = req.type === \"deleteRange\"\n                                ? [req.range]\n                                : req.type === \"delete\"\n                                    ? [req.keys]\n                                    : req.values.length < 50\n                                        ? [[], req.values]\n                                        : [], keys = _a[0], newObjs = _a[1];\n                            var oldCache = req.trans[\"_cache\"];\n                            return table.mutate(req).then(function (res) {\n                                if (isArray(keys)) {\n                                    if (type !== \"delete\")\n                                        keys = res.results;\n                                    pkRangeSet.addKeys(keys);\n                                    var oldObjs = getFromTransactionCache(keys, oldCache);\n                                    if (!oldObjs && type !== \"add\") {\n                                        delsRangeSet.addKeys(keys);\n                                    }\n                                    if (oldObjs || newObjs) {\n                                        trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                    }\n                                }\n                                else if (keys) {\n                                    var range = { from: keys.lower, to: keys.upper };\n                                    delsRangeSet.add(range);\n                                    pkRangeSet.add(range);\n                                }\n                                else {\n                                    pkRangeSet.add(FULL_RANGE);\n                                    delsRangeSet.add(FULL_RANGE);\n                                    schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n                                }\n                                return res;\n                            });\n                        } });\n                    var getRange = function (_a) {\n                        var _b, _c;\n                        var _d = _a.query, index = _d.index, range = _d.range;\n                        return [\n                            index,\n                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n                        ];\n                    };\n                    var readSubscribers = {\n                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n                        count: getRange,\n                        query: getRange,\n                        openCursor: getRange,\n                    };\n                    keys(readSubscribers).forEach(function (method) {\n                        tableClone[method] = function (req) {\n                            var subscr = PSD.subscr;\n                            if (subscr) {\n                                var getRangeSet = function (indexName) {\n                                    var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                    return (subscr[part] ||\n                                        (subscr[part] = new RangeSet()));\n                                };\n                                var pkRangeSet_1 = getRangeSet(\"\");\n                                var delsRangeSet_1 = getRangeSet(\":dels\");\n                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n                                getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                                if (!queriedIndex.isPrimaryKey) {\n                                    if (method === \"count\") {\n                                        delsRangeSet_1.add(FULL_RANGE);\n                                    }\n                                    else {\n                                        var keysPromise_1 = method === \"query\" &&\n                                            outbound &&\n                                            req.values &&\n                                            table.query(__assign(__assign({}, req), { values: false }));\n                                        return table[method].apply(this, arguments).then(function (res) {\n                                            if (method === \"query\") {\n                                                if (outbound && req.values) {\n                                                    return keysPromise_1.then(function (_a) {\n                                                        var resultingKeys = _a.result;\n                                                        pkRangeSet_1.addKeys(resultingKeys);\n                                                        return res;\n                                                    });\n                                                }\n                                                var pKeys = req.values\n                                                    ? res.result.map(extractKey)\n                                                    : res.result;\n                                                if (req.values) {\n                                                    pkRangeSet_1.addKeys(pKeys);\n                                                }\n                                                else {\n                                                    delsRangeSet_1.addKeys(pKeys);\n                                                }\n                                            }\n                                            else if (method === \"openCursor\") {\n                                                var cursor_1 = res;\n                                                var wantValues_1 = req.values;\n                                                return (cursor_1 &&\n                                                    Object.create(cursor_1, {\n                                                        key: {\n                                                            get: function () {\n                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.key;\n                                                            },\n                                                        },\n                                                        primaryKey: {\n                                                            get: function () {\n                                                                var pkey = cursor_1.primaryKey;\n                                                                delsRangeSet_1.addKey(pkey);\n                                                                return pkey;\n                                                            },\n                                                        },\n                                                        value: {\n                                                            get: function () {\n                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.value;\n                                                            },\n                                                        },\n                                                    }));\n                                            }\n                                            return res;\n                                        });\n                                    }\n                                }\n                            }\n                            return table[method].apply(this, arguments);\n                        };\n                    });\n                    return tableClone;\n                } });\n        },\n    };\n    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n        function addAffectedIndex(ix) {\n            var rangeSet = getRangeSet(ix.name || \"\");\n            function extractKey(obj) {\n                return obj != null ? ix.extractKey(obj) : null;\n            }\n            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n                ? key.forEach(function (key) { return rangeSet.addKey(key); })\n                : rangeSet.addKey(key); };\n            (oldObjs || newObjs).forEach(function (_, i) {\n                var oldKey = oldObjs && extractKey(oldObjs[i]);\n                var newKey = newObjs && extractKey(newObjs[i]);\n                if (cmp(oldKey, newKey) !== 0) {\n                    if (oldKey != null)\n                        addKeyOrKeys(oldKey);\n                    if (newKey != null)\n                        addKeyOrKeys(newKey);\n                }\n            });\n        }\n        schema.indexes.forEach(addAffectedIndex);\n    }\n\n    var Dexie$1 =  (function () {\n        function Dexie(name, options) {\n            var _this = this;\n            this._middlewares = {};\n            this.verno = 0;\n            var deps = Dexie.dependencies;\n            this._options = options = __assign({\n                addons: Dexie.addons, autoOpen: true,\n                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n            this._deps = {\n                indexedDB: options.indexedDB,\n                IDBKeyRange: options.IDBKeyRange\n            };\n            var addons = options.addons;\n            this._dbSchema = {};\n            this._versions = [];\n            this._storeNames = [];\n            this._allTables = {};\n            this.idbdb = null;\n            this._novip = this;\n            var state = {\n                dbOpenError: null,\n                isBeingOpened: false,\n                onReadyBeingFired: null,\n                openComplete: false,\n                dbReadyResolve: nop,\n                dbReadyPromise: null,\n                cancelOpen: nop,\n                openCanceller: null,\n                autoSchema: true,\n                PR1398_maxLoop: 3\n            };\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n            this._state = state;\n            this.name = name;\n            this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n                return function (subscriber, bSticky) {\n                    Dexie.vip(function () {\n                        var state = _this._state;\n                        if (state.openComplete) {\n                            if (!state.dbOpenError)\n                                DexiePromise.resolve().then(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else if (state.onReadyBeingFired) {\n                            state.onReadyBeingFired.push(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else {\n                            subscribe(subscriber);\n                            var db_1 = _this;\n                            if (!bSticky)\n                                subscribe(function unsubscribe() {\n                                    db_1.on.ready.unsubscribe(subscriber);\n                                    db_1.on.ready.unsubscribe(unsubscribe);\n                                });\n                        }\n                    });\n                };\n            });\n            this.Collection = createCollectionConstructor(this);\n            this.Table = createTableConstructor(this);\n            this.Transaction = createTransactionConstructor(this);\n            this.Version = createVersionConstructor(this);\n            this.WhereClause = createWhereClauseConstructor(this);\n            this.on(\"versionchange\", function (ev) {\n                if (ev.newVersion > 0)\n                    console.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n                else\n                    console.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n                _this.close();\n            });\n            this.on(\"blocked\", function (ev) {\n                if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                    console.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n                else\n                    console.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n            });\n            this._maxKey = getMaxKey(options.IDBKeyRange);\n            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n            this._fireOnBlocked = function (ev) {\n                _this.on(\"blocked\").fire(ev);\n                connections\n                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                    .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n            };\n            this.use(virtualIndexMiddleware);\n            this.use(hooksMiddleware);\n            this.use(observabilityMiddleware);\n            this.use(cacheExistingValuesMiddleware);\n            this.vip = Object.create(this, { _vip: { value: true } });\n            addons.forEach(function (addon) { return addon(_this); });\n        }\n        Dexie.prototype.version = function (versionNumber) {\n            if (isNaN(versionNumber) || versionNumber < 0.1)\n                throw new exceptions.Type(\"Given version is not a positive number\");\n            versionNumber = Math.round(versionNumber * 10) / 10;\n            if (this.idbdb || this._state.isBeingOpened)\n                throw new exceptions.Schema(\"Cannot add version when database is open\");\n            this.verno = Math.max(this.verno, versionNumber);\n            var versions = this._versions;\n            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n            if (versionInstance)\n                return versionInstance;\n            versionInstance = new this.Version(versionNumber);\n            versions.push(versionInstance);\n            versions.sort(lowerVersionFirst);\n            versionInstance.stores({});\n            this._state.autoSchema = false;\n            return versionInstance;\n        };\n        Dexie.prototype._whenReady = function (fn) {\n            var _this = this;\n            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n                if (_this._state.openComplete) {\n                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n                }\n                if (!_this._state.isBeingOpened) {\n                    if (!_this._options.autoOpen) {\n                        reject(new exceptions.DatabaseClosed());\n                        return;\n                    }\n                    _this.open().catch(nop);\n                }\n                _this._state.dbReadyPromise.then(resolve, reject);\n            }).then(fn);\n        };\n        Dexie.prototype.use = function (_a) {\n            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n            if (name)\n                this.unuse({ stack: stack, name: name });\n            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n            middlewares.sort(function (a, b) { return a.level - b.level; });\n            return this;\n        };\n        Dexie.prototype.unuse = function (_a) {\n            var stack = _a.stack, name = _a.name, create = _a.create;\n            if (stack && this._middlewares[stack]) {\n                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                    return create ? mw.create !== create :\n                        name ? mw.name !== name :\n                            false;\n                });\n            }\n            return this;\n        };\n        Dexie.prototype.open = function () {\n            return dexieOpen(this);\n        };\n        Dexie.prototype._close = function () {\n            var state = this._state;\n            var idx = connections.indexOf(this);\n            if (idx >= 0)\n                connections.splice(idx, 1);\n            if (this.idbdb) {\n                try {\n                    this.idbdb.close();\n                }\n                catch (e) { }\n                this._novip.idbdb = null;\n            }\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n        };\n        Dexie.prototype.close = function () {\n            this._close();\n            var state = this._state;\n            this._options.autoOpen = false;\n            state.dbOpenError = new exceptions.DatabaseClosed();\n            if (state.isBeingOpened)\n                state.cancelOpen(state.dbOpenError);\n        };\n        Dexie.prototype.delete = function () {\n            var _this = this;\n            var hasArguments = arguments.length > 0;\n            var state = this._state;\n            return new DexiePromise(function (resolve, reject) {\n                var doDelete = function () {\n                    _this.close();\n                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                    req.onsuccess = wrap(function () {\n                        _onDatabaseDeleted(_this._deps, _this.name);\n                        resolve();\n                    });\n                    req.onerror = eventRejectHandler(reject);\n                    req.onblocked = _this._fireOnBlocked;\n                };\n                if (hasArguments)\n                    throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n                if (state.isBeingOpened) {\n                    state.dbReadyPromise.then(doDelete);\n                }\n                else {\n                    doDelete();\n                }\n            });\n        };\n        Dexie.prototype.backendDB = function () {\n            return this.idbdb;\n        };\n        Dexie.prototype.isOpen = function () {\n            return this.idbdb !== null;\n        };\n        Dexie.prototype.hasBeenClosed = function () {\n            var dbOpenError = this._state.dbOpenError;\n            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n        };\n        Dexie.prototype.hasFailed = function () {\n            return this._state.dbOpenError !== null;\n        };\n        Dexie.prototype.dynamicallyOpened = function () {\n            return this._state.autoSchema;\n        };\n        Object.defineProperty(Dexie.prototype, \"tables\", {\n            get: function () {\n                var _this = this;\n                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Dexie.prototype.transaction = function () {\n            var args = extractTransactionArgs.apply(this, arguments);\n            return this._transaction.apply(this, args);\n        };\n        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n            var _this = this;\n            var parentTransaction = PSD.trans;\n            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n                parentTransaction = null;\n            var onlyIfCompatible = mode.indexOf('?') !== -1;\n            mode = mode.replace('!', '').replace('?', '');\n            var idbMode, storeNames;\n            try {\n                storeNames = tables.map(function (table) {\n                    var storeName = table instanceof _this.Table ? table.name : table;\n                    if (typeof storeName !== 'string')\n                        throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                    return storeName;\n                });\n                if (mode == \"r\" || mode === READONLY)\n                    idbMode = READONLY;\n                else if (mode == \"rw\" || mode == READWRITE)\n                    idbMode = READWRITE;\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n                if (parentTransaction) {\n                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                        if (onlyIfCompatible) {\n                            parentTransaction = null;\n                        }\n                        else\n                            throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                    }\n                    if (parentTransaction) {\n                        storeNames.forEach(function (storeName) {\n                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                                if (onlyIfCompatible) {\n                                    parentTransaction = null;\n                                }\n                                else\n                                    throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                        \" not included in parent transaction.\");\n                            }\n                        });\n                    }\n                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                        parentTransaction = null;\n                    }\n                }\n            }\n            catch (e) {\n                return parentTransaction ?\n                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                    rejection(e);\n            }\n            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n            return (parentTransaction ?\n                parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n                PSD.trans ?\n                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                    this._whenReady(enterTransaction));\n        };\n        Dexie.prototype.table = function (tableName) {\n            if (!hasOwn(this._allTables, tableName)) {\n                throw new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n            }\n            return this._allTables[tableName];\n        };\n        return Dexie;\n    }());\n\n    var symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n        ? Symbol.observable\n        : \"@@observable\";\n    var Observable =  (function () {\n        function Observable(subscribe) {\n            this._subscribe = subscribe;\n        }\n        Observable.prototype.subscribe = function (x, error, complete) {\n            return this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n        };\n        Observable.prototype[symbolObservable] = function () {\n            return this;\n        };\n        return Observable;\n    }());\n\n    function extendObservabilitySet(target, newSet) {\n        keys(newSet).forEach(function (part) {\n            var rangeSet = target[part] || (target[part] = new RangeSet());\n            mergeRanges(rangeSet, newSet[part]);\n        });\n        return target;\n    }\n\n    function liveQuery(querier) {\n        return new Observable(function (observer) {\n            var scopeFuncIsAsync = isAsyncFunction(querier);\n            function execute(subscr) {\n                if (scopeFuncIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                var exec = function () { return newScope(querier, { subscr: subscr, trans: null }); };\n                var rv = PSD.trans\n                    ?\n                        usePSD(PSD.transless, exec)\n                    : exec();\n                if (scopeFuncIsAsync) {\n                    rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n                }\n                return rv;\n            }\n            var closed = false;\n            var accumMuts = {};\n            var currentObs = {};\n            var subscription = {\n                get closed() {\n                    return closed;\n                },\n                unsubscribe: function () {\n                    closed = true;\n                    globalEvents.storagemutated.unsubscribe(mutationListener);\n                },\n            };\n            observer.start && observer.start(subscription);\n            var querying = false, startedListening = false;\n            function shouldNotify() {\n                return keys(currentObs).some(function (key) {\n                    return accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]);\n                });\n            }\n            var mutationListener = function (parts) {\n                extendObservabilitySet(accumMuts, parts);\n                if (shouldNotify()) {\n                    doQuery();\n                }\n            };\n            var doQuery = function () {\n                if (querying || closed)\n                    return;\n                accumMuts = {};\n                var subscr = {};\n                var ret = execute(subscr);\n                if (!startedListening) {\n                    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                    startedListening = true;\n                }\n                querying = true;\n                Promise.resolve(ret).then(function (result) {\n                    querying = false;\n                    if (closed)\n                        return;\n                    if (shouldNotify()) {\n                        doQuery();\n                    }\n                    else {\n                        accumMuts = {};\n                        currentObs = subscr;\n                        observer.next && observer.next(result);\n                    }\n                }, function (err) {\n                    querying = false;\n                    observer.error && observer.error(err);\n                    subscription.unsubscribe();\n                });\n            };\n            doQuery();\n            return subscription;\n        });\n    }\n\n    var domDeps;\n    try {\n        domDeps = {\n            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n        };\n    }\n    catch (e) {\n        domDeps = { indexedDB: null, IDBKeyRange: null };\n    }\n\n    var Dexie = Dexie$1;\n    props(Dexie, __assign(__assign({}, fullNameExceptions), {\n        delete: function (databaseName) {\n            var db = new Dexie(databaseName, { addons: [] });\n            return db.delete();\n        },\n        exists: function (name) {\n            return new Dexie(name, { addons: [] }).open().then(function (db) {\n                db.close();\n                return true;\n            }).catch('NoSuchDatabaseError', function () { return false; });\n        },\n        getDatabaseNames: function (cb) {\n            try {\n                return getDatabaseNames(Dexie.dependencies).then(cb);\n            }\n            catch (_a) {\n                return rejection(new exceptions.MissingAPI());\n            }\n        },\n        defineClass: function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return Class;\n        }, ignoreTransaction: function (scopeFunc) {\n            return PSD.trans ?\n                usePSD(PSD.transless, scopeFunc) :\n                scopeFunc();\n        }, vip: vip, async: function (generatorFn) {\n            return function () {\n                try {\n                    var rv = awaitIterator(generatorFn.apply(this, arguments));\n                    if (!rv || typeof rv.then !== 'function')\n                        return DexiePromise.resolve(rv);\n                    return rv;\n                }\n                catch (e) {\n                    return rejection(e);\n                }\n            };\n        }, spawn: function (generatorFn, args, thiz) {\n            try {\n                var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        },\n        currentTransaction: {\n            get: function () { return PSD.trans || null; }\n        }, waitFor: function (promiseOrFunction, optionalTimeout) {\n            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n                Dexie.ignoreTransaction(promiseOrFunction) :\n                promiseOrFunction)\n                .timeout(optionalTimeout || 60000);\n            return PSD.trans ?\n                PSD.trans.waitFor(promise) :\n                promise;\n        },\n        Promise: DexiePromise,\n        debug: {\n            get: function () { return debug; },\n            set: function (value) {\n                setDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n            }\n        },\n        derive: derive, extend: extend, props: props, override: override,\n        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n        minKey: minKey,\n        addons: [],\n        connections: connections,\n        errnames: errnames,\n        dependencies: domDeps,\n        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n            .map(function (n) { return parseInt(n); })\n            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\n    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\n    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n            if (!propagatingLocally) {\n                var event_1;\n                if (isIEOrEdge) {\n                    event_1 = document.createEvent('CustomEvent');\n                    event_1.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n                }\n                else {\n                    event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                        detail: updatedParts\n                    });\n                }\n                propagatingLocally = true;\n                dispatchEvent(event_1);\n                propagatingLocally = false;\n            }\n        });\n        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n            var detail = _a.detail;\n            if (!propagatingLocally) {\n                propagateLocally(detail);\n            }\n        });\n    }\n    function propagateLocally(updateParts) {\n        var wasMe = propagatingLocally;\n        try {\n            propagatingLocally = true;\n            globalEvents.storagemutated.fire(updateParts);\n        }\n        finally {\n            propagatingLocally = wasMe;\n        }\n    }\n    var propagatingLocally = false;\n\n    if (typeof BroadcastChannel !== 'undefined') {\n        var bc_1 = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            if (!propagatingLocally) {\n                bc_1.postMessage(changedParts);\n            }\n        });\n        bc_1.onmessage = function (ev) {\n            if (ev.data)\n                propagateLocally(ev.data);\n        };\n    }\n    else if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            try {\n                if (!propagatingLocally) {\n                    if (typeof localStorage !== 'undefined') {\n                        localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                            trig: Math.random(),\n                            changedParts: changedParts,\n                        }));\n                    }\n                    if (typeof self['clients'] === 'object') {\n                        __spreadArray([], self['clients'].matchAll({ includeUncontrolled: true }), true).forEach(function (client) {\n                            return client.postMessage({\n                                type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                                changedParts: changedParts,\n                            });\n                        });\n                    }\n                }\n            }\n            catch (_a) { }\n        });\n        addEventListener('storage', function (ev) {\n            if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n                var data = JSON.parse(ev.newValue);\n                if (data)\n                    propagateLocally(data.changedParts);\n            }\n        });\n        var swContainer = self.document && navigator.serviceWorker;\n        if (swContainer) {\n            swContainer.addEventListener('message', propagateMessageLocally);\n        }\n    }\n    function propagateMessageLocally(_a) {\n        var data = _a.data;\n        if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n            propagateLocally(data.changedParts);\n        }\n    }\n\n    DexiePromise.rejectionMapper = mapError;\n    setDebug(debug, dexieStackFrameFilter);\n\n    var namedExports = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Dexie: Dexie$1,\n        liveQuery: liveQuery,\n        'default': Dexie$1,\n        RangeSet: RangeSet,\n        mergeRanges: mergeRanges,\n        rangesOverlap: rangesOverlap\n    });\n\n    __assign(Dexie$1, namedExports, { default: Dexie$1 });\n\n    return Dexie$1;\n\n}));\n//# sourceMappingURL=dexie.js.map\n"],"sourceRoot":""}