{"version":3,"sources":["webpack:///./src/mixins/paneMixin.ts","webpack:///./src/components/counters/Counters.vue?dd29","webpack:///./src/components/panes/PaneHeader.vue?8308","webpack:///./src/components/panes/PaneHeader.vue","webpack:///./src/components/panes/PaneHeader.vue?260b","webpack:///./src/components/panes/PaneHeader.vue?7137","webpack:///./src/components/counters/Counters.vue?f1f1","webpack:///./src/components/counters/Counters.vue","webpack:///./src/components/counters/Counters.vue?d643","webpack:///./src/components/counters/Counters.vue?a90e"],"names":["PaneMixin","this","$store","state","panes","paneId","$el","id","refreshZoom","$nextTick","width","clientWidth","onResize","clientHeight","addEventListener","focusPane","removeEventListener","_onStoreMutation","dispatch","commit","props","required","type","String","render","_vm","_h","$createElement","_c","_self","staticClass","class","loading","attrs","on","renamePane","_v","_s","name","maximizePane","_t","openSearch","openSettings","_e","toggleDropdown","model","value","callback","$$v","paneDropdownTrigger","expression","$event","stopPropagation","changeZoom","resetZoom","apply","arguments","zoom","toFixed","settings","duplicatePane","removePane","staticRenderFns","market","marketsListeners","markets","local","event","direction","shiftKey","$emit","async","dialogService","confirm","parentElement","classList","currentTarget","target","className","el","isMaximized","toggle","siblings","sibling","getAttribute","remove","style","display","cls","Event","window","dispatchEvent","prompt","action","input","open","default","Function","Boolean","component","_l","step","index","key","duration","buy","sell","countersCount","formatAmount","steps","_feed","liquidationsOnly","count","granularity","filter","a","hasData","subscribe","mutation","payload","createCounters","_populateCountersInterval","setInterval","populateCounters","bind","countersGranularity","aggregatorService","off","onVolume","clearInterval","sums","volume","vbuy","vsell","lbuy","lsell","cbuy","csell","_activeChunk","timestamp","i","length","_counters","splice","clearCounters","countersSteps","push","chunks","counter","first","indexOf","pane","now","Date","decreaseBuy","decreaseSell","chunksToDecrease","Array","prototype","to","j","amount","components","PaneHeader"],"mappings":"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","file":"js/chunk-48d3df3e.eaf17294.js","sourcesContent":["import { Pane } from '@/store/panes'\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\n@Component({\n  props: {\n    paneId: {\n      required: true,\n      type: String\n    }\n  }\n})\nexport default class PaneMixin extends Vue {\n  paneId: string\n  protected _onStoreMutation: () => void\n\n  get pane(): Pane {\n    return this.$store.state.panes.panes[this.paneId]\n  }\n\n  mounted() {\n    this.$el.id = this.paneId\n\n    this.refreshZoom()\n\n    this.$nextTick(() => {\n      const width = this.$el.clientWidth\n\n      if (typeof this.onResize === 'function') {\n        this.onResize(width, this.$el.clientHeight, true)\n      }\n    })\n\n    this.$el.addEventListener('mousedown', this.focusPane)\n  }\n\n  beforeDestroy() {\n    this.$el.removeEventListener('mousedown', this.focusPane)\n\n    if (this._onStoreMutation) {\n      this._onStoreMutation()\n    }\n  }\n\n  refreshZoom() {\n    this.$store.dispatch('panes/refreshZoom', this.paneId)\n  }\n\n  focusPane() {\n    this.$store.commit('app/SET_FOCUSED_PANE', this.paneId)\n  }\n\n  onResize?(newWidth: number, newHeight: number, isMounting?: boolean)\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pane-header hide-scrollbar pane-overlay d-flex\",class:{ '-loading': _vm.loading }},[_c('div',{staticClass:\"pane-header__loader\"}),_c('span',{staticClass:\"pane-header__name ml4 mrauto\",attrs:{\"data-hide-header\":\"\"},on:{\"dblclick\":_vm.renamePane}},[_vm._v(_vm._s(_vm.name))]),_c('div',{staticClass:\"toolbar flex-grow-1\",on:{\"dblclick\":_vm.maximizePane}},[_vm._t(\"default\"),_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSearch}},[_c('i',{staticClass:\"icon-search\"})]),(_vm.settings)?_c('button',{staticClass:\"toolbar__label min-768\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"})]):_vm._e(),_c('button',{staticClass:\"toolbar__label\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.toggleDropdown}},[_c('i',{staticClass:\"icon-more\"})]),_c('dropdown',{model:{value:(_vm.paneDropdownTrigger),callback:function ($$v) {_vm.paneDropdownTrigger=$$v},expression:\"paneDropdownTrigger\"}},[_c('div',{staticClass:\"d-flex btn-group\"},[_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, -1)}}},[_c('i',{staticClass:\"icon-minus\"})]),_c('button',{staticClass:\"btn -green text-monospace flex-grow-1 text-center\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.resetZoom.apply(null, arguments)}}},[_vm._v(\" × \"+_vm._s(_vm.zoom.toFixed(2))+\" \")]),_c('button',{staticClass:\"btn -green\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.changeZoom($event, 1)}}},[_c('i',{staticClass:\"icon-plus\"})])]),_vm._t(\"menu\"),(_vm.settings !== null)?_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openSettings}},[_c('i',{staticClass:\"icon-cog\"}),_c('span',[_vm._v(\"Settings\")])]):_vm._e(),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$store.dispatch('app/showSearch', _vm.paneId)}}},[_c('i',{staticClass:\"icon-search\"}),_c('span',[_vm._v(\"Sources\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.maximizePane}},[_c('i',{staticClass:\"icon-enlarge\"}),_c('span',[_vm._v(\"Maximize\")])]),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.duplicatePane}},[_c('i',{staticClass:\"icon-copy-paste\"}),_c('span',[_vm._v(\"Duplicate\")])]),_c('div',{staticClass:\"dropdown--divider\"}),_c('button',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.removePane}},[_c('i',{staticClass:\"icon-trash\"}),_c('span',[_vm._v(\"Remove\")])])],2)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\n\nimport { getSiblings } from '@/utils/helpers'\nimport dialogService from '@/services/dialogService'\n\n@Component({\n  name: 'PaneHeader',\n  props: {\n    paneId: {\n      type: String\n    },\n    settings: {\n      type: Function,\n      default: null\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  }\n})\nexport default class extends Vue {\n  private settings?: () => Promise<any>\n  paneId: string\n  paneDropdownTrigger = null\n\n  get zoom() {\n    return this.$store.state.panes.panes[this.paneId].zoom || 1\n  }\n\n  get type() {\n    return this.$store.state.panes.panes[this.paneId].type\n  }\n\n  get name() {\n    const name = this.$store.state.panes.panes[this.paneId].name\n    const market = this.$store.state.panes.marketsListeners[\n      this.$store.state.panes.panes[this.paneId].markets[0]\n    ]\n\n    if (name) {\n      return name\n    } else if (market) {\n      return market.local\n    } else {\n      return this.type\n    }\n  }\n\n  openSearch() {\n    this.$store.dispatch('app/showSearch', this.paneId)\n  }\n\n  changeZoom(event, direction) {\n    const zoom = this.zoom + (event.shiftKey ? 0.0625 : 0.125) * direction\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: zoom })\n\n    this.$emit('zoom', zoom)\n  }\n\n  resetZoom() {\n    this.$store.dispatch('panes/setZoom', { id: this.paneId, zoom: 1 })\n\n    this.$emit('zoom', 1)\n  }\n\n  async removePane() {\n    if (await dialogService.confirm(`Delete pane \"${this.paneId}\" ?`)) {\n      this.$store.dispatch('panes/removePane', this.paneId)\n    }\n  }\n\n  duplicatePane() {\n    this.$store.dispatch('panes/duplicatePane', this.paneId)\n  }\n\n  highlightPane(value: boolean) {\n    this.$el.parentElement.parentElement.classList[value ? 'add' : 'remove'](\n      '-highlight'\n    )\n  }\n\n  maximizePane(event) {\n    if (\n      event.type === 'dblclick' &&\n      event.currentTarget !== event.target &&\n      event.target.className !== 'toolbar__spacer'\n    ) {\n      return\n    }\n\n    const el = this.$el.parentElement.parentElement\n    const isMaximized = el.classList.toggle('-maximized')\n\n    const siblings = getSiblings(el)\n\n    for (const sibling of siblings) {\n      if (!sibling.getAttribute('type')) {\n        continue\n      }\n      sibling.classList.remove('-maximized')\n      sibling.style.display = isMaximized ? 'none' : 'block'\n    }\n\n    const cls = Event as any\n\n    window.dispatchEvent(new cls('resize'))\n  }\n\n  async renamePane() {\n    const name = await dialogService.prompt({\n      action: 'Rename',\n      input: this.name\n    })\n\n    if (name !== this.name) {\n      this.$store.commit('panes/SET_PANE_NAME', { id: this.paneId, name: name })\n    }\n  }\n\n  toggleDropdown(event) {\n    if (this.paneDropdownTrigger) {\n      this.paneDropdownTrigger = null\n    } else {\n      this.paneDropdownTrigger = event.currentTarget\n    }\n  }\n\n  async openSettings() {\n    if (!this.settings) {\n      return\n    }\n\n    dialogService.open((await this.settings()).default, {\n      paneId: this.paneId\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PaneHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PaneHeader.vue?vue&type=template&id=219eac84&\"\nimport script from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./PaneHeader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pane-counters\"},[_c('pane-header',{attrs:{\"paneId\":_vm.paneId,\"settings\":function () { return import('@/components/counters/CountersDialog.vue'); }}}),_c('div',{staticClass:\"counters hide-scrollbar\"},_vm._l((_vm.activeSteps),function(step,index){return _c('div',{key:index,staticClass:\"counter\",attrs:{\"duration\":step.duration}},[_c('div',{staticClass:\"counter__side -buy\",style:({\n          width: (step.buy / (step.buy + step.sell)) * 100 + '%'\n        })},[(!_vm.countersCount)?_c('span',[_vm._v(_vm._s(_vm.formatAmount(step.buy)))]):_c('span',[_vm._v(_vm._s(step.buy))])]),_c('div',{staticClass:\"counter__side -sell\",style:({\n          width: (step.sell / (step.buy + step.sell)) * 100 + '%'\n        })},[(!_vm.countersCount)?_c('span',[_vm._v(_vm._s(_vm.formatAmount(step.sell)))]):_c('span',[_vm._v(_vm._s(step.sell))])])])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator'\n\nimport { getBucketId, getHms } from '@/utils/helpers'\nimport { formatAmount } from '@/services/productsService'\n\nimport aggregatorService from '@/services/aggregatorService'\nimport PaneMixin from '@/mixins/paneMixin'\nimport PaneHeader from '../panes/PaneHeader.vue'\n\ninterface Counter {\n  duration: number\n  chunks: CounterChunk[]\n}\n\ninterface CounterChunk {\n  timestamp: number\n  buy: number\n  sell: number\n}\n\ninterface CounterStep {\n  duration: string\n  buy: number\n  sell: number\n  hasData: boolean\n}\n\n@Component({\n  components: { PaneHeader },\n  name: 'Counters'\n})\nexport default class extends Mixins(PaneMixin) {\n  steps: CounterStep[] = []\n\n  private _populateCountersInterval: number\n  private _activeChunk: CounterChunk\n  private _counters: Counter[]\n  private _feed: string = null\n\n  get liquidationsOnly() {\n    return this.$store.state[this.paneId].liquidationsOnly\n  }\n\n  get countersSteps() {\n    return this.$store.state[this.paneId].steps\n  }\n\n  get countersCount() {\n    return this.$store.state[this.paneId].count\n  }\n\n  get countersGranularity() {\n    return this.$store.state[this.paneId].granularity\n  }\n\n  get activeSteps() {\n    return this.steps.filter(a => a.hasData)\n  }\n\n  created() {\n    this._onStoreMutation = this.$store.subscribe(mutation => {\n      switch (mutation.type) {\n        case 'panes/SET_PANE_MARKETS':\n          if (mutation.payload.id === this.paneId) {\n            this.createCounters()\n          }\n          break\n\n        case this.paneId + '/REPLACE_COUNTERS':\n        case this.paneId + '/TOGGLE_LIQUIDATIONS_ONLY':\n        case this.paneId + '/TOGGLE_COUNT':\n          this.createCounters()\n          break\n      }\n    })\n\n    this.createCounters()\n\n    this._populateCountersInterval = setInterval(\n      this.populateCounters.bind(this),\n      this.countersGranularity\n    )\n  }\n\n  beforeDestroy() {\n    if (this._feed) {\n      aggregatorService.off(this._feed, this.onVolume)\n    }\n\n    clearInterval(this._populateCountersInterval)\n  }\n\n  onVolume(sums) {\n    const volume = {\n      buy: sums.vbuy,\n      sell: sums.vsell\n    }\n\n    if (this.liquidationsOnly) {\n      volume.buy = sums.lbuy\n      volume.sell = sums.lsell\n    } else if (this.countersCount) {\n      volume.buy = sums.cbuy\n      volume.sell = sums.csell\n    }\n\n    if (volume.buy || volume.sell) {\n      if (!this._activeChunk.timestamp) {\n        this._activeChunk.timestamp = sums.timestamp\n      }\n\n      this._activeChunk.buy += volume.buy\n      this._activeChunk.sell += volume.sell\n\n      for (let i = 0; i < this.steps.length; i++) {\n        this.steps[i].buy += volume.buy\n        this.steps[i].sell += volume.sell\n      }\n    }\n  }\n  clearCounters() {\n    if (this._feed) {\n      console.log(`[counters/${this.paneId}] unsubscribe from feed`, this._feed)\n      aggregatorService.off(this._feed, this.onVolume)\n    }\n\n    if (this._counters) {\n      this._counters.splice(0, this._counters.length)\n      this._activeChunk.timestamp = null\n      this._activeChunk.buy = this._activeChunk.sell = 0\n      this.steps.splice(0, this.steps.length)\n    } else {\n      this._counters = []\n      this._activeChunk = {\n        timestamp: null,\n        buy: 0,\n        sell: 0\n      }\n      this.steps = []\n    }\n  }\n  createCounters() {\n    this.clearCounters()\n\n    for (const step of this.countersSteps) {\n      this._counters.push({\n        duration: step,\n        chunks: []\n      })\n    }\n\n    for (const counter of this._counters) {\n      const first = this._counters.indexOf(counter) === 0\n\n      this.steps.push({\n        duration: getHms(counter.duration),\n        buy: 0,\n        sell: 0,\n        hasData: first\n      })\n    }\n\n    this._feed = 'bucket-' + getBucketId(this.pane.markets)\n    console.log(`[counters/${this.paneId}] subscribe to feed`, this._feed)\n\n    if (this._feed.length) {\n      aggregatorService.on(this._feed, this.onVolume)\n    } else {\n      console.log(`[counters/${this.paneId}] error feed empty...`)\n    }\n  }\n  populateCounters() {\n    const now = Date.now()\n\n    if (this._activeChunk.timestamp) {\n      this._counters[0].chunks.push({\n        timestamp: this._activeChunk.timestamp,\n        buy: this._activeChunk.buy,\n        sell: this._activeChunk.sell\n      })\n\n      this._activeChunk.timestamp = null\n      this._activeChunk.buy = 0\n      this._activeChunk.sell = 0\n    }\n\n    let chunksToDecrease = []\n    let decreaseBuy\n    let decreaseSell\n\n    for (let i = 0; i < this._counters.length; i++) {\n      if (chunksToDecrease.length) {\n        Array.prototype.push.apply(\n          this._counters[i].chunks,\n          chunksToDecrease.splice(0, chunksToDecrease.length)\n        )\n\n        if (!this.steps[i].hasData) {\n          this.steps[i].hasData = true\n        }\n      }\n\n      decreaseBuy = 0\n      decreaseSell = 0\n\n      let to = 0\n\n      for (let j = 0; j < this._counters[i].chunks.length; j++) {\n        decreaseBuy += this._counters[i].chunks[j].buy\n        decreaseSell += this._counters[i].chunks[j].sell\n        if (\n          this._counters[i].chunks[j].timestamp >=\n          now - this._counters[i].duration\n        ) {\n          to = j\n          break\n        }\n      }\n\n      if (to) {\n        chunksToDecrease = this._counters[i].chunks.splice(0, to + 1)\n        this.steps[i].buy -= decreaseBuy\n        this.steps[i].sell -= decreaseSell\n      }\n    }\n  }\n\n  formatAmount(amount) {\n    return formatAmount(amount)\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Counters.vue?vue&type=template&id=3b2cb290&\"\nimport script from \"./Counters.vue?vue&type=script&lang=ts&\"\nexport * from \"./Counters.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Counters.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}